(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function i_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sg={exports:{}},gu={},og={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=Symbol.for("react.element"),s_=Symbol.for("react.portal"),o_=Symbol.for("react.fragment"),a_=Symbol.for("react.strict_mode"),l_=Symbol.for("react.profiler"),u_=Symbol.for("react.provider"),c_=Symbol.for("react.context"),h_=Symbol.for("react.forward_ref"),d_=Symbol.for("react.suspense"),f_=Symbol.for("react.memo"),p_=Symbol.for("react.lazy"),zf=Symbol.iterator;function m_(t){return t===null||typeof t!="object"?null:(t=zf&&t[zf]||t["@@iterator"],typeof t=="function"?t:null)}var ag={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lg=Object.assign,ug={};function ws(t,e,n){this.props=t,this.context=e,this.refs=ug,this.updater=n||ag}ws.prototype.isReactComponent={};ws.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ws.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cg(){}cg.prototype=ws.prototype;function Kh(t,e,n){this.props=t,this.context=e,this.refs=ug,this.updater=n||ag}var Qh=Kh.prototype=new cg;Qh.constructor=Kh;lg(Qh,ws.prototype);Qh.isPureReactComponent=!0;var Bf=Array.isArray,hg=Object.prototype.hasOwnProperty,Yh={current:null},dg={key:!0,ref:!0,__self:!0,__source:!0};function fg(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)hg.call(e,r)&&!dg.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:aa,type:t,key:s,ref:a,props:i,_owner:Yh.current}}function g_(t,e){return{$$typeof:aa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jh(t){return typeof t=="object"&&t!==null&&t.$$typeof===aa}function y_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Uf=/\/+/g;function Zu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?y_(""+t.key):e.toString(36)}function hl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case aa:case s_:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Zu(a,0):r,Bf(i)?(n="",t!=null&&(n=t.replace(Uf,"$&/")+"/"),hl(i,e,n,"",function(h){return h})):i!=null&&(Jh(i)&&(i=g_(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Uf,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Bf(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Zu(s,l);a+=hl(s,e,n,u,i)}else if(u=m_(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Zu(s,l++),a+=hl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ua(t,e,n){if(t==null)return t;var r=[],i=0;return hl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function v_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},dl={transition:null},__={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:dl,ReactCurrentOwner:Yh};function pg(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Ua,forEach:function(t,e,n){Ua(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ua(t,function(){e++}),e},toArray:function(t){return Ua(t,function(e){return e})||[]},only:function(t){if(!Jh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=ws;ue.Fragment=o_;ue.Profiler=l_;ue.PureComponent=Kh;ue.StrictMode=a_;ue.Suspense=d_;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=__;ue.act=pg;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lg({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Yh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)hg.call(e,u)&&!dg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:aa,type:t.type,key:i,ref:s,props:r,_owner:a}};ue.createContext=function(t){return t={$$typeof:c_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:u_,_context:t},t.Consumer=t};ue.createElement=fg;ue.createFactory=function(t){var e=fg.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:h_,render:t}};ue.isValidElement=Jh;ue.lazy=function(t){return{$$typeof:p_,_payload:{_status:-1,_result:t},_init:v_}};ue.memo=function(t,e){return{$$typeof:f_,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=dl.transition;dl.transition={};try{t()}finally{dl.transition=e}};ue.unstable_act=pg;ue.useCallback=function(t,e){return Tt.current.useCallback(t,e)};ue.useContext=function(t){return Tt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Tt.current.useEffect(t,e)};ue.useId=function(){return Tt.current.useId()};ue.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Tt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)};ue.useRef=function(t){return Tt.current.useRef(t)};ue.useState=function(t){return Tt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Tt.current.useTransition()};ue.version="18.3.1";og.exports=ue;var W=og.exports;const E_=i_(W);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_=W,T_=Symbol.for("react.element"),S_=Symbol.for("react.fragment"),I_=Object.prototype.hasOwnProperty,C_=w_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x_={key:!0,ref:!0,__self:!0,__source:!0};function mg(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)I_.call(e,r)&&!x_.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:T_,type:t,key:s,ref:a,props:i,_owner:C_.current}}gu.Fragment=S_;gu.jsx=mg;gu.jsxs=mg;sg.exports=gu;var f=sg.exports,bc={},gg={exports:{}},zt={},yg={exports:{}},vg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,X){var ie=B.length;B.push(X);e:for(;0<ie;){var _e=ie-1>>>1,we=B[_e];if(0<i(we,X))B[_e]=X,B[ie]=we,ie=_e;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var X=B[0],ie=B.pop();if(ie!==X){B[0]=ie;e:for(var _e=0,we=B.length,$t=we>>>1;_e<$t;){var at=2*(_e+1)-1,Wt=B[at],Dt=at+1,nn=B[Dt];if(0>i(Wt,ie))Dt<we&&0>i(nn,Wt)?(B[_e]=nn,B[Dt]=ie,_e=Dt):(B[_e]=Wt,B[at]=ie,_e=at);else if(Dt<we&&0>i(nn,ie))B[_e]=nn,B[Dt]=ie,_e=Dt;else break e}}return X}function i(B,X){var ie=B.sortIndex-X.sortIndex;return ie!==0?ie:B.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],m=1,v=null,_=3,R=!1,b=!1,L=!1,$=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(B){for(var X=n(h);X!==null;){if(X.callback===null)r(h);else if(X.startTime<=B)r(h),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(h)}}function M(B){if(L=!1,k(B),!b)if(n(u)!==null)b=!0,Ut(H);else{var X=n(h);X!==null&&er(M,X.startTime-B)}}function H(B,X){b=!1,L&&(L=!1,A(y),y=-1),R=!0;var ie=_;try{for(k(X),v=n(u);v!==null&&(!(v.expirationTime>X)||B&&!x());){var _e=v.callback;if(typeof _e=="function"){v.callback=null,_=v.priorityLevel;var we=_e(v.expirationTime<=X);X=t.unstable_now(),typeof we=="function"?v.callback=we:v===n(u)&&r(u),k(X)}else r(u);v=n(u)}if(v!==null)var $t=!0;else{var at=n(h);at!==null&&er(M,at.startTime-X),$t=!1}return $t}finally{v=null,_=ie,R=!1}}var G=!1,E=null,y=-1,w=5,C=-1;function x(){return!(t.unstable_now()-C<w)}function P(){if(E!==null){var B=t.unstable_now();C=B;var X=!0;try{X=E(!0,B)}finally{X?S():(G=!1,E=null)}}else G=!1}var S;if(typeof T=="function")S=function(){T(P)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,yt=je.port2;je.port1.onmessage=P,S=function(){yt.postMessage(null)}}else S=function(){$(P,0)};function Ut(B){E=B,G||(G=!0,S())}function er(B,X){y=$(function(){B(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){b||R||(b=!0,Ut(H))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(_){case 1:case 2:case 3:var X=3;break;default:X=_}var ie=_;_=X;try{return B()}finally{_=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,X){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ie=_;_=B;try{return X()}finally{_=ie}},t.unstable_scheduleCallback=function(B,X,ie){var _e=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?_e+ie:_e):ie=_e,B){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=ie+we,B={id:m++,callback:X,priorityLevel:B,startTime:ie,expirationTime:we,sortIndex:-1},ie>_e?(B.sortIndex=ie,e(h,B),n(u)===null&&B===n(h)&&(L?(A(y),y=-1):L=!0,er(M,ie-_e))):(B.sortIndex=we,e(u,B),b||R||(b=!0,Ut(H))),B},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(B){var X=_;return function(){var ie=_;_=X;try{return B.apply(this,arguments)}finally{_=ie}}}})(vg);yg.exports=vg;var A_=yg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_=W,Ft=A_;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _g=new Set,bo={};function _i(t,e){ls(t,e),ls(t+"Capture",e)}function ls(t,e){for(bo[t]=e,t=0;t<e.length;t++)_g.add(e[t])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jc=Object.prototype.hasOwnProperty,R_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$f={},Wf={};function P_(t){return jc.call(Wf,t)?!0:jc.call($f,t)?!1:R_.test(t)?Wf[t]=!0:($f[t]=!0,!1)}function D_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function V_(t,e,n,r){if(e===null||typeof e>"u"||D_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xh=/[\-:]([a-z])/g;function Zh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xh,Zh);st[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xh,Zh);st[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xh,Zh);st[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function ed(t,e,n,r){var i=st.hasOwnProperty(e)?st[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(V_(e,n,i,r)&&(n=null),r||i===null?P_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Zn=k_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$a=Symbol.for("react.element"),Bi=Symbol.for("react.portal"),Ui=Symbol.for("react.fragment"),td=Symbol.for("react.strict_mode"),Lc=Symbol.for("react.profiler"),Eg=Symbol.for("react.provider"),wg=Symbol.for("react.context"),nd=Symbol.for("react.forward_ref"),Oc=Symbol.for("react.suspense"),Mc=Symbol.for("react.suspense_list"),rd=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),Tg=Symbol.for("react.offscreen"),Hf=Symbol.iterator;function Xs(t){return t===null||typeof t!="object"?null:(t=Hf&&t[Hf]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,ec;function co(t){if(ec===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ec=e&&e[1]||""}return`
`+ec+t}var tc=!1;function nc(t,e){if(!t||tc)return"";tc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{tc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?co(t):""}function N_(t){switch(t.tag){case 5:return co(t.type);case 16:return co("Lazy");case 13:return co("Suspense");case 19:return co("SuspenseList");case 0:case 2:case 15:return t=nc(t.type,!1),t;case 11:return t=nc(t.type.render,!1),t;case 1:return t=nc(t.type,!0),t;default:return""}}function Fc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ui:return"Fragment";case Bi:return"Portal";case Lc:return"Profiler";case td:return"StrictMode";case Oc:return"Suspense";case Mc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wg:return(t.displayName||"Context")+".Consumer";case Eg:return(t._context.displayName||"Context")+".Provider";case nd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rd:return e=t.displayName||null,e!==null?e:Fc(t.type)||"Memo";case pr:e=t._payload,t=t._init;try{return Fc(t(e))}catch{}}return null}function b_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fc(e);case 8:return e===td?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Nr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function j_(t){var e=Sg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wa(t){t._valueTracker||(t._valueTracker=j_(t))}function Ig(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Sg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zc(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Nr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Cg(t,e){e=e.checked,e!=null&&ed(t,"checked",e,!1)}function Bc(t,e){Cg(t,e);var n=Nr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Uc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Uc(t,e.type,Nr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Uc(t,e,n){(e!=="number"||Rl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ho=Array.isArray;function Zi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Nr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function $c(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(ho(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Nr(n)}}function xg(t,e){var n=Nr(e.value),r=Nr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ag(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ag(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ha,kg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ha=Ha||document.createElement("div"),Ha.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ha.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _o={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L_=["Webkit","ms","Moz","O"];Object.keys(_o).forEach(function(t){L_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_o[e]=_o[t]})});function Rg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_o.hasOwnProperty(t)&&_o[t]?(""+e).trim():e+"px"}function Pg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Rg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var O_=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hc(t,e){if(e){if(O_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function qc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gc=null;function id(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kc=null,es=null,ts=null;function Yf(t){if(t=ca(t)){if(typeof Kc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=wu(e),Kc(t.stateNode,t.type,e))}}function Dg(t){es?ts?ts.push(t):ts=[t]:es=t}function Vg(){if(es){var t=es,e=ts;if(ts=es=null,Yf(t),e)for(t=0;t<e.length;t++)Yf(e[t])}}function Ng(t,e){return t(e)}function bg(){}var rc=!1;function jg(t,e,n){if(rc)return t(e,n);rc=!0;try{return Ng(t,e,n)}finally{rc=!1,(es!==null||ts!==null)&&(bg(),Vg())}}function Lo(t,e){var n=t.stateNode;if(n===null)return null;var r=wu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Qc=!1;if(qn)try{var Zs={};Object.defineProperty(Zs,"passive",{get:function(){Qc=!0}}),window.addEventListener("test",Zs,Zs),window.removeEventListener("test",Zs,Zs)}catch{Qc=!1}function M_(t,e,n,r,i,s,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var Eo=!1,Pl=null,Dl=!1,Yc=null,F_={onError:function(t){Eo=!0,Pl=t}};function z_(t,e,n,r,i,s,a,l,u){Eo=!1,Pl=null,M_.apply(F_,arguments)}function B_(t,e,n,r,i,s,a,l,u){if(z_.apply(this,arguments),Eo){if(Eo){var h=Pl;Eo=!1,Pl=null}else throw Error(U(198));Dl||(Dl=!0,Yc=h)}}function Ei(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Lg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jf(t){if(Ei(t)!==t)throw Error(U(188))}function U_(t){var e=t.alternate;if(!e){if(e=Ei(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Jf(i),t;if(s===r)return Jf(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Og(t){return t=U_(t),t!==null?Mg(t):null}function Mg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Mg(t);if(e!==null)return e;t=t.sibling}return null}var Fg=Ft.unstable_scheduleCallback,Xf=Ft.unstable_cancelCallback,$_=Ft.unstable_shouldYield,W_=Ft.unstable_requestPaint,Fe=Ft.unstable_now,H_=Ft.unstable_getCurrentPriorityLevel,sd=Ft.unstable_ImmediatePriority,zg=Ft.unstable_UserBlockingPriority,Vl=Ft.unstable_NormalPriority,q_=Ft.unstable_LowPriority,Bg=Ft.unstable_IdlePriority,yu=null,xn=null;function G_(t){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(yu,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:Y_,K_=Math.log,Q_=Math.LN2;function Y_(t){return t>>>=0,t===0?32:31-(K_(t)/Q_|0)|0}var qa=64,Ga=4194304;function fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=fo(l):(s&=a,s!==0&&(r=fo(s)))}else a=n&~i,a!==0?r=fo(a):s!==0&&(r=fo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hn(e),i=1<<n,r|=t[n],e&=~i;return r}function J_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-hn(s),l=1<<a,u=i[a];u===-1?(!(l&n)||l&r)&&(i[a]=J_(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Jc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ug(){var t=qa;return qa<<=1,!(qa&4194240)&&(qa=64),t}function ic(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function la(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hn(e),t[e]=n}function Z_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-hn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function od(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ee=0;function $g(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wg,ad,Hg,qg,Gg,Xc=!1,Ka=[],wr=null,Tr=null,Sr=null,Oo=new Map,Mo=new Map,gr=[],e1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zf(t,e){switch(t){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":Oo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mo.delete(e.pointerId)}}function eo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ca(e),e!==null&&ad(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function t1(t,e,n,r,i){switch(e){case"focusin":return wr=eo(wr,t,e,n,r,i),!0;case"dragenter":return Tr=eo(Tr,t,e,n,r,i),!0;case"mouseover":return Sr=eo(Sr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Oo.set(s,eo(Oo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Mo.set(s,eo(Mo.get(s)||null,t,e,n,r,i)),!0}return!1}function Kg(t){var e=si(t.target);if(e!==null){var n=Ei(e);if(n!==null){if(e=n.tag,e===13){if(e=Lg(n),e!==null){t.blockedOn=e,Gg(t.priority,function(){Hg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Gc=r,n.target.dispatchEvent(r),Gc=null}else return e=ca(n),e!==null&&ad(e),t.blockedOn=n,!1;e.shift()}return!0}function ep(t,e,n){fl(t)&&n.delete(e)}function n1(){Xc=!1,wr!==null&&fl(wr)&&(wr=null),Tr!==null&&fl(Tr)&&(Tr=null),Sr!==null&&fl(Sr)&&(Sr=null),Oo.forEach(ep),Mo.forEach(ep)}function to(t,e){t.blockedOn===e&&(t.blockedOn=null,Xc||(Xc=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,n1)))}function Fo(t){function e(i){return to(i,t)}if(0<Ka.length){to(Ka[0],t);for(var n=1;n<Ka.length;n++){var r=Ka[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wr!==null&&to(wr,t),Tr!==null&&to(Tr,t),Sr!==null&&to(Sr,t),Oo.forEach(e),Mo.forEach(e),n=0;n<gr.length;n++)r=gr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gr.length&&(n=gr[0],n.blockedOn===null);)Kg(n),n.blockedOn===null&&gr.shift()}var ns=Zn.ReactCurrentBatchConfig,bl=!0;function r1(t,e,n,r){var i=Ee,s=ns.transition;ns.transition=null;try{Ee=1,ld(t,e,n,r)}finally{Ee=i,ns.transition=s}}function i1(t,e,n,r){var i=Ee,s=ns.transition;ns.transition=null;try{Ee=4,ld(t,e,n,r)}finally{Ee=i,ns.transition=s}}function ld(t,e,n,r){if(bl){var i=Zc(t,e,n,r);if(i===null)pc(t,e,r,jl,n),Zf(t,r);else if(t1(i,t,e,n,r))r.stopPropagation();else if(Zf(t,r),e&4&&-1<e1.indexOf(t)){for(;i!==null;){var s=ca(i);if(s!==null&&Wg(s),s=Zc(t,e,n,r),s===null&&pc(t,e,r,jl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else pc(t,e,r,null,n)}}var jl=null;function Zc(t,e,n,r){if(jl=null,t=id(r),t=si(t),t!==null)if(e=Ei(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Lg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jl=t,null}function Qg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(H_()){case sd:return 1;case zg:return 4;case Vl:case q_:return 16;case Bg:return 536870912;default:return 16}default:return 16}}var vr=null,ud=null,pl=null;function Yg(){if(pl)return pl;var t,e=ud,n=e.length,r,i="value"in vr?vr.value:vr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return pl=i.slice(t,1<r?1-r:void 0)}function ml(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qa(){return!0}function tp(){return!1}function Bt(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qa:tp,this.isPropagationStopped=tp,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qa)},persist:function(){},isPersistent:Qa}),e}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cd=Bt(Ts),ua=Ne({},Ts,{view:0,detail:0}),s1=Bt(ua),sc,oc,no,vu=Ne({},ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==no&&(no&&t.type==="mousemove"?(sc=t.screenX-no.screenX,oc=t.screenY-no.screenY):oc=sc=0,no=t),sc)},movementY:function(t){return"movementY"in t?t.movementY:oc}}),np=Bt(vu),o1=Ne({},vu,{dataTransfer:0}),a1=Bt(o1),l1=Ne({},ua,{relatedTarget:0}),ac=Bt(l1),u1=Ne({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),c1=Bt(u1),h1=Ne({},Ts,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),d1=Bt(h1),f1=Ne({},Ts,{data:0}),rp=Bt(f1),p1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=g1[t])?!!e[t]:!1}function hd(){return y1}var v1=Ne({},ua,{key:function(t){if(t.key){var e=p1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ml(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?m1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hd,charCode:function(t){return t.type==="keypress"?ml(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ml(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_1=Bt(v1),E1=Ne({},vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ip=Bt(E1),w1=Ne({},ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hd}),T1=Bt(w1),S1=Ne({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),I1=Bt(S1),C1=Ne({},vu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),x1=Bt(C1),A1=[9,13,27,32],dd=qn&&"CompositionEvent"in window,wo=null;qn&&"documentMode"in document&&(wo=document.documentMode);var k1=qn&&"TextEvent"in window&&!wo,Jg=qn&&(!dd||wo&&8<wo&&11>=wo),sp=" ",op=!1;function Xg(t,e){switch(t){case"keyup":return A1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $i=!1;function R1(t,e){switch(t){case"compositionend":return Zg(e);case"keypress":return e.which!==32?null:(op=!0,sp);case"textInput":return t=e.data,t===sp&&op?null:t;default:return null}}function P1(t,e){if($i)return t==="compositionend"||!dd&&Xg(t,e)?(t=Yg(),pl=ud=vr=null,$i=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Jg&&e.locale!=="ko"?null:e.data;default:return null}}var D1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ap(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!D1[t.type]:e==="textarea"}function ey(t,e,n,r){Dg(r),e=Ll(e,"onChange"),0<e.length&&(n=new cd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var To=null,zo=null;function V1(t){hy(t,0)}function _u(t){var e=qi(t);if(Ig(e))return t}function N1(t,e){if(t==="change")return e}var ty=!1;if(qn){var lc;if(qn){var uc="oninput"in document;if(!uc){var lp=document.createElement("div");lp.setAttribute("oninput","return;"),uc=typeof lp.oninput=="function"}lc=uc}else lc=!1;ty=lc&&(!document.documentMode||9<document.documentMode)}function up(){To&&(To.detachEvent("onpropertychange",ny),zo=To=null)}function ny(t){if(t.propertyName==="value"&&_u(zo)){var e=[];ey(e,zo,t,id(t)),jg(V1,e)}}function b1(t,e,n){t==="focusin"?(up(),To=e,zo=n,To.attachEvent("onpropertychange",ny)):t==="focusout"&&up()}function j1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _u(zo)}function L1(t,e){if(t==="click")return _u(e)}function O1(t,e){if(t==="input"||t==="change")return _u(e)}function M1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pn=typeof Object.is=="function"?Object.is:M1;function Bo(t,e){if(pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!jc.call(e,i)||!pn(t[i],e[i]))return!1}return!0}function cp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hp(t,e){var n=cp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cp(n)}}function ry(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ry(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function iy(){for(var t=window,e=Rl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rl(t.document)}return e}function fd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function F1(t){var e=iy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ry(n.ownerDocument.documentElement,n)){if(r!==null&&fd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=hp(n,s);var a=hp(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var z1=qn&&"documentMode"in document&&11>=document.documentMode,Wi=null,eh=null,So=null,th=!1;function dp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;th||Wi==null||Wi!==Rl(r)||(r=Wi,"selectionStart"in r&&fd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),So&&Bo(So,r)||(So=r,r=Ll(eh,"onSelect"),0<r.length&&(e=new cd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wi)))}function Ya(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hi={animationend:Ya("Animation","AnimationEnd"),animationiteration:Ya("Animation","AnimationIteration"),animationstart:Ya("Animation","AnimationStart"),transitionend:Ya("Transition","TransitionEnd")},cc={},sy={};qn&&(sy=document.createElement("div").style,"AnimationEvent"in window||(delete Hi.animationend.animation,delete Hi.animationiteration.animation,delete Hi.animationstart.animation),"TransitionEvent"in window||delete Hi.transitionend.transition);function Eu(t){if(cc[t])return cc[t];if(!Hi[t])return t;var e=Hi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sy)return cc[t]=e[n];return t}var oy=Eu("animationend"),ay=Eu("animationiteration"),ly=Eu("animationstart"),uy=Eu("transitionend"),cy=new Map,fp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(t,e){cy.set(t,e),_i(e,[t])}for(var hc=0;hc<fp.length;hc++){var dc=fp[hc],B1=dc.toLowerCase(),U1=dc[0].toUpperCase()+dc.slice(1);Br(B1,"on"+U1)}Br(oy,"onAnimationEnd");Br(ay,"onAnimationIteration");Br(ly,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(uy,"onTransitionEnd");ls("onMouseEnter",["mouseout","mouseover"]);ls("onMouseLeave",["mouseout","mouseover"]);ls("onPointerEnter",["pointerout","pointerover"]);ls("onPointerLeave",["pointerout","pointerover"]);_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_i("onBeforeInput",["compositionend","keypress","textInput","paste"]);_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(po));function pp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,B_(r,e,void 0,t),t.currentTarget=null}function hy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;pp(i,l,h),s=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;pp(i,l,h),s=u}}}if(Dl)throw t=Yc,Dl=!1,Yc=null,t}function xe(t,e){var n=e[oh];n===void 0&&(n=e[oh]=new Set);var r=t+"__bubble";n.has(r)||(dy(e,t,2,!1),n.add(r))}function fc(t,e,n){var r=0;e&&(r|=4),dy(n,t,r,e)}var Ja="_reactListening"+Math.random().toString(36).slice(2);function Uo(t){if(!t[Ja]){t[Ja]=!0,_g.forEach(function(n){n!=="selectionchange"&&($1.has(n)||fc(n,!1,t),fc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ja]||(e[Ja]=!0,fc("selectionchange",!1,e))}}function dy(t,e,n,r){switch(Qg(e)){case 1:var i=r1;break;case 4:i=i1;break;default:i=ld}n=i.bind(null,e,n,t),i=void 0,!Qc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function pc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;l!==null;){if(a=si(l),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}l=l.parentNode}}r=r.return}jg(function(){var h=s,m=id(n),v=[];e:{var _=cy.get(t);if(_!==void 0){var R=cd,b=t;switch(t){case"keypress":if(ml(n)===0)break e;case"keydown":case"keyup":R=_1;break;case"focusin":b="focus",R=ac;break;case"focusout":b="blur",R=ac;break;case"beforeblur":case"afterblur":R=ac;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=np;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=a1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=T1;break;case oy:case ay:case ly:R=c1;break;case uy:R=I1;break;case"scroll":R=s1;break;case"wheel":R=x1;break;case"copy":case"cut":case"paste":R=d1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=ip}var L=(e&4)!==0,$=!L&&t==="scroll",A=L?_!==null?_+"Capture":null:_;L=[];for(var T=h,k;T!==null;){k=T;var M=k.stateNode;if(k.tag===5&&M!==null&&(k=M,A!==null&&(M=Lo(T,A),M!=null&&L.push($o(T,M,k)))),$)break;T=T.return}0<L.length&&(_=new R(_,b,null,n,m),v.push({event:_,listeners:L}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",_&&n!==Gc&&(b=n.relatedTarget||n.fromElement)&&(si(b)||b[Gn]))break e;if((R||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,R?(b=n.relatedTarget||n.toElement,R=h,b=b?si(b):null,b!==null&&($=Ei(b),b!==$||b.tag!==5&&b.tag!==6)&&(b=null)):(R=null,b=h),R!==b)){if(L=np,M="onMouseLeave",A="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(L=ip,M="onPointerLeave",A="onPointerEnter",T="pointer"),$=R==null?_:qi(R),k=b==null?_:qi(b),_=new L(M,T+"leave",R,n,m),_.target=$,_.relatedTarget=k,M=null,si(m)===h&&(L=new L(A,T+"enter",b,n,m),L.target=k,L.relatedTarget=$,M=L),$=M,R&&b)t:{for(L=R,A=b,T=0,k=L;k;k=ji(k))T++;for(k=0,M=A;M;M=ji(M))k++;for(;0<T-k;)L=ji(L),T--;for(;0<k-T;)A=ji(A),k--;for(;T--;){if(L===A||A!==null&&L===A.alternate)break t;L=ji(L),A=ji(A)}L=null}else L=null;R!==null&&mp(v,_,R,L,!1),b!==null&&$!==null&&mp(v,$,b,L,!0)}}e:{if(_=h?qi(h):window,R=_.nodeName&&_.nodeName.toLowerCase(),R==="select"||R==="input"&&_.type==="file")var H=N1;else if(ap(_))if(ty)H=O1;else{H=j1;var G=b1}else(R=_.nodeName)&&R.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(H=L1);if(H&&(H=H(t,h))){ey(v,H,n,m);break e}G&&G(t,_,h),t==="focusout"&&(G=_._wrapperState)&&G.controlled&&_.type==="number"&&Uc(_,"number",_.value)}switch(G=h?qi(h):window,t){case"focusin":(ap(G)||G.contentEditable==="true")&&(Wi=G,eh=h,So=null);break;case"focusout":So=eh=Wi=null;break;case"mousedown":th=!0;break;case"contextmenu":case"mouseup":case"dragend":th=!1,dp(v,n,m);break;case"selectionchange":if(z1)break;case"keydown":case"keyup":dp(v,n,m)}var E;if(dd)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else $i?Xg(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Jg&&n.locale!=="ko"&&($i||y!=="onCompositionStart"?y==="onCompositionEnd"&&$i&&(E=Yg()):(vr=m,ud="value"in vr?vr.value:vr.textContent,$i=!0)),G=Ll(h,y),0<G.length&&(y=new rp(y,t,null,n,m),v.push({event:y,listeners:G}),E?y.data=E:(E=Zg(n),E!==null&&(y.data=E)))),(E=k1?R1(t,n):P1(t,n))&&(h=Ll(h,"onBeforeInput"),0<h.length&&(m=new rp("onBeforeInput","beforeinput",null,n,m),v.push({event:m,listeners:h}),m.data=E))}hy(v,e)})}function $o(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ll(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Lo(t,n),s!=null&&r.unshift($o(t,s,i)),s=Lo(t,e),s!=null&&r.push($o(t,s,i))),t=t.return}return r}function ji(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mp(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Lo(n,s),u!=null&&a.unshift($o(n,u,l))):i||(u=Lo(n,s),u!=null&&a.push($o(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var W1=/\r\n?/g,H1=/\u0000|\uFFFD/g;function gp(t){return(typeof t=="string"?t:""+t).replace(W1,`
`).replace(H1,"")}function Xa(t,e,n){if(e=gp(e),gp(t)!==e&&n)throw Error(U(425))}function Ol(){}var nh=null,rh=null;function ih(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sh=typeof setTimeout=="function"?setTimeout:void 0,q1=typeof clearTimeout=="function"?clearTimeout:void 0,yp=typeof Promise=="function"?Promise:void 0,G1=typeof queueMicrotask=="function"?queueMicrotask:typeof yp<"u"?function(t){return yp.resolve(null).then(t).catch(K1)}:sh;function K1(t){setTimeout(function(){throw t})}function mc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Fo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fo(e)}function Ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ss=Math.random().toString(36).slice(2),Cn="__reactFiber$"+Ss,Wo="__reactProps$"+Ss,Gn="__reactContainer$"+Ss,oh="__reactEvents$"+Ss,Q1="__reactListeners$"+Ss,Y1="__reactHandles$"+Ss;function si(t){var e=t[Cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gn]||n[Cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vp(t);t!==null;){if(n=t[Cn])return n;t=vp(t)}return e}t=n,n=t.parentNode}return null}function ca(t){return t=t[Cn]||t[Gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function wu(t){return t[Wo]||null}var ah=[],Gi=-1;function Ur(t){return{current:t}}function ke(t){0>Gi||(t.current=ah[Gi],ah[Gi]=null,Gi--)}function Ce(t,e){Gi++,ah[Gi]=t.current,t.current=e}var br={},gt=Ur(br),kt=Ur(!1),di=br;function us(t,e){var n=t.type.contextTypes;if(!n)return br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Rt(t){return t=t.childContextTypes,t!=null}function Ml(){ke(kt),ke(gt)}function _p(t,e,n){if(gt.current!==br)throw Error(U(168));Ce(gt,e),Ce(kt,n)}function fy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,b_(t)||"Unknown",i));return Ne({},n,r)}function Fl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||br,di=gt.current,Ce(gt,t),Ce(kt,kt.current),!0}function Ep(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=fy(t,e,di),r.__reactInternalMemoizedMergedChildContext=t,ke(kt),ke(gt),Ce(gt,t)):ke(kt),Ce(kt,n)}var Bn=null,Tu=!1,gc=!1;function py(t){Bn===null?Bn=[t]:Bn.push(t)}function J1(t){Tu=!0,py(t)}function $r(){if(!gc&&Bn!==null){gc=!0;var t=0,e=Ee;try{var n=Bn;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bn=null,Tu=!1}catch(i){throw Bn!==null&&(Bn=Bn.slice(t+1)),Fg(sd,$r),i}finally{Ee=e,gc=!1}}return null}var Ki=[],Qi=0,zl=null,Bl=0,Kt=[],Qt=0,fi=null,Un=1,$n="";function ni(t,e){Ki[Qi++]=Bl,Ki[Qi++]=zl,zl=t,Bl=e}function my(t,e,n){Kt[Qt++]=Un,Kt[Qt++]=$n,Kt[Qt++]=fi,fi=t;var r=Un;t=$n;var i=32-hn(r)-1;r&=~(1<<i),n+=1;var s=32-hn(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Un=1<<32-hn(e)+i|n<<i|r,$n=s+t}else Un=1<<s|n<<i|r,$n=t}function pd(t){t.return!==null&&(ni(t,1),my(t,1,0))}function md(t){for(;t===zl;)zl=Ki[--Qi],Ki[Qi]=null,Bl=Ki[--Qi],Ki[Qi]=null;for(;t===fi;)fi=Kt[--Qt],Kt[Qt]=null,$n=Kt[--Qt],Kt[Qt]=null,Un=Kt[--Qt],Kt[Qt]=null}var Mt=null,Ot=null,Re=!1,un=null;function gy(t,e){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Ot=Ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Ot=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fi!==null?{id:Un,overflow:$n}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,Ot=null,!0):!1;default:return!1}}function lh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function uh(t){if(Re){var e=Ot;if(e){var n=e;if(!wp(t,e)){if(lh(t))throw Error(U(418));e=Ir(n.nextSibling);var r=Mt;e&&wp(t,e)?gy(r,n):(t.flags=t.flags&-4097|2,Re=!1,Mt=t)}}else{if(lh(t))throw Error(U(418));t.flags=t.flags&-4097|2,Re=!1,Mt=t}}}function Tp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function Za(t){if(t!==Mt)return!1;if(!Re)return Tp(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ih(t.type,t.memoizedProps)),e&&(e=Ot)){if(lh(t))throw yy(),Error(U(418));for(;e;)gy(t,e),e=Ir(e.nextSibling)}if(Tp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ot=Ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ot=null}}else Ot=Mt?Ir(t.stateNode.nextSibling):null;return!0}function yy(){for(var t=Ot;t;)t=Ir(t.nextSibling)}function cs(){Ot=Mt=null,Re=!1}function gd(t){un===null?un=[t]:un.push(t)}var X1=Zn.ReactCurrentBatchConfig;function ro(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function el(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Sp(t){var e=t._init;return e(t._payload)}function vy(t){function e(A,T){if(t){var k=A.deletions;k===null?(A.deletions=[T],A.flags|=16):k.push(T)}}function n(A,T){if(!t)return null;for(;T!==null;)e(A,T),T=T.sibling;return null}function r(A,T){for(A=new Map;T!==null;)T.key!==null?A.set(T.key,T):A.set(T.index,T),T=T.sibling;return A}function i(A,T){return A=kr(A,T),A.index=0,A.sibling=null,A}function s(A,T,k){return A.index=k,t?(k=A.alternate,k!==null?(k=k.index,k<T?(A.flags|=2,T):k):(A.flags|=2,T)):(A.flags|=1048576,T)}function a(A){return t&&A.alternate===null&&(A.flags|=2),A}function l(A,T,k,M){return T===null||T.tag!==6?(T=Sc(k,A.mode,M),T.return=A,T):(T=i(T,k),T.return=A,T)}function u(A,T,k,M){var H=k.type;return H===Ui?m(A,T,k.props.children,M,k.key):T!==null&&(T.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===pr&&Sp(H)===T.type)?(M=i(T,k.props),M.ref=ro(A,T,k),M.return=A,M):(M=Tl(k.type,k.key,k.props,null,A.mode,M),M.ref=ro(A,T,k),M.return=A,M)}function h(A,T,k,M){return T===null||T.tag!==4||T.stateNode.containerInfo!==k.containerInfo||T.stateNode.implementation!==k.implementation?(T=Ic(k,A.mode,M),T.return=A,T):(T=i(T,k.children||[]),T.return=A,T)}function m(A,T,k,M,H){return T===null||T.tag!==7?(T=ci(k,A.mode,M,H),T.return=A,T):(T=i(T,k),T.return=A,T)}function v(A,T,k){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Sc(""+T,A.mode,k),T.return=A,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case $a:return k=Tl(T.type,T.key,T.props,null,A.mode,k),k.ref=ro(A,null,T),k.return=A,k;case Bi:return T=Ic(T,A.mode,k),T.return=A,T;case pr:var M=T._init;return v(A,M(T._payload),k)}if(ho(T)||Xs(T))return T=ci(T,A.mode,k,null),T.return=A,T;el(A,T)}return null}function _(A,T,k,M){var H=T!==null?T.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return H!==null?null:l(A,T,""+k,M);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case $a:return k.key===H?u(A,T,k,M):null;case Bi:return k.key===H?h(A,T,k,M):null;case pr:return H=k._init,_(A,T,H(k._payload),M)}if(ho(k)||Xs(k))return H!==null?null:m(A,T,k,M,null);el(A,k)}return null}function R(A,T,k,M,H){if(typeof M=="string"&&M!==""||typeof M=="number")return A=A.get(k)||null,l(T,A,""+M,H);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case $a:return A=A.get(M.key===null?k:M.key)||null,u(T,A,M,H);case Bi:return A=A.get(M.key===null?k:M.key)||null,h(T,A,M,H);case pr:var G=M._init;return R(A,T,k,G(M._payload),H)}if(ho(M)||Xs(M))return A=A.get(k)||null,m(T,A,M,H,null);el(T,M)}return null}function b(A,T,k,M){for(var H=null,G=null,E=T,y=T=0,w=null;E!==null&&y<k.length;y++){E.index>y?(w=E,E=null):w=E.sibling;var C=_(A,E,k[y],M);if(C===null){E===null&&(E=w);break}t&&E&&C.alternate===null&&e(A,E),T=s(C,T,y),G===null?H=C:G.sibling=C,G=C,E=w}if(y===k.length)return n(A,E),Re&&ni(A,y),H;if(E===null){for(;y<k.length;y++)E=v(A,k[y],M),E!==null&&(T=s(E,T,y),G===null?H=E:G.sibling=E,G=E);return Re&&ni(A,y),H}for(E=r(A,E);y<k.length;y++)w=R(E,A,y,k[y],M),w!==null&&(t&&w.alternate!==null&&E.delete(w.key===null?y:w.key),T=s(w,T,y),G===null?H=w:G.sibling=w,G=w);return t&&E.forEach(function(x){return e(A,x)}),Re&&ni(A,y),H}function L(A,T,k,M){var H=Xs(k);if(typeof H!="function")throw Error(U(150));if(k=H.call(k),k==null)throw Error(U(151));for(var G=H=null,E=T,y=T=0,w=null,C=k.next();E!==null&&!C.done;y++,C=k.next()){E.index>y?(w=E,E=null):w=E.sibling;var x=_(A,E,C.value,M);if(x===null){E===null&&(E=w);break}t&&E&&x.alternate===null&&e(A,E),T=s(x,T,y),G===null?H=x:G.sibling=x,G=x,E=w}if(C.done)return n(A,E),Re&&ni(A,y),H;if(E===null){for(;!C.done;y++,C=k.next())C=v(A,C.value,M),C!==null&&(T=s(C,T,y),G===null?H=C:G.sibling=C,G=C);return Re&&ni(A,y),H}for(E=r(A,E);!C.done;y++,C=k.next())C=R(E,A,y,C.value,M),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?y:C.key),T=s(C,T,y),G===null?H=C:G.sibling=C,G=C);return t&&E.forEach(function(P){return e(A,P)}),Re&&ni(A,y),H}function $(A,T,k,M){if(typeof k=="object"&&k!==null&&k.type===Ui&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case $a:e:{for(var H=k.key,G=T;G!==null;){if(G.key===H){if(H=k.type,H===Ui){if(G.tag===7){n(A,G.sibling),T=i(G,k.props.children),T.return=A,A=T;break e}}else if(G.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===pr&&Sp(H)===G.type){n(A,G.sibling),T=i(G,k.props),T.ref=ro(A,G,k),T.return=A,A=T;break e}n(A,G);break}else e(A,G);G=G.sibling}k.type===Ui?(T=ci(k.props.children,A.mode,M,k.key),T.return=A,A=T):(M=Tl(k.type,k.key,k.props,null,A.mode,M),M.ref=ro(A,T,k),M.return=A,A=M)}return a(A);case Bi:e:{for(G=k.key;T!==null;){if(T.key===G)if(T.tag===4&&T.stateNode.containerInfo===k.containerInfo&&T.stateNode.implementation===k.implementation){n(A,T.sibling),T=i(T,k.children||[]),T.return=A,A=T;break e}else{n(A,T);break}else e(A,T);T=T.sibling}T=Ic(k,A.mode,M),T.return=A,A=T}return a(A);case pr:return G=k._init,$(A,T,G(k._payload),M)}if(ho(k))return b(A,T,k,M);if(Xs(k))return L(A,T,k,M);el(A,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,T!==null&&T.tag===6?(n(A,T.sibling),T=i(T,k),T.return=A,A=T):(n(A,T),T=Sc(k,A.mode,M),T.return=A,A=T),a(A)):n(A,T)}return $}var hs=vy(!0),_y=vy(!1),Ul=Ur(null),$l=null,Yi=null,yd=null;function vd(){yd=Yi=$l=null}function _d(t){var e=Ul.current;ke(Ul),t._currentValue=e}function ch(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function rs(t,e){$l=t,yd=Yi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function en(t){var e=t._currentValue;if(yd!==t)if(t={context:t,memoizedValue:e,next:null},Yi===null){if($l===null)throw Error(U(308));Yi=t,$l.dependencies={lanes:0,firstContext:t}}else Yi=Yi.next=t;return e}var oi=null;function Ed(t){oi===null?oi=[t]:oi.push(t)}function Ey(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ed(e)):(n.next=i.next,i.next=n),e.interleaved=n,Kn(t,r)}function Kn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mr=!1;function wd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Kn(t,n)}return i=r.interleaved,i===null?(e.next=e,Ed(r)):(e.next=i.next,i.next=e),r.interleaved=e,Kn(t,n)}function gl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,od(t,n)}}function Ip(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wl(t,e,n,r){var i=t.updateQueue;mr=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==a&&(l===null?m.firstBaseUpdate=h:l.next=h,m.lastBaseUpdate=u))}if(s!==null){var v=i.baseState;a=0,m=h=u=null,l=s;do{var _=l.lane,R=l.eventTime;if((r&_)===_){m!==null&&(m=m.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,L=l;switch(_=e,R=n,L.tag){case 1:if(b=L.payload,typeof b=="function"){v=b.call(R,v,_);break e}v=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=L.payload,_=typeof b=="function"?b.call(R,v,_):b,_==null)break e;v=Ne({},v,_);break e;case 2:mr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[l]:_.push(l))}else R={eventTime:R,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(h=m=R,u=v):m=m.next=R,a|=_;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;_=l,l=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(m===null&&(u=v),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=m,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);mi|=a,t.lanes=a,t.memoizedState=v}}function Cp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var ha={},An=Ur(ha),Ho=Ur(ha),qo=Ur(ha);function ai(t){if(t===ha)throw Error(U(174));return t}function Td(t,e){switch(Ce(qo,e),Ce(Ho,t),Ce(An,ha),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wc(e,t)}ke(An),Ce(An,e)}function ds(){ke(An),ke(Ho),ke(qo)}function Ty(t){ai(qo.current);var e=ai(An.current),n=Wc(e,t.type);e!==n&&(Ce(Ho,t),Ce(An,n))}function Sd(t){Ho.current===t&&(ke(An),ke(Ho))}var Pe=Ur(0);function Hl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yc=[];function Id(){for(var t=0;t<yc.length;t++)yc[t]._workInProgressVersionPrimary=null;yc.length=0}var yl=Zn.ReactCurrentDispatcher,vc=Zn.ReactCurrentBatchConfig,pi=0,Ve=null,qe=null,Xe=null,ql=!1,Io=!1,Go=0,Z1=0;function ct(){throw Error(U(321))}function Cd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pn(t[n],e[n]))return!1;return!0}function xd(t,e,n,r,i,s){if(pi=s,Ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yl.current=t===null||t.memoizedState===null?rE:iE,t=n(r,i),Io){s=0;do{if(Io=!1,Go=0,25<=s)throw Error(U(301));s+=1,Xe=qe=null,e.updateQueue=null,yl.current=sE,t=n(r,i)}while(Io)}if(yl.current=Gl,e=qe!==null&&qe.next!==null,pi=0,Xe=qe=Ve=null,ql=!1,e)throw Error(U(300));return t}function Ad(){var t=Go!==0;return Go=0,t}function Sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Ve.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function tn(){if(qe===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Xe===null?Ve.memoizedState:Xe.next;if(e!==null)Xe=e,qe=t;else{if(t===null)throw Error(U(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Xe===null?Ve.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Ko(t,e){return typeof e=="function"?e(t):e}function _c(t){var e=tn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=qe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,u=null,h=s;do{var m=h.lane;if((pi&m)===m)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var v={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=v,a=r):u=u.next=v,Ve.lanes|=m,mi|=m}h=h.next}while(h!==null&&h!==s);u===null?a=r:u.next=l,pn(r,e.memoizedState)||(At=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ve.lanes|=s,mi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ec(t){var e=tn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);pn(s,e.memoizedState)||(At=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Sy(){}function Iy(t,e){var n=Ve,r=tn(),i=e(),s=!pn(r.memoizedState,i);if(s&&(r.memoizedState=i,At=!0),r=r.queue,kd(Ay.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Qo(9,xy.bind(null,n,r,i,e),void 0,null),et===null)throw Error(U(349));pi&30||Cy(n,e,i)}return i}function Cy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xy(t,e,n,r){e.value=n,e.getSnapshot=r,ky(e)&&Ry(t)}function Ay(t,e,n){return n(function(){ky(e)&&Ry(t)})}function ky(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pn(t,n)}catch{return!0}}function Ry(t){var e=Kn(t,1);e!==null&&dn(e,t,1,-1)}function xp(t){var e=Sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:t},e.queue=t,t=t.dispatch=nE.bind(null,Ve,t),[e.memoizedState,t]}function Qo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Py(){return tn().memoizedState}function vl(t,e,n,r){var i=Sn();Ve.flags|=t,i.memoizedState=Qo(1|e,n,void 0,r===void 0?null:r)}function Su(t,e,n,r){var i=tn();r=r===void 0?null:r;var s=void 0;if(qe!==null){var a=qe.memoizedState;if(s=a.destroy,r!==null&&Cd(r,a.deps)){i.memoizedState=Qo(e,n,s,r);return}}Ve.flags|=t,i.memoizedState=Qo(1|e,n,s,r)}function Ap(t,e){return vl(8390656,8,t,e)}function kd(t,e){return Su(2048,8,t,e)}function Dy(t,e){return Su(4,2,t,e)}function Vy(t,e){return Su(4,4,t,e)}function Ny(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function by(t,e,n){return n=n!=null?n.concat([t]):null,Su(4,4,Ny.bind(null,e,t),n)}function Rd(){}function jy(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ly(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Oy(t,e,n){return pi&21?(pn(n,e)||(n=Ug(),Ve.lanes|=n,mi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function eE(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=vc.transition;vc.transition={};try{t(!1),e()}finally{Ee=n,vc.transition=r}}function My(){return tn().memoizedState}function tE(t,e,n){var r=Ar(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fy(t))zy(e,n);else if(n=Ey(t,e,n,r),n!==null){var i=wt();dn(n,t,r,i),By(n,e,r)}}function nE(t,e,n){var r=Ar(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fy(t))zy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,pn(l,a)){var u=e.interleaved;u===null?(i.next=i,Ed(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Ey(t,e,i,r),n!==null&&(i=wt(),dn(n,t,r,i),By(n,e,r))}}function Fy(t){var e=t.alternate;return t===Ve||e!==null&&e===Ve}function zy(t,e){Io=ql=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function By(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,od(t,n)}}var Gl={readContext:en,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},rE={readContext:en,useCallback:function(t,e){return Sn().memoizedState=[t,e===void 0?null:e],t},useContext:en,useEffect:Ap,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,vl(4194308,4,Ny.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vl(4194308,4,t,e)},useInsertionEffect:function(t,e){return vl(4,2,t,e)},useMemo:function(t,e){var n=Sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Sn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tE.bind(null,Ve,t),[r.memoizedState,t]},useRef:function(t){var e=Sn();return t={current:t},e.memoizedState=t},useState:xp,useDebugValue:Rd,useDeferredValue:function(t){return Sn().memoizedState=t},useTransition:function(){var t=xp(!1),e=t[0];return t=eE.bind(null,t[1]),Sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ve,i=Sn();if(Re){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),et===null)throw Error(U(349));pi&30||Cy(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ap(Ay.bind(null,r,s,t),[t]),r.flags|=2048,Qo(9,xy.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Sn(),e=et.identifierPrefix;if(Re){var n=$n,r=Un;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Go++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Z1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},iE={readContext:en,useCallback:jy,useContext:en,useEffect:kd,useImperativeHandle:by,useInsertionEffect:Dy,useLayoutEffect:Vy,useMemo:Ly,useReducer:_c,useRef:Py,useState:function(){return _c(Ko)},useDebugValue:Rd,useDeferredValue:function(t){var e=tn();return Oy(e,qe.memoizedState,t)},useTransition:function(){var t=_c(Ko)[0],e=tn().memoizedState;return[t,e]},useMutableSource:Sy,useSyncExternalStore:Iy,useId:My,unstable_isNewReconciler:!1},sE={readContext:en,useCallback:jy,useContext:en,useEffect:kd,useImperativeHandle:by,useInsertionEffect:Dy,useLayoutEffect:Vy,useMemo:Ly,useReducer:Ec,useRef:Py,useState:function(){return Ec(Ko)},useDebugValue:Rd,useDeferredValue:function(t){var e=tn();return qe===null?e.memoizedState=t:Oy(e,qe.memoizedState,t)},useTransition:function(){var t=Ec(Ko)[0],e=tn().memoizedState;return[t,e]},useMutableSource:Sy,useSyncExternalStore:Iy,useId:My,unstable_isNewReconciler:!1};function an(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function hh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Iu={isMounted:function(t){return(t=t._reactInternals)?Ei(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),i=Ar(t),s=Wn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Cr(t,s,i),e!==null&&(dn(e,t,i,r),gl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),i=Ar(t),s=Wn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Cr(t,s,i),e!==null&&(dn(e,t,i,r),gl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=Ar(t),i=Wn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Cr(t,i,r),e!==null&&(dn(e,t,r,n),gl(e,t,r))}};function kp(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Bo(n,r)||!Bo(i,s):!0}function Uy(t,e,n){var r=!1,i=br,s=e.contextType;return typeof s=="object"&&s!==null?s=en(s):(i=Rt(e)?di:gt.current,r=e.contextTypes,s=(r=r!=null)?us(t,i):br),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Iu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Rp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Iu.enqueueReplaceState(e,e.state,null)}function dh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},wd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=en(s):(s=Rt(e)?di:gt.current,i.context=us(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Iu.enqueueReplaceState(i,i.state,null),Wl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function fs(t,e){try{var n="",r=e;do n+=N_(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function wc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var oE=typeof WeakMap=="function"?WeakMap:Map;function $y(t,e,n){n=Wn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ql||(Ql=!0,Sh=r),fh(t,e)},n}function Wy(t,e,n){n=Wn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){fh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){fh(t,e),typeof r!="function"&&(xr===null?xr=new Set([this]):xr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Pp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new oE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=EE.bind(null,t,e,n),e.then(t,t))}function Dp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Vp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wn(-1,1),e.tag=2,Cr(n,e,1))),n.lanes|=1),t)}var aE=Zn.ReactCurrentOwner,At=!1;function Et(t,e,n,r){e.child=t===null?_y(e,null,n,r):hs(e,t.child,n,r)}function Np(t,e,n,r,i){n=n.render;var s=e.ref;return rs(e,i),r=xd(t,e,n,r,s,i),n=Ad(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qn(t,e,i)):(Re&&n&&pd(e),e.flags|=1,Et(t,e,r,i),e.child)}function bp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Od(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Hy(t,e,s,r,i)):(t=Tl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Bo,n(a,r)&&t.ref===e.ref)return Qn(t,e,i)}return e.flags|=1,t=kr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Hy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Bo(s,r)&&t.ref===e.ref)if(At=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,Qn(t,e,i)}return ph(t,e,n,r,i)}function qy(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Xi,Lt),Lt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(Xi,Lt),Lt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ce(Xi,Lt),Lt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ce(Xi,Lt),Lt|=r;return Et(t,e,i,n),e.child}function Gy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ph(t,e,n,r,i){var s=Rt(n)?di:gt.current;return s=us(e,s),rs(e,i),n=xd(t,e,n,r,s,i),r=Ad(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qn(t,e,i)):(Re&&r&&pd(e),e.flags|=1,Et(t,e,n,i),e.child)}function jp(t,e,n,r,i){if(Rt(n)){var s=!0;Fl(e)}else s=!1;if(rs(e,i),e.stateNode===null)_l(t,e),Uy(e,n,r),dh(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=en(h):(h=Rt(n)?di:gt.current,h=us(e,h));var m=n.getDerivedStateFromProps,v=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";v||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Rp(e,a,r,h),mr=!1;var _=e.memoizedState;a.state=_,Wl(e,r,a,i),u=e.memoizedState,l!==r||_!==u||kt.current||mr?(typeof m=="function"&&(hh(e,n,m,r),u=e.memoizedState),(l=mr||kp(e,n,l,r,_,u,h))?(v||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,wy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:an(e.type,l),a.props=h,v=e.pendingProps,_=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=en(u):(u=Rt(n)?di:gt.current,u=us(e,u));var R=n.getDerivedStateFromProps;(m=typeof R=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==v||_!==u)&&Rp(e,a,r,u),mr=!1,_=e.memoizedState,a.state=_,Wl(e,r,a,i);var b=e.memoizedState;l!==v||_!==b||kt.current||mr?(typeof R=="function"&&(hh(e,n,R,r),b=e.memoizedState),(h=mr||kp(e,n,h,r,_,b,u)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),a.props=r,a.state=b,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return mh(t,e,n,r,s,i)}function mh(t,e,n,r,i,s){Gy(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&Ep(e,n,!1),Qn(t,e,s);r=e.stateNode,aE.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=hs(e,t.child,null,s),e.child=hs(e,null,l,s)):Et(t,e,l,s),e.memoizedState=r.state,i&&Ep(e,n,!0),e.child}function Ky(t){var e=t.stateNode;e.pendingContext?_p(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_p(t,e.context,!1),Td(t,e.containerInfo)}function Lp(t,e,n,r,i){return cs(),gd(i),e.flags|=256,Et(t,e,n,r),e.child}var gh={dehydrated:null,treeContext:null,retryLane:0};function yh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qy(t,e,n){var r=e.pendingProps,i=Pe.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ce(Pe,i&1),t===null)return uh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Au(a,r,0,null),t=ci(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=yh(n),e.memoizedState=gh,t):Pd(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return lE(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=kr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=kr(l,s):(s=ci(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?yh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=gh,r}return s=t.child,t=s.sibling,r=kr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pd(t,e){return e=Au({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function tl(t,e,n,r){return r!==null&&gd(r),hs(e,t.child,null,n),t=Pd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lE(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=wc(Error(U(422))),tl(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Au({mode:"visible",children:r.children},i,0,null),s=ci(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&hs(e,t.child,null,a),e.child.memoizedState=yh(a),e.memoizedState=gh,s);if(!(e.mode&1))return tl(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(U(419)),r=wc(s,r,void 0),tl(t,e,a,r)}if(l=(a&t.childLanes)!==0,At||l){if(r=et,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Kn(t,i),dn(r,t,i,-1))}return Ld(),r=wc(Error(U(421))),tl(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=wE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ot=Ir(i.nextSibling),Mt=e,Re=!0,un=null,t!==null&&(Kt[Qt++]=Un,Kt[Qt++]=$n,Kt[Qt++]=fi,Un=t.id,$n=t.overflow,fi=e),e=Pd(e,r.children),e.flags|=4096,e)}function Op(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ch(t.return,e,n)}function Tc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Yy(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Et(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Op(t,n,e);else if(t.tag===19)Op(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Hl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Tc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Hl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Tc(e,!0,n,null,s);break;case"together":Tc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _l(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),mi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=kr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=kr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uE(t,e,n){switch(e.tag){case 3:Ky(e),cs();break;case 5:Ty(e);break;case 1:Rt(e.type)&&Fl(e);break;case 4:Td(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ce(Ul,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?Qy(t,e,n):(Ce(Pe,Pe.current&1),t=Qn(t,e,n),t!==null?t.sibling:null);Ce(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Yy(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,qy(t,e,n)}return Qn(t,e,n)}var Jy,vh,Xy,Zy;Jy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vh=function(){};Xy=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ai(An.current);var s=null;switch(n){case"input":i=zc(t,i),r=zc(t,r),s=[];break;case"select":i=Ne({},i,{value:void 0}),r=Ne({},r,{value:void 0}),s=[];break;case"textarea":i=$c(t,i),r=$c(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ol)}Hc(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(bo.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(bo.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&xe("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};Zy=function(t,e,n,r){n!==r&&(e.flags|=4)};function io(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function cE(t,e,n){var r=e.pendingProps;switch(md(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(e),null;case 1:return Rt(e.type)&&Ml(),ht(e),null;case 3:return r=e.stateNode,ds(),ke(kt),ke(gt),Id(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Za(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,un!==null&&(xh(un),un=null))),vh(t,e),ht(e),null;case 5:Sd(e);var i=ai(qo.current);if(n=e.type,t!==null&&e.stateNode!=null)Xy(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ht(e),null}if(t=ai(An.current),Za(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Cn]=e,r[Wo]=s,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(i=0;i<po.length;i++)xe(po[i],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":qf(r,s),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xe("invalid",r);break;case"textarea":Kf(r,s),xe("invalid",r)}Hc(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Xa(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Xa(r.textContent,l,t),i=["children",""+l]):bo.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&xe("scroll",r)}switch(n){case"input":Wa(r),Gf(r,s,!0);break;case"textarea":Wa(r),Qf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ol)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ag(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Cn]=e,t[Wo]=r,Jy(t,e,!1,!1),e.stateNode=t;e:{switch(a=qc(n,r),n){case"dialog":xe("cancel",t),xe("close",t),i=r;break;case"iframe":case"object":case"embed":xe("load",t),i=r;break;case"video":case"audio":for(i=0;i<po.length;i++)xe(po[i],t);i=r;break;case"source":xe("error",t),i=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),i=r;break;case"details":xe("toggle",t),i=r;break;case"input":qf(t,r),i=zc(t,r),xe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ne({},r,{value:void 0}),xe("invalid",t);break;case"textarea":Kf(t,r),i=$c(t,r),xe("invalid",t);break;default:i=r}Hc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Pg(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&kg(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&jo(t,u):typeof u=="number"&&jo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(bo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&xe("scroll",t):u!=null&&ed(t,s,u,a))}switch(n){case"input":Wa(t),Gf(t,r,!1);break;case"textarea":Wa(t),Qf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Nr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Zi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Zi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ol)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ht(e),null;case 6:if(t&&e.stateNode!=null)Zy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=ai(qo.current),ai(An.current),Za(e)){if(r=e.stateNode,n=e.memoizedProps,r[Cn]=e,(s=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:Xa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xa(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cn]=e,e.stateNode=r}return ht(e),null;case 13:if(ke(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Ot!==null&&e.mode&1&&!(e.flags&128))yy(),cs(),e.flags|=98560,s=!1;else if(s=Za(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Cn]=e}else cs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ht(e),s=!1}else un!==null&&(xh(un),un=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Ke===0&&(Ke=3):Ld())),e.updateQueue!==null&&(e.flags|=4),ht(e),null);case 4:return ds(),vh(t,e),t===null&&Uo(e.stateNode.containerInfo),ht(e),null;case 10:return _d(e.type._context),ht(e),null;case 17:return Rt(e.type)&&Ml(),ht(e),null;case 19:if(ke(Pe),s=e.memoizedState,s===null)return ht(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)io(s,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Hl(t),a!==null){for(e.flags|=128,io(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Pe,Pe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Fe()>ps&&(e.flags|=128,r=!0,io(s,!1),e.lanes=4194304)}else{if(!r)if(t=Hl(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),io(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Re)return ht(e),null}else 2*Fe()-s.renderingStartTime>ps&&n!==1073741824&&(e.flags|=128,r=!0,io(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Fe(),e.sibling=null,n=Pe.current,Ce(Pe,r?n&1|2:n&1),e):(ht(e),null);case 22:case 23:return jd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Lt&1073741824&&(ht(e),e.subtreeFlags&6&&(e.flags|=8192)):ht(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function hE(t,e){switch(md(e),e.tag){case 1:return Rt(e.type)&&Ml(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ds(),ke(kt),ke(gt),Id(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sd(e),null;case 13:if(ke(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));cs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Pe),null;case 4:return ds(),null;case 10:return _d(e.type._context),null;case 22:case 23:return jd(),null;case 24:return null;default:return null}}var nl=!1,pt=!1,dE=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Ji(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function _h(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var Mp=!1;function fE(t,e){if(nh=bl,t=iy(),fd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,m=0,v=t,_=null;t:for(;;){for(var R;v!==n||i!==0&&v.nodeType!==3||(l=a+i),v!==s||r!==0&&v.nodeType!==3||(u=a+r),v.nodeType===3&&(a+=v.nodeValue.length),(R=v.firstChild)!==null;)_=v,v=R;for(;;){if(v===t)break t;if(_===n&&++h===i&&(l=a),_===s&&++m===r&&(u=a),(R=v.nextSibling)!==null)break;v=_,_=v.parentNode}v=R}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(rh={focusedElem:t,selectionRange:n},bl=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var L=b.memoizedProps,$=b.memoizedState,A=e.stateNode,T=A.getSnapshotBeforeUpdate(e.elementType===e.type?L:an(e.type,L),$);A.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(M){Oe(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return b=Mp,Mp=!1,b}function Co(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&_h(e,n,s)}i=i.next}while(i!==r)}}function Cu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Eh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ev(t){var e=t.alternate;e!==null&&(t.alternate=null,ev(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cn],delete e[Wo],delete e[oh],delete e[Q1],delete e[Y1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tv(t){return t.tag===5||t.tag===3||t.tag===4}function Fp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ol));else if(r!==4&&(t=t.child,t!==null))for(wh(t,e,n),t=t.sibling;t!==null;)wh(t,e,n),t=t.sibling}function Th(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Th(t,e,n),t=t.sibling;t!==null;)Th(t,e,n),t=t.sibling}var tt=null,ln=!1;function fr(t,e,n){for(n=n.child;n!==null;)nv(t,e,n),n=n.sibling}function nv(t,e,n){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(yu,n)}catch{}switch(n.tag){case 5:pt||Ji(n,e);case 6:var r=tt,i=ln;tt=null,fr(t,e,n),tt=r,ln=i,tt!==null&&(ln?(t=tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(ln?(t=tt,n=n.stateNode,t.nodeType===8?mc(t.parentNode,n):t.nodeType===1&&mc(t,n),Fo(t)):mc(tt,n.stateNode));break;case 4:r=tt,i=ln,tt=n.stateNode.containerInfo,ln=!0,fr(t,e,n),tt=r,ln=i;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&_h(n,e,a),i=i.next}while(i!==r)}fr(t,e,n);break;case 1:if(!pt&&(Ji(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Oe(n,e,l)}fr(t,e,n);break;case 21:fr(t,e,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,fr(t,e,n),pt=r):fr(t,e,n);break;default:fr(t,e,n)}}function zp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dE),e.forEach(function(r){var i=TE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function on(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:tt=l.stateNode,ln=!1;break e;case 3:tt=l.stateNode.containerInfo,ln=!0;break e;case 4:tt=l.stateNode.containerInfo,ln=!0;break e}l=l.return}if(tt===null)throw Error(U(160));nv(s,a,i),tt=null,ln=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Oe(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rv(e,t),e=e.sibling}function rv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(on(e,t),wn(t),r&4){try{Co(3,t,t.return),Cu(3,t)}catch(L){Oe(t,t.return,L)}try{Co(5,t,t.return)}catch(L){Oe(t,t.return,L)}}break;case 1:on(e,t),wn(t),r&512&&n!==null&&Ji(n,n.return);break;case 5:if(on(e,t),wn(t),r&512&&n!==null&&Ji(n,n.return),t.flags&32){var i=t.stateNode;try{jo(i,"")}catch(L){Oe(t,t.return,L)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Cg(i,s),qc(l,a);var h=qc(l,s);for(a=0;a<u.length;a+=2){var m=u[a],v=u[a+1];m==="style"?Pg(i,v):m==="dangerouslySetInnerHTML"?kg(i,v):m==="children"?jo(i,v):ed(i,m,v,h)}switch(l){case"input":Bc(i,s);break;case"textarea":xg(i,s);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var R=s.value;R!=null?Zi(i,!!s.multiple,R,!1):_!==!!s.multiple&&(s.defaultValue!=null?Zi(i,!!s.multiple,s.defaultValue,!0):Zi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Wo]=s}catch(L){Oe(t,t.return,L)}}break;case 6:if(on(e,t),wn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(L){Oe(t,t.return,L)}}break;case 3:if(on(e,t),wn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fo(e.containerInfo)}catch(L){Oe(t,t.return,L)}break;case 4:on(e,t),wn(t);break;case 13:on(e,t),wn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Nd=Fe())),r&4&&zp(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(pt=(h=pt)||m,on(e,t),pt=h):on(e,t),wn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(Q=t,m=t.child;m!==null;){for(v=Q=m;Q!==null;){switch(_=Q,R=_.child,_.tag){case 0:case 11:case 14:case 15:Co(4,_,_.return);break;case 1:Ji(_,_.return);var b=_.stateNode;if(typeof b.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(L){Oe(r,n,L)}}break;case 5:Ji(_,_.return);break;case 22:if(_.memoizedState!==null){Up(v);continue}}R!==null?(R.return=_,Q=R):Up(v)}m=m.sibling}e:for(m=null,v=t;;){if(v.tag===5){if(m===null){m=v;try{i=v.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=v.stateNode,u=v.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Rg("display",a))}catch(L){Oe(t,t.return,L)}}}else if(v.tag===6){if(m===null)try{v.stateNode.nodeValue=h?"":v.memoizedProps}catch(L){Oe(t,t.return,L)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;m===v&&(m=null),v=v.return}m===v&&(m=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:on(e,t),wn(t),r&4&&zp(t);break;case 21:break;default:on(e,t),wn(t)}}function wn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tv(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(jo(i,""),r.flags&=-33);var s=Fp(t);Th(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Fp(t);wh(t,l,a);break;default:throw Error(U(161))}}catch(u){Oe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pE(t,e,n){Q=t,iv(t)}function iv(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||nl;if(!a){var l=i.alternate,u=l!==null&&l.memoizedState!==null||pt;l=nl;var h=pt;if(nl=a,(pt=u)&&!h)for(Q=i;Q!==null;)a=Q,u=a.child,a.tag===22&&a.memoizedState!==null?$p(i):u!==null?(u.return=a,Q=u):$p(i);for(;s!==null;)Q=s,iv(s),s=s.sibling;Q=i,nl=l,pt=h}Bp(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):Bp(t)}}function Bp(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pt||Cu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:an(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Cp(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var v=m.dehydrated;v!==null&&Fo(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}pt||e.flags&512&&Eh(e)}catch(_){Oe(e,e.return,_)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Up(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function $p(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cu(4,e)}catch(u){Oe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Oe(e,i,u)}}var s=e.return;try{Eh(e)}catch(u){Oe(e,s,u)}break;case 5:var a=e.return;try{Eh(e)}catch(u){Oe(e,a,u)}}}catch(u){Oe(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var mE=Math.ceil,Kl=Zn.ReactCurrentDispatcher,Dd=Zn.ReactCurrentOwner,Zt=Zn.ReactCurrentBatchConfig,me=0,et=null,Ue=null,it=0,Lt=0,Xi=Ur(0),Ke=0,Yo=null,mi=0,xu=0,Vd=0,xo=null,xt=null,Nd=0,ps=1/0,zn=null,Ql=!1,Sh=null,xr=null,rl=!1,_r=null,Yl=0,Ao=0,Ih=null,El=-1,wl=0;function wt(){return me&6?Fe():El!==-1?El:El=Fe()}function Ar(t){return t.mode&1?me&2&&it!==0?it&-it:X1.transition!==null?(wl===0&&(wl=Ug()),wl):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:Qg(t.type)),t):1}function dn(t,e,n,r){if(50<Ao)throw Ao=0,Ih=null,Error(U(185));la(t,n,r),(!(me&2)||t!==et)&&(t===et&&(!(me&2)&&(xu|=n),Ke===4&&yr(t,it)),Pt(t,r),n===1&&me===0&&!(e.mode&1)&&(ps=Fe()+500,Tu&&$r()))}function Pt(t,e){var n=t.callbackNode;X_(t,e);var r=Nl(t,t===et?it:0);if(r===0)n!==null&&Xf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Xf(n),e===1)t.tag===0?J1(Wp.bind(null,t)):py(Wp.bind(null,t)),G1(function(){!(me&6)&&$r()}),n=null;else{switch($g(r)){case 1:n=sd;break;case 4:n=zg;break;case 16:n=Vl;break;case 536870912:n=Bg;break;default:n=Vl}n=dv(n,sv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sv(t,e){if(El=-1,wl=0,me&6)throw Error(U(327));var n=t.callbackNode;if(is()&&t.callbackNode!==n)return null;var r=Nl(t,t===et?it:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Jl(t,r);else{e=r;var i=me;me|=2;var s=av();(et!==t||it!==e)&&(zn=null,ps=Fe()+500,ui(t,e));do try{vE();break}catch(l){ov(t,l)}while(!0);vd(),Kl.current=s,me=i,Ue!==null?e=0:(et=null,it=0,e=Ke)}if(e!==0){if(e===2&&(i=Jc(t),i!==0&&(r=i,e=Ch(t,i))),e===1)throw n=Yo,ui(t,0),yr(t,r),Pt(t,Fe()),n;if(e===6)yr(t,r);else{if(i=t.current.alternate,!(r&30)&&!gE(i)&&(e=Jl(t,r),e===2&&(s=Jc(t),s!==0&&(r=s,e=Ch(t,s))),e===1))throw n=Yo,ui(t,0),yr(t,r),Pt(t,Fe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:ri(t,xt,zn);break;case 3:if(yr(t,r),(r&130023424)===r&&(e=Nd+500-Fe(),10<e)){if(Nl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=sh(ri.bind(null,t,xt,zn),e);break}ri(t,xt,zn);break;case 4:if(yr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-hn(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mE(r/1960))-r,10<r){t.timeoutHandle=sh(ri.bind(null,t,xt,zn),r);break}ri(t,xt,zn);break;case 5:ri(t,xt,zn);break;default:throw Error(U(329))}}}return Pt(t,Fe()),t.callbackNode===n?sv.bind(null,t):null}function Ch(t,e){var n=xo;return t.current.memoizedState.isDehydrated&&(ui(t,e).flags|=256),t=Jl(t,e),t!==2&&(e=xt,xt=n,e!==null&&xh(e)),t}function xh(t){xt===null?xt=t:xt.push.apply(xt,t)}function gE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!pn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yr(t,e){for(e&=~Vd,e&=~xu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hn(e),r=1<<n;t[n]=-1,e&=~r}}function Wp(t){if(me&6)throw Error(U(327));is();var e=Nl(t,0);if(!(e&1))return Pt(t,Fe()),null;var n=Jl(t,e);if(t.tag!==0&&n===2){var r=Jc(t);r!==0&&(e=r,n=Ch(t,r))}if(n===1)throw n=Yo,ui(t,0),yr(t,e),Pt(t,Fe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ri(t,xt,zn),Pt(t,Fe()),null}function bd(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(ps=Fe()+500,Tu&&$r())}}function gi(t){_r!==null&&_r.tag===0&&!(me&6)&&is();var e=me;me|=1;var n=Zt.transition,r=Ee;try{if(Zt.transition=null,Ee=1,t)return t()}finally{Ee=r,Zt.transition=n,me=e,!(me&6)&&$r()}}function jd(){Lt=Xi.current,ke(Xi)}function ui(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,q1(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(md(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ml();break;case 3:ds(),ke(kt),ke(gt),Id();break;case 5:Sd(r);break;case 4:ds();break;case 13:ke(Pe);break;case 19:ke(Pe);break;case 10:_d(r.type._context);break;case 22:case 23:jd()}n=n.return}if(et=t,Ue=t=kr(t.current,null),it=Lt=e,Ke=0,Yo=null,Vd=xu=mi=0,xt=xo=null,oi!==null){for(e=0;e<oi.length;e++)if(n=oi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}oi=null}return t}function ov(t,e){do{var n=Ue;try{if(vd(),yl.current=Gl,ql){for(var r=Ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ql=!1}if(pi=0,Xe=qe=Ve=null,Io=!1,Go=0,Dd.current=null,n===null||n.return===null){Ke=1,Yo=e,Ue=null;break}e:{var s=t,a=n.return,l=n,u=e;if(e=it,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,m=l,v=m.tag;if(!(m.mode&1)&&(v===0||v===11||v===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var R=Dp(a);if(R!==null){R.flags&=-257,Vp(R,a,l,s,e),R.mode&1&&Pp(s,h,e),e=R,u=h;var b=e.updateQueue;if(b===null){var L=new Set;L.add(u),e.updateQueue=L}else b.add(u);break e}else{if(!(e&1)){Pp(s,h,e),Ld();break e}u=Error(U(426))}}else if(Re&&l.mode&1){var $=Dp(a);if($!==null){!($.flags&65536)&&($.flags|=256),Vp($,a,l,s,e),gd(fs(u,l));break e}}s=u=fs(u,l),Ke!==4&&(Ke=2),xo===null?xo=[s]:xo.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var A=$y(s,u,e);Ip(s,A);break e;case 1:l=u;var T=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(xr===null||!xr.has(k)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=Wy(s,l,e);Ip(s,M);break e}}s=s.return}while(s!==null)}uv(n)}catch(H){e=H,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function av(){var t=Kl.current;return Kl.current=Gl,t===null?Gl:t}function Ld(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),et===null||!(mi&268435455)&&!(xu&268435455)||yr(et,it)}function Jl(t,e){var n=me;me|=2;var r=av();(et!==t||it!==e)&&(zn=null,ui(t,e));do try{yE();break}catch(i){ov(t,i)}while(!0);if(vd(),me=n,Kl.current=r,Ue!==null)throw Error(U(261));return et=null,it=0,Ke}function yE(){for(;Ue!==null;)lv(Ue)}function vE(){for(;Ue!==null&&!$_();)lv(Ue)}function lv(t){var e=hv(t.alternate,t,Lt);t.memoizedProps=t.pendingProps,e===null?uv(t):Ue=e,Dd.current=null}function uv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=hE(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,Ue=null;return}}else if(n=cE(n,e,Lt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);Ke===0&&(Ke=5)}function ri(t,e,n){var r=Ee,i=Zt.transition;try{Zt.transition=null,Ee=1,_E(t,e,n,r)}finally{Zt.transition=i,Ee=r}return null}function _E(t,e,n,r){do is();while(_r!==null);if(me&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Z_(t,s),t===et&&(Ue=et=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rl||(rl=!0,dv(Vl,function(){return is(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zt.transition,Zt.transition=null;var a=Ee;Ee=1;var l=me;me|=4,Dd.current=null,fE(t,n),rv(n,t),F1(rh),bl=!!nh,rh=nh=null,t.current=n,pE(n),W_(),me=l,Ee=a,Zt.transition=s}else t.current=n;if(rl&&(rl=!1,_r=t,Yl=i),s=t.pendingLanes,s===0&&(xr=null),G_(n.stateNode),Pt(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ql)throw Ql=!1,t=Sh,Sh=null,t;return Yl&1&&t.tag!==0&&is(),s=t.pendingLanes,s&1?t===Ih?Ao++:(Ao=0,Ih=t):Ao=0,$r(),null}function is(){if(_r!==null){var t=$g(Yl),e=Zt.transition,n=Ee;try{if(Zt.transition=null,Ee=16>t?16:t,_r===null)var r=!1;else{if(t=_r,_r=null,Yl=0,me&6)throw Error(U(331));var i=me;for(me|=4,Q=t.current;Q!==null;){var s=Q,a=s.child;if(Q.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(Q=h;Q!==null;){var m=Q;switch(m.tag){case 0:case 11:case 15:Co(8,m,s)}var v=m.child;if(v!==null)v.return=m,Q=v;else for(;Q!==null;){m=Q;var _=m.sibling,R=m.return;if(ev(m),m===h){Q=null;break}if(_!==null){_.return=R,Q=_;break}Q=R}}}var b=s.alternate;if(b!==null){var L=b.child;if(L!==null){b.child=null;do{var $=L.sibling;L.sibling=null,L=$}while(L!==null)}}Q=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Q=a;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Co(9,s,s.return)}var A=s.sibling;if(A!==null){A.return=s.return,Q=A;break e}Q=s.return}}var T=t.current;for(Q=T;Q!==null;){a=Q;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,Q=k;else e:for(a=T;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Cu(9,l)}}catch(H){Oe(l,l.return,H)}if(l===a){Q=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,Q=M;break e}Q=l.return}}if(me=i,$r(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(yu,t)}catch{}r=!0}return r}finally{Ee=n,Zt.transition=e}}return!1}function Hp(t,e,n){e=fs(n,e),e=$y(t,e,1),t=Cr(t,e,1),e=wt(),t!==null&&(la(t,1,e),Pt(t,e))}function Oe(t,e,n){if(t.tag===3)Hp(t,t,n);else for(;e!==null;){if(e.tag===3){Hp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xr===null||!xr.has(r))){t=fs(n,t),t=Wy(e,t,1),e=Cr(e,t,1),t=wt(),e!==null&&(la(e,1,t),Pt(e,t));break}}e=e.return}}function EE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(it&n)===n&&(Ke===4||Ke===3&&(it&130023424)===it&&500>Fe()-Nd?ui(t,0):Vd|=n),Pt(t,e)}function cv(t,e){e===0&&(t.mode&1?(e=Ga,Ga<<=1,!(Ga&130023424)&&(Ga=4194304)):e=1);var n=wt();t=Kn(t,e),t!==null&&(la(t,e,n),Pt(t,n))}function wE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cv(t,n)}function TE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),cv(t,n)}var hv;hv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,uE(t,e,n);At=!!(t.flags&131072)}else At=!1,Re&&e.flags&1048576&&my(e,Bl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_l(t,e),t=e.pendingProps;var i=us(e,gt.current);rs(e,n),i=xd(null,e,r,t,i,n);var s=Ad();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(s=!0,Fl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wd(e),i.updater=Iu,e.stateNode=i,i._reactInternals=e,dh(e,r,t,n),e=mh(null,e,r,!0,s,n)):(e.tag=0,Re&&s&&pd(e),Et(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_l(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=IE(r),t=an(r,t),i){case 0:e=ph(null,e,r,t,n);break e;case 1:e=jp(null,e,r,t,n);break e;case 11:e=Np(null,e,r,t,n);break e;case 14:e=bp(null,e,r,an(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:an(r,i),ph(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:an(r,i),jp(t,e,r,i,n);case 3:e:{if(Ky(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,wy(t,e),Wl(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=fs(Error(U(423)),e),e=Lp(t,e,r,n,i);break e}else if(r!==i){i=fs(Error(U(424)),e),e=Lp(t,e,r,n,i);break e}else for(Ot=Ir(e.stateNode.containerInfo.firstChild),Mt=e,Re=!0,un=null,n=_y(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cs(),r===i){e=Qn(t,e,n);break e}Et(t,e,r,n)}e=e.child}return e;case 5:return Ty(e),t===null&&uh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,ih(r,i)?a=null:s!==null&&ih(r,s)&&(e.flags|=32),Gy(t,e),Et(t,e,a,n),e.child;case 6:return t===null&&uh(e),null;case 13:return Qy(t,e,n);case 4:return Td(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=hs(e,null,r,n):Et(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:an(r,i),Np(t,e,r,i,n);case 7:return Et(t,e,e.pendingProps,n),e.child;case 8:return Et(t,e,e.pendingProps.children,n),e.child;case 12:return Et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ce(Ul,r._currentValue),r._currentValue=a,s!==null)if(pn(s.value,a)){if(s.children===i.children&&!kt.current){e=Qn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Wn(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?u.next=u:(u.next=m.next,m.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),ch(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(U(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),ch(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Et(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,rs(e,n),i=en(i),r=r(i),e.flags|=1,Et(t,e,r,n),e.child;case 14:return r=e.type,i=an(r,e.pendingProps),i=an(r.type,i),bp(t,e,r,i,n);case 15:return Hy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:an(r,i),_l(t,e),e.tag=1,Rt(r)?(t=!0,Fl(e)):t=!1,rs(e,n),Uy(e,r,i),dh(e,r,i,n),mh(null,e,r,!0,t,n);case 19:return Yy(t,e,n);case 22:return qy(t,e,n)}throw Error(U(156,e.tag))};function dv(t,e){return Fg(t,e)}function SE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,e,n,r){return new SE(t,e,n,r)}function Od(t){return t=t.prototype,!(!t||!t.isReactComponent)}function IE(t){if(typeof t=="function")return Od(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nd)return 11;if(t===rd)return 14}return 2}function kr(t,e){var n=t.alternate;return n===null?(n=Xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Tl(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Od(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ui:return ci(n.children,i,s,e);case td:a=8,i|=8;break;case Lc:return t=Xt(12,n,e,i|2),t.elementType=Lc,t.lanes=s,t;case Oc:return t=Xt(13,n,e,i),t.elementType=Oc,t.lanes=s,t;case Mc:return t=Xt(19,n,e,i),t.elementType=Mc,t.lanes=s,t;case Tg:return Au(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Eg:a=10;break e;case wg:a=9;break e;case nd:a=11;break e;case rd:a=14;break e;case pr:a=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Xt(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ci(t,e,n,r){return t=Xt(7,t,r,e),t.lanes=n,t}function Au(t,e,n,r){return t=Xt(22,t,r,e),t.elementType=Tg,t.lanes=n,t.stateNode={isHidden:!1},t}function Sc(t,e,n){return t=Xt(6,t,null,e),t.lanes=n,t}function Ic(t,e,n){return e=Xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function CE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ic(0),this.expirationTimes=ic(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ic(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Md(t,e,n,r,i,s,a,l,u){return t=new CE(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wd(s),t}function xE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fv(t){if(!t)return br;t=t._reactInternals;e:{if(Ei(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Rt(n))return fy(t,n,e)}return e}function pv(t,e,n,r,i,s,a,l,u){return t=Md(n,r,!0,t,i,s,a,l,u),t.context=fv(null),n=t.current,r=wt(),i=Ar(n),s=Wn(r,i),s.callback=e??null,Cr(n,s,i),t.current.lanes=i,la(t,i,r),Pt(t,r),t}function ku(t,e,n,r){var i=e.current,s=wt(),a=Ar(i);return n=fv(n),e.context===null?e.context=n:e.pendingContext=n,e=Wn(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cr(i,e,a),t!==null&&(dn(t,i,a,s),gl(t,i,a)),a}function Xl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fd(t,e){qp(t,e),(t=t.alternate)&&qp(t,e)}function AE(){return null}var mv=typeof reportError=="function"?reportError:function(t){console.error(t)};function zd(t){this._internalRoot=t}Ru.prototype.render=zd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));ku(t,e,null,null)};Ru.prototype.unmount=zd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gi(function(){ku(null,t,null,null)}),e[Gn]=null}};function Ru(t){this._internalRoot=t}Ru.prototype.unstable_scheduleHydration=function(t){if(t){var e=qg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gr.length&&e!==0&&e<gr[n].priority;n++);gr.splice(n,0,t),n===0&&Kg(t)}};function Bd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gp(){}function kE(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Xl(a);s.call(h)}}var a=pv(e,r,t,0,null,!1,!1,"",Gp);return t._reactRootContainer=a,t[Gn]=a.current,Uo(t.nodeType===8?t.parentNode:t),gi(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Xl(u);l.call(h)}}var u=Md(t,0,!1,null,null,!1,!1,"",Gp);return t._reactRootContainer=u,t[Gn]=u.current,Uo(t.nodeType===8?t.parentNode:t),gi(function(){ku(e,u,n,r)}),u}function Du(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var u=Xl(a);l.call(u)}}ku(e,a,t,i)}else a=kE(n,e,t,i,r);return Xl(a)}Wg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fo(e.pendingLanes);n!==0&&(od(e,n|1),Pt(e,Fe()),!(me&6)&&(ps=Fe()+500,$r()))}break;case 13:gi(function(){var r=Kn(t,1);if(r!==null){var i=wt();dn(r,t,1,i)}}),Fd(t,1)}};ad=function(t){if(t.tag===13){var e=Kn(t,134217728);if(e!==null){var n=wt();dn(e,t,134217728,n)}Fd(t,134217728)}};Hg=function(t){if(t.tag===13){var e=Ar(t),n=Kn(t,e);if(n!==null){var r=wt();dn(n,t,e,r)}Fd(t,e)}};qg=function(){return Ee};Gg=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};Kc=function(t,e,n){switch(e){case"input":if(Bc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wu(r);if(!i)throw Error(U(90));Ig(r),Bc(r,i)}}}break;case"textarea":xg(t,n);break;case"select":e=n.value,e!=null&&Zi(t,!!n.multiple,e,!1)}};Ng=bd;bg=gi;var RE={usingClientEntryPoint:!1,Events:[ca,qi,wu,Dg,Vg,bd]},so={findFiberByHostInstance:si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PE={bundleType:so.bundleType,version:so.version,rendererPackageName:so.rendererPackageName,rendererConfig:so.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Og(t),t===null?null:t.stateNode},findFiberByHostInstance:so.findFiberByHostInstance||AE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{yu=il.inject(PE),xn=il}catch{}}zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RE;zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bd(e))throw Error(U(200));return xE(t,e,null,n)};zt.createRoot=function(t,e){if(!Bd(t))throw Error(U(299));var n=!1,r="",i=mv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Md(t,1,!1,null,null,n,!1,r,i),t[Gn]=e.current,Uo(t.nodeType===8?t.parentNode:t),new zd(e)};zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Og(e),t=t===null?null:t.stateNode,t};zt.flushSync=function(t){return gi(t)};zt.hydrate=function(t,e,n){if(!Pu(e))throw Error(U(200));return Du(null,t,e,!0,n)};zt.hydrateRoot=function(t,e,n){if(!Bd(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=mv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=pv(e,null,t,1,n??null,i,!1,s,a),t[Gn]=e.current,Uo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ru(e)};zt.render=function(t,e,n){if(!Pu(e))throw Error(U(200));return Du(null,t,e,!1,n)};zt.unmountComponentAtNode=function(t){if(!Pu(t))throw Error(U(40));return t._reactRootContainer?(gi(function(){Du(null,null,t,!1,function(){t._reactRootContainer=null,t[Gn]=null})}),!0):!1};zt.unstable_batchedUpdates=bd;zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Du(t,e,n,!1,r)};zt.version="18.3.1-next-f1338f8080-20240426";function gv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gv)}catch(t){console.error(t)}}gv(),gg.exports=zt;var DE=gg.exports,Kp=DE;bc.createRoot=Kp.createRoot,bc.hydrateRoot=Kp.hydrateRoot;const VE=()=>{};var Qp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},NE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},vv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,m=s>>2,v=(s&3)<<4|l>>4;let _=(l&15)<<2|h>>6,R=h&63;u||(R=64,a||(_=64)),r.push(n[m],n[v],n[_],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):NE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||v==null)throw new bE;const _=s<<2|l>>4;if(r.push(_),h!==64){const R=l<<4&240|h>>2;if(r.push(R),v!==64){const b=h<<6&192|v;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jE=function(t){const e=yv(t);return vv.encodeByteArray(e,!0)},Zl=function(t){return jE(t).replace(/\./g,"")},LE=function(t){try{return vv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=()=>OE().__FIREBASE_DEFAULTS__,FE=()=>{if(typeof process>"u"||typeof Qp>"u")return;const t=Qp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LE(t[1]);return e&&JSON.parse(e)},Ud=()=>{try{return VE()||ME()||FE()||zE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BE=t=>{var e,n;return(n=(e=Ud())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},UE=t=>{const e=BE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_v=()=>{var t;return(t=Ud())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function WE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Zl(JSON.stringify(n)),Zl(JSON.stringify(a)),""].join(".")}const ko={};function qE(){const t={prod:[],emulator:[]};for(const e of Object.keys(ko))ko[e]?t.emulator.push(e):t.prod.push(e);return t}function GE(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Yp=!1;function KE(t,e){if(typeof window>"u"||typeof document>"u"||!$d(window.location.host)||ko[t]===e||ko[t]||Yp)return;ko[t]=e;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",s=qE().prod.length>0;function a(){const _=document.getElementById(r);_&&_.remove()}function l(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function u(_,R){_.setAttribute("width","24"),_.setAttribute("id",R),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function h(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Yp=!0,a()},_}function m(_,R){_.setAttribute("id",R),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=GE(r),R=n("text"),b=document.getElementById(R)||document.createElement("span"),L=n("learnmore"),$=document.getElementById(L)||document.createElement("a"),A=n("preprendIcon"),T=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const k=_.element;l(k),m($,L);const M=h();u(T,A),k.append(T,b,$,M),document.body.appendChild(k)}s?(b.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YE(){var e;const t=(e=Ud())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JE(){return!YE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XE(){try{return typeof indexedDB=="object"}catch{return!1}}function ZE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="FirebaseError";class Is extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ew,Object.setPrototypeOf(this,Is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ev.prototype.create)}}class Ev{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?tw(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Is(i,l,r)}}function tw(t,e){return t.replace(nw,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const nw=/\{\$([^}]+)}/g;function eu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(Jp(s)&&Jp(a)){if(!eu(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Jp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t){return t&&t._delegate?t._delegate:t}class Jo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $E;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sw(e))try{this.getOrInitializeService({instanceIdentifier:ii})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ii){return this.instances.has(e)}getOptions(e=ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ii){return this.component?this.component.multipleInstances?e:ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iw(t){return t===ii?void 0:t}function sw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const aw={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},lw=pe.INFO,uw={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},cw=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=uw[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wv{constructor(e){this.name=e,this._logLevel=lw,this._logHandler=cw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const hw=(t,e)=>e.some(n=>t instanceof n);let Xp,Zp;function dw(){return Xp||(Xp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fw(){return Zp||(Zp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tv=new WeakMap,Ah=new WeakMap,Sv=new WeakMap,Cc=new WeakMap,Wd=new WeakMap;function pw(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Rr(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Tv.set(n,t)}).catch(()=>{}),Wd.set(e,t),e}function mw(t){if(Ah.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Ah.set(t,e)}let kh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ah.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Sv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gw(t){kh=t(kh)}function yw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xc(this),e,...n);return Sv.set(r,e.sort?e.sort():[e]),Rr(r)}:fw().includes(t)?function(...e){return t.apply(xc(this),e),Rr(Tv.get(this))}:function(...e){return Rr(t.apply(xc(this),e))}}function vw(t){return typeof t=="function"?yw(t):(t instanceof IDBTransaction&&mw(t),hw(t,dw())?new Proxy(t,kh):t)}function Rr(t){if(t instanceof IDBRequest)return pw(t);if(Cc.has(t))return Cc.get(t);const e=vw(t);return e!==t&&(Cc.set(t,e),Wd.set(e,t)),e}const xc=t=>Wd.get(t);function _w(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=Rr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Rr(a.result),u.oldVersion,u.newVersion,Rr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const Ew=["get","getKey","getAll","getAllKeys","count"],ww=["put","add","delete","clear"],Ac=new Map;function em(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ac.get(e))return Ac.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ww.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ew.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return Ac.set(e,s),s}gw(t=>({...t,get:(e,n,r)=>em(e,n)||t.get(e,n,r),has:(e,n)=>!!em(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Sw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Sw(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rh="@firebase/app",tm="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new wv("@firebase/app"),Iw="@firebase/app-compat",Cw="@firebase/analytics-compat",xw="@firebase/analytics",Aw="@firebase/app-check-compat",kw="@firebase/app-check",Rw="@firebase/auth",Pw="@firebase/auth-compat",Dw="@firebase/database",Vw="@firebase/data-connect",Nw="@firebase/database-compat",bw="@firebase/functions",jw="@firebase/functions-compat",Lw="@firebase/installations",Ow="@firebase/installations-compat",Mw="@firebase/messaging",Fw="@firebase/messaging-compat",zw="@firebase/performance",Bw="@firebase/performance-compat",Uw="@firebase/remote-config",$w="@firebase/remote-config-compat",Ww="@firebase/storage",Hw="@firebase/storage-compat",qw="@firebase/firestore",Gw="@firebase/ai",Kw="@firebase/firestore-compat",Qw="firebase",Yw="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="[DEFAULT]",Jw={[Rh]:"fire-core",[Iw]:"fire-core-compat",[xw]:"fire-analytics",[Cw]:"fire-analytics-compat",[kw]:"fire-app-check",[Aw]:"fire-app-check-compat",[Rw]:"fire-auth",[Pw]:"fire-auth-compat",[Dw]:"fire-rtdb",[Vw]:"fire-data-connect",[Nw]:"fire-rtdb-compat",[bw]:"fire-fn",[jw]:"fire-fn-compat",[Lw]:"fire-iid",[Ow]:"fire-iid-compat",[Mw]:"fire-fcm",[Fw]:"fire-fcm-compat",[zw]:"fire-perf",[Bw]:"fire-perf-compat",[Uw]:"fire-rc",[$w]:"fire-rc-compat",[Ww]:"fire-gcs",[Hw]:"fire-gcs-compat",[qw]:"fire-fst",[Kw]:"fire-fst-compat",[Gw]:"fire-vertex","fire-js":"fire-js",[Qw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=new Map,Xw=new Map,Dh=new Map;function nm(t,e){try{t.container.addComponent(e)}catch(n){Yn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ru(t){const e=t.name;if(Dh.has(e))return Yn.debug(`There were multiple attempts to register component ${e}.`),!1;Dh.set(e,t);for(const n of nu.values())nm(n,t);for(const n of Xw.values())nm(n,t);return!0}function Zw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function eT(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pr=new Ev("app","Firebase",tT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=Yw;function Iv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Ph,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Pr.create("bad-app-name",{appName:String(i)});if(n||(n=_v()),!n)throw Pr.create("no-options");const s=nu.get(i);if(s){if(eu(n,s.options)&&eu(r,s.config))return s;throw Pr.create("duplicate-app",{appName:i})}const a=new ow(i);for(const u of Dh.values())a.addComponent(u);const l=new nT(n,r,a);return nu.set(i,l),l}function iT(t=Ph){const e=nu.get(t);if(!e&&t===Ph&&_v())return Iv();if(!e)throw Pr.create("no-app",{appName:t});return e}function ss(t,e,n){let r=Jw[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yn.warn(a.join(" "));return}ru(new Jo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="firebase-heartbeat-database",oT=1,Xo="firebase-heartbeat-store";let kc=null;function Cv(){return kc||(kc=_w(sT,oT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pr.create("idb-open",{originalErrorMessage:t.message})})),kc}async function aT(t){try{const n=(await Cv()).transaction(Xo),r=await n.objectStore(Xo).get(xv(t));return await n.done,r}catch(e){if(e instanceof Is)Yn.warn(e.message);else{const n=Pr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yn.warn(n.message)}}}async function rm(t,e){try{const r=(await Cv()).transaction(Xo,"readwrite");await r.objectStore(Xo).put(e,xv(t)),await r.done}catch(n){if(n instanceof Is)Yn.warn(n.message);else{const r=Pr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yn.warn(r.message)}}}function xv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=1024,uT=30;class cT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=im();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>uT){const a=fT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Yn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=im(),{heartbeatsToSend:r,unsentEntries:i}=hT(this._heartbeatsCache.heartbeats),s=Zl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Yn.warn(n),""}}}function im(){return new Date().toISOString().substring(0,10)}function hT(t,e=lT){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),sm(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),sm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XE()?ZE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function sm(t){return Zl(JSON.stringify({version:2,heartbeats:t})).length}function fT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(t){ru(new Jo("platform-logger",e=>new Tw(e),"PRIVATE")),ru(new Jo("heartbeat",e=>new cT(e),"PRIVATE")),ss(Rh,tm,t),ss(Rh,tm,"esm2020"),ss("fire-js","")}pT("");var mT="firebase",gT="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ss(mT,gT,"app");var om=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dr,Av;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function w(){}w.prototype=y.prototype,E.F=y.prototype,E.prototype=new w,E.prototype.constructor=E,E.D=function(C,x,P){for(var S=Array(arguments.length-2),je=2;je<arguments.length;je++)S[je-2]=arguments[je];return y.prototype[x].apply(C,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,y,w){w||(w=0);const C=Array(16);if(typeof y=="string")for(var x=0;x<16;++x)C[x]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(x=0;x<16;++x)C[x]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=E.g[0],w=E.g[1],x=E.g[2];let P=E.g[3],S;S=y+(P^w&(x^P))+C[0]+3614090360&4294967295,y=w+(S<<7&4294967295|S>>>25),S=P+(x^y&(w^x))+C[1]+3905402710&4294967295,P=y+(S<<12&4294967295|S>>>20),S=x+(w^P&(y^w))+C[2]+606105819&4294967295,x=P+(S<<17&4294967295|S>>>15),S=w+(y^x&(P^y))+C[3]+3250441966&4294967295,w=x+(S<<22&4294967295|S>>>10),S=y+(P^w&(x^P))+C[4]+4118548399&4294967295,y=w+(S<<7&4294967295|S>>>25),S=P+(x^y&(w^x))+C[5]+1200080426&4294967295,P=y+(S<<12&4294967295|S>>>20),S=x+(w^P&(y^w))+C[6]+2821735955&4294967295,x=P+(S<<17&4294967295|S>>>15),S=w+(y^x&(P^y))+C[7]+4249261313&4294967295,w=x+(S<<22&4294967295|S>>>10),S=y+(P^w&(x^P))+C[8]+1770035416&4294967295,y=w+(S<<7&4294967295|S>>>25),S=P+(x^y&(w^x))+C[9]+2336552879&4294967295,P=y+(S<<12&4294967295|S>>>20),S=x+(w^P&(y^w))+C[10]+4294925233&4294967295,x=P+(S<<17&4294967295|S>>>15),S=w+(y^x&(P^y))+C[11]+2304563134&4294967295,w=x+(S<<22&4294967295|S>>>10),S=y+(P^w&(x^P))+C[12]+1804603682&4294967295,y=w+(S<<7&4294967295|S>>>25),S=P+(x^y&(w^x))+C[13]+4254626195&4294967295,P=y+(S<<12&4294967295|S>>>20),S=x+(w^P&(y^w))+C[14]+2792965006&4294967295,x=P+(S<<17&4294967295|S>>>15),S=w+(y^x&(P^y))+C[15]+1236535329&4294967295,w=x+(S<<22&4294967295|S>>>10),S=y+(x^P&(w^x))+C[1]+4129170786&4294967295,y=w+(S<<5&4294967295|S>>>27),S=P+(w^x&(y^w))+C[6]+3225465664&4294967295,P=y+(S<<9&4294967295|S>>>23),S=x+(y^w&(P^y))+C[11]+643717713&4294967295,x=P+(S<<14&4294967295|S>>>18),S=w+(P^y&(x^P))+C[0]+3921069994&4294967295,w=x+(S<<20&4294967295|S>>>12),S=y+(x^P&(w^x))+C[5]+3593408605&4294967295,y=w+(S<<5&4294967295|S>>>27),S=P+(w^x&(y^w))+C[10]+38016083&4294967295,P=y+(S<<9&4294967295|S>>>23),S=x+(y^w&(P^y))+C[15]+3634488961&4294967295,x=P+(S<<14&4294967295|S>>>18),S=w+(P^y&(x^P))+C[4]+3889429448&4294967295,w=x+(S<<20&4294967295|S>>>12),S=y+(x^P&(w^x))+C[9]+568446438&4294967295,y=w+(S<<5&4294967295|S>>>27),S=P+(w^x&(y^w))+C[14]+3275163606&4294967295,P=y+(S<<9&4294967295|S>>>23),S=x+(y^w&(P^y))+C[3]+4107603335&4294967295,x=P+(S<<14&4294967295|S>>>18),S=w+(P^y&(x^P))+C[8]+1163531501&4294967295,w=x+(S<<20&4294967295|S>>>12),S=y+(x^P&(w^x))+C[13]+2850285829&4294967295,y=w+(S<<5&4294967295|S>>>27),S=P+(w^x&(y^w))+C[2]+4243563512&4294967295,P=y+(S<<9&4294967295|S>>>23),S=x+(y^w&(P^y))+C[7]+1735328473&4294967295,x=P+(S<<14&4294967295|S>>>18),S=w+(P^y&(x^P))+C[12]+2368359562&4294967295,w=x+(S<<20&4294967295|S>>>12),S=y+(w^x^P)+C[5]+4294588738&4294967295,y=w+(S<<4&4294967295|S>>>28),S=P+(y^w^x)+C[8]+2272392833&4294967295,P=y+(S<<11&4294967295|S>>>21),S=x+(P^y^w)+C[11]+1839030562&4294967295,x=P+(S<<16&4294967295|S>>>16),S=w+(x^P^y)+C[14]+4259657740&4294967295,w=x+(S<<23&4294967295|S>>>9),S=y+(w^x^P)+C[1]+2763975236&4294967295,y=w+(S<<4&4294967295|S>>>28),S=P+(y^w^x)+C[4]+1272893353&4294967295,P=y+(S<<11&4294967295|S>>>21),S=x+(P^y^w)+C[7]+4139469664&4294967295,x=P+(S<<16&4294967295|S>>>16),S=w+(x^P^y)+C[10]+3200236656&4294967295,w=x+(S<<23&4294967295|S>>>9),S=y+(w^x^P)+C[13]+681279174&4294967295,y=w+(S<<4&4294967295|S>>>28),S=P+(y^w^x)+C[0]+3936430074&4294967295,P=y+(S<<11&4294967295|S>>>21),S=x+(P^y^w)+C[3]+3572445317&4294967295,x=P+(S<<16&4294967295|S>>>16),S=w+(x^P^y)+C[6]+76029189&4294967295,w=x+(S<<23&4294967295|S>>>9),S=y+(w^x^P)+C[9]+3654602809&4294967295,y=w+(S<<4&4294967295|S>>>28),S=P+(y^w^x)+C[12]+3873151461&4294967295,P=y+(S<<11&4294967295|S>>>21),S=x+(P^y^w)+C[15]+530742520&4294967295,x=P+(S<<16&4294967295|S>>>16),S=w+(x^P^y)+C[2]+3299628645&4294967295,w=x+(S<<23&4294967295|S>>>9),S=y+(x^(w|~P))+C[0]+4096336452&4294967295,y=w+(S<<6&4294967295|S>>>26),S=P+(w^(y|~x))+C[7]+1126891415&4294967295,P=y+(S<<10&4294967295|S>>>22),S=x+(y^(P|~w))+C[14]+2878612391&4294967295,x=P+(S<<15&4294967295|S>>>17),S=w+(P^(x|~y))+C[5]+4237533241&4294967295,w=x+(S<<21&4294967295|S>>>11),S=y+(x^(w|~P))+C[12]+1700485571&4294967295,y=w+(S<<6&4294967295|S>>>26),S=P+(w^(y|~x))+C[3]+2399980690&4294967295,P=y+(S<<10&4294967295|S>>>22),S=x+(y^(P|~w))+C[10]+4293915773&4294967295,x=P+(S<<15&4294967295|S>>>17),S=w+(P^(x|~y))+C[1]+2240044497&4294967295,w=x+(S<<21&4294967295|S>>>11),S=y+(x^(w|~P))+C[8]+1873313359&4294967295,y=w+(S<<6&4294967295|S>>>26),S=P+(w^(y|~x))+C[15]+4264355552&4294967295,P=y+(S<<10&4294967295|S>>>22),S=x+(y^(P|~w))+C[6]+2734768916&4294967295,x=P+(S<<15&4294967295|S>>>17),S=w+(P^(x|~y))+C[13]+1309151649&4294967295,w=x+(S<<21&4294967295|S>>>11),S=y+(x^(w|~P))+C[4]+4149444226&4294967295,y=w+(S<<6&4294967295|S>>>26),S=P+(w^(y|~x))+C[11]+3174756917&4294967295,P=y+(S<<10&4294967295|S>>>22),S=x+(y^(P|~w))+C[2]+718787259&4294967295,x=P+(S<<15&4294967295|S>>>17),S=w+(P^(x|~y))+C[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(x+(S<<21&4294967295|S>>>11))&4294967295,E.g[2]=E.g[2]+x&4294967295,E.g[3]=E.g[3]+P&4294967295}r.prototype.v=function(E,y){y===void 0&&(y=E.length);const w=y-this.blockSize,C=this.C;let x=this.h,P=0;for(;P<y;){if(x==0)for(;P<=w;)i(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<y;)if(C[x++]=E.charCodeAt(P++),x==this.blockSize){i(this,C),x=0;break}}else for(;P<y;)if(C[x++]=E[P++],x==this.blockSize){i(this,C),x=0;break}}this.h=x,this.o+=y},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;y=this.o*8;for(var w=E.length-8;w<E.length;++w)E[w]=y&255,y/=256;for(this.v(E),E=Array(16),y=0,w=0;w<4;++w)for(let C=0;C<32;C+=8)E[y++]=this.g[w]>>>C&255;return E};function s(E,y){var w=l;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=y(E)}function a(E,y){this.h=y;const w=[];let C=!0;for(let x=E.length-1;x>=0;x--){const P=E[x]|0;C&&P==y||(w[x]=P,C=!1)}this.g=w}var l={};function u(E){return-128<=E&&E<128?s(E,function(y){return new a([y|0],y<0?-1:0)}):new a([E|0],E<0?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return v;if(E<0)return $(h(-E));const y=[];let w=1;for(let C=0;E>=w;C++)y[C]=E/w|0,w*=4294967296;return new a(y,0)}function m(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return $(m(E.substring(1),y));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=h(Math.pow(y,8));let C=v;for(let P=0;P<E.length;P+=8){var x=Math.min(8,E.length-P);const S=parseInt(E.substring(P,P+x),y);x<8?(x=h(Math.pow(y,x)),C=C.j(x).add(h(S))):(C=C.j(w),C=C.add(h(S)))}return C}var v=u(0),_=u(1),R=u(16777216);t=a.prototype,t.m=function(){if(L(this))return-$(this).m();let E=0,y=1;for(let w=0;w<this.g.length;w++){const C=this.i(w);E+=(C>=0?C:4294967296+C)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(L(this))return"-"+$(this).toString(E);const y=h(Math.pow(E,6));var w=this;let C="";for(;;){const x=M(w,y).g;w=A(w,x.j(y));let P=((w.g.length>0?w.g[0]:w.h)>>>0).toString(E);if(w=x,b(w))return P+C;for(;P.length<6;)P="0"+P;C=P+C}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(let y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function L(E){return E.h==-1}t.l=function(E){return E=A(this,E),L(E)?-1:b(E)?0:1};function $(E){const y=E.g.length,w=[];for(let C=0;C<y;C++)w[C]=~E.g[C];return new a(w,~E.h).add(_)}t.abs=function(){return L(this)?$(this):this},t.add=function(E){const y=Math.max(this.g.length,E.g.length),w=[];let C=0;for(let x=0;x<=y;x++){let P=C+(this.i(x)&65535)+(E.i(x)&65535),S=(P>>>16)+(this.i(x)>>>16)+(E.i(x)>>>16);C=S>>>16,P&=65535,S&=65535,w[x]=S<<16|P}return new a(w,w[w.length-1]&-2147483648?-1:0)};function A(E,y){return E.add($(y))}t.j=function(E){if(b(this)||b(E))return v;if(L(this))return L(E)?$(this).j($(E)):$($(this).j(E));if(L(E))return $(this.j($(E)));if(this.l(R)<0&&E.l(R)<0)return h(this.m()*E.m());const y=this.g.length+E.g.length,w=[];for(var C=0;C<2*y;C++)w[C]=0;for(C=0;C<this.g.length;C++)for(let x=0;x<E.g.length;x++){const P=this.i(C)>>>16,S=this.i(C)&65535,je=E.i(x)>>>16,yt=E.i(x)&65535;w[2*C+2*x]+=S*yt,T(w,2*C+2*x),w[2*C+2*x+1]+=P*yt,T(w,2*C+2*x+1),w[2*C+2*x+1]+=S*je,T(w,2*C+2*x+1),w[2*C+2*x+2]+=P*je,T(w,2*C+2*x+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new a(w,0)};function T(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function k(E,y){this.g=E,this.h=y}function M(E,y){if(b(y))throw Error("division by zero");if(b(E))return new k(v,v);if(L(E))return y=M($(E),y),new k($(y.g),$(y.h));if(L(y))return y=M(E,$(y)),new k($(y.g),y.h);if(E.g.length>30){if(L(E)||L(y))throw Error("slowDivide_ only works with positive integers.");for(var w=_,C=y;C.l(E)<=0;)w=H(w),C=H(C);var x=G(w,1),P=G(C,1);for(C=G(C,2),w=G(w,2);!b(C);){var S=P.add(C);S.l(E)<=0&&(x=x.add(w),P=S),C=G(C,1),w=G(w,1)}return y=A(E,x.j(y)),new k(x,y)}for(x=v;E.l(y)>=0;){for(w=Math.max(1,Math.floor(E.m()/y.m())),C=Math.ceil(Math.log(w)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),P=h(w),S=P.j(y);L(S)||S.l(E)>0;)w-=C,P=h(w),S=P.j(y);b(P)&&(P=_),x=x.add(P),E=A(E,S)}return new k(x,E)}t.B=function(E){return M(this,E).h},t.and=function(E){const y=Math.max(this.g.length,E.g.length),w=[];for(let C=0;C<y;C++)w[C]=this.i(C)&E.i(C);return new a(w,this.h&E.h)},t.or=function(E){const y=Math.max(this.g.length,E.g.length),w=[];for(let C=0;C<y;C++)w[C]=this.i(C)|E.i(C);return new a(w,this.h|E.h)},t.xor=function(E){const y=Math.max(this.g.length,E.g.length),w=[];for(let C=0;C<y;C++)w[C]=this.i(C)^E.i(C);return new a(w,this.h^E.h)};function H(E){const y=E.g.length+1,w=[];for(let C=0;C<y;C++)w[C]=E.i(C)<<1|E.i(C-1)>>>31;return new a(w,E.h)}function G(E,y){const w=y>>5;y%=32;const C=E.g.length-w,x=[];for(let P=0;P<C;P++)x[P]=y>0?E.i(P+w)>>>y|E.i(P+w+1)<<32-y:E.i(P+w);return new a(x,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Av=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=m,Dr=a}).apply(typeof om<"u"?om:typeof self<"u"?self:typeof window<"u"?window:{});var sl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kv,mo,Rv,Sl,Vh,Pv,Dv,Vv;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof sl=="object"&&sl];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(o,c){if(c)e:{var d=r;o=o.split(".");for(var g=0;g<o.length-1;g++){var D=o[g];if(!(D in d))break e;d=d[D]}o=o[o.length-1],g=d[o],c=c(g),c!=g&&c!=null&&e(d,o,{configurable:!0,writable:!0,value:c})}}i("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(o){return o||function(c){var d=[],g;for(g in c)Object.prototype.hasOwnProperty.call(c,g)&&d.push([g,c[g]]);return d}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function u(o,c,d){return o.call.apply(o.bind,arguments)}function h(o,c,d){return h=u,h.apply(null,arguments)}function m(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function v(o,c){function d(){}d.prototype=c.prototype,o.Z=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Ob=function(g,D,N){for(var q=Array(arguments.length-2),le=2;le<arguments.length;le++)q[le-2]=arguments[le];return c.prototype[D].apply(g,q)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function R(o){const c=o.length;if(c>0){const d=Array(c);for(let g=0;g<c;g++)d[g]=o[g];return d}return[]}function b(o,c){for(let g=1;g<arguments.length;g++){const D=arguments[g];var d=typeof D;if(d=d!="object"?d:D?Array.isArray(D)?"array":d:"null",d=="array"||d=="object"&&typeof D.length=="number"){d=o.length||0;const N=D.length||0;o.length=d+N;for(let q=0;q<N;q++)o[d+q]=D[q]}else o.push(D)}}class L{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function $(o){a.setTimeout(()=>{throw o},0)}function A(){var o=E;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class T{constructor(){this.h=this.g=null}add(c,d){const g=k.get();g.set(c,d),this.h?this.h.next=g:this.g=g,this.h=g}}var k=new L(()=>new M,o=>o.reset());class M{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let H,G=!1,E=new T,y=()=>{const o=Promise.resolve(void 0);H=()=>{o.then(w)}};function w(){for(var o;o=A();){try{o.h.call(o.g)}catch(d){$(d)}var c=k;c.j(o),c.h<100&&(c.h++,o.next=c.g,c.g=o)}G=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};a.addEventListener("test",d,c),a.removeEventListener("test",d,c)}catch{}return o}();function S(o){return/^[\s\xa0]*$/.test(o)}function je(o,c){x.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,c)}v(je,x),je.prototype.init=function(o,c){const d=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget,c||(d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement)),this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&je.Z.h.call(this)},je.prototype.h=function(){je.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var yt="closure_listenable_"+(Math.random()*1e6|0),Ut=0;function er(o,c,d,g,D){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!g,this.ha=D,this.key=++Ut,this.da=this.fa=!1}function B(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function X(o,c,d){for(const g in o)c.call(d,o[g],g,o)}function ie(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function _e(o){const c={};for(const d in o)c[d]=o[d];return c}const we="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $t(o,c){let d,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(d in g)o[d]=g[d];for(let N=0;N<we.length;N++)d=we[N],Object.prototype.hasOwnProperty.call(g,d)&&(o[d]=g[d])}}function at(o){this.src=o,this.g={},this.h=0}at.prototype.add=function(o,c,d,g,D){const N=o.toString();o=this.g[N],o||(o=this.g[N]=[],this.h++);const q=Dt(o,c,g,D);return q>-1?(c=o[q],d||(c.fa=!1)):(c=new er(c,this.src,N,!!g,D),c.fa=d,o.push(c)),c};function Wt(o,c){const d=c.type;if(d in o.g){var g=o.g[d],D=Array.prototype.indexOf.call(g,c,void 0),N;(N=D>=0)&&Array.prototype.splice.call(g,D,1),N&&(B(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Dt(o,c,d,g){for(let D=0;D<o.length;++D){const N=o[D];if(!N.da&&N.listener==c&&N.capture==!!d&&N.ha==g)return D}return-1}var nn="closure_lm_"+(Math.random()*1e6|0),mn={};function Rs(o,c,d,g,D){if(Array.isArray(c)){for(let N=0;N<c.length;N++)Rs(o,c[N],d,g,D);return null}return d=It(d),o&&o[yt]?o.J(c,d,l(g)?!!g.capture:!1,D):Ci(o,c,d,!1,g,D)}function Ci(o,c,d,g,D,N){if(!c)throw Error("Invalid event type");const q=l(D)?!!D.capture:!!D;let le=vt(o);if(le||(o[nn]=le=new at(o)),d=le.add(c,d,g,q,N),d.proxy)return d;if(g=Wr(),d.proxy=g,g.src=o,g.listener=d,o.addEventListener)P||(D=q),D===void 0&&(D=!1),o.addEventListener(c.toString(),g,D);else if(o.attachEvent)o.attachEvent(lt(c.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Wr(){function o(d){return c.call(o.src,o.listener,d)}const c=Hr;return o}function ya(o,c,d,g,D){if(Array.isArray(c))for(var N=0;N<c.length;N++)ya(o,c[N],d,g,D);else g=l(g)?!!g.capture:!!g,d=It(d),o&&o[yt]?(o=o.i,N=String(c).toString(),N in o.g&&(c=o.g[N],d=Dt(c,d,g,D),d>-1&&(B(c[d]),Array.prototype.splice.call(c,d,1),c.length==0&&(delete o.g[N],o.h--)))):o&&(o=vt(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Dt(c,d,g,D)),(d=o>-1?c[o]:null)&&xi(d))}function xi(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[yt])Wt(c.i,o);else{var d=o.type,g=o.proxy;c.removeEventListener?c.removeEventListener(d,g,o.capture):c.detachEvent?c.detachEvent(lt(d),g):c.addListener&&c.removeListener&&c.removeListener(g),(d=vt(c))?(Wt(d,o),d.h==0&&(d.src=null,c[nn]=null)):B(o)}}}function lt(o){return o in mn?mn[o]:mn[o]="on"+o}function Hr(o,c){if(o.da)o=!0;else{c=new je(c,this);const d=o.listener,g=o.ha||o.src;o.fa&&xi(o),o=d.call(g,c)}return o}function vt(o){return o=o[nn],o instanceof at?o:null}var qr="__closure_events_fn_"+(Math.random()*1e9>>>0);function It(o){return typeof o=="function"?o:(o[qr]||(o[qr]=function(c){return o.handleEvent(c)}),o[qr])}function ze(){C.call(this),this.i=new at(this),this.M=this,this.G=null}v(ze,C),ze.prototype[yt]=!0,ze.prototype.removeEventListener=function(o,c,d,g){ya(this,o,c,d,g)};function Te(o,c){var d,g=o.G;if(g)for(d=[];g;g=g.G)d.push(g);if(o=o.M,g=c.type||c,typeof c=="string")c=new x(c,o);else if(c instanceof x)c.target=c.target||o;else{var D=c;c=new x(g,o),$t(c,D)}D=!0;let N,q;if(d)for(q=d.length-1;q>=0;q--)N=c.g=d[q],D=rn(N,g,!0,c)&&D;if(N=c.g=o,D=rn(N,g,!0,c)&&D,D=rn(N,g,!1,c)&&D,d)for(q=0;q<d.length;q++)N=c.g=d[q],D=rn(N,g,!1,c)&&D}ze.prototype.N=function(){if(ze.Z.N.call(this),this.i){var o=this.i;for(const c in o.g){const d=o.g[c];for(let g=0;g<d.length;g++)B(d[g]);delete o.g[c],o.h--}}this.G=null},ze.prototype.J=function(o,c,d,g){return this.i.add(String(o),c,!1,d,g)},ze.prototype.K=function(o,c,d,g){return this.i.add(String(o),c,!0,d,g)};function rn(o,c,d,g){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();let D=!0;for(let N=0;N<c.length;++N){const q=c[N];if(q&&!q.da&&q.capture==d){const le=q.listener,He=q.ha||q.src;q.fa&&Wt(o.i,q),D=le.call(He,g)!==!1&&D}}return D&&!g.defaultPrevented}function _t(o,c){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=h(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:a.setTimeout(o,c||0)}function Le(o){o.g=_t(()=>{o.g=null,o.i&&(o.i=!1,Le(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Ai extends C{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Le(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sn(o){C.call(this),this.h=o,this.g={}}v(sn,C);var Ps=[];function va(o){X(o.g,function(c,d){this.g.hasOwnProperty(d)&&xi(c)},o),o.g={}}sn.prototype.N=function(){sn.Z.N.call(this),va(this)},sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ds=a.JSON.stringify,_a=a.JSON.parse,Wu=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function Ea(){}function wa(){}var tr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ht(){x.call(this,"d")}v(Ht,x);function Vs(){x.call(this,"c")}v(Vs,x);var ut={},nr=null;function rr(){return nr=nr||new ze}ut.Ia="serverreachability";function ki(o){x.call(this,ut.Ia,o)}v(ki,x);function Nn(o){const c=rr();Te(c,new ki(c))}ut.STAT_EVENT="statevent";function ne(o,c){x.call(this,ut.STAT_EVENT,o),this.stat=c}v(ne,x);function re(o){const c=rr();Te(c,new ne(c,o))}ut.Ja="timingevent";function Gr(o,c){x.call(this,ut.Ja,o),this.size=c}v(Gr,x);function bn(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},c)}function jn(){this.g=!0}jn.prototype.ua=function(){this.g=!1};function Ri(o,c,d,g,D,N){o.info(function(){if(o.g)if(N){var q="",le=N.split("&");for(let Ie=0;Ie<le.length;Ie++){var He=le[Ie].split("=");if(He.length>1){const Ye=He[0];He=He[1];const En=Ye.split("_");q=En.length>=2&&En[1]=="type"?q+(Ye+"="+He+"&"):q+(Ye+"=redacted&")}}}else q=null;else q=N;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+c+`
`+d+`
`+q})}function Ta(o,c,d,g,D,N,q){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+c+`
`+d+`
`+N+" "+q})}function ir(o,c,d,g){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+Sa(o,d)+(g?" "+g:"")})}function We(o,c){o.info(function(){return"TIMEOUT: "+c})}jn.prototype.info=function(){};function Sa(o,c){if(!o.g)return c;if(!c)return null;try{const N=JSON.parse(c);if(N){for(o=0;o<N.length;o++)if(Array.isArray(N[o])){var d=N[o];if(!(d.length<2)){var g=d[1];if(Array.isArray(g)&&!(g.length<1)){var D=g[0];if(D!="noop"&&D!="stop"&&D!="close")for(let q=1;q<g.length;q++)g[q]=""}}}}return Ds(N)}catch{return c}}var Kr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ns={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pi;function bs(){}v(bs,Ea),bs.prototype.g=function(){return new XMLHttpRequest},Pi=new bs;function Qr(o){return encodeURIComponent(String(o))}function Hu(o){var c=1;o=o.split(":");const d=[];for(;c>0&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function gn(o,c,d,g){this.j=o,this.i=c,this.l=d,this.S=g||1,this.V=new sn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new js}function js(){this.i=null,this.g="",this.h=!1}var Ls={},Os={};function Ms(o,c,d){o.M=1,o.A=Zr(qt(c)),o.u=d,o.R=!0,Ia(o,null)}function Ia(o,c){o.F=Date.now(),Di(o),o.B=qt(o.A);var d=o.B,g=o.S;Array.isArray(g)||(g=[String(g)]),Gs(d.i,"t",g),o.C=0,d=o.j.L,o.h=new js,o.g=Lf(o.j,d?c:null,!o.u),o.P>0&&(o.O=new Ai(h(o.Y,o,o.g),o.P)),c=o.V,d=o.g,g=o.ba;var D="readystatechange";Array.isArray(D)||(D&&(Ps[0]=D.toString()),D=Ps);for(let N=0;N<D.length;N++){const q=Rs(d,D[N],g||c.handleEvent,!1,c.h||c);if(!q)break;c.g[q.key]=q}c=o.J?_e(o.J):{},o.u?(o.v||(o.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,c)):(o.v="GET",o.g.ea(o.B,o.v,null,c)),Nn(),Ri(o.i,o.v,o.B,o.l,o.S,o.u)}gn.prototype.ba=function(o){o=o.target;const c=this.O;c&&cr(o)==3?c.j():this.Y(o)},gn.prototype.Y=function(o){try{if(o==this.g)e:{const le=cr(this.g),He=this.g.ya(),Ie=this.g.ca();if(!(le<3)&&(le!=3||this.g&&(this.h.h||this.g.la()||Cf(this.g)))){this.K||le!=4||He==7||(He==8||Ie<=0?Nn(3):Nn(2)),Yr(this);var c=this.g.ca();this.X=c;var d=qu(this);if(this.o=c==200,Ta(this.i,this.v,this.B,this.l,this.S,le,c),this.o){if(this.U&&!this.L){t:{if(this.g){var g,D=this.g;if((g=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(g)){var N=g;break t}}N=null}if(o=N)ir(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fs(this,o);else{this.o=!1,this.m=3,re(12),Ln(this),Jr(this);break e}}if(this.R){o=!0;let Ye;for(;!this.K&&this.C<d.length;)if(Ye=Gu(this,d),Ye==Os){le==4&&(this.m=4,re(14),o=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(Ye==Ls){this.m=4,re(15),ir(this.i,this.l,d,"[Invalid Chunk]"),o=!1;break}else ir(this.i,this.l,Ye,null),Fs(this,Ye);if(Ca(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),le!=4||d.length!=0||this.h.h||(this.m=1,re(16),o=!1),this.o=this.o&&o,!o)ir(this.i,this.l,d,"[Invalid Chunked Response]"),Ln(this),Jr(this);else if(d.length>0&&!this.W){this.W=!0;var q=this.j;q.g==this&&q.aa&&!q.P&&(q.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),Ju(q),q.P=!0,re(11))}}else ir(this.i,this.l,d,null),Fs(this,d);le==4&&Ln(this),this.o&&!this.K&&(le==4?Vf(this.j,this):(this.o=!1,Di(this)))}else n_(this.g),c==400&&d.indexOf("Unknown SID")>0?(this.m=3,re(12)):(this.m=0,re(13)),Ln(this),Jr(this)}}}catch{}finally{}};function qu(o){if(!Ca(o))return o.g.la();const c=Cf(o.g);if(c==="")return"";let d="";const g=c.length,D=cr(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return Ln(o),Jr(o),"";o.h.i=new a.TextDecoder}for(let N=0;N<g;N++)o.h.h=!0,d+=o.h.i.decode(c[N],{stream:!(D&&N==g-1)});return c.length=0,o.h.g+=d,o.C=0,o.h.g}function Ca(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function Gu(o,c){var d=o.C,g=c.indexOf(`
`,d);return g==-1?Os:(d=Number(c.substring(d,g)),isNaN(d)?Ls:(g+=1,g+d>c.length?Os:(c=c.slice(g,g+d),o.C=g+d,c)))}gn.prototype.cancel=function(){this.K=!0,Ln(this)};function Di(o){o.T=Date.now()+o.H,xa(o,o.H)}function xa(o,c){if(o.D!=null)throw Error("WatchDog timer not null");o.D=bn(h(o.aa,o),c)}function Yr(o){o.D&&(a.clearTimeout(o.D),o.D=null)}gn.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(We(this.i,this.B),this.M!=2&&(Nn(),re(17)),Ln(this),this.m=2,Jr(this)):xa(this,this.T-o)};function Jr(o){o.j.I==0||o.K||Vf(o.j,o)}function Ln(o){Yr(o);var c=o.O;c&&typeof c.dispose=="function"&&c.dispose(),o.O=null,va(o.V),o.g&&(c=o.g,o.g=null,c.abort(),c.dispose())}function Fs(o,c){try{var d=o.j;if(d.I!=0&&(d.g==o||Bs(d.h,o))){if(!o.L&&Bs(d.h,o)&&d.I==3){try{var g=d.Ba.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<o.F)Fa(d),Oa(d);else break e;Yu(d),re(18)}}else d.xa=D[1],0<d.xa-d.K&&D[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=bn(h(d.Va,d),6e3));Aa(d.h)<=1&&d.ta&&(d.ta=void 0)}else ei(d,11)}else if((o.L||d.g==o)&&Fa(d),!S(c))for(D=d.Ba.g.parse(c),c=0;c<D.length;c++){let Ie=D[c];const Ye=Ie[0];if(!(Ye<=d.K))if(d.K=Ye,Ie=Ie[1],d.I==2)if(Ie[0]=="c"){d.M=Ie[1],d.ba=Ie[2];const En=Ie[3];En!=null&&(d.ka=En,d.j.info("VER="+d.ka));const ti=Ie[4];ti!=null&&(d.za=ti,d.j.info("SVER="+d.za));const hr=Ie[5];hr!=null&&typeof hr=="number"&&hr>0&&(g=1.5*hr,d.O=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const dr=o.g;if(dr){const Ba=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ba){var N=g.h;N.g||Ba.indexOf("spdy")==-1&&Ba.indexOf("quic")==-1&&Ba.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(sr(N,N.h),N.h=null))}if(g.G){const Xu=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Xu&&(g.wa=Xu,Se(g.J,g.G,Xu))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-o.F,d.j.info("Handshake RTT: "+d.T+"ms")),g=d;var q=o;if(g.na=jf(g,g.L?g.ba:null,g.W),q.L){ka(g.h,q);var le=q,He=g.O;He&&(le.H=He),le.D&&(Yr(le),Di(le)),g.g=q}else Pf(g);d.i.length>0&&Ma(d)}else Ie[0]!="stop"&&Ie[0]!="close"||ei(d,7);else d.I==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?ei(d,7):Qu(d):Ie[0]!="noop"&&d.l&&d.l.qa(Ie),d.A=0)}}Nn(4)}catch{}}var Ku=class{constructor(o,c){this.g=o,this.map=c}};function zs(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xr(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Aa(o){return o.h?1:o.g?o.g.size:0}function Bs(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function sr(o,c){o.g?o.g.add(c):o.h=c}function ka(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}zs.prototype.cancel=function(){if(this.i=Vi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Vi(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.G);return c}return R(o.i)}var Ni=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Us(o,c){if(o){o=o.split("&");for(let d=0;d<o.length;d++){const g=o[d].indexOf("=");let D,N=null;g>=0?(D=o[d].substring(0,g),N=o[d].substring(g+1)):D=o[d],c(D,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function yn(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;o instanceof yn?(this.l=o.l,or(this,o.j),this.o=o.o,this.g=o.g,vn(this,o.u),this.h=o.h,F(this,Ks(o.i)),this.m=o.m):o&&(c=String(o).match(Ni))?(this.l=!1,or(this,c[1]||"",!0),this.o=ar(c[2]||""),this.g=ar(c[3]||"",!0),vn(this,c[4]),this.h=ar(c[5]||"",!0),F(this,c[6]||"",!0),this.m=ar(c[7]||"")):(this.l=!1,this.i=new ur(null,this.l))}yn.prototype.toString=function(){const o=[];var c=this.j;c&&o.push(lr(c,$s,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(lr(c,$s,!0),"@"),o.push(Qr(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&o.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(lr(d,d.charAt(0)=="/"?Da:Pa,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",lr(d,Na)),o.join("")},yn.prototype.resolve=function(o){const c=qt(this);let d=!!o.j;d?or(c,o.j):d=!!o.o,d?c.o=o.o:d=!!o.g,d?c.g=o.g:d=o.u!=null;var g=o.h;if(d)vn(c,o.u);else if(d=!!o.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var D=c.h.lastIndexOf("/");D!=-1&&(g=c.h.slice(0,D+1)+g)}if(D=g,D==".."||D==".")g="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){g=D.lastIndexOf("/",0)==0,D=D.split("/");const N=[];for(let q=0;q<D.length;){const le=D[q++];le=="."?g&&q==D.length&&N.push(""):le==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),g&&q==D.length&&N.push("")):(N.push(le),g=!0)}g=N.join("/")}else g=D}return d?c.h=g:d=o.i.toString()!=="",d?F(c,Ks(o.i)):d=!!o.m,d&&(c.m=o.m),c};function qt(o){return new yn(o)}function or(o,c,d){o.j=d?ar(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function vn(o,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);o.u=c}else o.u=null}function F(o,c,d){c instanceof ur?(o.i=c,ba(o.i,o.l)):(d||(c=lr(c,Va)),o.i=new ur(c,o.l))}function Se(o,c,d){o.i.set(c,d)}function Zr(o){return Se(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function ar(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function lr(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,Ra),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Ra(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var $s=/[#\/\?@]/g,Pa=/[#\?:]/g,Da=/[#\?]/g,Va=/[#\?@]/g,Na=/#/g;function ur(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function _n(o){o.g||(o.g=new Map,o.h=0,o.i&&Us(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=ur.prototype,t.add=function(o,c){_n(this),this.i=null,o=On(this,o);let d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function Ws(o,c){_n(o),c=On(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Hs(o,c){return _n(o),c=On(o,c),o.g.has(c)}t.forEach=function(o,c){_n(this),this.g.forEach(function(d,g){d.forEach(function(D){o.call(c,D,g,this)},this)},this)};function qs(o,c){_n(o);let d=[];if(typeof c=="string")Hs(o,c)&&(d=d.concat(o.g.get(On(o,c))));else for(o=Array.from(o.g.values()),c=0;c<o.length;c++)d=d.concat(o[c]);return d}t.set=function(o,c){return _n(this),this.i=null,o=On(this,o),Hs(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=qs(this,o),o.length>0?String(o[0]):c):c};function Gs(o,c,d){Ws(o,c),d.length>0&&(o.i=null,o.g.set(On(o,c),R(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(let g=0;g<c.length;g++){var d=c[g];const D=Qr(d);d=qs(this,d);for(let N=0;N<d.length;N++){let q=D;d[N]!==""&&(q+="="+Qr(d[N])),o.push(q)}}return this.i=o.join("&")};function Ks(o){const c=new ur;return c.i=o.i,o.g&&(c.g=new Map(o.g),c.h=o.h),c}function On(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function ba(o,c){c&&!o.j&&(_n(o),o.i=null,o.g.forEach(function(d,g){const D=g.toLowerCase();g!=D&&(Ws(this,g),Gs(this,D,d))},o)),o.j=c}function ja(o,c){const d=new jn;if(a.Image){const g=new Image;g.onload=m(I,d,"TestLoadImage: loaded",!0,c,g),g.onerror=m(I,d,"TestLoadImage: error",!1,c,g),g.onabort=m(I,d,"TestLoadImage: abort",!1,c,g),g.ontimeout=m(I,d,"TestLoadImage: timeout",!1,c,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else c(!1)}function p(o,c){const d=new jn,g=new AbortController,D=setTimeout(()=>{g.abort(),I(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:g.signal}).then(N=>{clearTimeout(D),N.ok?I(d,"TestPingServer: ok",!0,c):I(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(D),I(d,"TestPingServer: error",!1,c)})}function I(o,c,d,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(d)}catch{}}function V(){this.g=new Wu}function j(o){this.i=o.Sb||null,this.h=o.ab||!1}v(j,Ea),j.prototype.g=function(){return new Y(this.i,this.h)};function Y(o,c){ze.call(this),this.H=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Y,ze),t=Y.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=c,this.readyState=1,ye(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(c.body=o),(this.H||a).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ae(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ye(this)),this.g&&(this.readyState=3,ye(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ee(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function ee(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?ae(this):ye(this),this.readyState==3&&ee(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,ae(this))},t.Na=function(o){this.g&&(this.response=o,ae(this))},t.ga=function(){this.g&&ae(this)};function ae(o){o.readyState=4,o.l=null,o.j=null,o.B=null,ye(o)}t.setRequestHeader=function(o,c){this.A.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function ye(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Y.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Vt(o){let c="";return X(o,function(d,g){c+=g,c+=":",c+=d,c+=`\r
`}),c}function ge(o,c,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=Vt(d),typeof o=="string"?d!=null&&Qr(d):Se(o,c,d))}function ce(o){ze.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(ce,ze);var Nt=/^https?$/i,Mn=["POST","PUT"];t=ce.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,c,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pi.g(),this.g.onreadystatechange=_(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(N){Qs(this,N);return}if(o=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)d.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const N of g.keys())d.set(N,g.get(N));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(N=>N.toLowerCase()=="content-type"),D=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(Mn,c,void 0)>=0)||g||D||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,q]of d)this.g.setRequestHeader(N,q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(N){Qs(this,N)}};function Qs(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.o=5,Sf(o),La(o)}function Sf(o){o.A||(o.A=!0,Te(o,"complete"),Te(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,Te(this,"complete"),Te(this,"abort"),La(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),La(this,!0)),ce.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?If(this):this.Xa())},t.Xa=function(){If(this)};function If(o){if(o.h&&typeof s<"u"){if(o.v&&cr(o)==4)setTimeout(o.Ca.bind(o),0);else if(Te(o,"readystatechange"),cr(o)==4){o.h=!1;try{const N=o.ca();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var g;if(g=N===0){let q=String(o.D).match(Ni)[1]||null;!q&&a.self&&a.self.location&&(q=a.self.location.protocol.slice(0,-1)),g=!Nt.test(q?q.toLowerCase():"")}d=g}if(d)Te(o,"complete"),Te(o,"success");else{o.o=6;try{var D=cr(o)>2?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.ca()+"]",Sf(o)}}finally{La(o)}}}}function La(o,c){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const d=o.g;o.g=null,c||Te(o,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function cr(o){return o.g?o.g.readyState:0}t.ca=function(){try{return cr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),_a(c)}};function Cf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function n_(o){const c={};o=(o.g&&cr(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(S(o[g]))continue;var d=Hu(o[g]);const D=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const N=c[D]||[];c[D]=N,N.push(d)}ie(c,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ys(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function xf(o){this.za=0,this.i=[],this.j=new jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ys("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ys("baseRetryDelayMs",5e3,o),this.Za=Ys("retryDelaySeedMs",1e4,o),this.Ta=Ys("forwardChannelMaxRetries",2,o),this.va=Ys("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new zs(o&&o.concurrentRequestLimit),this.Ba=new V,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=xf.prototype,t.ka=8,t.I=1,t.connect=function(o,c,d,g){re(0),this.W=o,this.H=c||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.J=jf(this,null,this.W),Ma(this)};function Qu(o){if(Af(o),o.I==3){var c=o.V++,d=qt(o.J);if(Se(d,"SID",o.M),Se(d,"RID",c),Se(d,"TYPE","terminate"),Js(o,d),c=new gn(o,o.j,c),c.M=2,c.A=Zr(qt(d)),d=!1,a.navigator&&a.navigator.sendBeacon)try{d=a.navigator.sendBeacon(c.A.toString(),"")}catch{}!d&&a.Image&&(new Image().src=c.A,d=!0),d||(c.g=Lf(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Di(c)}bf(o)}function Oa(o){o.g&&(Ju(o),o.g.cancel(),o.g=null)}function Af(o){Oa(o),o.v&&(a.clearTimeout(o.v),o.v=null),Fa(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function Ma(o){if(!Xr(o.h)&&!o.m){o.m=!0;var c=o.Ea;H||y(),G||(H(),G=!0),E.add(c,o),o.D=0}}function r_(o,c){return Aa(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=c.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=bn(h(o.Ea,o,c),Nf(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const D=new gn(this,this.j,o);let N=this.o;if(this.U&&(N?(N=_e(N),$t(N,this.U)):N=this.U),this.u!==null||this.R||(D.J=N,N=null),this.S)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(c+=g,c>4096){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Rf(this,D,c),d=qt(this.J),Se(d,"RID",o),Se(d,"CVER",22),this.G&&Se(d,"X-HTTP-Session-Id",this.G),Js(this,d),N&&(this.R?c="headers="+Qr(Vt(N))+"&"+c:this.u&&ge(d,this.u,N)),sr(this.h,D),this.Ra&&Se(d,"TYPE","init"),this.S?(Se(d,"$req",c),Se(d,"SID","null"),D.U=!0,Ms(D,d,null)):Ms(D,d,c),this.I=2}}else this.I==3&&(o?kf(this,o):this.i.length==0||Xr(this.h)||kf(this))};function kf(o,c){var d;c?d=c.l:d=o.V++;const g=qt(o.J);Se(g,"SID",o.M),Se(g,"RID",d),Se(g,"AID",o.K),Js(o,g),o.u&&o.o&&ge(g,o.u,o.o),d=new gn(o,o.j,d,o.D+1),o.u===null&&(d.J=o.o),c&&(o.i=c.G.concat(o.i)),c=Rf(o,d,1e3),d.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),sr(o.h,d),Ms(d,g,c)}function Js(o,c){o.H&&X(o.H,function(d,g){Se(c,g,d)}),o.l&&X({},function(d,g){Se(c,g,d)})}function Rf(o,c,d){d=Math.min(o.i.length,d);const g=o.l?h(o.l.Ka,o.l,o):null;e:{var D=o.i;let le=-1;for(;;){const He=["count="+d];le==-1?d>0?(le=D[0].g,He.push("ofs="+le)):le=0:He.push("ofs="+le);let Ie=!0;for(let Ye=0;Ye<d;Ye++){var N=D[Ye].g;const En=D[Ye].map;if(N-=le,N<0)le=Math.max(0,D[Ye].g-100),Ie=!1;else try{N="req"+N+"_"||"";try{var q=En instanceof Map?En:Object.entries(En);for(const[ti,hr]of q){let dr=hr;l(hr)&&(dr=Ds(hr)),He.push(N+ti+"="+encodeURIComponent(dr))}}catch(ti){throw He.push(N+"type="+encodeURIComponent("_badmap")),ti}}catch{g&&g(En)}}if(Ie){q=He.join("&");break e}}q=void 0}return o=o.i.splice(0,d),c.G=o,q}function Pf(o){if(!o.g&&!o.v){o.Y=1;var c=o.Da;H||y(),G||(H(),G=!0),E.add(c,o),o.A=0}}function Yu(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=bn(h(o.Da,o),Nf(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,Df(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=bn(h(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,re(10),Oa(this),Df(this))};function Ju(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function Df(o){o.g=new gn(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var c=qt(o.na);Se(c,"RID","rpc"),Se(c,"SID",o.M),Se(c,"AID",o.K),Se(c,"CI",o.F?"0":"1"),!o.F&&o.ia&&Se(c,"TO",o.ia),Se(c,"TYPE","xmlhttp"),Js(o,c),o.u&&o.o&&ge(c,o.u,o.o),o.O&&(o.g.H=o.O);var d=o.g;o=o.ba,d.M=1,d.A=Zr(qt(c)),d.u=null,d.R=!0,Ia(d,o)}t.Va=function(){this.C!=null&&(this.C=null,Oa(this),Yu(this),re(19))};function Fa(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Vf(o,c){var d=null;if(o.g==c){Fa(o),Ju(o),o.g=null;var g=2}else if(Bs(o.h,c))d=c.G,ka(o.h,c),g=1;else return;if(o.I!=0){if(c.o)if(g==1){d=c.u?c.u.length:0,c=Date.now()-c.F;var D=o.D;g=rr(),Te(g,new Gr(g,d)),Ma(o)}else Pf(o);else if(D=c.m,D==3||D==0&&c.X>0||!(g==1&&r_(o,c)||g==2&&Yu(o)))switch(d&&d.length>0&&(c=o.h,c.i=c.i.concat(d)),D){case 1:ei(o,5);break;case 4:ei(o,10);break;case 3:ei(o,6);break;default:ei(o,2)}}}function Nf(o,c){let d=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(d*=2),d*c}function ei(o,c){if(o.j.info("Error code "+c),c==2){var d=h(o.bb,o),g=o.Ua;const D=!g;g=new yn(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||or(g,"https"),Zr(g),D?ja(g.toString(),d):p(g.toString(),d)}else re(2);o.I=0,o.l&&o.l.pa(c),bf(o),Af(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),re(2)):(this.j.info("Failed to ping google.com"),re(1))};function bf(o){if(o.I=0,o.ja=[],o.l){const c=Vi(o.h);(c.length!=0||o.i.length!=0)&&(b(o.ja,c),b(o.ja,o.i),o.h.i.length=0,R(o.i),o.i.length=0),o.l.oa()}}function jf(o,c,d){var g=d instanceof yn?qt(d):new yn(d);if(g.g!="")c&&(g.g=c+"."+g.g),vn(g,g.u);else{var D=a.location;g=D.protocol,c=c?c+"."+D.hostname:D.hostname,D=+D.port;const N=new yn(null);g&&or(N,g),c&&(N.g=c),D&&vn(N,D),d&&(N.h=d),g=N}return d=o.G,c=o.wa,d&&c&&Se(g,d,c),Se(g,"VER",o.ka),Js(o,g),g}function Lf(o,c,d){if(c&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Aa&&!o.ma?new ce(new j({ab:d})):new ce(o.ma),c.Fa(o.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Of(){}t=Of.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function za(){}za.prototype.g=function(o,c){return new bt(o,c)};function bt(o,c){ze.call(this),this.g=new xf(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(o?o["X-WebChannel-Client-Profile"]=c.sa:o={"X-WebChannel-Client-Profile":c.sa}),this.g.U=o,(o=c&&c.Qb)&&!S(o)&&(this.g.u=o),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!S(c)&&(this.g.G=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new bi(this)}v(bt,ze),bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){Qu(this.g)},bt.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.v&&(d={},d.__data__=Ds(o),o=d);c.i.push(new Ku(c.Ya++,o)),c.I==3&&Ma(c)},bt.prototype.N=function(){this.g.l=null,delete this.j,Qu(this.g),delete this.g,bt.Z.N.call(this)};function Mf(o){Ht.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const d in c){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}v(Mf,Ht);function Ff(){Vs.call(this),this.status=1}v(Ff,Vs);function bi(o){this.g=o}v(bi,Of),bi.prototype.ra=function(){Te(this.g,"a")},bi.prototype.qa=function(o){Te(this.g,new Mf(o))},bi.prototype.pa=function(o){Te(this.g,new Ff)},bi.prototype.oa=function(){Te(this.g,"b")},za.prototype.createWebChannel=za.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,Vv=function(){return new za},Dv=function(){return rr()},Pv=ut,Vh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Kr.NO_ERROR=0,Kr.TIMEOUT=8,Kr.HTTP_ERROR=6,Sl=Kr,Ns.COMPLETE="complete",Rv=Ns,wa.EventType=tr,tr.OPEN="a",tr.CLOSE="b",tr.ERROR="c",tr.MESSAGE="d",ze.prototype.listen=ze.prototype.J,mo=wa,ce.prototype.listenOnce=ce.prototype.K,ce.prototype.getLastError=ce.prototype.Ha,ce.prototype.getLastErrorCode=ce.prototype.ya,ce.prototype.getStatus=ce.prototype.ca,ce.prototype.getResponseJson=ce.prototype.La,ce.prototype.getResponseText=ce.prototype.la,ce.prototype.send=ce.prototype.ea,ce.prototype.setWithCredentials=ce.prototype.Fa,kv=ce}).apply(typeof sl<"u"?sl:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cs="12.8.0";function yT(t){Cs=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=new wv("@firebase/firestore");function Oi(){return yi.logLevel}function K(t,...e){if(yi.logLevel<=pe.DEBUG){const n=e.map(Hd);yi.debug(`Firestore (${Cs}): ${t}`,...n)}}function Jn(t,...e){if(yi.logLevel<=pe.ERROR){const n=e.map(Hd);yi.error(`Firestore (${Cs}): ${t}`,...n)}}function ms(t,...e){if(yi.logLevel<=pe.WARN){const n=e.map(Hd);yi.warn(`Firestore (${Cs}): ${t}`,...n)}}function Hd(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Nv(t,r,n)}function Nv(t,e,n){let r=`FIRESTORE (${Cs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Jn(r),new Error(r)}function ve(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Nv(e,i,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Is{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ft.UNAUTHENTICATED))}shutdown(){}}class _T{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ET{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Vr,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Vr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new bv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new ft(e)}}class wT{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class TT{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new wT(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class am{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ST{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,eT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ve(this.o===void 0,3512);const r=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,K("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new am(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new am(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=IT(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function Nh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Rc(i)===Rc(s)?he(i,s):Rc(i)?1:-1}return he(t.length,e.length)}const CT=55296,xT=57343;function Rc(t){const e=t.charCodeAt(0);return e>=CT&&e<=xT}function gs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="__name__";class In{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return In.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof In?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=In.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return he(e.length,n.length)}static compareSegments(e,n){const r=In.isNumericId(e),i=In.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?In.extractNumericId(e).compare(In.extractNumericId(n)):Nh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Dr.fromString(e.substring(4,e.length-2))}}class De extends In{construct(e,n,r){return new De(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new De(n)}static emptyPath(){return new De([])}}const AT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends In{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return AT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lm}static keyField(){return new rt([lm])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new J(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new J(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new J(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(De.fromString(e))}static fromName(e){return new Z(De.fromString(e).popFirst(5))}static empty(){return new Z(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&De.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return De.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new De(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t,e,n){if(!n)throw new J(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RT(t,e,n,r){if(e===!0&&r===!0)throw new J(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function um(t){if(!Z.isDocumentKey(t))throw new J(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Gd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function Zo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gd(t);throw new J(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t,e){const n={typeString:t};return e&&(n.value=e),n}function da(t,e){if(!jv(t))throw new J(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new J(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm=-62135596800,hm=1e6;class Ae{static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hm);return new Ae(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<cm)throw new J(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hm}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(da(e,Ae._jsonSchema))return new Ae(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:$e("string",Ae._jsonSchemaVersion),seconds:$e("number"),nanoseconds:$e("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{static fromTimestamp(e){return new se(e)}static min(){return new se(new Ae(0,0))}static max(){return new se(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=-1;function PT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new jr(i,Z.empty(),e)}function DT(t){return new jr(t.readTime,t.key,ea)}class jr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new jr(se.min(),Z.empty(),ea)}static max(){return new jr(se.max(),Z.empty(),ea)}}function VT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xs(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==NT)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},u=>r(u))}),a=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(m=>{a[h]=m,++l,l===s&&r(a)},m=>i(m))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function jT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function As(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd=-1;function Nu(t){return t==null}function iu(t){return t===0&&1/t==-1/0}function LT(t){return typeof t=="number"&&Number.isInteger(t)&&!iu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="";function OT(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=dm(e)),e=MT(t.get(n),e);return dm(e)}function MT(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Lv:n+="";break;default:n+=s}}return n}function dm(t){return t+Lv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ov(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||nt.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ol(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ol(this.root,e,this.comparator,!1)}getReverseIterator(){return new ol(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ol(this.root,e,this.comparator,!0)}}class ol{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??nt.RED,this.left=i??nt.EMPTY,this.right=s??nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new nt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return nt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1;nt.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pm(this.data.getIterator())}getIteratorFrom(e){return new pm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qe(this.comparator);return n.data=e,n}}class pm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new cn([])}unionWith(e){let n=new Qe(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Mv("Invalid base64 string: "+s):s}}(e);return new ot(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const FT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(t){if(ve(!!t,39018),typeof t=="string"){let e=0;const n=FT.exec(t);if(ve(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="server_timestamp",zv="__type__",Bv="__previous_value__",Uv="__local_write_time__";function Qd(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[zv])==null?void 0:r.stringValue)===Fv}function bu(t){const e=t.mapValue.fields[Bv];return Qd(e)?bu(e):e}function ta(t){const e=Lr(t.mapValue.fields[Uv].timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n,r,i,s,a,l,u,h,m,v){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=m,this.apiKey=v}}const su="(default)";class na{constructor(e,n){this.projectId=e,this.database=n||su}static empty(){return new na("","")}get isDefaultDatabase(){return this.database===su}isEqual(e){return e instanceof na&&e.projectId===this.projectId&&e.database===this.database}}function BT(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new J(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new na(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="__type__",UT="__max__",al={mapValue:{}},Wv="__vector__",ou="value";function Mr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qd(t)?4:WT(t)?9007199254740991:$T(t)?10:11:te(28295,{value:t})}function Dn(t,e){if(t===e)return!0;const n=Mr(t);if(n!==Mr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ta(t).isEqual(ta(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Lr(i.timestampValue),l=Lr(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Or(i.bytesValue).isEqual(Or(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Me(i.geoPointValue.latitude)===Me(s.geoPointValue.latitude)&&Me(i.geoPointValue.longitude)===Me(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Me(i.integerValue)===Me(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Me(i.doubleValue),l=Me(s.doubleValue);return a===l?iu(a)===iu(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return gs(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(fm(a)!==fm(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Dn(a[u],l[u])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function ra(t,e){return(t.values||[]).find(n=>Dn(n,e))!==void 0}function ys(t,e){if(t===e)return 0;const n=Mr(t),r=Mr(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Me(s.integerValue||s.doubleValue),u=Me(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return mm(t.timestampValue,e.timestampValue);case 4:return mm(ta(t),ta(e));case 5:return Nh(t.stringValue,e.stringValue);case 6:return function(s,a){const l=Or(s),u=Or(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const m=he(l[h],u[h]);if(m!==0)return m}return he(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=he(Me(s.latitude),Me(a.latitude));return l!==0?l:he(Me(s.longitude),Me(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gm(t.arrayValue,e.arrayValue);case 10:return function(s,a){var _,R,b,L;const l=s.fields||{},u=a.fields||{},h=(_=l[ou])==null?void 0:_.arrayValue,m=(R=u[ou])==null?void 0:R.arrayValue,v=he(((b=h==null?void 0:h.values)==null?void 0:b.length)||0,((L=m==null?void 0:m.values)==null?void 0:L.length)||0);return v!==0?v:gm(h,m)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===al.mapValue&&a===al.mapValue)return 0;if(s===al.mapValue)return 1;if(a===al.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let v=0;v<u.length&&v<m.length;++v){const _=Nh(u[v],m[v]);if(_!==0)return _;const R=ys(l[u[v]],h[m[v]]);if(R!==0)return R}return he(u.length,m.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function mm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=Lr(t),r=Lr(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function gm(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ys(n[i],r[i]);if(s)return s}return he(n.length,r.length)}function vs(t){return bh(t)}function bh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Lr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Or(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=bh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${bh(n.fields[a])}`;return i+"}"}(t.mapValue):te(61005,{value:t})}function Il(t){switch(Mr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bu(t);return e?16+Il(e):16;case 5:return 2*t.stringValue.length;case 6:return Or(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Il(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return wi(r.fields,(s,a)=>{i+=s.length+Il(a)}),i}(t.mapValue);default:throw te(13486,{value:t})}}function jh(t){return!!t&&"integerValue"in t}function Yd(t){return!!t&&"arrayValue"in t}function ym(t){return!!t&&"nullValue"in t}function vm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cl(t){return!!t&&"mapValue"in t}function $T(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[$v])==null?void 0:r.stringValue)===Wv}function Ro(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return wi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ro(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ro(t.arrayValue.values[n]);return e}return{...t}}function WT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===UT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Cl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ro(n)}setAll(e){let n=rt.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=Ro(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Cl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Cl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){wi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Yt(Ro(this.value))}}function Hv(t){const e=[];return wi(t.fields,(n,r)=>{const i=new rt([n]);if(Cl(r)){const s=Hv(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new mt(e,0,se.min(),se.min(),se.min(),Yt.empty(),0)}static newFoundDocument(e,n,r,i){return new mt(e,1,n,se.min(),r,i,0)}static newNoDocument(e,n){return new mt(e,2,n,se.min(),se.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,se.min(),se.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n){this.position=e,this.inclusive=n}}function _m(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=Z.comparator(Z.fromName(a.referenceValue),n.key):r=ys(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Em(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n="asc"){this.field=e,this.dir=n}}function HT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{}class Ge extends qv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new GT(e,n,r):n==="array-contains"?new YT(e,r):n==="in"?new JT(e,r):n==="not-in"?new XT(e,r):n==="array-contains-any"?new ZT(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new KT(e,r):new QT(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ys(n,this.value)):n!==null&&Mr(this.value)===Mr(n)&&this.matchesComparison(ys(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vn extends qv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Vn(e,n)}matches(e){return Gv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Gv(t){return t.op==="and"}function Kv(t){return qT(t)&&Gv(t)}function qT(t){for(const e of t.filters)if(e instanceof Vn)return!1;return!0}function Lh(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+vs(t.value);if(Kv(t))return t.filters.map(e=>Lh(e)).join(",");{const e=t.filters.map(n=>Lh(n)).join(",");return`${t.op}(${e})`}}function Qv(t,e){return t instanceof Ge?function(r,i){return i instanceof Ge&&r.op===i.op&&r.field.isEqual(i.field)&&Dn(r.value,i.value)}(t,e):t instanceof Vn?function(r,i){return i instanceof Vn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&Qv(a,i.filters[l]),!0):!1}(t,e):void te(19439)}function Yv(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${vs(n.value)}`}(t):t instanceof Vn?function(n){return n.op.toString()+" {"+n.getFilters().map(Yv).join(" ,")+"}"}(t):"Filter"}class GT extends Ge{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class KT extends Ge{constructor(e,n){super(e,"in",n),this.keys=Jv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QT extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=Jv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Jv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class YT extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yd(n)&&ra(n.arrayValue,this.value)}}class JT extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ra(this.value.arrayValue,n)}}class XT extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(ra(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ra(this.value.arrayValue,n)}}class ZT extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ra(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function wm(t,e=null,n=[],r=[],i=null,s=null,a=null){return new eS(t,e,n,r,i,s,a)}function Jd(t){const e=oe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Lh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Nu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vs(r)).join(",")),e.Te=n}return e.Te}function Xd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!HT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Qv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Em(t.startAt,e.startAt)&&Em(t.endAt,e.endAt)}function Oh(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function tS(t,e,n,r,i,s,a,l){return new ju(t,e,n,r,i,s,a,l)}function Zd(t){return new ju(t)}function Tm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nS(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function rS(t){return t.collectionGroup!==null}function Po(t){const e=oe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Qe(rt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new lu(s,r))}),n.has(rt.keyField().canonicalString())||e.Ie.push(new lu(rt.keyField(),r))}return e.Ie}function kn(t){const e=oe(t);return e.Ee||(e.Ee=iS(e,Po(t))),e.Ee}function iS(t,e){if(t.limitType==="F")return wm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new lu(i.field,s)});const n=t.endAt?new au(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new au(t.startAt.position,t.startAt.inclusive):null;return wm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Mh(t,e,n){return new ju(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lu(t,e){return Xd(kn(t),kn(e))&&t.limitType===e.limitType}function Xv(t){return`${Jd(kn(t))}|lt:${t.limitType}`}function Mi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Yv(i)).join(", ")}]`),Nu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>vs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>vs(i)).join(",")),`Target(${r})`}(kn(t))}; limitType=${t.limitType})`}function Ou(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Po(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,u){const h=_m(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,Po(r),i)||r.endAt&&!function(a,l,u){const h=_m(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,Po(r),i))}(t,e)}function sS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Zv(t){return(e,n)=>{let r=!1;for(const i of Po(t)){const s=oS(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function oS(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?ys(u,h):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Ov(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=new be(Z.comparator);function Xn(){return aS}const e0=new be(Z.comparator);function go(...t){let e=e0;for(const n of t)e=e.insert(n.key,n);return e}function t0(t){let e=e0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function li(){return Do()}function n0(){return Do()}function Do(){return new Ti(t=>t.toString(),(t,e)=>t.isEqual(e))}const lS=new be(Z.comparator),uS=new Qe(Z.comparator);function de(...t){let e=uS;for(const n of t)e=e.add(n);return e}const cS=new Qe(he);function hS(){return cS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iu(e)?"-0":e}}function r0(t){return{integerValue:""+t}}function dS(t,e){return LT(e)?r0(e):ef(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(){this._=void 0}}function fS(t,e,n){return t instanceof uu?function(i,s){const a={fields:{[zv]:{stringValue:Fv},[Uv]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Qd(s)&&(s=bu(s)),s&&(a.fields[Bv]=s),{mapValue:a}}(n,e):t instanceof ia?s0(t,e):t instanceof sa?o0(t,e):function(i,s){const a=i0(i,s),l=Sm(a)+Sm(i.Ae);return jh(a)&&jh(i.Ae)?r0(l):ef(i.serializer,l)}(t,e)}function pS(t,e,n){return t instanceof ia?s0(t,e):t instanceof sa?o0(t,e):n}function i0(t,e){return t instanceof cu?function(r){return jh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class uu extends Mu{}class ia extends Mu{constructor(e){super(),this.elements=e}}function s0(t,e){const n=a0(e);for(const r of t.elements)n.some(i=>Dn(i,r))||n.push(r);return{arrayValue:{values:n}}}class sa extends Mu{constructor(e){super(),this.elements=e}}function o0(t,e){let n=a0(e);for(const r of t.elements)n=n.filter(i=>!Dn(i,r));return{arrayValue:{values:n}}}class cu extends Mu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Sm(t){return Me(t.integerValue||t.doubleValue)}function a0(t){return Yd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function mS(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ia&&i instanceof ia||r instanceof sa&&i instanceof sa?gs(r.elements,i.elements,Dn):r instanceof cu&&i instanceof cu?Dn(r.Ae,i.Ae):r instanceof uu&&i instanceof uu}(t.transform,e.transform)}class gS{constructor(e,n){this.version=e,this.transformResults=n}}class Hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Hn}static exists(e){return new Hn(void 0,e)}static updateTime(e){return new Hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fu{}function l0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new c0(t.key,Hn.none()):new fa(t.key,t.data,Hn.none());{const n=t.data,r=Yt.empty();let i=new Qe(rt.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Si(t.key,r,new cn(i.toArray()),Hn.none())}}function yS(t,e,n){t instanceof fa?function(i,s,a){const l=i.value.clone(),u=Cm(i.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Si?function(i,s,a){if(!xl(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=Cm(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(u0(i)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Vo(t,e,n,r){return t instanceof fa?function(s,a,l,u){if(!xl(s.precondition,a))return l;const h=s.value.clone(),m=xm(s.fieldTransforms,u,a);return h.setAll(m),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Si?function(s,a,l,u){if(!xl(s.precondition,a))return l;const h=xm(s.fieldTransforms,u,a),m=a.data;return m.setAll(u0(s)),m.setAll(h),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(s,a,l){return xl(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function vS(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=i0(r.transform,i||null);s!=null&&(n===null&&(n=Yt.empty()),n.set(r.field,s))}return n||null}function Im(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gs(r,i,(s,a)=>mS(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fa extends Fu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Si extends Fu{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function u0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Cm(t,e,n){const r=new Map;ve(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,pS(a,l,n[i]))}return r}function xm(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,fS(s,a,e))}return r}class c0 extends Fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _S extends Fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&yS(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=n0();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const u=l0(a,l);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&gs(this.mutations,e.mutations,(n,r)=>Im(n,r))&&gs(this.baseMutations,e.baseMutations,(n,r)=>Im(n,r))}}class tf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return lS}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new tf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,fe;function SS(t){switch(t){case z.OK:return te(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function h0(t){if(t===void 0)return Jn("GRPC error has no .code"),z.UNKNOWN;switch(t){case Be.OK:return z.OK;case Be.CANCELLED:return z.CANCELLED;case Be.UNKNOWN:return z.UNKNOWN;case Be.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Be.INTERNAL:return z.INTERNAL;case Be.UNAVAILABLE:return z.UNAVAILABLE;case Be.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Be.NOT_FOUND:return z.NOT_FOUND;case Be.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Be.ABORTED:return z.ABORTED;case Be.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Be.DATA_LOSS:return z.DATA_LOSS;default:return te(39323,{code:t})}}(fe=Be||(Be={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=new Dr([4294967295,4294967295],0);function Am(t){const e=IS().encode(t),n=new Av;return n.update(e),new Uint8Array(n.digest())}function km(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Dr([n,r],0),new Dr([i,s],0)]}class nf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yo(`Invalid padding: ${n}`);if(r<0)throw new yo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Dr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Dr.fromNumber(r)));return i.compare(CS)===1&&(i=new Dr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Am(e),[r,i]=km(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new nf(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=Am(e),[r,i]=km(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.be(a)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,pa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zu(se.min(),i,new be(he),Xn(),de())}}class pa{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pa(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class d0{constructor(e,n){this.targetId=e,this.Ce=n}}class f0{constructor(e,n,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Rm{constructor(){this.ve=0,this.Fe=Pm(),this.Me=ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=de(),n=de(),r=de();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te(38017,{changeType:s})}}),new pa(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Pm()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class xS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xn(),this.He=ll(),this.Je=ll(),this.Ze=new be(he)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Oh(s))if(r===0){const a=new Z(s.path);this.et(n,a,mt.newNoDocument(a,se.min()))}else ve(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=Or(r).toUint8Array()}catch(u){if(u instanceof Mv)return ms("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new nf(a,i,s)}catch(u){return ms(u instanceof yo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&Oh(l.target)){const u=new Z(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,mt.newNoDocument(u,e))}s.Be&&(n.set(a,s.ke()),s.Ke())}});let r=de();this.Je.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const i=new zu(e,n,this.Ze,this.je,r);return this.je=Xn(),this.He=ll(),this.Je=ll(),this.Ze=new be(he),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Rm,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Qe(he),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Qe(he),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Rm),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ll(){return new be(Z.comparator)}function Pm(){return new be(Z.comparator)}const AS={asc:"ASCENDING",desc:"DESCENDING"},kS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RS={and:"AND",or:"OR"};class PS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fh(t,e){return t.useProto3Json||Nu(e)?e:{value:e}}function hu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function p0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function DS(t,e){return hu(t,e.toTimestamp())}function Rn(t){return ve(!!t,49232),se.fromTimestamp(function(n){const r=Lr(n);return new Ae(r.seconds,r.nanos)}(t))}function rf(t,e){return zh(t,e).canonicalString()}function zh(t,e){const n=function(i){return new De(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function m0(t){const e=De.fromString(t);return ve(E0(e),10190,{key:e.toString()}),e}function Bh(t,e){return rf(t.databaseId,e.path)}function Pc(t,e){const n=m0(e);if(n.get(1)!==t.databaseId.projectId)throw new J(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(y0(n))}function g0(t,e){return rf(t.databaseId,e)}function VS(t){const e=m0(t);return e.length===4?De.emptyPath():y0(e)}function Uh(t){return new De(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function y0(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Dm(t,e,n){return{name:Bh(t,e),fields:n.value.mapValue.fields}}function NS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:te(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,m){return h.useProto3Json?(ve(m===void 0||typeof m=="string",58123),ot.fromBase64String(m||"")):(ve(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),ot.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const m=h.code===void 0?z.UNKNOWN:h0(h.code);return new J(m,h.message||"")}(a);n=new f0(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Pc(t,r.document.name),s=Rn(r.document.updateTime),a=r.document.createTime?Rn(r.document.createTime):se.min(),l=new Yt({mapValue:{fields:r.document.fields}}),u=mt.newFoundDocument(i,s,a,l),h=r.targetIds||[],m=r.removedTargetIds||[];n=new Al(h,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Pc(t,r.document),s=r.readTime?Rn(r.readTime):se.min(),a=mt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Al([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Pc(t,r.document),s=r.removedTargetIds||[];n=new Al([],s,i,null)}else{if(!("filter"in e))return te(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new TS(i,s),l=r.targetId;n=new d0(l,a)}}return n}function bS(t,e){let n;if(e instanceof fa)n={update:Dm(t,e.key,e.value)};else if(e instanceof c0)n={delete:Bh(t,e.key)};else if(e instanceof Si)n={update:Dm(t,e.key,e.data),updateMask:$S(e.fieldMask)};else{if(!(e instanceof _S))return te(16599,{dt:e.type});n={verify:Bh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof uu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ia)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof sa)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof cu)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw te(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:DS(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te(27497)}(t,e.precondition)),n}function jS(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(n=>function(i,s){let a=i.updateTime?Rn(i.updateTime):Rn(s);return a.isEqual(se.min())&&(a=Rn(s)),new gS(a,i.transformResults||[])}(n,e))):[]}function LS(t,e){return{documents:[g0(t,e.path)]}}function OS(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=g0(t,i);const s=function(h){if(h.length!==0)return _0(Vn.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(m=>function(_){return{field:Fi(_.field),direction:zS(_.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Fh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:i}}function MS(t){let e=VS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ve(r===1,65062);const m=n.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];n.where&&(s=function(v){const _=v0(v);return _ instanceof Vn&&Kv(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(v){return v.map(_=>function(b){return new lu(zi(b.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(v){let _;return _=typeof v=="object"?v.value:v,Nu(_)?null:_}(n.limit));let u=null;n.startAt&&(u=function(v){const _=!!v.before,R=v.values||[];return new au(R,_)}(n.startAt));let h=null;return n.endAt&&(h=function(v){const _=!v.before,R=v.values||[];return new au(R,_)}(n.endAt)),tS(e,i,a,s,l,"F",u,h)}function FS(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function v0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zi(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=zi(n.unaryFilter.field);return Ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zi(n.unaryFilter.field);return Ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=zi(n.unaryFilter.field);return Ge.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(zi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Vn.create(n.compositeFilter.filters.map(r=>v0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function zS(t){return AS[t]}function BS(t){return kS[t]}function US(t){return RS[t]}function Fi(t){return{fieldPath:t.canonicalString()}}function zi(t){return rt.fromServerFormat(t.fieldPath)}function _0(t){return t instanceof Ge?function(n){if(n.op==="=="){if(vm(n.value))return{unaryFilter:{field:Fi(n.field),op:"IS_NAN"}};if(ym(n.value))return{unaryFilter:{field:Fi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vm(n.value))return{unaryFilter:{field:Fi(n.field),op:"IS_NOT_NAN"}};if(ym(n.value))return{unaryFilter:{field:Fi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fi(n.field),op:BS(n.op),value:n.value}}}(t):t instanceof Vn?function(n){const r=n.getFilters().map(i=>_0(i));return r.length===1?r[0]:{compositeFilter:{op:US(n.op),filters:r}}}(t):te(54877,{filter:t})}function $S(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function E0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function w0(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n,r,i,s=se.min(),a=se.min(),l=ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.yt=e}}function HS(t){const e=MS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this.Sn=new GS}addToCollectionParentIndex(e,n){return this.Sn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(jr.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(jr.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class GS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Qe(De.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qe(De.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T0=41943040;class Ct{static withCacheSize(e){return new Ct(e,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(T0,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new _s(0)}static ar(){return new _s(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="LruGarbageCollector",KS=1048576;function bm([t,e],[n,r]){const i=he(t,n);return i===0?he(e,r):i}class QS{constructor(e){this.Pr=e,this.buffer=new Qe(bm),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();bm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class YS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){K(Nm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){As(n)?K(Nm,"Ignoring IndexedDB error during garbage collection: ",n):await xs(n)}await this.Ar(3e5)})}}class JS{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(Vu.ce);const r=new QS(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(Vm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vm):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,s,a,l,u,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,a=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,l=Date.now(),this.removeTargets(e,r,n))).next(v=>(s=v,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(h=Date.now(),Oi()<=pe.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${v} documents in `+(h-u)+`ms
Total Duration: ${h-m}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:v})))}}function XS(t,e){return new JS(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(){this.changes=new Ti(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Vo(r.mutation,i,cn.empty(),Ae.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const i=li();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=go();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=li();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=Xn();const a=Do(),l=function(){return Do()}();return n.forEach((u,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof Si)?s=s.insert(h.key,h):m!==void 0?(a.set(h.key,m.mutation.getFieldMask()),Vo(m.mutation,h,m.mutation.getFieldMask(),Ae.now())):a.set(h.key,cn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,m)=>a.set(h,m)),n.forEach((h,m)=>l.set(h,new e2(m,a.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Do();let i=new be((a,l)=>a-l),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let m=r.get(u)||cn.empty();m=l.applyToLocalView(h,m),r.set(u,m);const v=(i.get(l.batchId)||de()).add(u);i=i.insert(l.batchId,v)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,m=u.value,v=n0();m.forEach(_=>{if(!s.has(_)){const R=l0(n.get(_),r.get(_));R!==null&&v.set(_,R),s=s.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,v))}return O.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return nS(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):rS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(li());let l=ea,u=s;return a.next(h=>O.forEach(h,(m,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),s.get(m)?O.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{u=u.insert(m,_)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,de())).next(m=>({batchId:l,changes:t0(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let i=go();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=go();return this.indexManager.getCollectionParents(e,s).next(l=>O.forEach(l,u=>{const h=function(v,_){return new ju(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(m=>{m.forEach((v,_)=>{a=a.insert(v,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((u,h)=>{const m=h.getKey();a.get(m)===null&&(a=a.insert(m,mt.newInvalidDocument(m)))});let l=go();return a.forEach((u,h)=>{const m=s.get(u);m!==void 0&&Vo(m.mutation,h,cn.empty(),Ae.now()),Ou(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return O.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Rn(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:HS(i.bundledQuery),readTime:Rn(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(){this.overlays=new be(Z.comparator),this.Lr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=li();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.bt(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Lr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=li(),s=n.length+1,a=new Z(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new be((h,m)=>h-m);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=s.get(h.largestBatchId);m===null&&(m=li(),s=s.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const l=li(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,m)=>l.set(h,m)),!(l.size()>=i)););return O.resolve(l)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new wS(n,r));let s=this.Lr.get(n);s===void 0&&(s=de(),this.Lr.set(n,s)),this.Lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(){this.kr=new Qe(Je.Kr),this.qr=new Qe(Je.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Je(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Je(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new Z(new De([])),r=new Je(n,e),i=new Je(n,e+1),s=[];return this.qr.forEachInRange([r,i],a=>{this.Wr(a),s.push(a.key)}),s}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Z(new De([])),r=new Je(n,e),i=new Je(n,e+1);let s=de();return this.qr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Je(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Z.comparator(e.key,n.key)||he(e.Hr,n.Hr)}static Ur(e,n){return he(e.Hr,n.Hr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Qe(Je.Kr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new ES(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.Jr=this.Jr.add(new Je(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,n){return O.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Kd:this.Yn-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),i=new Je(n,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],a=>{const l=this.Zr(a.Hr);s.push(l)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(he);return n.forEach(i=>{const s=new Je(i,0),a=new Je(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,a],l=>{r=r.add(l.Hr)})}),O.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Z.isDocumentKey(s)||(s=s.child(""));const a=new Je(new Z(s),0);let l=new Qe(he);return this.Jr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.Hr)),!0)},a),O.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ve(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return O.forEach(n.mutations,i=>{const s=new Je(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Je(n,0),i=this.Jr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.ti=e,this.docs=function(){return new be(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let r=Xn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mt.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Xn();const a=n.path,l=new Z(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||VT(DT(m),r)<=0||(i.has(m.key)||Ou(n,m))&&(s=s.insert(m.key,m.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te(9500)}ni(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new a2(this)}getSize(e){return O.resolve(this.size)}}class a2 extends ZS{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.persistence=e,this.ri=new Ti(n=>Jd(n),Xd),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.ii=0,this.si=new sf,this.targetCount=0,this.oi=_s._r()}forEachTarget(e,n){return this.ri.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),O.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new _s(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.lr(n),O.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ri.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,n){this._i={},this.overlays={},this.ai=new Vu(0),this.ui=!1,this.ui=!0,this.ci=new i2,this.referenceDelegate=e(this),this.li=new l2(this),this.indexManager=new qS,this.remoteDocumentCache=function(i){return new o2(i)}(r=>this.referenceDelegate.hi(r)),this.serializer=new WS(n),this.Pi=new n2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new r2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new s2(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const i=new u2(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(s=>this.referenceDelegate.Ii(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return O.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class u2 extends bT{constructor(e){super(),this.currentSequenceNumber=e}}class of{constructor(e){this.persistence=e,this.Ri=new sf,this.Ai=null}static Vi(e){return new of(e)}get di(){if(this.Ai)return this.Ai;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.di,r=>{const i=Z.fromPath(r);return this.mi(e,i).next(s=>{s||n.removeEntry(i,se.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class du{constructor(e,n){this.persistence=e,this.fi=new Ti(r=>OT(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=XS(this,n)}static Vi(e,n){return new du(e,n)}Ti(){}Ii(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return O.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(s=>s?O.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,a=>this.wr(e,a,n).next(l=>{l||(r++,s.removeEntry(a,se.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Il(e.data.value)),n}wr(e,n,r){return O.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=de(),i=de();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new af(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return JE()?8:jT(QE())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.gs(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ps(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new c2;return this.ys(e,n,a).next(l=>{if(s.result=l,this.As)return this.ws(e,n,a,l.size)})}).next(()=>s.result)}ws(e,n,r,i){return r.documentReadCount<this.Vs?(Oi()<=pe.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Mi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(Oi()<=pe.DEBUG&&K("QueryEngine","Query:",Mi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Oi()<=pe.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Mi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):O.resolve())}gs(e,n){if(Tm(n))return O.resolve(null);let r=kn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Mh(n,null,"F"),r=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=de(...s);return this.fs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.bs(n,l);return this.Ss(n,h,a,u.readTime)?this.gs(e,Mh(n,null,"F")):this.Ds(e,h,n,u)}))})))}ps(e,n,r,i){return Tm(n)||i.isEqual(se.min())?O.resolve(null):this.fs.getDocuments(e,r).next(s=>{const a=this.bs(n,s);return this.Ss(n,a,r,i)?O.resolve(null):(Oi()<=pe.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mi(n)),this.Ds(e,a,n,PT(i,ea)).next(l=>l))})}bs(e,n){let r=new Qe(Zv(e));return n.forEach((i,s)=>{Ou(e,s)&&(r=r.add(s))}),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,n,r){return Oi()<=pe.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Mi(n)),this.fs.getDocumentsMatchingQuery(e,n,jr.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="LocalStore",d2=3e8;class f2{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new be(he),this.Fs=new Ti(s=>Jd(s),Xd),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new t2(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function p2(t,e,n,r){return new f2(t,e,n,r)}async function I0(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let u=de();for(const h of i){a.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}for(const h of s){l.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ns:h,removedBatchIds:a,addedBatchIds:l}))})})}function m2(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,m){const v=h.batch,_=v.keys();let R=O.resolve();return _.forEach(b=>{R=R.next(()=>m.getEntry(u,b)).next(L=>{const $=h.docVersions.get(b);ve($!==null,48541),L.version.compareTo($)<0&&(v.applyToRemoteDocument(L,h),L.isValidDocument()&&(L.setReadTime(h.commitVersion),m.addEntry(L)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(u,v))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=de();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function C0(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function g2(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const l=[];e.targetChanges.forEach((m,v)=>{const _=i.get(v);if(!_)return;l.push(n.li.removeMatchingKeys(s,m.removedDocuments,v).next(()=>n.li.addMatchingKeys(s,m.addedDocuments,v)));let R=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(v)!==null?R=R.withResumeToken(ot.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):m.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(m.resumeToken,r)),i=i.insert(v,R),function(L,$,A){return L.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=d2?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(_,R,m)&&l.push(n.li.updateTargetData(s,R))});let u=Xn(),h=de();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,m))}),l.push(y2(s,a,e.documentUpdates).next(m=>{u=m.Bs,h=m.Ls})),!r.isEqual(se.min())){const m=n.li.getLastRemoteSnapshotVersion(s).next(v=>n.li.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(m)}return O.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.vs=i,s))}function y2(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Xn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):K(lf,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Bs:a,Ls:i}})}function v2(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Kd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _2(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.li.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.li.allocateTargetId(r).next(a=>(i=new Er(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function $h(t,e,n){const r=oe(t),i=r.vs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!As(a))throw a;K(lf,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function jm(t,e,n){const r=oe(t);let i=se.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,m){const v=oe(u),_=v.Fs.get(m);return _!==void 0?O.resolve(v.vs.get(_)):v.li.getTargetData(h,m)}(r,a,kn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?i:se.min(),n?s:de())).next(l=>(E2(r,sS(e),l),{documents:l,ks:s})))}function E2(t,e,n){let r=t.Ms.get(e)||se.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ms.set(e,r)}class Lm{constructor(){this.activeTargetIds=hS()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class w2{constructor(){this.vo=new Lm,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Lm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="ConnectivityMonitor";class Mm{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){K(Om,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){K(Om,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul=null;function Wh(){return ul===null?ul=function(){return 268435456+Math.round(2147483648*Math.random())}():ul++,"0x"+ul.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc="RestConnection",S2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class I2{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===su?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const a=Wh(),l=this.Qo(e,n.toUriEncodedString());K(Dc,`Sending RPC '${e}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,i,s);const{host:h}=new URL(l),m=$d(h);return this.zo(e,l,u,r,m).then(v=>(K(Dc,`Received RPC '${e}' ${a}: `,v),v),v=>{throw ms(Dc,`RPC '${e}' ${a} failed with error: `,v,"url: ",l,"request:",r),v})}jo(e,n,r,i,s,a){return this.Wo(e,n,r,i,s)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Qo(e,n){const r=S2[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt="WebChannelConnection",oo=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(i){setTimeout(()=>{throw i},0)}})};class os extends I2{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!os.c_){const e=Dv();oo(e,Pv.STAT_EVENT,n=>{n.stat===Vh.PROXY?K(dt,"STAT_EVENT: detected buffering proxy"):n.stat===Vh.NOPROXY&&K(dt,"STAT_EVENT: detected no buffering proxy")}),os.c_=!0}}zo(e,n,r,i,s){const a=Wh();return new Promise((l,u)=>{const h=new kv;h.setWithCredentials(!0),h.listenOnce(Rv.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Sl.NO_ERROR:const v=h.getResponseJson();K(dt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),l(v);break;case Sl.TIMEOUT:K(dt,`RPC '${e}' ${a} timed out`),u(new J(z.DEADLINE_EXCEEDED,"Request time out"));break;case Sl.HTTP_ERROR:const _=h.getStatus();if(K(dt,`RPC '${e}' ${a} failed with status:`,_,"response text:",h.getResponseText()),_>0){let R=h.getResponseJson();Array.isArray(R)&&(R=R[0]);const b=R==null?void 0:R.error;if(b&&b.status&&b.message){const L=function(A){const T=A.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(T)>=0?T:z.UNKNOWN}(b.status);u(new J(L,b.message))}else u(new J(z.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new J(z.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{K(dt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(i);K(dt,`RPC '${e}' ${a} sending request:`,i),h.send(n,"POST",m,r,15)})}T_(e,n,r){const i=Wh(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");K(dt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const m=a.createWebChannel(h,l);this.I_(m);let v=!1,_=!1;const R=new C2({Ho:b=>{_?K(dt,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(v||(K(dt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),K(dt,`RPC '${e}' stream ${i} sending:`,b),m.send(b))},Jo:()=>m.close()});return oo(m,mo.EventType.OPEN,()=>{_||(K(dt,`RPC '${e}' stream ${i} transport opened.`),R.i_())}),oo(m,mo.EventType.CLOSE,()=>{_||(_=!0,K(dt,`RPC '${e}' stream ${i} transport closed`),R.o_(),this.E_(m))}),oo(m,mo.EventType.ERROR,b=>{_||(_=!0,ms(dt,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),R.o_(new J(z.UNAVAILABLE,"The operation could not be completed")))}),oo(m,mo.EventType.MESSAGE,b=>{var L;if(!_){const $=b.data[0];ve(!!$,16349);const A=$,T=(A==null?void 0:A.error)||((L=A[0])==null?void 0:L.error);if(T){K(dt,`RPC '${e}' stream ${i} received error:`,T);const k=T.status;let M=function(E){const y=Be[E];if(y!==void 0)return h0(y)}(k),H=T.message;M===void 0&&(M=z.INTERNAL,H="Unknown error status: "+k+" with message "+T.message),_=!0,R.o_(new J(M,H)),m.close()}else K(dt,`RPC '${e}' stream ${i} received:`,$),R.__($)}}),os.u_(),setTimeout(()=>{R.s_()},0),R}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Vv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){return new os(t)}function Vc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t){return new PS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */os.c_=!1;class x0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="PersistentStream";class A0{constructor(e,n,r,i,s,a,l,u){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new x0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Jn(n.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new J(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return K(Fm,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(K(Fm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class A2 extends A0{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=NS(this.serializer,e),r=function(s){if(!("targetChange"in s))return se.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?se.min():a.readTime?Rn(a.readTime):se.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Uh(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=Oh(u)?{documents:LS(s,u)}:{query:OS(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=p0(s,a.resumeToken);const h=Fh(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(se.min())>0){l.readTime=hu(s,a.snapshotVersion.toTimestamp());const h=Fh(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=FS(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Uh(this.serializer),n.removeTarget=e,this.K_(n)}}class k2 extends A0{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=jS(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Uh(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bS(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{}class P2 extends R2{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new J(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,zh(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(z.UNKNOWN,s.toString())})}jo(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.jo(e,zh(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new J(z.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function D2(t,e,n,r){return new P2(t,e,n,r)}class V2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jn(n),this.aa=!1):K("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="RemoteStore";class N2{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo(a=>{r.enqueueAndForget(async()=>{Ii(this)&&(K(vi,"Restarting streams for network reachability change."),await async function(u){const h=oe(u);h.Ea.add(4),await ma(h),h.Va.set("Unknown"),h.Ea.delete(4),await Uu(h)}(this))})}),this.Va=new V2(r,i)}}async function Uu(t){if(Ii(t))for(const e of t.Ra)await e(!0)}async function ma(t){for(const e of t.Ra)await e(!1)}function k0(t,e){const n=oe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),df(n)?hf(n):ks(n).O_()&&cf(n,e))}function uf(t,e){const n=oe(t),r=ks(n);n.Ia.delete(e),r.O_()&&R0(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ii(n)&&n.Va.set("Unknown"))}function cf(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ks(t).Z_(e)}function R0(t,e){t.da.$e(e),ks(t).X_(e)}function hf(t){t.da=new xS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ks(t).start(),t.Va.ua()}function df(t){return Ii(t)&&!ks(t).x_()&&t.Ia.size>0}function Ii(t){return oe(t).Ea.size===0}function P0(t){t.da=void 0}async function b2(t){t.Va.set("Online")}async function j2(t){t.Ia.forEach((e,n)=>{cf(t,e)})}async function L2(t,e){P0(t),df(t)?(t.Va.ha(e),hf(t)):t.Va.set("Unknown")}async function O2(t,e,n){if(t.Va.set("Online"),e instanceof f0&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ia.delete(l),i.da.removeTarget(l))}(t,e)}catch(r){K(vi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await fu(t,r)}else if(e instanceof Al?t.da.Xe(e):e instanceof d0?t.da.st(e):t.da.tt(e),!n.isEqual(se.min()))try{const r=await C0(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.da.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const m=s.Ia.get(h);m&&s.Ia.set(h,m.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const m=s.Ia.get(u);if(!m)return;s.Ia.set(u,m.withResumeToken(ot.EMPTY_BYTE_STRING,m.snapshotVersion)),R0(s,u);const v=new Er(m.target,u,h,m.sequenceNumber);cf(s,v)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K(vi,"Failed to raise snapshot:",r),await fu(t,r)}}async function fu(t,e,n){if(!As(e))throw e;t.Ea.add(1),await ma(t),t.Va.set("Offline"),n||(n=()=>C0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(vi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Uu(t)})}function D0(t,e){return e().catch(n=>fu(t,n,e))}async function $u(t){const e=oe(t),n=Fr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Kd;for(;M2(e);)try{const i=await v2(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,F2(e,i)}catch(i){await fu(e,i)}V0(e)&&N0(e)}function M2(t){return Ii(t)&&t.Ta.length<10}function F2(t,e){t.Ta.push(e);const n=Fr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function V0(t){return Ii(t)&&!Fr(t).x_()&&t.Ta.length>0}function N0(t){Fr(t).start()}async function z2(t){Fr(t).ra()}async function B2(t){const e=Fr(t);for(const n of t.Ta)e.ea(n.mutations)}async function U2(t,e,n){const r=t.Ta.shift(),i=tf.from(r,e,n);await D0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await $u(t)}async function $2(t,e){e&&Fr(t).Y_&&await async function(r,i){if(function(a){return SS(a)&&a!==z.ABORTED}(i.code)){const s=r.Ta.shift();Fr(r).B_(),await D0(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await $u(r)}}(t,e),V0(t)&&N0(t)}async function zm(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),K(vi,"RemoteStore received new credentials");const r=Ii(n);n.Ea.add(3),await ma(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Uu(n)}async function W2(t,e){const n=oe(t);e?(n.Ea.delete(2),await Uu(n)):e||(n.Ea.add(2),await ma(n),n.Va.set("Unknown"))}function ks(t){return t.ma||(t.ma=function(n,r,i){const s=oe(n);return s.sa(),new A2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:b2.bind(null,t),Yo:j2.bind(null,t),t_:L2.bind(null,t),J_:O2.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),df(t)?hf(t):t.Va.set("Unknown")):(await t.ma.stop(),P0(t))})),t.ma}function Fr(t){return t.fa||(t.fa=function(n,r,i){const s=oe(n);return s.sa(),new k2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:z2.bind(null,t),t_:$2.bind(null,t),ta:B2.bind(null,t),na:U2.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await $u(t)):(await t.fa.stop(),t.Ta.length>0&&(K(vi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new ff(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pf(t,e){if(Jn("AsyncQueue",`${e}: ${t}`),As(t))return new J(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{static emptySet(e){return new as(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=go(),this.sortedSet=new be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof as)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new as;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){this.ga=new be(Z.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Es{constructor(e,n,r,i,s,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Es(e,n,as.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class q2{constructor(){this.queries=Um(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=oe(n),s=i.queries;i.queries=Um(),s.forEach((a,l)=>{for(const u of l.ba)u.onError(r)})})(this,new J(z.ABORTED,"Firestore shutting down"))}}function Um(){return new Ti(t=>Xv(t),Lu)}async function G2(t,e){const n=oe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new H2,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=pf(a,`Initialization of query '${Mi(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.ba.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&mf(n)}async function K2(t,e){const n=oe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.ba.indexOf(e);a>=0&&(s.ba.splice(a,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Q2(t,e){const n=oe(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.ba)l.Fa(i)&&(r=!0);a.wa=i}}r&&mf(n)}function Y2(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const s of i.ba)s.onError(n);r.queries.delete(e)}function mf(t){t.Ca.forEach(e=>{e.next()})}var Hh,$m;($m=Hh||(Hh={})).Ma="default",$m.Cache="cache";class J2{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Es(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Es.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e){this.key=e}}class j0{constructor(e){this.key=e}}class X2{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=de(),this.mutatedKeys=de(),this.eu=Zv(e),this.tu=new as(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Bm,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,v)=>{const _=i.get(m),R=Ou(this.query,v)?v:null,b=!!_&&this.mutatedKeys.has(_.key),L=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let $=!1;_&&R?_.data.isEqual(R.data)?b!==L&&(r.track({type:3,doc:R}),$=!0):this.su(_,R)||(r.track({type:2,doc:R}),$=!0,(u&&this.eu(R,u)>0||h&&this.eu(R,h)<0)&&(l=!0)):!_&&R?(r.track({type:0,doc:R}),$=!0):_&&!R&&(r.track({type:1,doc:_}),$=!0,(u||h)&&(l=!0)),$&&(R?(a=a.add(R),s=L?s.add(m):s.delete(m)):(a=a.delete(m),s=s.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{tu:a,iu:r,Ss:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,v)=>function(R,b){const L=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Vt:$})}};return L(R)-L(b)}(m.type,v.type)||this.eu(m.doc,v.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Ya.size===0&&this.current&&!i?1:0,h=u!==this.Xa;return this.Xa=u,a.length!==0||h?{snapshot:new Es(this.query,e.tu,s,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Bm,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=de(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new j0(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new b0(r))}),n}cu(e){this.Za=e.ks,this.Ya=de();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Es.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const gf="SyncEngine";class Z2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eI{constructor(e){this.key=e,this.hu=!1}}class tI{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ti(l=>Xv(l),Lu),this.Iu=new Map,this.Eu=new Set,this.Ru=new be(Z.comparator),this.Au=new Map,this.Vu=new sf,this.du={},this.mu=new Map,this.fu=_s.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nI(t,e,n=!0){const r=B0(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await L0(r,e,n,!0),i}async function rI(t,e){const n=B0(t);await L0(n,e,!0,!1)}async function L0(t,e,n,r){const i=await _2(t.localStore,kn(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await iI(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&k0(t.remoteStore,i),l}async function iI(t,e,n,r,i){t.pu=(v,_,R)=>async function(L,$,A,T){let k=$.view.ru(A);k.Ss&&(k=await jm(L.localStore,$.query,!1).then(({documents:E})=>$.view.ru(E,k)));const M=T&&T.targetChanges.get($.targetId),H=T&&T.targetMismatches.get($.targetId)!=null,G=$.view.applyChanges(k,L.isPrimaryClient,M,H);return Hm(L,$.targetId,G.au),G.snapshot}(t,v,_,R);const s=await jm(t.localStore,e,!0),a=new X2(e,s.ks),l=a.ru(s.documents),u=pa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=a.applyChanges(l,t.isPrimaryClient,u);Hm(t,n,h.au);const m=new Z2(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function sI(t,e,n){const r=oe(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(a=>!Lu(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await $h(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&uf(r.remoteStore,i.targetId),qh(r,i.targetId)}).catch(xs)):(qh(r,i.targetId),await $h(r.localStore,i.targetId,!0))}async function oI(t,e){const n=oe(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uf(n.remoteStore,r.targetId))}async function aI(t,e,n){const r=pI(t);try{const i=await function(a,l){const u=oe(a),h=Ae.now(),m=l.reduce((R,b)=>R.add(b.key),de());let v,_;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let b=Xn(),L=de();return u.xs.getEntries(R,m).next($=>{b=$,b.forEach((A,T)=>{T.isValidDocument()||(L=L.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,b)).next($=>{v=$;const A=[];for(const T of l){const k=vS(T,v.get(T.key).overlayedDocument);k!=null&&A.push(new Si(T.key,k,Hv(k.value.mapValue),Hn.exists(!0)))}return u.mutationQueue.addMutationBatch(R,h,A,l)}).next($=>{_=$;const A=$.applyToLocalDocumentSet(v,L);return u.documentOverlayCache.saveOverlays(R,$.batchId,A)})}).then(()=>({batchId:_.batchId,changes:t0(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,u){let h=a.du[a.currentUser.toKey()];h||(h=new be(he)),h=h.insert(l,u),a.du[a.currentUser.toKey()]=h}(r,i.batchId,n),await ga(r,i.changes),await $u(r.remoteStore)}catch(i){const s=pf(i,"Failed to persist write");n.reject(s)}}async function O0(t,e){const n=oe(t);try{const r=await g2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Au.get(s);a&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?ve(a.hu,14607):i.removedDocuments.size>0&&(ve(a.hu,42227),a.hu=!1))}),await ga(n,r,e)}catch(r){await xs(r)}}function Wm(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,a)=>{const l=a.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const u=oe(a);u.onlineState=l;let h=!1;u.queries.forEach((m,v)=>{for(const _ of v.ba)_.va(l)&&(h=!0)}),h&&mf(u)}(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lI(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new be(Z.comparator);a=a.insert(s,mt.newNoDocument(s,se.min()));const l=de().add(s),u=new zu(se.min(),new Map,new be(he),a,l);await O0(r,u),r.Ru=r.Ru.remove(s),r.Au.delete(e),yf(r)}else await $h(r.localStore,e,!1).then(()=>qh(r,e,n)).catch(xs)}async function uI(t,e){const n=oe(t),r=e.batch.batchId;try{const i=await m2(n.localStore,e);F0(n,r,null),M0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ga(n,i)}catch(i){await xs(i)}}async function cI(t,e,n){const r=oe(t);try{const i=await function(a,l){const u=oe(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return u.mutationQueue.lookupMutationBatch(h,l).next(v=>(ve(v!==null,37113),m=v.keys(),u.mutationQueue.removeMutationBatch(h,v))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>u.localDocuments.getDocuments(h,m))})}(r.localStore,e);F0(r,e,n),M0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ga(r,i)}catch(i){await xs(i)}}function M0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function F0(t,e,n){const r=oe(t);let i=r.du[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function qh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||z0(t,r)})}function z0(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(uf(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),yf(t))}function Hm(t,e,n){for(const r of n)r instanceof b0?(t.Vu.addReference(r.key,e),hI(t,r)):r instanceof j0?(K(gf,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||z0(t,r.key)):te(19791,{wu:r})}function hI(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(K(gf,"New document in limbo: "+n),t.Eu.add(r),yf(t))}function yf(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Z(De.fromString(e)),r=t.fu.next();t.Au.set(r,new eI(n)),t.Ru=t.Ru.insert(n,r),k0(t.remoteStore,new Er(kn(Zd(n.path)),r,"TargetPurposeLimboResolution",Vu.ce))}}async function ga(t,e,n){const r=oe(t),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{a.push(r.pu(u,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const v=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,v?"current":"not-current")}if(h){i.push(h);const v=af.Es(u.targetId,h);s.push(v)}}))}),await Promise.all(a),r.Pu.J_(i),await async function(u,h){const m=oe(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>O.forEach(h,_=>O.forEach(_.Ts,R=>m.persistence.referenceDelegate.addReference(v,_.targetId,R)).next(()=>O.forEach(_.Is,R=>m.persistence.referenceDelegate.removeReference(v,_.targetId,R)))))}catch(v){if(!As(v))throw v;K(lf,"Failed to update sequence numbers: "+v)}for(const v of h){const _=v.targetId;if(!v.fromCache){const R=m.vs.get(_),b=R.snapshotVersion,L=R.withLastLimboFreeSnapshotVersion(b);m.vs=m.vs.insert(_,L)}}}(r.localStore,s))}async function dI(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){K(gf,"User change. New user:",e.toKey());const r=await I0(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new J(z.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ga(n,r.Ns)}}function fI(t,e){const n=oe(t),r=n.Au.get(e);if(r&&r.hu)return de().add(r.key);{let i=de();const s=n.Iu.get(e);if(!s)return i;for(const a of s){const l=n.Tu.get(a);i=i.unionWith(l.view.nu)}return i}}function B0(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=O0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lI.bind(null,e),e.Pu.J_=Q2.bind(null,e.eventManager),e.Pu.yu=Y2.bind(null,e.eventManager),e}function pI(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cI.bind(null,e),e}class pu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return p2(this.persistence,new h2,e.initialUser,this.serializer)}Cu(e){return new S0(of.Vi,this.serializer)}Du(e){return new w2}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pu.provider={build:()=>new pu};class mI extends pu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ve(this.persistence.referenceDelegate instanceof du,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new YS(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new S0(r=>du.Vi(r,n),this.serializer)}}class Gh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dI.bind(null,this.syncEngine),await W2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new q2}()}createDatastore(e){const n=Bu(e.databaseInfo.databaseId),r=x2(e.databaseInfo);return D2(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new N2(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Wm(this.syncEngine,n,0),function(){return Mm.v()?new Mm:new T2}())}createSyncEngine(e,n){return function(i,s,a,l,u,h,m){const v=new tI(i,s,a,l,u,h);return m&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=oe(i);K(vi,"RemoteStore shutting down."),s.Ea.add(5),await ma(s),s.Aa.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Gh.provider={build:()=>new Gh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="FirestoreClient";class yI{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=ft.UNAUTHENTICATED,this.clientId=qd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{K(zr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(K(zr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=pf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Nc(t,e){t.asyncQueue.verifyOperationInProgress(),K(zr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await I0(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function qm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vI(t);K(zr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>zm(e.remoteStore,i)),t._onlineComponents=e}async function vI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(zr,"Using user provided OfflineComponentProvider");try{await Nc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ms("Error using user provided cache. Falling back to memory cache: "+n),await Nc(t,new pu)}}else K(zr,"Using default OfflineComponentProvider"),await Nc(t,new mI(void 0));return t._offlineComponents}async function U0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(zr,"Using user provided OnlineComponentProvider"),await qm(t,t._uninitializedComponentsProvider._online)):(K(zr,"Using default OnlineComponentProvider"),await qm(t,new Gh))),t._onlineComponents}function _I(t){return U0(t).then(e=>e.syncEngine)}async function EI(t){const e=await U0(t),n=e.eventManager;return n.onListen=nI.bind(null,e.syncEngine),n.onUnlisten=sI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oI.bind(null,e.syncEngine),n}function wI(t,e,n={}){const r=new Vr;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const m=new gI({next:_=>{m.Nu(),a.enqueueAndForget(()=>K2(s,v));const R=_.docs.has(l);!R&&_.fromCache?h.reject(new J(z.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&_.fromCache&&u&&u.source==="server"?h.reject(new J(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),v=new J2(Zd(l.path),m,{includeMetadataChanges:!0,Ka:!0});return G2(s,v)}(await EI(t),t.asyncQueue,e,n,r)),r.promise}function TI(t,e){const n=new Vr;return t.asyncQueue.enqueueAndForget(async()=>aI(await _I(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="ComponentProvider",Gm=new Map;function II(t,e,n,r,i){return new zT(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,$0(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="firestore.googleapis.com",Km=!0;class Qm{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new J(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=W0,this.ssl=Km}else this.host=e.host,this.ssl=e.ssl??Km;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=T0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KS)throw new J(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$0(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new J(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new J(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new J(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new vT;switch(r.type){case"firstParty":return new TT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gm.get(n);r&&(K(SI,"Removing Datastore"),Gm.delete(n),r.terminate())}(this),Promise.resolve()}}function CI(t,e,n,r={}){var h;t=Zo(t,vf);const i=$d(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(WE(`https://${l}`),KE("Firestore",!0)),s.host!==W0&&s.host!==l&&ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!eu(u,a)&&(t._setSettings(u),r.mockUserToken)){let m,v;if(typeof r.mockUserToken=="string")m=r.mockUserToken,v=ft.MOCK_USER;else{m=HE(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new J(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new ft(_)}t._authCredentials=new _T(new bv(m,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _f(this.firestore,e,this._query)}}class Ze{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ze(this.firestore,e,this._key)}toJSON(){return{type:Ze._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(da(n,Ze._jsonSchema))return new Ze(e,r||null,new Z(De.fromString(n.referencePath)))}}Ze._jsonSchemaVersion="firestore/documentReference/1.0",Ze._jsonSchema={type:$e("string",Ze._jsonSchemaVersion),referencePath:$e("string")};class oa extends _f{constructor(e,n,r){super(e,n,Zd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new Z(e))}withConverter(e){return new oa(this.firestore,e,this._path)}}function H0(t,e,...n){if(t=tu(t),arguments.length===1&&(e=qd.newId()),kT("doc","path",e),t instanceof vf){const r=De.fromString(e,...n);return um(r),new Ze(t,null,new Z(r))}{if(!(t instanceof Ze||t instanceof oa))throw new J(z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(De.fromString(e,...n));return um(r),new Ze(t.firestore,t instanceof oa?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="AsyncQueue";class Jm{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new x0(this,"async_queue_retry"),this._c=()=>{const r=Vc();r&&K(Ym,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Vc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Vc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Vr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!As(e))throw e;K(Ym,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Jn("INTERNAL UNHANDLED ERROR: ",Xm(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=ff.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&te(47125,{Pc:Xm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Xm(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ef extends vf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Jm,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jm(e),this._firestoreClient=void 0,await e}}}function xI(t,e){const n=typeof t=="object"?t:iT(),r=typeof t=="string"?t:su,i=Zw(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=UE("firestore");s&&CI(i,...s)}return i}function q0(t){if(t._terminated)throw new J(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||AI(t),t._firestoreClient}function AI(t){var r,i,s,a;const e=t._freezeSettings(),n=II(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new yI(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jt(ot.fromBase64String(e))}catch(n){throw new J(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Jt(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(da(e,Jt._jsonSchema))return Jt.fromBase64String(e.bytes)}}Jt._jsonSchemaVersion="firestore/bytes/1.0",Jt._jsonSchema={type:$e("string",Jt._jsonSchemaVersion),bytes:$e("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pn._jsonSchemaVersion}}static fromJSON(e){if(da(e,Pn._jsonSchema))return new Pn(e.latitude,e.longitude)}}Pn._jsonSchemaVersion="firestore/geoPoint/1.0",Pn._jsonSchema={type:$e("string",Pn._jsonSchemaVersion),latitude:$e("number"),longitude:$e("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:fn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(da(e,fn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new fn(e.vectorValues);throw new J(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fn._jsonSchemaVersion="firestore/vectorValue/1.0",fn._jsonSchema={type:$e("string",fn._jsonSchemaVersion),vectorValues:$e("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=/^__.*__$/;class RI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Si(e,this.data,this.fieldMask,n,this.fieldTransforms):new fa(e,this.data,n,this.fieldTransforms)}}function Q0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{dataSource:t})}}class wf{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new wf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return mu(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Q0(this.dataSource)&&kI.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class PI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bu(e)}createContext(e,n,r,i=!1){return new wf({dataSource:e,methodName:n,targetDoc:r,path:rt.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function DI(t){const e=t._freezeSettings(),n=Bu(t._databaseId);return new PI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function VI(t,e,n,r,i,s={}){const a=t.createContext(s.merge||s.mergeFields?2:0,e,n,i);Z0("Data must be an object, but it was:",a,r);const l=J0(r,a);let u,h;if(s.merge)u=new cn(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const m=[];for(const v of s.mergeFields){const _=Tf(e,v,n);if(!a.contains(_))throw new J(z.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);jI(m,_)||m.push(_)}u=new cn(m),h=a.fieldTransforms.filter(v=>u.covers(v.field))}else u=null,h=a.fieldTransforms;return new RI(new Yt(l),u,h)}function Y0(t,e){if(X0(t=tu(t)))return Z0("Unsupported field value:",e,t),J0(t,e);if(t instanceof K0)return function(r,i){if(!Q0(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let u=Y0(l,i.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=tu(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ae.fromDate(r);return{timestampValue:hu(i.serializer,s)}}if(r instanceof Ae){const s=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hu(i.serializer,s)}}if(r instanceof Pn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jt)return{bytesValue:p0(i.serializer,r._byteString)};if(r instanceof Ze){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:rf(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fn)return function(a,l){const u=a instanceof fn?a.toArray():a;return{mapValue:{fields:{[$v]:{stringValue:Wv},[ou]:{arrayValue:{values:u.map(m=>{if(typeof m!="number")throw l.createError("VectorValues must only contain numeric values.");return ef(l.serializer,m)})}}}}}}(r,i);if(w0(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Gd(r)}`)}(t,e)}function J0(t,e){const n={};return Ov(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wi(t,(r,i)=>{const s=Y0(i,e.childContextForField(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function X0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof Pn||t instanceof Jt||t instanceof Ze||t instanceof K0||t instanceof fn||w0(t))}function Z0(t,e,n){if(!X0(n)||!jv(n)){const r=Gd(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Tf(t,e,n){if((e=tu(e))instanceof G0)return e._internalPath;if(typeof e=="string")return bI(t,e);throw mu("Field path arguments must be of type string or ",t,!1,void 0,n)}const NI=new RegExp("[~\\*/\\[\\]]");function bI(t,e,n){if(e.search(NI)>=0)throw mu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new G0(...e.split("."))._internalPath}catch{throw mu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function mu(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new J(z.INVALID_ARGUMENT,l+t+u)}function jI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{convertValue(e,n="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return wi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[ou].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>Me(a.doubleValue));return new fn(n)}convertGeoPoint(e){return new Pn(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=bu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ta(e));default:return null}}convertTimestamp(e){const n=Lr(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=De.fromString(e);ve(E0(r),9688,{name:e});const i=new na(r.get(1),r.get(3)),s=new Z(r.popFirst(5));return i.isEqual(n)||Jn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI extends LI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,n)}}const Zm="@firebase/firestore",eg="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Tf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MI extends e_{data(){return super.data()}}function FI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class vo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hi extends e_{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Tf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=hi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}hi._jsonSchemaVersion="firestore/documentSnapshot/1.0",hi._jsonSchema={type:$e("string",hi._jsonSchemaVersion),bundleSource:$e("string","DocumentSnapshot"),bundleName:$e("string"),bundle:$e("string")};class kl extends hi{data(e={}){return super.data(e)}}class No{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new vo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new kl(this._firestore,this._userDataWriter,r.key,r,new vo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const u=new kl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new vo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new kl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new vo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:zI(l.type),doc:u,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=No._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */No._jsonSchemaVersion="firestore/querySnapshot/1.0",No._jsonSchema={type:$e("string",No._jsonSchemaVersion),bundleSource:$e("string","QuerySnapshot"),bundleName:$e("string"),bundle:$e("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t){t=Zo(t,Ze);const e=Zo(t.firestore,Ef),n=q0(e);return wI(n,t._key).then(r=>WI(e,t,r))}function UI(t,e,n){t=Zo(t,Ze);const r=Zo(t.firestore,Ef),i=FI(t.converter,e),s=DI(r);return $I(r,[VI(s,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Hn.none())])}function $I(t,e){const n=q0(t);return TI(n,e)}function WI(t,e,n){const r=n.docs.get(e._key),i=new OI(t);return new hi(t,i,e._key,r,new vo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){yT(rT),ru(new Jo("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new Ef(new ET(r.getProvider("auth-internal")),new ST(a,r.getProvider("app-check-internal")),BT(a,i),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),ss(Zm,eg,e),ss(Zm,eg,"esm2020")})();const HI={apiKey:"AIzaSyA1TRqHaNsytLwPZWevHgtf0H-MKYmo2VA",authDomain:"life-manager-f5fd8.firebaseapp.com",projectId:"life-manager-f5fd8",storageBucket:"life-manager-f5fd8.firebasestorage.app",messagingSenderId:"93366478624",appId:"1:93366478624:web:acce1cdf19327acc751945"},qI=Iv(HI),t_=xI(qI),tg=async(t,e)=>{const n=H0(t_,"users",t.toLowerCase());await UI(n,{...e,lastUpdated:new Date().toISOString()})},ng=async t=>{const e=H0(t_,"users",t.toLowerCase()),n=await BI(e);return n.exists()?n.data():null},Li=()=>Math.random().toString(36).substr(2,9),ao={WORKOUT:{name:"Workout",color:"#ef4444",icon:""},PROFESSIONAL:{name:"Professional",color:"#3b82f6",icon:""},SELF_CARE:{name:"Self-care",color:"#a855f7",icon:""},PRODUCTIVITY:{name:"Productivity",color:"#6b7280",icon:""},SOCIAL:{name:"Social",color:"#f59e0b",icon:""},LEARNING:{name:"Learning",color:"#10b981",icon:""}},rg=[{icon:"",name:"Exercise",type:"binary",target:1,category:"WORKOUT"},{icon:"",name:"Drink water",type:"count",target:8,category:"SELF_CARE"},{icon:"",name:"Read",type:"binary",target:1,category:"LEARNING"},{icon:"",name:"Meditate",type:"binary",target:1,category:"SELF_CARE"},{icon:"",name:"Journal",type:"binary",target:1,category:"SELF_CARE"},{icon:"",name:"Morning routine",type:"binary",target:1,category:"PRODUCTIVITY"}],GI=[{id:"1",name:"Eat clean",type:"count",target:3,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"},{id:"2",name:"Meditation",type:"binary",target:1,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"},{id:"3",name:"Get out of the house",type:"binary",target:1,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"},{id:"4",name:"Personal care",type:"binary",target:1,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"},{id:"5",name:"Stretching",type:"binary",target:1,category:"WORKOUT",streak:0,createdAt:"2020-01-01"},{id:"6",name:"Job applications",type:"count",target:25,category:"PROFESSIONAL",streak:0,createdAt:"2020-01-01"},{id:"7",name:"Workout",type:"binary",target:1,category:"WORKOUT",streak:0,createdAt:"2020-01-01"},{id:"8",name:"Current events article",type:"binary",target:1,category:"LEARNING",streak:0,createdAt:"2020-01-01",link:"https://www.nytimes.com"},{id:"9",name:"Take vitamins",type:"binary",target:1,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"},{id:"10",name:"Pray",type:"binary",target:1,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"}],KI=[{id:"1",title:"Get job offer",metricType:"milestone",milestones:[{text:"Resume updated",completed:!1},{text:"50 applications",completed:!1},{text:"10 interviews",completed:!1}]},{id:"2",title:"Consistent fitness routine",metricType:"milestone",milestones:[{text:"7 day streak",completed:!1},{text:"14 day streak",completed:!1},{text:"30 day streak",completed:!1}]}],Gt=(t,e)=>{try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}},Fn=(t,e)=>{try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error("Storage error:",n)}},jt=(t=new Date)=>{const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`},QI=t=>{const[e,n,r]=t.split("-").map(Number);return new Date(e,n-1,r)},YI=(t=new Date)=>{const e=new Date(t);return e.setHours(0,0,0,0),e.setDate(e.getDate()-e.getDay()),jt(e)},JI=(t=new Date)=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,cl=(t,e=new Date)=>t==="daily"?jt(e):t==="weekly"?YI(e):t==="monthly"?JI(e):null,XI=(t,e,n=null)=>{const r=t||{},i=n?e.filter(l=>!l.createdAt||l.createdAt<=n):e;let s=0,a=i.length;return i.forEach(l=>{const u=r[l.id];l.type==="count"?u!=null&&u.completed||(u==null?void 0:u.value)>=l.target?s+=1:(u==null?void 0:u.value)>0&&(s+=u.value/l.target):u!=null&&u.completed&&(s+=1)}),{total:a>0?Math.round(s/a*100):0,completed:Math.round(s*10)/10,totalHabits:a}},lo=t=>!t&&t!==0?"#3f3f46":t>=80?"#10b981":t>=60?"#8b5cf6":t>=40?"#a855f7":t>=20?"#f97316":t>0?"#ef4444":"#3f3f46",ig=t=>t>=80?"#10b981":t>=60?"#8b5cf6":t>=40?"#a855f7":t>=20?"#f97316":t>0?"#ef4444":"#71717a",Tn=({isOpen:t,onClose:e,title:n,children:r,size:i="md"})=>(W.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),t?f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,display:"flex",alignItems:"flex-end",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.7)"},onClick:e,children:f.jsxs("div",{style:{width:"100%",maxWidth:i==="lg"?"32rem":"28rem",maxHeight:"85vh",backgroundColor:"#18181b",borderTopLeftRadius:"1.25rem",borderTopRightRadius:"1.25rem",display:"flex",flexDirection:"column",border:"1px solid #27272a",borderBottom:"none"},onClick:s=>s.stopPropagation(),children:[f.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid #27272a",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#18181b",borderTopLeftRadius:"1.25rem",borderTopRightRadius:"1.25rem"},children:[f.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:600,margin:0,color:"#fafafa"},children:n}),f.jsx("button",{onClick:e,style:{width:"2.75rem",height:"2.75rem",borderRadius:"0.75rem",backgroundColor:"#27272a",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",border:"none",color:"#a1a1aa",cursor:"pointer",flexShrink:0},children:""})]}),f.jsx("div",{style:{overflowY:"scroll",padding:"1rem 1.25rem",paddingBottom:"2rem",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",minHeight:0,flex:"1 1 auto"},onTouchMove:s=>s.stopPropagation(),children:r})]})}):null),uo={today:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),f.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),f.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),f.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),f.jsx("circle",{cx:"12",cy:"16",r:"2",fill:"currentColor"})]}),calendar:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),f.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),f.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),goals:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("circle",{cx:"12",cy:"12",r:"6"}),f.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"})]}),ideas:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{d:"M9 18h6"}),f.jsx("path",{d:"M10 22h4"}),f.jsx("path",{d:"M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7z"})]}),backup:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),f.jsx("polyline",{points:"7 10 12 15 17 10"}),f.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})};function ZI(){var Se,Zr,ar,lr,Ra,$s,Pa,Da,Va,Na,ur,_n,Ws,Hs,qs,Gs,Ks,On,ba,ja;const[t,e]=W.useState("today"),[n,r]=W.useState(()=>Gt("lm_tasks_v11",[])),[i,s]=W.useState(()=>Gt("lm_habits_v11",GI).map(I=>I.name.toLowerCase().includes("current events")&&!I.link?{...I,link:"https://www.nytimes.com"}:I)),[a,l]=W.useState(()=>Gt("lm_goals_v11",KI)),[u,h]=W.useState(()=>Gt("lm_dailyLogs_v11",{})),[m,v]=W.useState(()=>Gt("lm_scores_v11",{})),[_,R]=W.useState(()=>Gt("lm_ideas_v11",[])),[b,L]=W.useState(!1),[$,A]=W.useState(!1),[T,k]=W.useState(!1),[M,H]=W.useState(!1),[G,E]=W.useState(!1),[y,w]=W.useState(!1),[C,x]=W.useState(!1),[P,S]=W.useState(null),[je,yt]=W.useState(""),[Ut,er]=W.useState(new Date),[B,X]=W.useState(null),[ie,_e]=W.useState("Today"),[we,$t]=W.useState(null),[at,Wt]=W.useState(null),[Dt,nn]=W.useState(null),[mn,Rs]=W.useState(null),[Ci,Wr]=W.useState(new Date),[ya,xi]=W.useState(null),[lt,Hr]=W.useState(null),[vt,qr]=W.useState(()=>Gt("lm_syncCode_v11","")),[It,ze]=W.useState(""),[Te,rn]=W.useState(!1),[_t,Le]=W.useState(null),[Ai,sn]=W.useState(()=>Gt("lm_lastSynced_v11",null)),Ps=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),va=/iPhone|iPad|iPod/i.test(navigator.userAgent),Ds=/Android/i.test(navigator.userAgent),_a=window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches,[Wu,Ea]=W.useState(()=>Ps&&!_a),[wa,tr]=W.useState(()=>{const p=Gt("lm_hasSeenWelcome_v11",!1),I=Gt("lm_syncCode_v11","");return Ps&&!_a?!1:!p&&!I}),[Ht,Vs]=W.useState({habits:!1,tasks:!1,sleep:!0,fact:!0}),[ut,nr]=W.useState({habits:null,sleep:null,fact:null}),[rr,ki]=W.useState({habits:!1,sleep:!1,fact:!1}),Nn=jt(),ne=jt(Ci),re=u[ne]||{habitLogs:{},sleep:{},screenTime:0,factLearned:""},Gr=p=>Vs(I=>({...I,[p]:!I[p]})),bn=W.useCallback(p=>{const I=u[ne]||{habitLogs:{},sleep:{},screenTime:0,factLearned:""};p==="habits"?(nr(V=>({...V,habits:I.habitLogs})),h(V=>({...V,[ne]:{...V[ne],habitLogs:{}}}))):p==="sleep"?(nr(V=>({...V,sleep:{sleep:I.sleep,screenTime:I.screenTime}})),h(V=>({...V,[ne]:{...V[ne],sleep:{},screenTime:0}}))):p==="fact"&&(nr(V=>({...V,fact:I.factLearned})),h(V=>({...V,[ne]:{...V[ne],factLearned:""}}))),ki(V=>({...V,[p]:!0})),setTimeout(()=>{ki(V=>({...V,[p]:!1})),nr(V=>({...V,[p]:null}))},5e3)},[ne,u]),jn=W.useCallback(p=>{p==="habits"&&ut.habits?h(I=>({...I,[ne]:{...I[ne],habitLogs:ut.habits}})):p==="sleep"&&ut.sleep?h(I=>({...I,[ne]:{...I[ne],sleep:ut.sleep.sleep,screenTime:ut.sleep.screenTime}})):p==="fact"&&ut.fact!==null&&h(I=>({...I,[ne]:{...I[ne],factLearned:ut.fact}})),ki(I=>({...I,[p]:!1})),nr(I=>({...I,[p]:null}))},[ne,ut]),Ri=()=>{const p=new Date,I=new Date(Ci);p.setHours(0,0,0,0),I.setHours(0,0,0,0);const V=Math.round((I-p)/(1e3*60*60*24));return V===0?"Today":V===-1?"Yesterday":V===1?"Tomorrow":I.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},Ta=p=>Wr(I=>{const V=new Date(I);return V.setDate(V.getDate()+p),V}),ir=()=>Wr(new Date);W.useEffect(()=>{Fn("lm_tasks_v11",n)},[n]),W.useEffect(()=>{Fn("lm_habits_v11",i)},[i]),W.useEffect(()=>{Fn("lm_goals_v11",a)},[a]),W.useEffect(()=>{Fn("lm_dailyLogs_v11",u)},[u]),W.useEffect(()=>{Fn("lm_scores_v11",m)},[m]),W.useEffect(()=>{Fn("lm_ideas_v11",_)},[_]);const We=W.useMemo(()=>XI(re.habitLogs,i,ne),[re,i,ne]);W.useEffect(()=>{re.habitLogs&&Object.keys(re.habitLogs).length>0&&v(p=>({...p,[ne]:We}))},[re.habitLogs,We,ne]);const Sa=W.useCallback(p=>{var I;(I=p.title)!=null&&I.trim()&&(r(V=>[...V,{...p,id:Li(),status:"pending",createdAt:new Date().toISOString(),recurring:p.recurring||null,completions:{}}]),L(!1),_e("Today"),$t(null))},[]),Kr=W.useCallback(p=>{r(I=>I.map(V=>{var j;if(V.id!==p)return V;if(V.recurring){const Y=cl(V.recurring),ee=(j=V.completions)==null?void 0:j[Y],ae={...V.completions};return ee?delete ae[Y]:ae[Y]=new Date().toISOString(),{...V,completions:ae}}else return{...V,status:V.status==="done"?"pending":"done",completedAt:V.status==="done"?null:new Date().toISOString()}}))},[]);W.useCallback(p=>{var I;if(p.recurring){const V=cl(p.recurring);return!!((I=p.completions)!=null&&I[V])}return p.status==="done"},[]);const Ns=W.useCallback((p,I)=>{var V;if(p.recurring){const j=cl(p.recurring,QI(I));return!!((V=p.completions)!=null&&V[j])}return p.status==="done"},[]),Pi=W.useCallback((p,I=null)=>{h(V=>{var Vt;const j=V[ne]||{habitLogs:{},sleep:{},screenTime:0,factLearned:""},Y=i.find(ge=>ge.id===p);if(!Y)return V;const ee=((Vt=j.habitLogs)==null?void 0:Vt[p])||{completed:!1,value:0};let ae,ye;return Y.type==="binary"?(ye=!ee.completed,ae=ye?1:0):(ae=I!==null?I:(ee.value+1)%(Y.target+1),ye=ae>=Y.target),{...V,[ne]:{...j,habitLogs:{...j.habitLogs,[p]:{completed:ye,value:ae}}}}})},[ne,i]),bs=W.useCallback(p=>{var I;(I=p.name)!=null&&I.trim()&&(s(V=>[...V,{id:Li(),name:p.name.trim(),type:p.type||"binary",target:parseInt(p.target)||1,category:p.category||"PRODUCTIVITY",streak:0,createdAt:jt()}]),A(!1))},[]),Qr=W.useCallback((p,I)=>s(V=>V.map(j=>j.id===p?{...j,...I}:j)),[]),Hu=W.useCallback(p=>{s(I=>I.filter(V=>V.id!==p)),h(I=>{const V={...I};return Object.keys(V).forEach(j=>{var Y,ee;if((ee=(Y=V[j])==null?void 0:Y.habitLogs)!=null&&ee[p]){const{[p]:ae,...ye}=V[j].habitLogs;V[j]={...V[j],habitLogs:ye}}}),V}),S(null),yt("")},[]),gn=W.useCallback(p=>{h(I=>{const V=I[ne]||{habitLogs:{}},{[p]:j,...Y}=V.habitLogs||{};return{...I,[ne]:{...V,habitLogs:Y}}}),S(null),yt("")},[ne]),js=W.useCallback(p=>i.some(I=>I.name.toLowerCase()===p.toLowerCase()),[i]),Ls=W.useCallback(p=>{const I=i.find(V=>V.name.toLowerCase()===p.name.toLowerCase());s(I?V=>V.filter(j=>j.id!==I.id):V=>[...V,{id:Li(),name:p.name,type:p.type,target:p.target,category:p.category,streak:0,createdAt:jt()}])},[i]),Os=W.useCallback((p,I)=>{l(V=>V.map(j=>{if(j.id===p){const Y=[...j.milestones];return Y[I]={...Y[I],completed:!Y[I].completed},{...j,milestones:Y}}return j}))},[]),Ms=W.useCallback(p=>{var V;if(!((V=p.title)!=null&&V.trim()))return;const I=(p.milestonesText||"").split(`
`).filter(j=>j.trim()).map(j=>({text:j.trim(),completed:!1}));l(j=>[...j,{id:Li(),title:p.title.trim(),metricType:"milestone",milestones:I}]),w(!1)},[]),Ia=W.useCallback(p=>l(I=>I.filter(V=>V.id!==p)),[]),qu=W.useCallback((p,I)=>{I!=null&&I.trim()&&l(V=>V.map(j=>j.id===p?{...j,milestones:[...j.milestones,{text:I.trim(),completed:!1}]}:j))},[]),Ca=W.useCallback((p,I)=>{l(V=>V.map(j=>j.id===p?{...j,milestones:j.milestones.filter((Y,ee)=>ee!==I)}:j))},[]),Gu=W.useCallback((p,I,V)=>{V!=null&&V.trim()&&l(j=>j.map(Y=>{if(Y.id===p){const ee=[...Y.milestones];return ee[I]={...ee[I],text:V.trim()},{...Y,milestones:ee}}return Y}))},[]),Di=W.useCallback((p,I)=>l(V=>V.map(j=>j.id===p?{...j,...I}:j)),[]),xa=W.useCallback(p=>{var I;(I=p.text)!=null&&I.trim()&&(R(V=>[...V,{id:Li(),text:p.text.trim(),category:p.category||"PRODUCTIVITY",createdAt:new Date().toISOString(),status:"idea",notes:"",points:[],nextStep:""}]),E(!1))},[]),Yr=W.useCallback((p,I)=>R(V=>V.map(j=>j.id===p?{...j,...I}:j)),[]),Jr=W.useCallback((p,I)=>{I!=null&&I.trim()&&R(V=>V.map(j=>j.id===p?{...j,points:[...j.points||[],{id:Li(),text:I.trim(),done:!1}]}:j))},[]),Ln=W.useCallback((p,I)=>R(V=>V.map(j=>j.id===p?{...j,points:(j.points||[]).map(Y=>Y.id===I?{...Y,done:!Y.done}:Y)}:j)),[]),Fs=W.useCallback((p,I)=>R(V=>V.map(j=>j.id===p?{...j,points:(j.points||[]).filter(Y=>Y.id!==I)}:j)),[]),Ku=W.useCallback(p=>{R(I=>I.filter(V=>V.id!==p)),xi(null)},[]);W.useCallback(()=>{const p={version:"v11",exportedAt:new Date().toISOString(),habits:i,tasks:n,goals:a,ideas:_,dailyLogs:u,scores:m},I=new Blob([JSON.stringify(p,null,2)],{type:"application/json"}),V=URL.createObjectURL(I),j=document.createElement("a");j.href=V,j.download=`life-manager-backup-${jt()}.json`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(V)},[i,n,a,_,u,m]),W.useCallback(p=>{const I=new FileReader;I.onload=V=>{try{const j=JSON.parse(V.target.result);if(!j.version||!j.exportedAt){Hr({type:"error",message:"Invalid backup file"});return}j.habits&&s(j.habits),j.tasks&&r(j.tasks),j.goals&&l(j.goals),j.ideas&&R(j.ideas),j.dailyLogs&&h(j.dailyLogs),j.scores&&v(j.scores),Hr({type:"success",message:`Restored from ${new Date(j.exportedAt).toLocaleDateString()}`}),setTimeout(()=>Hr(null),3e3)}catch{Hr({type:"error",message:"Failed to parse file"}),setTimeout(()=>Hr(null),3e3)}},I.readAsText(p)},[]),W.useEffect(()=>{Fn("lm_syncCode_v11",vt)},[vt]),W.useEffect(()=>{Fn("lm_lastSynced_v11",Ai)},[Ai]);const zs=W.useCallback(()=>{Ea(!1);const p=Gt("lm_hasSeenWelcome_v11",!1),I=Gt("lm_syncCode_v11","");!p&&!I&&tr(!0)},[]),Xr=W.useCallback(()=>{tr(!1),Fn("lm_hasSeenWelcome_v11",!0)},[]),Aa=W.useCallback(async()=>{if(vt){rn(!0),Le(null);try{await tg(vt,{version:"v11",habits:i,tasks:n,goals:a,ideas:_,dailyLogs:u,scores:m});const I=new Date().toISOString();sn(I),Le({type:"success",message:"Data synced to cloud!"}),setTimeout(()=>Le(null),3e3)}catch(p){console.error("Sync error:",p),Le({type:"error",message:"Failed to sync. Check connection."}),setTimeout(()=>Le(null),3e3)}finally{rn(!1)}}},[vt,i,n,a,_,u,m]),Bs=W.useCallback(async()=>{if(vt){rn(!0),Le(null);try{const p=await ng(vt);p?(p.habits&&s(p.habits),p.tasks&&r(p.tasks),p.goals&&l(p.goals),p.ideas&&R(p.ideas),p.dailyLogs&&h(p.dailyLogs),p.scores&&v(p.scores),sn(p.lastUpdated||new Date().toISOString()),Le({type:"success",message:"Data loaded from cloud!"})):Le({type:"error",message:"No data found for this code."}),setTimeout(()=>Le(null),3e3)}catch(p){console.error("Load error:",p),Le({type:"error",message:"Failed to load. Check connection."}),setTimeout(()=>Le(null),3e3)}finally{rn(!1)}}},[vt]),sr=W.useCallback(async()=>{if(!It.trim())return;const p=It.trim().toLowerCase();rn(!0),Le(null);try{const I=await ng(p);if(I)I.habits&&s(I.habits),I.tasks&&r(I.tasks),I.goals&&l(I.goals),I.ideas&&R(I.ideas),I.dailyLogs&&h(I.dailyLogs),I.scores&&v(I.scores),qr(p),sn(I.lastUpdated||new Date().toISOString()),Le({type:"success",message:"Connected! Data loaded from cloud."});else{await tg(p,{version:"v11",habits:i,tasks:n,goals:a,ideas:_,dailyLogs:u,scores:m}),qr(p);const j=new Date().toISOString();sn(j),Le({type:"success",message:"New sync code created!"})}ze(""),setTimeout(()=>Le(null),3e3)}catch(I){console.error("Connect error:",I),Le({type:"error",message:"Connection failed. Try again."}),setTimeout(()=>Le(null),3e3)}finally{rn(!1)}},[It,i,n,a,_,u,m]),ka=W.useCallback(()=>{qr(""),sn(null),Le({type:"success",message:"Disconnected from sync."}),setTimeout(()=>Le(null),3e3)},[]),Vi=n.filter(p=>p.recurring?!0:p.status!=="done"&&(!p.dueDate||p.dueDate<=Nn)),Ni=n.filter(p=>{var I;if(p.recurring){const V=cl(p.recurring,Ci);return(I=p.completions)!=null&&I[V]?jt(new Date(p.completions[V]))===ne:!1}return p.status!=="done"||!p.completedAt?!1:jt(new Date(p.completedAt))===ne}),Us=i.filter(p=>!p.createdAt||p.createdAt<=ne),yn=p=>{const I=p.getFullYear(),V=p.getMonth(),j=new Date(I,V,1),ee=new Date(I,V+1,0).getDate(),ae=j.getDay(),ye=[],ge=new Date(I,V,0).getDate();for(let Nt=ae-1;Nt>=0;Nt--){const Mn=ge-Nt,Qs=new Date(I,V-1,Mn);ye.push({date:Qs,isCurrentMonth:!1,key:jt(Qs)})}for(let Nt=1;Nt<=ee;Nt++){const Mn=new Date(I,V,Nt);ye.push({date:Mn,isCurrentMonth:!0,key:jt(Mn)})}const ce=42-ye.length;for(let Nt=1;Nt<=ce;Nt++){const Mn=new Date(I,V+1,Nt);ye.push({date:Mn,isCurrentMonth:!1,key:jt(Mn)})}return ye},qt=W.useMemo(()=>yn(Ut),[Ut]),or=p=>{er(I=>{const V=new Date(I);return V.setMonth(V.getMonth()+p),V}),X(null)},vn=W.useMemo(()=>{const p=Ut.getFullYear(),I=Ut.getMonth(),V=new Date(p,I+1,0).getDate();let j=0,Y=0,ee={score:0,date:null},ae=0,ye=0;for(let Vt=1;Vt<=V;Vt++){const ge=new Date(p,I,Vt),ce=jt(ge);m[ce]&&m[ce].total>0?(j+=m[ce].total,Y++,m[ce].total>ee.score&&(ee={score:m[ce].total,date:ge}),ae++,ae>ye&&(ye=ae)):ae=0}return{avgScore:Y?Math.round(j/Y):0,daysTracked:Y,bestDay:ee,longestStreak:ye}},[Ut,m]),F={page:{minHeight:"100vh",backgroundColor:"#09090b",color:"#fafafa",fontFamily:"'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif",paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"},nav:{position:"fixed",top:"calc(0.5rem + env(safe-area-inset-top))",left:"50%",transform:"translateX(-50%)",zIndex:50,backgroundColor:"rgba(24,24,27,0.95)",backdropFilter:"blur(12px)",border:"1px solid #27272a",borderRadius:"1rem",padding:"0.375rem",maxWidth:"95vw"},navInner:{display:"flex",alignItems:"center",gap:"0.25rem"},navBtn:p=>({display:"flex",flexDirection:"column",alignItems:"center",gap:"0.125rem",padding:"0.5rem 0.75rem",borderRadius:"0.75rem",border:"none",backgroundColor:p?"rgba(139,92,246,0.15)":"transparent",color:p?"#8b5cf6":"#a1a1aa",cursor:"pointer",minHeight:"44px",minWidth:"44px",transition:"all 0.2s"}),navLabel:{fontSize:"0.625rem",fontWeight:500},main:{paddingTop:"calc(5rem + env(safe-area-inset-top))",paddingBottom:"calc(2rem + env(safe-area-inset-bottom))",paddingLeft:"1rem",paddingRight:"1rem",maxWidth:"64rem",marginLeft:"auto",marginRight:"auto"},card:{backgroundColor:"rgba(24,24,27,0.7)",border:"1px solid #27272a",borderRadius:"1rem",marginBottom:"1rem",overflow:"hidden"},cardHeader:{padding:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",cursor:"pointer"},cardContent:{padding:"0 1rem 1rem"},btn:(p="secondary")=>({minHeight:"44px",padding:"0.5rem 1rem",borderRadius:"0.75rem",border:"none",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"all 0.2s",...p==="primary"?{backgroundColor:"#8b5cf6",color:"white"}:p==="danger"?{backgroundColor:"rgba(239,68,68,0.2)",color:"#f87171"}:{backgroundColor:"#27272a",color:"#fafafa"}}),input:{width:"100%",minHeight:"44px",padding:"0.75rem 1rem",backgroundColor:"#27272a",border:"1px solid #3f3f46",borderRadius:"0.75rem",color:"#fafafa",fontSize:"1rem",outline:"none"},tag:(p="#8b5cf6")=>({padding:"0.25rem 0.625rem",borderRadius:"0.375rem",fontSize:"0.6875rem",fontWeight:600,backgroundColor:`${p}20`,color:p}),checkbox:p=>({width:"1.75rem",height:"1.75rem",borderRadius:"0.5rem",border:p?"none":"2px solid #3f3f46",backgroundColor:p?"#10b981":"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0,transition:"all 0.2s"})};return f.jsxs("div",{style:F.page,children:[f.jsx("nav",{style:F.nav,children:f.jsxs("div",{style:F.navInner,children:[[{id:"today",label:"Today",icon:uo.today},{id:"calendar",label:"Stats",icon:uo.calendar},{id:"goals",label:"Goals",icon:uo.goals},{id:"ideas",label:"Ideas",icon:uo.ideas}].map(p=>f.jsxs("button",{onClick:()=>e(p.id),style:F.navBtn(t===p.id),children:[p.icon,f.jsx("span",{style:F.navLabel,children:p.label})]},p.id)),f.jsx("div",{style:{width:"1px",height:"2rem",backgroundColor:"#27272a",margin:"0 0.25rem"}}),f.jsx("button",{onClick:()=>x(!0),style:{...F.navBtn(!1),padding:"0.5rem"},children:uo.backup})]})}),f.jsxs("main",{style:F.main,children:[t==="today"&&f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",marginBottom:"1.5rem"},children:[f.jsx("button",{onClick:()=>Ta(-1),style:{...F.btn(),width:"3rem",padding:0},children:""}),f.jsxs("div",{style:{textAlign:"center",flex:1},children:[f.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,margin:0},children:Ri()}),f.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a",margin:"0.25rem 0 0"},children:Ci.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),f.jsx("button",{onClick:()=>Ta(1),style:{...F.btn(),width:"3rem",padding:0},children:""})]}),Ri()!=="Today"&&f.jsx("button",{onClick:ir,style:{display:"block",margin:"0 auto 1rem",background:"none",border:"none",color:"#8b5cf6",fontSize:"0.875rem",cursor:"pointer"},children:" Back to Today"}),f.jsx("div",{style:F.card,children:f.jsxs("div",{style:{padding:"1.25rem"},children:[f.jsxs("p",{style:{fontSize:"0.75rem",fontWeight:600,color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"1rem"},children:[Ri(),"'s Score"]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[f.jsx("div",{style:{width:"6rem",height:"6rem",borderRadius:"50%",background:`conic-gradient(${lo(We.total)} ${We.total}%, #27272a ${We.total}%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 0 30px ${lo(We.total)}40`},children:f.jsx("div",{style:{width:"4.5rem",height:"4.5rem",borderRadius:"50%",backgroundColor:"#09090b",display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:800,fontFamily:"JetBrains Mono, monospace",color:ig(We.total)},children:[We.total,"%"]})})}),f.jsxs("div",{style:{flex:1},children:[We.total>=25&&f.jsx("p",{style:{fontSize:"1rem",fontWeight:600,color:ig(We.total),marginBottom:"0.25rem"},children:We.total>=90?" Crushing it!":We.total>=70?" Great progress!":We.total>=50?" Solid day":" Getting started"}),f.jsxs("p",{style:{fontSize:"0.875rem",color:"#71717a"},children:[We.completed," of ",We.totalHabits," habits"]}),f.jsx("div",{style:{height:"0.375rem",borderRadius:"0.1875rem",backgroundColor:"#27272a",marginTop:"0.75rem",overflow:"hidden"},children:f.jsx("div",{style:{height:"100%",width:`${We.total}%`,backgroundColor:lo(We.total),borderRadius:"0.1875rem",transition:"width 0.5s"}})})]})]})]})}),f.jsxs("div",{style:F.card,children:[f.jsxs("div",{style:F.cardHeader,onClick:()=>Gr("habits"),children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("span",{style:{color:"#71717a",transform:Ht.habits?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:""}),f.jsx("span",{style:{fontWeight:600},children:"Daily Habits"}),f.jsxs("span",{style:F.tag("#8b5cf6"),children:[Object.values(re.habitLogs||{}).filter(p=>p.completed).length,"/",Us.length]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[f.jsx("button",{onClick:p=>{p.stopPropagation(),k(!0)},style:{...F.btn(),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.75rem"},children:"Edit"}),f.jsx("button",{onClick:p=>{p.stopPropagation(),A(!0)},style:{...F.btn("primary"),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.75rem"},children:"+ Add"})]})]}),!Ht.habits&&f.jsxs(f.Fragment,{children:[Object.keys(re.habitLogs||{}).length>0&&f.jsx("div",{style:{padding:"0 1rem 0.5rem",display:"flex",justifyContent:"flex-end"},children:rr.habits?f.jsx("button",{onClick:()=>jn("habits"),style:{background:"none",border:"none",color:"#f59e0b",fontSize:"0.6875rem",cursor:"pointer",padding:"0.25rem 0.5rem"},children:" Undo"}):f.jsx("button",{onClick:()=>bn("habits"),style:{background:"none",border:"none",color:"#71717a",fontSize:"0.6875rem",cursor:"pointer",padding:"0.25rem 0.5rem"},children:"Clear"})}),f.jsx("div",{style:F.cardContent,children:Us.length===0?f.jsxs("div",{style:{padding:"1.5rem 1rem"},children:[f.jsx("p",{style:{fontSize:"0.8125rem",color:"#a1a1aa",marginBottom:"0.75rem",textAlign:"center"},children:"Tap to add or remove habits"}),f.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",justifyContent:"center",marginBottom:"1rem"},children:rg.map(p=>{const I=js(p.name);return f.jsxs("button",{onClick:()=>Ls(p),style:{padding:"0.5rem 0.75rem",borderRadius:"2rem",border:I?"1px solid rgba(16,185,129,0.5)":"1px solid #3f3f46",backgroundColor:I?"rgba(16,185,129,0.15)":"#27272a",color:I?"#10b981":"#fafafa",fontSize:"0.8125rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.375rem",transition:"all 0.15s ease"},children:[f.jsx("span",{children:I?"":p.icon}),f.jsx("span",{children:p.name})]},p.name)})}),f.jsx("div",{style:{textAlign:"center"},children:f.jsx("button",{onClick:()=>A(!0),style:{...F.btn(),fontSize:"0.75rem"},children:"+ Custom habit"})})]}):f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.5rem"},children:Us.map(p=>{var V;const I=((V=re.habitLogs)==null?void 0:V[p.id])||{completed:!1,value:0};return f.jsxs("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:I.completed?"rgba(16,185,129,0.15)":"rgba(39,39,42,0.5)",border:`1px solid ${I.completed?"rgba(16,185,129,0.3)":"#27272a"}`},children:[f.jsx("div",{style:{marginBottom:"0.5rem"},children:p.link?f.jsxs("a",{href:p.link,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"0.8125rem",fontWeight:500,color:"#60a5fa",textDecoration:"none"},children:[p.name," "]}):f.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:500},children:p.name})}),p.type==="count"?f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("button",{onClick:()=>Pi(p.id,Math.max(0,I.value-1)),style:{width:"2.25rem",height:"2.25rem",borderRadius:"0.5rem",border:"none",backgroundColor:"#27272a",color:"white",fontSize:"1.125rem",cursor:"pointer"},children:""}),f.jsx("button",{onClick:()=>Pi(p.id,I.value+1),style:{width:"2.25rem",height:"2.25rem",borderRadius:"0.5rem",border:"none",backgroundColor:"#27272a",color:"white",fontSize:"1.125rem",cursor:"pointer"},children:"+"}),f.jsxs("span",{style:{fontSize:"0.8125rem",fontWeight:600,fontFamily:"JetBrains Mono, monospace",color:I.completed?"#10b981":"#a1a1aa"},children:[I.value,"/",p.target]}),I.completed&&f.jsx("span",{style:{marginLeft:"auto",color:"#10b981"},children:""})]}):f.jsx("button",{onClick:()=>Pi(p.id),style:{width:"100%",padding:"0.5rem",borderRadius:"0.5rem",border:"none",backgroundColor:I.completed?"#10b981":"#27272a",color:I.completed?"white":"#a1a1aa",fontSize:"0.75rem",fontWeight:500,cursor:"pointer"},children:I.completed?" Done":"Mark Done"})]},p.id)})})})]})]}),f.jsxs("div",{style:F.card,children:[f.jsxs("div",{style:F.cardHeader,onClick:()=>Gr("tasks"),children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("span",{style:{color:"#71717a",transform:Ht.tasks?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:""}),f.jsx("span",{style:{fontWeight:600},children:"Tasks"}),f.jsxs("span",{style:F.tag("#71717a"),children:[Vi.filter(p=>!Ns(p,ne)).length," pending"]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[f.jsx("button",{onClick:p=>{p.stopPropagation(),H(!0)},style:{...F.btn(),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.75rem"},children:"Edit"}),f.jsx("button",{onClick:p=>{p.stopPropagation(),L(!0)},style:{...F.btn("primary"),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.75rem"},children:"+ Add"})]})]}),!Ht.tasks&&f.jsxs("div",{style:F.cardContent,children:[Vi.length===0?f.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem"},children:[f.jsx("p",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),f.jsx("p",{style:{color:"#71717a",marginBottom:"1rem"},children:"No tasks yet"}),f.jsx("button",{onClick:()=>L(!0),style:F.btn("primary"),children:"+ Add a task"})]}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Vi.map(p=>{const I=Ns(p,ne);return f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:"rgba(39,39,42,0.3)"},children:[f.jsx("div",{onClick:()=>Kr(p.id),style:F.checkbox(I),children:I&&f.jsx("span",{style:{color:"white",fontSize:"0.875rem"},children:""})}),f.jsx("span",{style:{flex:1,fontSize:"0.875rem",textDecoration:I?"line-through":"none",color:I?"#71717a":"#fafafa"},children:p.title}),p.recurring&&f.jsxs("span",{style:F.tag(p.recurring==="daily"?"#06b6d4":p.recurring==="weekly"?"#3b82f6":"#a855f7"),children:[" ",p.recurring]})]},p.id)})}),Ni.length>0&&f.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #27272a"},children:[f.jsxs("p",{style:{fontSize:"0.6875rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:[" Completed (",Ni.length,")"]}),Ni.map(p=>f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0",color:"#71717a",fontSize:"0.875rem"},children:[f.jsx("span",{onClick:()=>Kr(p.id),style:{cursor:"pointer",color:"#10b981"},children:""}),f.jsx("span",{style:{textDecoration:"line-through",flex:1},children:p.title})]},p.id))]})]})]}),f.jsxs("div",{style:F.card,children:[f.jsx("div",{style:F.cardHeader,onClick:()=>Gr("sleep"),children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("span",{style:{color:"#71717a",transform:Ht.sleep?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:""}),f.jsx("span",{style:{fontWeight:600},children:" Sleep &  Screen"}),((Se=re.sleep)==null?void 0:Se.hoursSlept)&&f.jsxs("span",{style:F.tag(re.sleep.hoursSlept>=7?"#10b981":re.sleep.hoursSlept>=5?"#f59e0b":"#ef4444"),children:[re.sleep.hoursSlept," hrs"]})]})}),!Ht.sleep&&f.jsxs(f.Fragment,{children:[(((Zr=re.sleep)==null?void 0:Zr.bedTime)||((ar=re.sleep)==null?void 0:ar.wakeTime)||re.screenTime>0)&&f.jsx("div",{style:{padding:"0 1rem 0.5rem",display:"flex",justifyContent:"flex-end"},children:rr.sleep?f.jsx("button",{onClick:()=>jn("sleep"),style:{background:"none",border:"none",color:"#f59e0b",fontSize:"0.6875rem",cursor:"pointer",padding:"0.25rem 0.5rem"},children:" Undo"}):f.jsx("button",{onClick:()=>bn("sleep"),style:{background:"none",border:"none",color:"#71717a",fontSize:"0.6875rem",cursor:"pointer",padding:"0.25rem 0.5rem"},children:"Clear"})}),f.jsx("div",{style:F.cardContent,children:f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"1rem"},children:[f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Bedtime"}),f.jsx("input",{type:"time",value:((lr=re.sleep)==null?void 0:lr.bedTime)||"",onChange:p=>{var Y;const I=p.target.value,V=(Y=re.sleep)==null?void 0:Y.wakeTime;let j=null;if(I&&V){const ee=new Date(`2000-01-01T${I}`);let ae=new Date(`2000-01-01T${V}`);ae<ee&&ae.setDate(ae.getDate()+1),j=Math.round((ae-ee)/36e3)/100}h(ee=>{var ae,ye;return{...ee,[ne]:{...ee[ne],habitLogs:((ae=ee[ne])==null?void 0:ae.habitLogs)||{},sleep:{...(ye=ee[ne])==null?void 0:ye.sleep,bedTime:I,hoursSlept:j}}}})},style:{...F.input,fontFamily:"JetBrains Mono, monospace",fontSize:"0.875rem"}})]}),f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Wake time"}),f.jsx("input",{type:"time",value:((Ra=re.sleep)==null?void 0:Ra.wakeTime)||"",onChange:p=>{var Y;const I=p.target.value,V=(Y=re.sleep)==null?void 0:Y.bedTime;let j=null;if(V&&I){const ee=new Date(`2000-01-01T${V}`);let ae=new Date(`2000-01-01T${I}`);ae<ee&&ae.setDate(ae.getDate()+1),j=Math.round((ae-ee)/36e3)/100}h(ee=>{var ae,ye;return{...ee,[ne]:{...ee[ne],habitLogs:((ae=ee[ne])==null?void 0:ae.habitLogs)||{},sleep:{...(ye=ee[ne])==null?void 0:ye.sleep,wakeTime:I,hoursSlept:j}}}})},style:{...F.input,fontFamily:"JetBrains Mono, monospace",fontSize:"0.875rem"}})]}),f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Hours slept"}),f.jsx("div",{style:{...F.input,backgroundColor:(($s=re.sleep)==null?void 0:$s.hoursSlept)>=7?"rgba(16,185,129,0.2)":((Pa=re.sleep)==null?void 0:Pa.hoursSlept)>=5?"rgba(245,158,11,0.2)":(Da=re.sleep)!=null&&Da.hoursSlept?"rgba(239,68,68,0.2)":"#27272a",textAlign:"center",fontWeight:600,fontFamily:"JetBrains Mono, monospace",color:((Va=re.sleep)==null?void 0:Va.hoursSlept)>=7?"#10b981":((Na=re.sleep)==null?void 0:Na.hoursSlept)>=5?"#f59e0b":(ur=re.sleep)!=null&&ur.hoursSlept?"#ef4444":"#71717a"},children:(_n=re.sleep)!=null&&_n.hoursSlept?`${re.sleep.hoursSlept} hrs`:""})]}),f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Screen time (hrs)"}),f.jsx("input",{type:"number",step:"0.5",min:"0",max:"24",value:re.screenTime||"",onChange:p=>h(I=>{var V;return{...I,[ne]:{...I[ne],habitLogs:((V=I[ne])==null?void 0:V.habitLogs)||{},screenTime:parseFloat(p.target.value)||0}}}),placeholder:"0",style:{...F.input,fontFamily:"JetBrains Mono, monospace",fontSize:"0.875rem"}})]})]})})]})]}),f.jsxs("div",{style:F.card,children:[f.jsx("div",{style:F.cardHeader,onClick:()=>Gr("fact"),children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("span",{style:{color:"#71717a",transform:Ht.fact?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:""}),f.jsx("span",{style:{fontWeight:600},children:" Fact I Learned"}),re.factLearned&&f.jsx("span",{style:F.tag("#10b981"),children:" Recorded"})]})}),!Ht.fact&&f.jsxs(f.Fragment,{children:[re.factLearned&&f.jsx("div",{style:{padding:"0 1rem 0.5rem",display:"flex",justifyContent:"flex-end"},children:rr.fact?f.jsx("button",{onClick:()=>jn("fact"),style:{background:"none",border:"none",color:"#f59e0b",fontSize:"0.6875rem",cursor:"pointer",padding:"0.25rem 0.5rem"},children:" Undo"}):f.jsx("button",{onClick:()=>bn("fact"),style:{background:"none",border:"none",color:"#71717a",fontSize:"0.6875rem",cursor:"pointer",padding:"0.25rem 0.5rem"},children:"Clear"})}),f.jsx("div",{style:F.cardContent,children:f.jsx("textarea",{value:re.factLearned||"",onChange:p=>h(I=>{var V;return{...I,[ne]:{...I[ne],habitLogs:((V=I[ne])==null?void 0:V.habitLogs)||{},factLearned:p.target.value}}}),placeholder:"What's something interesting you learned today?",style:{...F.input,minHeight:"5rem",resize:"none",fontSize:"0.875rem"}})})]})]})]}),t==="calendar"&&f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.25rem"},children:[f.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,margin:0},children:"Score Calendar"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("button",{onClick:()=>or(-1),style:{...F.btn(),width:"2.75rem",padding:0},children:""}),f.jsx("span",{style:{flex:1,textAlign:"center",fontWeight:600},children:Ut.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),f.jsx("button",{onClick:()=>or(1),style:{...F.btn(),width:"2.75rem",padding:0},children:""}),f.jsx("button",{onClick:()=>{er(new Date),X(null)},style:{...F.btn(),fontSize:"0.8125rem"},children:"Today"})]})]}),f.jsx("div",{style:F.card,children:f.jsxs("div",{style:{padding:"1rem"},children:[f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem",marginBottom:"0.5rem"},children:["S","M","T","W","T","F","S"].map((p,I)=>f.jsx("div",{style:{textAlign:"center",fontSize:"0.6875rem",fontWeight:500,color:"#71717a",padding:"0.375rem"},children:p},I))}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem"},children:qt.map((p,I)=>{var ee;const V=(ee=m[p.key])==null?void 0:ee.total,j=(B==null?void 0:B.key)===p.key,Y=p.key===Nn;return f.jsxs("button",{onClick:()=>X(p),onDoubleClick:()=>{Wr(p.date),e("today")},style:{aspectRatio:"1",borderRadius:"0.5rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:Y?"2px solid #3b82f6":j?"2px solid #8b5cf6":"none",backgroundColor:lo(V),color:V>0?"white":"#71717a",opacity:p.isCurrentMonth?1:.3,cursor:"pointer",fontSize:"0.75rem",fontWeight:500},children:[f.jsx("span",{children:p.date.getDate()}),V>0&&f.jsx("span",{style:{fontSize:"0.625rem",fontFamily:"JetBrains Mono, monospace"},children:V})]},I)})})]})}),f.jsx("div",{style:F.card,children:f.jsxs("div",{style:{padding:"1rem"},children:[f.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"#a1a1aa",marginBottom:"1rem"},children:"Month Summary"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[f.jsxs("div",{children:[f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Average"}),f.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:"#8b5cf6"},children:[vn.avgScore,"%"]})]}),f.jsxs("div",{children:[f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Days Tracked"}),f.jsx("p",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace"},children:vn.daysTracked})]}),f.jsxs("div",{children:[f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Best Day"}),f.jsx("p",{style:{fontSize:"1.25rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:"#10b981"},children:vn.bestDay.score||""})]}),f.jsxs("div",{children:[f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Best Streak"}),f.jsxs("p",{style:{fontSize:"1.25rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:"#f59e0b"},children:[vn.longestStreak||""," days"]})]})]})]})}),B&&f.jsx("div",{style:F.card,children:f.jsxs("div",{style:{padding:"1rem"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[f.jsx("h3",{style:{fontWeight:600,margin:0},children:B.date.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),f.jsx("button",{onClick:()=>X(null),style:{background:"none",border:"none",color:"#71717a",fontSize:"1.25rem",cursor:"pointer"},children:""})]}),m[B.key]?f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem"},children:f.jsx("div",{style:{width:"5rem",height:"5rem",borderRadius:"0.75rem",backgroundColor:lo(m[B.key].total),display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:"white"},children:[m[B.key].total,"%"]})})}),f.jsxs("p",{style:{textAlign:"center",color:"#71717a",fontSize:"0.875rem",marginBottom:"1rem"},children:[m[B.key].completed,"/",m[B.key].totalHabits," habits completed"]}),(((Hs=(Ws=u[B.key])==null?void 0:Ws.sleep)==null?void 0:Hs.hoursSlept)||((qs=u[B.key])==null?void 0:qs.screenTime)||((Gs=u[B.key])==null?void 0:Gs.factLearned))&&f.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",borderRadius:"0.5rem",backgroundColor:"rgba(39,39,42,0.5)"},children:[f.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem"},children:[((On=(Ks=u[B.key])==null?void 0:Ks.sleep)==null?void 0:On.hoursSlept)&&f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[f.jsx("span",{style:{fontSize:"0.875rem"},children:""}),f.jsxs("span",{style:{fontSize:"0.8125rem",color:u[B.key].sleep.hoursSlept>=7?"#10b981":u[B.key].sleep.hoursSlept>=5?"#f59e0b":"#ef4444",fontWeight:500},children:[u[B.key].sleep.hoursSlept," hrs"]})]}),((ba=u[B.key])==null?void 0:ba.screenTime)>0&&f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[f.jsx("span",{style:{fontSize:"0.875rem"},children:""}),f.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa",fontWeight:500},children:[u[B.key].screenTime," hrs"]})]})]}),((ja=u[B.key])==null?void 0:ja.factLearned)&&f.jsx("div",{style:{marginTop:"0.625rem",paddingTop:"0.625rem",borderTop:"1px solid #3f3f46"},children:f.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.375rem"},children:[f.jsx("span",{style:{fontSize:"0.875rem",flexShrink:0},children:""}),f.jsx("span",{style:{fontSize:"0.75rem",color:"#a1a1aa",lineHeight:"1.5",wordBreak:"break-word",overflowWrap:"break-word"},children:u[B.key].factLearned.length>100?u[B.key].factLearned.substring(0,100)+"...":u[B.key].factLearned})]})})]}),f.jsx("button",{onClick:()=>{Wr(B.date),e("today"),X(null)},style:{...F.btn("primary"),width:"100%"},children:"View Day "})]}):f.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[f.jsx("p",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),f.jsx("p",{style:{color:"#71717a",marginBottom:"1rem"},children:"No data recorded"}),f.jsx("button",{onClick:()=>{Wr(B.date),e("today"),X(null)},style:F.btn("primary"),children:B.key===Nn?"Start tracking":"Add data"})]})]})})]}),t==="goals"&&f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem",gap:"1rem",flexWrap:"wrap"},children:[f.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,margin:0},children:"Goals"}),f.jsx("button",{onClick:()=>w(!0),style:F.btn("primary"),children:"+ New Goal"})]}),a.length===0?f.jsxs("div",{style:{...F.card,padding:"3rem 1.5rem",textAlign:"center"},children:[f.jsx("p",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:""}),f.jsx("p",{style:{color:"#71717a",marginBottom:"1.5rem"},children:"No goals yet. Set your first goal!"}),f.jsx("button",{onClick:()=>w(!0),style:F.btn("primary"),children:"+ Create Goal"})]}):a.map(p=>{const I=p.milestones.filter(j=>j.completed).length,V=p.milestones.length>0?Math.round(I/p.milestones.length*100):0;return f.jsx("div",{style:F.card,children:f.jsxs("div",{style:{padding:"1.25rem"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",gap:"1rem"},children:[f.jsxs("div",{style:{flex:1,minWidth:0},children:[Dt===p.id?f.jsx("input",{defaultValue:p.title,autoFocus:!0,style:{...F.input,fontSize:"1.125rem",fontWeight:600},onBlur:j=>{j.target.value.trim()&&Di(p.id,{title:j.target.value.trim()}),nn(null)},onKeyDown:j=>{j.key==="Enter"&&j.target.blur()}}):f.jsx("h3",{onClick:()=>nn(p.id),style:{fontSize:"1.125rem",fontWeight:600,margin:0,cursor:"pointer"},children:p.title}),f.jsxs("p",{style:{fontSize:"0.8125rem",color:"#71717a",margin:"0.25rem 0 0"},children:[I,"/",p.milestones.length," milestones"]})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:V===100?"#10b981":"#8b5cf6"},children:[V,"%"]}),f.jsx("button",{onClick:()=>Ia(p.id),style:{background:"none",border:"none",color:"#71717a",cursor:"pointer",fontSize:"1.25rem"},children:""})]})]}),f.jsx("div",{style:{height:"0.5rem",borderRadius:"0.25rem",backgroundColor:"#27272a",marginBottom:"1rem",overflow:"hidden"},children:f.jsx("div",{style:{height:"100%",width:`${V}%`,backgroundColor:V===100?"#10b981":"#8b5cf6",borderRadius:"0.25rem",transition:"width 0.5s"}})}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[p.milestones.map((j,Y)=>f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:j.completed?"rgba(16,185,129,0.1)":"rgba(39,39,42,0.5)",border:`1px solid ${j.completed?"rgba(16,185,129,0.3)":"#27272a"}`},children:[f.jsx("div",{onClick:()=>Os(p.id,Y),style:F.checkbox(j.completed),children:j.completed&&f.jsx("span",{style:{color:"white",fontSize:"0.75rem"},children:""})}),(mn==null?void 0:mn.goalId)===p.id&&(mn==null?void 0:mn.index)===Y?f.jsx("input",{defaultValue:j.text,autoFocus:!0,style:{...F.input,flex:1,minHeight:"36px",padding:"0.5rem"},onBlur:ee=>{ee.target.value.trim()&&Gu(p.id,Y,ee.target.value.trim()),Rs(null)},onKeyDown:ee=>{ee.key==="Enter"&&ee.target.blur()}}):f.jsx("span",{onClick:()=>Rs({goalId:p.id,index:Y}),style:{flex:1,fontSize:"0.875rem",textDecoration:j.completed?"line-through":"none",color:j.completed?"#71717a":"#fafafa",cursor:"pointer"},children:j.text}),f.jsx("button",{onClick:()=>Ca(p.id,Y),style:{background:"none",border:"none",color:"#71717a",cursor:"pointer",opacity:.5},children:""})]},Y)),f.jsx("form",{onSubmit:j=>{j.preventDefault();const Y=j.target.elements[`milestone-${p.id}`];Y.value.trim()&&(qu(p.id,Y.value.trim()),Y.value="")},children:f.jsx("input",{name:`milestone-${p.id}`,type:"text",placeholder:"+ Add milestone...",style:{...F.input,fontSize:"0.875rem"}})})]})]})},p.id)})]}),t==="ideas"&&f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.25rem"},children:[f.jsxs("div",{children:[f.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,margin:0},children:"Ideas"}),f.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a",margin:"0.25rem 0 0"},children:"Capture and develop your ideas"})]}),f.jsx("button",{onClick:()=>E(!0),style:{...F.btn("primary"),width:"100%"},children:"+ New Idea"})]}),_.length===0?f.jsxs("div",{style:{...F.card,padding:"3rem 1.5rem",textAlign:"center"},children:[f.jsx("p",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:""}),f.jsx("p",{style:{color:"#71717a",marginBottom:"1.5rem"},children:"No ideas yet. Capture your first one!"}),f.jsx("button",{onClick:()=>E(!0),style:F.btn("primary"),children:"+ Add Idea"})]}):_.map(p=>{var ae,ye,Vt;const I=ya===p.id,V=p.status||"idea",j={idea:{icon:"",color:"#71717a"},exploring:{icon:"",color:"#3b82f6"},planning:{icon:"",color:"#a855f7"},active:{icon:"",color:"#10b981"},done:{icon:"",color:"#10b981"}}[V],Y=(p.points||[]).filter(ge=>ge.done).length,ee=(p.points||[]).length;return f.jsxs("div",{style:F.card,children:[f.jsx("div",{onClick:()=>xi(I?null:p.id),style:{padding:"1rem",cursor:"pointer"},children:f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"0.75rem"},children:[f.jsxs("div",{style:{flex:1,minWidth:0},children:[f.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,margin:0,marginBottom:"0.5rem"},children:p.text}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[f.jsxs("span",{style:F.tag(j.color),children:[j.icon," ",V]}),f.jsxs("span",{style:F.tag(((ae=ao[p.category])==null?void 0:ae.color)||"#71717a"),children:[(ye=ao[p.category])==null?void 0:ye.icon," ",((Vt=ao[p.category])==null?void 0:Vt.name)||"General"]}),ee>0&&f.jsxs("span",{style:{fontSize:"0.6875rem",color:"#71717a"},children:[Y,"/",ee," points"]})]})]}),f.jsx("span",{style:{color:"#71717a",transform:I?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""})]})}),I&&f.jsxs("div",{style:{padding:"0 1rem 1rem",borderTop:"1px solid #27272a"},children:[f.jsxs("div",{style:{paddingTop:"1rem"},children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"0.5rem"},children:"Status"}),f.jsx("div",{style:{display:"flex",gap:"0.375rem",flexWrap:"wrap"},children:["idea","exploring","planning","active","done"].map(ge=>{const ce={idea:"",exploring:"",planning:"",active:"",done:""}[ge];return f.jsxs("button",{onClick:()=>Yr(p.id,{status:ge}),style:{...F.btn(V===ge?"primary":"secondary"),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.625rem"},children:[ce," ",ge]},ge)})})]}),f.jsxs("div",{style:{marginTop:"1rem"},children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"0.5rem"},children:"Notes"}),f.jsx("textarea",{value:p.notes||"",onChange:ge=>Yr(p.id,{notes:ge.target.value}),placeholder:"Add notes...",style:{...F.input,minHeight:"4rem",resize:"none",fontSize:"0.875rem"}})]}),f.jsxs("div",{style:{marginTop:"1rem"},children:[f.jsxs("label",{style:{fontSize:"0.6875rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"0.5rem"},children:["Brainstorm Points (",Y,"/",ee,")"]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.375rem"},children:[(p.points||[]).map(ge=>f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",borderRadius:"0.5rem",backgroundColor:"rgba(39,39,42,0.3)"},children:[f.jsx("div",{onClick:()=>Ln(p.id,ge.id),style:{...F.checkbox(ge.done),width:"1.5rem",height:"1.5rem"},children:ge.done&&f.jsx("span",{style:{color:"white",fontSize:"0.625rem"},children:""})}),f.jsx("span",{style:{flex:1,fontSize:"0.8125rem",textDecoration:ge.done?"line-through":"none",color:ge.done?"#71717a":"#fafafa"},children:ge.text}),f.jsx("button",{onClick:()=>Fs(p.id,ge.id),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"0.875rem",opacity:.7},children:""})]},ge.id)),f.jsxs("form",{onSubmit:ge=>{ge.preventDefault();const ce=ge.target.elements.point;ce.value.trim()&&(Jr(p.id,ce.value.trim()),ce.value="")},style:{display:"flex",gap:"0.5rem"},children:[f.jsx("input",{name:"point",type:"text",placeholder:"+ Add point...",style:{...F.input,flex:1,fontSize:"0.8125rem"}}),f.jsx("button",{type:"submit",style:{...F.btn(),fontSize:"0.75rem"},children:"Add"})]})]})]}),f.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #27272a",display:"flex",justifyContent:"space-between"},children:[f.jsx("button",{onClick:()=>{Sa({title:p.text,term:"This Week"}),Yr(p.id,{status:"active"})},style:{background:"none",border:"none",color:"#8b5cf6",cursor:"pointer",fontSize:"0.8125rem"},children:" Make Task"}),f.jsx("button",{onClick:()=>Ku(p.id),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"0.8125rem"},children:" Delete"})]})]})]},p.id)})]})]}),f.jsx(Tn,{isOpen:b,onClose:()=>{L(!1),_e("Today"),$t(null)},title:"New Task",children:f.jsxs("form",{onSubmit:p=>{p.preventDefault(),Sa({title:p.target.title.value,term:we?"Today":ie,recurring:we})},children:[f.jsx("input",{name:"title",type:"text",placeholder:"What needs to be done?",style:{...F.input,marginBottom:"1rem"},autoFocus:!0,required:!0}),f.jsx("label",{style:{fontSize:"0.75rem",color:"#71717a",display:"block",marginBottom:"0.5rem"},children:"Repeat"}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginBottom:"1rem"},children:[{v:null,l:"Once",i:"1"},{v:"daily",l:"Daily",i:""},{v:"weekly",l:"Weekly",i:""},{v:"monthly",l:"Monthly",i:""}].map(p=>f.jsxs("button",{type:"button",onClick:()=>$t(p.v),style:{padding:"0.75rem 0.5rem",borderRadius:"0.75rem",border:we===p.v?"2px solid #10b981":"2px solid #27272a",backgroundColor:we===p.v?"rgba(16,185,129,0.15)":"#27272a",color:we===p.v?"#10b981":"#fafafa",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem"},children:[f.jsx("span",{style:{fontSize:"1.25rem"},children:p.i}),f.jsx("span",{style:{fontSize:"0.6875rem",fontWeight:500},children:p.l})]},p.l))}),!we&&f.jsxs(f.Fragment,{children:[f.jsx("label",{style:{fontSize:"0.75rem",color:"#71717a",display:"block",marginBottom:"0.5rem"},children:"When"}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.5rem",marginBottom:"1rem"},children:[{v:"Today",c:"#8b5cf6"},{v:"This Week",c:"#3b82f6"},{v:"This Month",c:"#a855f7"},{v:"Long Term",c:"#71717a"}].map(p=>f.jsx("button",{type:"button",onClick:()=>_e(p.v),style:{padding:"0.75rem",borderRadius:"0.75rem",border:ie===p.v?`2px solid ${p.c}`:"2px solid #27272a",backgroundColor:ie===p.v?`${p.c}20`:"#27272a",color:ie===p.v?p.c:"#fafafa",cursor:"pointer",fontSize:"0.8125rem",fontWeight:500},children:p.v},p.v))})]}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem"},children:[f.jsx("button",{type:"button",onClick:()=>{L(!1),_e("Today"),$t(null)},style:{...F.btn(),flex:1},children:"Cancel"}),f.jsx("button",{type:"submit",style:{...F.btn("primary"),flex:1},children:"Add Task"})]})]})}),f.jsx(Tn,{isOpen:$,onClose:()=>A(!1),title:"New Habit",children:f.jsxs("form",{onSubmit:p=>{p.preventDefault();const I=p.target;bs({name:I.name.value,type:I.type.value,target:I.target.value,category:I.category.value})},children:[f.jsx("input",{name:"name",type:"text",placeholder:"Habit name",style:{...F.input,marginBottom:"0.75rem"},autoFocus:!0,required:!0}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[f.jsxs("select",{name:"type",style:F.input,children:[f.jsx("option",{value:"binary",children:"Yes/No"}),f.jsx("option",{value:"count",children:"Count"})]}),f.jsx("input",{name:"target",type:"number",placeholder:"Target (1)",defaultValue:1,style:F.input})]}),f.jsx("select",{name:"category",style:{...F.input,marginBottom:"1.5rem"},children:Object.entries(ao).map(([p,I])=>f.jsxs("option",{value:p,children:[I.icon," ",I.name]},p))}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[f.jsx("button",{type:"button",onClick:()=>A(!1),style:{...F.btn(),flex:1},children:"Cancel"}),f.jsx("button",{type:"submit",style:{...F.btn("primary"),flex:1},children:"Add Habit"})]})]})}),f.jsxs(Tn,{isOpen:T,onClose:()=>{k(!1),Wt(null)},title:"Edit Habits",size:"lg",children:[f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:i.length===0?f.jsx("p",{style:{textAlign:"center",color:"#71717a",padding:"2rem"},children:"No habits yet"}):i.map(p=>f.jsx("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:"#27272a"},children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("div",{style:{flex:1,minWidth:0},children:at===p.id?f.jsx("input",{defaultValue:p.name,autoFocus:!0,style:{...F.input,minHeight:"36px",padding:"0.5rem",fontSize:"0.875rem"},onBlur:I=>{I.target.value.trim()&&Qr(p.id,{name:I.target.value.trim()}),Wt(null)},onKeyDown:I=>{I.key==="Enter"&&I.target.blur()}}):f.jsxs("div",{children:[f.jsx("span",{style:{fontWeight:500,fontSize:"0.875rem"},children:p.name}),f.jsxs("span",{style:{fontSize:"0.75rem",color:"#71717a",marginLeft:"0.5rem"},children:["(",p.type==="count"?`${p.target}/day`:"daily",")"]})]})}),f.jsx("button",{onClick:()=>Wt(at===p.id?null:p.id),style:{...F.btn(),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.625rem"},children:at===p.id?"Done":"Edit"}),f.jsx("button",{onClick:()=>{k(!1),S(p)},style:{...F.btn("danger"),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.625rem"},children:"Delete"})]})},p.id))}),f.jsx("button",{onClick:()=>{k(!1),Wt(null)},style:{...F.btn(),width:"100%",marginTop:"1rem"},children:"Done"})]}),f.jsxs(Tn,{isOpen:M,onClose:()=>H(!1),title:"Edit Tasks",size:"lg",children:[f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:n.length===0?f.jsx("p",{style:{textAlign:"center",color:"#71717a",padding:"2rem"},children:"No tasks yet"}):n.map(p=>f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:"#27272a",opacity:p.status==="done"?.6:1},children:[f.jsx("span",{style:{flex:1,fontSize:"0.875rem",textDecoration:p.status==="done"?"line-through":"none"},children:p.title}),p.recurring&&f.jsx("span",{style:F.tag("#06b6d4"),children:p.recurring}),f.jsx("button",{onClick:()=>r(I=>I.filter(V=>V.id!==p.id)),style:{...F.btn("danger"),fontSize:"0.75rem",minHeight:"32px",padding:"0.25rem 0.5rem"},children:""})]},p.id))}),f.jsx("button",{onClick:()=>H(!1),style:{...F.btn(),width:"100%",marginTop:"1rem"},children:"Done"})]}),f.jsx(Tn,{isOpen:G,onClose:()=>E(!1),title:" New Idea",children:f.jsxs("form",{onSubmit:p=>{p.preventDefault(),xa({text:p.target.text.value,category:p.target.category.value})},children:[f.jsx("input",{name:"text",type:"text",placeholder:"What's your idea?",style:{...F.input,marginBottom:"0.75rem",fontSize:"1rem"},autoFocus:!0,required:!0}),f.jsx("select",{name:"category",style:{...F.input,marginBottom:"1.5rem"},children:Object.entries(ao).map(([p,I])=>f.jsxs("option",{value:p,children:[I.icon," ",I.name]},p))}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[f.jsx("button",{type:"button",onClick:()=>E(!1),style:{...F.btn(),flex:1},children:"Cancel"}),f.jsx("button",{type:"submit",style:{...F.btn("primary"),flex:1},children:"Capture"})]})]})}),f.jsx(Tn,{isOpen:y,onClose:()=>w(!1),title:"New Goal",children:f.jsxs("form",{onSubmit:p=>{p.preventDefault(),Ms({title:p.target.title.value,milestonesText:p.target.milestones.value})},children:[f.jsx("input",{name:"title",type:"text",placeholder:"Goal title",style:{...F.input,marginBottom:"0.75rem"},autoFocus:!0,required:!0}),f.jsx("label",{style:{fontSize:"0.75rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Milestones (one per line)"}),f.jsx("textarea",{name:"milestones",placeholder:`First milestone
Second milestone
Third milestone`,style:{...F.input,minHeight:"6rem",resize:"none",marginBottom:"1.5rem"}}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[f.jsx("button",{type:"button",onClick:()=>w(!1),style:{...F.btn(),flex:1},children:"Cancel"}),f.jsx("button",{type:"submit",style:{...F.btn("primary"),flex:1},children:"Create Goal"})]})]})}),f.jsxs(Tn,{isOpen:C,onClose:()=>x(!1),title:" Backup & Sync",children:[(lt||_t)&&f.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:((lt==null?void 0:lt.type)||(_t==null?void 0:_t.type))==="success"?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)",color:((lt==null?void 0:lt.type)||(_t==null?void 0:_t.type))==="success"?"#10b981":"#ef4444",fontSize:"0.875rem"},children:[((lt==null?void 0:lt.type)||(_t==null?void 0:_t.type))==="success"?"":""," ",(lt==null?void 0:lt.message)||(_t==null?void 0:_t.message)]}),f.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",backgroundColor:"#27272a",marginBottom:"0.75rem",border:vt?"1px solid rgba(16,185,129,0.3)":"1px solid transparent"},children:[f.jsx("h3",{style:{fontWeight:600,marginBottom:"0.75rem",fontSize:"0.9375rem"},children:" Cloud Sync"}),vt?f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",borderRadius:"0.5rem",backgroundColor:"#3f3f46",textAlign:"center"},children:[f.jsx("p",{style:{fontSize:"0.75rem",color:"#a1a1aa",marginBottom:"0.25rem"},children:"Your sync code"}),f.jsx("p",{style:{fontFamily:"JetBrains Mono, monospace",fontSize:"1.25rem",fontWeight:700,color:"#fafafa",letterSpacing:"0.05em"},children:vt.toUpperCase()}),f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a",marginTop:"0.375rem"},children:"Codes are not case-sensitive"})]}),f.jsx("div",{style:{marginBottom:"1rem",padding:"0.625rem",borderRadius:"0.5rem",backgroundColor:"rgba(59,130,246,0.1)",border:"1px solid rgba(59,130,246,0.2)"},children:f.jsx("p",{style:{fontSize:"0.75rem",color:"#60a5fa",margin:0},children:" Save this code somewhere safe  you'll need it to sync on other devices"})}),Ai&&f.jsxs("p",{style:{fontSize:"0.75rem",color:"#71717a",marginBottom:"0.75rem"},children:["Last synced: ",new Date(Ai).toLocaleString()]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[f.jsx("button",{onClick:Aa,disabled:Te,style:{...F.btn("primary"),flex:1,opacity:Te?.7:1,fontSize:"0.8125rem"},children:Te?"...":" Upload to Cloud"}),f.jsx("button",{onClick:Bs,disabled:Te,style:{...F.btn(),flex:1,opacity:Te?.7:1,fontSize:"0.8125rem"},children:Te?"...":" Download from Cloud"})]}),f.jsx("p",{style:{fontSize:"0.6875rem",color:"#a1a1aa",marginBottom:"1rem",lineHeight:"1.4"},children:'Data does not sync automatically. Tap "Upload to Cloud" to save your data, or "Download from Cloud" to load data from another device.'}),f.jsxs("div",{style:{paddingTop:"0.75rem",borderTop:"1px solid #3f3f46"},children:[f.jsx("button",{onClick:ka,style:{background:"none",border:"none",color:"#f59e0b",fontSize:"0.8125rem",cursor:"pointer",padding:0,fontWeight:500},children:" Change Code"}),f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a",marginTop:"0.375rem"},children:"Changing your code won't delete local data."})]})]}):f.jsxs(f.Fragment,{children:[f.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a",marginBottom:"0.75rem"},children:"Enter a personal sync code to backup & sync across devices"}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[f.jsx("input",{type:"text",value:It,onChange:p=>ze(p.target.value.toUpperCase()),placeholder:"e.g. LIFEMANAGER",style:{...F.input,flex:1,fontFamily:"JetBrains Mono, monospace",textTransform:"uppercase"},onKeyDown:p=>{p.key==="Enter"&&sr()}}),f.jsx("button",{onClick:sr,disabled:Te||!It.trim(),style:{...F.btn("primary"),opacity:Te||!It.trim()?.7:1},children:Te?"...":"Connect"})]}),f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Codes are not case-sensitive"})]})]}),f.jsx("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:"rgba(39,39,42,0.5)",fontSize:"0.75rem",color:"#71717a",marginBottom:"0.75rem"},children:f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.25rem"},children:[f.jsxs("span",{children:[i.length," habits"]}),f.jsxs("span",{children:[n.length," tasks"]}),f.jsxs("span",{children:[a.length," goals"]}),f.jsxs("span",{children:[_.length," ideas"]}),f.jsxs("span",{children:[Object.keys(u).length," days logged"]}),f.jsxs("span",{children:[Object.keys(m).length," scores"]})]})}),f.jsx("button",{onClick:()=>x(!1),style:{...F.btn(),width:"100%"},children:"Close"})]}),f.jsxs(Tn,{isOpen:Wu,onClose:zs,title:" Add to Home Screen",children:[f.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[f.jsx("p",{style:{fontSize:"3rem",marginBottom:"0.75rem"},children:""}),f.jsx("p",{style:{fontSize:"0.9375rem",color:"#fafafa",marginBottom:"0.5rem"},children:"Get the full app experience"}),f.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a"},children:"Add Life Manager to your home screen for quick access and a better experience."})]}),va?f.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",backgroundColor:"#27272a",marginBottom:"1rem"},children:[f.jsx("p",{style:{fontSize:"0.8125rem",fontWeight:600,color:"#fafafa",marginBottom:"0.75rem"},children:"For iPhone/iPad (Safari):"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:[f.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"1."}),f.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Tap the ",f.jsx("strong",{style:{color:"#fafafa"},children:"Share"})," button at the bottom (square with arrow )"]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"2."}),f.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Scroll down and tap ",f.jsx("strong",{style:{color:"#fafafa"},children:'"Add to Home Screen"'})]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"3."}),f.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Tap ",f.jsx("strong",{style:{color:"#fafafa"},children:'"Add"'})]})]})]})]}):Ds?f.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",backgroundColor:"#27272a",marginBottom:"1rem"},children:[f.jsx("p",{style:{fontSize:"0.8125rem",fontWeight:600,color:"#fafafa",marginBottom:"0.75rem"},children:"For Android (Chrome):"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:[f.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"1."}),f.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Tap the ",f.jsx("strong",{style:{color:"#fafafa"},children:"menu icon"})," (three dots ) in the top right"]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"2."}),f.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Tap ",f.jsx("strong",{style:{color:"#fafafa"},children:'"Add to Home Screen"'})," or ",f.jsx("strong",{style:{color:"#fafafa"},children:'"Install App"'})]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"3."}),f.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Tap ",f.jsx("strong",{style:{color:"#fafafa"},children:'"Add"'})]})]})]})]}):null,f.jsx("button",{onClick:zs,style:{...F.btn("primary"),width:"100%"},children:"Got it"})]}),f.jsxs(Tn,{isOpen:wa,onClose:Xr,title:" Welcome to Life Manager",children:[f.jsxs("div",{style:{marginBottom:"1.5rem"},children:[f.jsx("p",{style:{fontSize:"0.75rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.75rem"},children:"Quick Start Habits"}),f.jsx("p",{style:{fontSize:"0.8125rem",color:"#a1a1aa",marginBottom:"0.75rem"},children:"Tap to add or remove habits"}),f.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:rg.map(p=>{const I=js(p.name);return f.jsxs("button",{onClick:()=>Ls(p),style:{padding:"0.5rem 0.75rem",borderRadius:"2rem",border:I?"1px solid rgba(16,185,129,0.5)":"1px solid #3f3f46",backgroundColor:I?"rgba(16,185,129,0.15)":"#27272a",color:I?"#10b981":"#fafafa",fontSize:"0.8125rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.375rem",transition:"all 0.15s ease"},children:[f.jsx("span",{children:I?"":p.icon}),f.jsx("span",{children:p.name})]},p.name)})})]}),f.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",backgroundColor:"#27272a",marginBottom:"1rem"},children:[f.jsx("p",{style:{fontSize:"0.75rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:" Cloud Sync (Optional)"}),f.jsx("p",{style:{fontSize:"0.8125rem",color:"#a1a1aa",marginBottom:"0.75rem"},children:"Enter a code to sync across devices"}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[f.jsx("input",{type:"text",value:It,onChange:p=>ze(p.target.value.toUpperCase()),placeholder:"e.g. LIFEMANAGER",style:{...F.input,flex:1,fontFamily:"JetBrains Mono, monospace",textTransform:"uppercase",minHeight:"40px"},onKeyDown:p=>{p.key==="Enter"&&It.trim()&&(sr(),Xr())}}),f.jsx("button",{onClick:()=>{It.trim()&&(sr(),Xr())},disabled:Te||!It.trim(),style:{...F.btn("primary"),opacity:Te||!It.trim()?.5:1},children:Te?"...":"Connect"})]})]}),f.jsx("button",{onClick:Xr,style:{...F.btn("primary"),width:"100%"},children:"Get Started"})]}),f.jsx(Tn,{isOpen:!!P,onClose:()=>{S(null),yt("")},title:"Delete Habit",children:P&&f.jsxs(f.Fragment,{children:[f.jsxs("p",{style:{color:"#a1a1aa",marginBottom:"1rem"},children:['"',P.name,'"']}),f.jsxs("button",{onClick:()=>gn(P.id),style:{width:"100%",padding:"1rem",borderRadius:"0.75rem",border:"2px solid #27272a",backgroundColor:"#27272a",color:"#fafafa",cursor:"pointer",textAlign:"left",marginBottom:"0.75rem"},children:[f.jsxs("div",{style:{fontWeight:500,marginBottom:"0.25rem"},children:["Remove from ",Ri()]}),f.jsx("div",{style:{fontSize:"0.8125rem",color:"#71717a"},children:"Clears today's data only. Habit stays in your list."})]}),f.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",border:"2px solid rgba(239,68,68,0.3)",backgroundColor:"rgba(239,68,68,0.1)"},children:[f.jsx("div",{style:{fontWeight:500,color:"#f87171",marginBottom:"0.5rem"},children:"Delete permanently"}),f.jsxs("div",{style:{fontSize:"0.8125rem",color:"#71717a",marginBottom:"0.75rem"},children:["Removes habit and all history. Type ",f.jsx("span",{style:{color:"#f87171",fontFamily:"JetBrains Mono, monospace"},children:"delete"})," to confirm."]}),f.jsx("input",{type:"text",value:je,onChange:p=>yt(p.target.value),placeholder:'Type "delete"',style:{...F.input,marginBottom:"0.75rem",fontSize:"0.875rem"}}),f.jsx("button",{onClick:()=>Hu(P.id),disabled:je.toLowerCase()!=="delete",style:{...F.btn("danger"),width:"100%",opacity:je.toLowerCase()!=="delete"?.5:1,cursor:je.toLowerCase()!=="delete"?"not-allowed":"pointer"},children:"Delete Forever"})]}),f.jsx("button",{onClick:()=>{S(null),yt("")},style:{...F.btn(),width:"100%",marginTop:"1rem"},children:"Cancel"})]})})]})}bc.createRoot(document.getElementById("root")).render(f.jsx(E_.StrictMode,{children:f.jsx(ZI,{})}));
