(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function r_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rg={exports:{}},pu={},ig={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ra=Symbol.for("react.element"),i_=Symbol.for("react.portal"),s_=Symbol.for("react.fragment"),o_=Symbol.for("react.strict_mode"),a_=Symbol.for("react.profiler"),l_=Symbol.for("react.provider"),u_=Symbol.for("react.context"),c_=Symbol.for("react.forward_ref"),h_=Symbol.for("react.suspense"),d_=Symbol.for("react.memo"),f_=Symbol.for("react.lazy"),Ff=Symbol.iterator;function p_(t){return t===null||typeof t!="object"?null:(t=Ff&&t[Ff]||t["@@iterator"],typeof t=="function"?t:null)}var sg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},og=Object.assign,ag={};function ws(t,e,n){this.props=t,this.context=e,this.refs=ag,this.updater=n||sg}ws.prototype.isReactComponent={};ws.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ws.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lg(){}lg.prototype=ws.prototype;function qh(t,e,n){this.props=t,this.context=e,this.refs=ag,this.updater=n||sg}var Kh=qh.prototype=new lg;Kh.constructor=qh;og(Kh,ws.prototype);Kh.isPureReactComponent=!0;var zf=Array.isArray,ug=Object.prototype.hasOwnProperty,Gh={current:null},cg={key:!0,ref:!0,__self:!0,__source:!0};function hg(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)ug.call(e,r)&&!cg.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ra,type:t,key:s,ref:a,props:i,_owner:Gh.current}}function m_(t,e){return{$$typeof:ra,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qh(t){return typeof t=="object"&&t!==null&&t.$$typeof===ra}function g_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Bf=/\/+/g;function Ju(t,e){return typeof t=="object"&&t!==null&&t.key!=null?g_(""+t.key):e.toString(36)}function ul(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ra:case i_:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Ju(a,0):r,zf(i)?(n="",t!=null&&(n=t.replace(Bf,"$&/")+"/"),ul(i,e,n,"",function(h){return h})):i!=null&&(Qh(i)&&(i=m_(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Bf,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",zf(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Ju(s,l);a+=ul(s,e,n,u,i)}else if(u=p_(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Ju(s,l++),a+=ul(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function za(t,e,n){if(t==null)return t;var r=[],i=0;return ul(t,r,"","",function(s){return e.call(n,s,i++)}),r}function y_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},cl={transition:null},v_={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:cl,ReactCurrentOwner:Gh};function dg(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:za,forEach:function(t,e,n){za(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return za(t,function(){e++}),e},toArray:function(t){return za(t,function(e){return e})||[]},only:function(t){if(!Qh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=ws;ue.Fragment=s_;ue.Profiler=a_;ue.PureComponent=qh;ue.StrictMode=o_;ue.Suspense=h_;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v_;ue.act=dg;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=og({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Gh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)ug.call(e,u)&&!cg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:ra,type:t.type,key:i,ref:s,props:r,_owner:a}};ue.createContext=function(t){return t={$$typeof:u_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:l_,_context:t},t.Consumer=t};ue.createElement=hg;ue.createFactory=function(t){var e=hg.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:c_,render:t}};ue.isValidElement=Qh;ue.lazy=function(t){return{$$typeof:f_,_payload:{_status:-1,_result:t},_init:y_}};ue.memo=function(t,e){return{$$typeof:d_,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=cl.transition;cl.transition={};try{t()}finally{cl.transition=e}};ue.unstable_act=dg;ue.useCallback=function(t,e){return xt.current.useCallback(t,e)};ue.useContext=function(t){return xt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return xt.current.useEffect(t,e)};ue.useId=function(){return xt.current.useId()};ue.useImperativeHandle=function(t,e,n){return xt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return xt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return xt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return xt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return xt.current.useReducer(t,e,n)};ue.useRef=function(t){return xt.current.useRef(t)};ue.useState=function(t){return xt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return xt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return xt.current.useTransition()};ue.version="18.3.1";ig.exports=ue;var W=ig.exports;const __=r_(W);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_=W,w_=Symbol.for("react.element"),T_=Symbol.for("react.fragment"),S_=Object.prototype.hasOwnProperty,I_=E_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C_={key:!0,ref:!0,__self:!0,__source:!0};function fg(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)S_.call(e,r)&&!C_.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:w_,type:t,key:s,ref:a,props:i,_owner:I_.current}}pu.Fragment=T_;pu.jsx=fg;pu.jsxs=fg;rg.exports=pu;var f=rg.exports,Vc={},pg={exports:{}},Bt={},mg={exports:{}},gg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Z){var re=B.length;B.push(Z);e:for(;0<re;){var ve=re-1>>>1,Ee=B[ve];if(0<i(Ee,Z))B[ve]=Z,B[re]=Ee,re=ve;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Z=B[0],re=B.pop();if(re!==Z){B[0]=re;e:for(var ve=0,Ee=B.length,Wt=Ee>>>1;ve<Wt;){var at=2*(ve+1)-1,Ht=B[at],jt=at+1,rn=B[jt];if(0>i(Ht,re))jt<Ee&&0>i(rn,Ht)?(B[ve]=rn,B[jt]=re,ve=jt):(B[ve]=Ht,B[at]=re,ve=at);else if(jt<Ee&&0>i(rn,re))B[ve]=rn,B[jt]=re,ve=jt;else break e}}return Z}function i(B,Z){var re=B.sortIndex-Z.sortIndex;return re!==0?re:B.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],p=1,v=null,_=3,R=!1,j=!1,L=!1,$=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(B){for(var Z=n(h);Z!==null;){if(Z.callback===null)r(h);else if(Z.startTime<=B)r(h),Z.sortIndex=Z.expirationTime,e(u,Z);else break;Z=n(h)}}function M(B){if(L=!1,k(B),!j)if(n(u)!==null)j=!0,$t(H);else{var Z=n(h);Z!==null&&Xn(M,Z.startTime-B)}}function H(B,Z){j=!1,L&&(L=!1,x(y),y=-1),R=!0;var re=_;try{for(k(Z),v=n(u);v!==null&&(!(v.expirationTime>Z)||B&&!C());){var ve=v.callback;if(typeof ve=="function"){v.callback=null,_=v.priorityLevel;var Ee=ve(v.expirationTime<=Z);Z=t.unstable_now(),typeof Ee=="function"?v.callback=Ee:v===n(u)&&r(u),k(Z)}else r(u);v=n(u)}if(v!==null)var Wt=!0;else{var at=n(h);at!==null&&Xn(M,at.startTime-Z),Wt=!1}return Wt}finally{v=null,_=re,R=!1}}var K=!1,E=null,y=-1,w=5,I=-1;function C(){return!(t.unstable_now()-I<w)}function P(){if(E!==null){var B=t.unstable_now();I=B;var Z=!0;try{Z=E(!0,B)}finally{Z?S():(K=!1,E=null)}}else K=!1}var S;if(typeof T=="function")S=function(){T(P)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,_t=je.port2;je.port1.onmessage=P,S=function(){_t.postMessage(null)}}else S=function(){$(P,0)};function $t(B){E=B,K||(K=!0,S())}function Xn(B,Z){y=$(function(){B(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){j||R||(j=!0,$t(H))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(_){case 1:case 2:case 3:var Z=3;break;default:Z=_}var re=_;_=Z;try{return B()}finally{_=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Z){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var re=_;_=B;try{return Z()}finally{_=re}},t.unstable_scheduleCallback=function(B,Z,re){var ve=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ve+re:ve):re=ve,B){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=re+Ee,B={id:p++,callback:Z,priorityLevel:B,startTime:re,expirationTime:Ee,sortIndex:-1},re>ve?(B.sortIndex=re,e(h,B),n(u)===null&&B===n(h)&&(L?(x(y),y=-1):L=!0,Xn(M,re-ve))):(B.sortIndex=Ee,e(u,B),j||R||(j=!0,$t(H))),B},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(B){var Z=_;return function(){var re=_;_=Z;try{return B.apply(this,arguments)}finally{_=re}}}})(gg);mg.exports=gg;var x_=mg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_=W,zt=x_;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yg=new Set,Po={};function gi(t,e){ls(t,e),ls(t+"Capture",e)}function ls(t,e){for(Po[t]=e,t=0;t<e.length;t++)yg.add(e[t])}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nc=Object.prototype.hasOwnProperty,k_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uf={},$f={};function R_(t){return Nc.call($f,t)?!0:Nc.call(Uf,t)?!1:k_.test(t)?$f[t]=!0:(Uf[t]=!0,!1)}function P_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function D_(t,e,n,r){if(e===null||typeof e>"u"||P_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yh=/[\-:]([a-z])/g;function Jh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yh,Jh);st[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yh,Jh);st[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yh,Jh);st[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xh(t,e,n,r){var i=st.hasOwnProperty(e)?st[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(D_(e,n,i,r)&&(n=null),r||i===null?R_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jn=A_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ba=Symbol.for("react.element"),Bi=Symbol.for("react.portal"),Ui=Symbol.for("react.fragment"),Zh=Symbol.for("react.strict_mode"),bc=Symbol.for("react.profiler"),vg=Symbol.for("react.provider"),_g=Symbol.for("react.context"),ed=Symbol.for("react.forward_ref"),jc=Symbol.for("react.suspense"),Lc=Symbol.for("react.suspense_list"),td=Symbol.for("react.memo"),dr=Symbol.for("react.lazy"),Eg=Symbol.for("react.offscreen"),Wf=Symbol.iterator;function Ks(t){return t===null||typeof t!="object"?null:(t=Wf&&t[Wf]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,Xu;function oo(t){if(Xu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xu=e&&e[1]||""}return`
`+Xu+t}var Zu=!1;function ec(t,e){if(!t||Zu)return"";Zu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{Zu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?oo(t):""}function V_(t){switch(t.tag){case 5:return oo(t.type);case 16:return oo("Lazy");case 13:return oo("Suspense");case 19:return oo("SuspenseList");case 0:case 2:case 15:return t=ec(t.type,!1),t;case 11:return t=ec(t.type.render,!1),t;case 1:return t=ec(t.type,!0),t;default:return""}}function Oc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ui:return"Fragment";case Bi:return"Portal";case bc:return"Profiler";case Zh:return"StrictMode";case jc:return"Suspense";case Lc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _g:return(t.displayName||"Context")+".Consumer";case vg:return(t._context.displayName||"Context")+".Provider";case ed:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case td:return e=t.displayName||null,e!==null?e:Oc(t.type)||"Memo";case dr:e=t._payload,t=t._init;try{return Oc(t(e))}catch{}}return null}function N_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oc(e);case 8:return e===Zh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Dr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function b_(t){var e=wg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ua(t){t._valueTracker||(t._valueTracker=b_(t))}function Tg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=wg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Al(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mc(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Dr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sg(t,e){e=e.checked,e!=null&&Xh(t,"checked",e,!1)}function Fc(t,e){Sg(t,e);var n=Dr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zc(t,e.type,n):e.hasOwnProperty("defaultValue")&&zc(t,e.type,Dr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zc(t,e,n){(e!=="number"||Al(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ao=Array.isArray;function Zi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Dr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Bc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(ao(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Dr(n)}}function Ig(t,e){var n=Dr(e.value),r=Dr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Cg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Cg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $a,xg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($a=$a||document.createElement("div"),$a.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$a.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Do(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var mo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},j_=["Webkit","ms","Moz","O"];Object.keys(mo).forEach(function(t){j_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mo[e]=mo[t]})});function Ag(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||mo.hasOwnProperty(t)&&mo[t]?(""+e).trim():e+"px"}function kg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ag(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var L_=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $c(t,e){if(e){if(L_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Wc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hc=null;function nd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qc=null,es=null,ts=null;function Qf(t){if(t=oa(t)){if(typeof qc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=_u(e),qc(t.stateNode,t.type,e))}}function Rg(t){es?ts?ts.push(t):ts=[t]:es=t}function Pg(){if(es){var t=es,e=ts;if(ts=es=null,Qf(t),e)for(t=0;t<e.length;t++)Qf(e[t])}}function Dg(t,e){return t(e)}function Vg(){}var tc=!1;function Ng(t,e,n){if(tc)return t(e,n);tc=!0;try{return Dg(t,e,n)}finally{tc=!1,(es!==null||ts!==null)&&(Vg(),Pg())}}function Vo(t,e){var n=t.stateNode;if(n===null)return null;var r=_u(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Kc=!1;if(Wn)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){Kc=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{Kc=!1}function O_(t,e,n,r,i,s,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var go=!1,kl=null,Rl=!1,Gc=null,M_={onError:function(t){go=!0,kl=t}};function F_(t,e,n,r,i,s,a,l,u){go=!1,kl=null,O_.apply(M_,arguments)}function z_(t,e,n,r,i,s,a,l,u){if(F_.apply(this,arguments),go){if(go){var h=kl;go=!1,kl=null}else throw Error(U(198));Rl||(Rl=!0,Gc=h)}}function yi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yf(t){if(yi(t)!==t)throw Error(U(188))}function B_(t){var e=t.alternate;if(!e){if(e=yi(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Yf(i),t;if(s===r)return Yf(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function jg(t){return t=B_(t),t!==null?Lg(t):null}function Lg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Lg(t);if(e!==null)return e;t=t.sibling}return null}var Og=zt.unstable_scheduleCallback,Jf=zt.unstable_cancelCallback,U_=zt.unstable_shouldYield,$_=zt.unstable_requestPaint,Fe=zt.unstable_now,W_=zt.unstable_getCurrentPriorityLevel,rd=zt.unstable_ImmediatePriority,Mg=zt.unstable_UserBlockingPriority,Pl=zt.unstable_NormalPriority,H_=zt.unstable_LowPriority,Fg=zt.unstable_IdlePriority,mu=null,An=null;function q_(t){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(mu,t,void 0,(t.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:Q_,K_=Math.log,G_=Math.LN2;function Q_(t){return t>>>=0,t===0?32:31-(K_(t)/G_|0)|0}var Wa=64,Ha=4194304;function lo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=lo(l):(s&=a,s!==0&&(r=lo(s)))}else a=n&~i,a!==0?r=lo(a):s!==0&&(r=lo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-fn(e),i=1<<n,r|=t[n],e&=~i;return r}function Y_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-fn(s),l=1<<a,u=i[a];u===-1?(!(l&n)||l&r)&&(i[a]=Y_(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Qc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zg(){var t=Wa;return Wa<<=1,!(Wa&4194240)&&(Wa=64),t}function nc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ia(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fn(e),t[e]=n}function X_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-fn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function id(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-fn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function Bg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ug,sd,$g,Wg,Hg,Yc=!1,qa=[],_r=null,Er=null,wr=null,No=new Map,bo=new Map,pr=[],Z_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xf(t,e){switch(t){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":No.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bo.delete(e.pointerId)}}function Qs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=oa(e),e!==null&&sd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function e1(t,e,n,r,i){switch(e){case"focusin":return _r=Qs(_r,t,e,n,r,i),!0;case"dragenter":return Er=Qs(Er,t,e,n,r,i),!0;case"mouseover":return wr=Qs(wr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return No.set(s,Qs(No.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,bo.set(s,Qs(bo.get(s)||null,t,e,n,r,i)),!0}return!1}function qg(t){var e=ni(t.target);if(e!==null){var n=yi(e);if(n!==null){if(e=n.tag,e===13){if(e=bg(n),e!==null){t.blockedOn=e,Hg(t.priority,function(){$g(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Jc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hc=r,n.target.dispatchEvent(r),Hc=null}else return e=oa(n),e!==null&&sd(e),t.blockedOn=n,!1;e.shift()}return!0}function Zf(t,e,n){hl(t)&&n.delete(e)}function t1(){Yc=!1,_r!==null&&hl(_r)&&(_r=null),Er!==null&&hl(Er)&&(Er=null),wr!==null&&hl(wr)&&(wr=null),No.forEach(Zf),bo.forEach(Zf)}function Ys(t,e){t.blockedOn===e&&(t.blockedOn=null,Yc||(Yc=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,t1)))}function jo(t){function e(i){return Ys(i,t)}if(0<qa.length){Ys(qa[0],t);for(var n=1;n<qa.length;n++){var r=qa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_r!==null&&Ys(_r,t),Er!==null&&Ys(Er,t),wr!==null&&Ys(wr,t),No.forEach(e),bo.forEach(e),n=0;n<pr.length;n++)r=pr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pr.length&&(n=pr[0],n.blockedOn===null);)qg(n),n.blockedOn===null&&pr.shift()}var ns=Jn.ReactCurrentBatchConfig,Vl=!0;function n1(t,e,n,r){var i=_e,s=ns.transition;ns.transition=null;try{_e=1,od(t,e,n,r)}finally{_e=i,ns.transition=s}}function r1(t,e,n,r){var i=_e,s=ns.transition;ns.transition=null;try{_e=4,od(t,e,n,r)}finally{_e=i,ns.transition=s}}function od(t,e,n,r){if(Vl){var i=Jc(t,e,n,r);if(i===null)dc(t,e,r,Nl,n),Xf(t,r);else if(e1(i,t,e,n,r))r.stopPropagation();else if(Xf(t,r),e&4&&-1<Z_.indexOf(t)){for(;i!==null;){var s=oa(i);if(s!==null&&Ug(s),s=Jc(t,e,n,r),s===null&&dc(t,e,r,Nl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else dc(t,e,r,null,n)}}var Nl=null;function Jc(t,e,n,r){if(Nl=null,t=nd(r),t=ni(t),t!==null)if(e=yi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nl=t,null}function Kg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W_()){case rd:return 1;case Mg:return 4;case Pl:case H_:return 16;case Fg:return 536870912;default:return 16}default:return 16}}var gr=null,ad=null,dl=null;function Gg(){if(dl)return dl;var t,e=ad,n=e.length,r,i="value"in gr?gr.value:gr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return dl=i.slice(t,1<r?1-r:void 0)}function fl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ka(){return!0}function ep(){return!1}function Ut(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ka:ep,this.isPropagationStopped=ep,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ka)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ka)},persist:function(){},isPersistent:Ka}),e}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ld=Ut(Ts),sa=Ne({},Ts,{view:0,detail:0}),i1=Ut(sa),rc,ic,Js,gu=Ne({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ud,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Js&&(Js&&t.type==="mousemove"?(rc=t.screenX-Js.screenX,ic=t.screenY-Js.screenY):ic=rc=0,Js=t),rc)},movementY:function(t){return"movementY"in t?t.movementY:ic}}),tp=Ut(gu),s1=Ne({},gu,{dataTransfer:0}),o1=Ut(s1),a1=Ne({},sa,{relatedTarget:0}),sc=Ut(a1),l1=Ne({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),u1=Ut(l1),c1=Ne({},Ts,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),h1=Ut(c1),d1=Ne({},Ts,{data:0}),np=Ut(d1),f1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=m1[t])?!!e[t]:!1}function ud(){return g1}var y1=Ne({},sa,{key:function(t){if(t.key){var e=f1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?p1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ud,charCode:function(t){return t.type==="keypress"?fl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),v1=Ut(y1),_1=Ne({},gu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rp=Ut(_1),E1=Ne({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ud}),w1=Ut(E1),T1=Ne({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),S1=Ut(T1),I1=Ne({},gu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),C1=Ut(I1),x1=[9,13,27,32],cd=Wn&&"CompositionEvent"in window,yo=null;Wn&&"documentMode"in document&&(yo=document.documentMode);var A1=Wn&&"TextEvent"in window&&!yo,Qg=Wn&&(!cd||yo&&8<yo&&11>=yo),ip=" ",sp=!1;function Yg(t,e){switch(t){case"keyup":return x1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $i=!1;function k1(t,e){switch(t){case"compositionend":return Jg(e);case"keypress":return e.which!==32?null:(sp=!0,ip);case"textInput":return t=e.data,t===ip&&sp?null:t;default:return null}}function R1(t,e){if($i)return t==="compositionend"||!cd&&Yg(t,e)?(t=Gg(),dl=ad=gr=null,$i=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Qg&&e.locale!=="ko"?null:e.data;default:return null}}var P1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function op(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!P1[t.type]:e==="textarea"}function Xg(t,e,n,r){Rg(r),e=bl(e,"onChange"),0<e.length&&(n=new ld("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vo=null,Lo=null;function D1(t){uy(t,0)}function yu(t){var e=qi(t);if(Tg(e))return t}function V1(t,e){if(t==="change")return e}var Zg=!1;if(Wn){var oc;if(Wn){var ac="oninput"in document;if(!ac){var ap=document.createElement("div");ap.setAttribute("oninput","return;"),ac=typeof ap.oninput=="function"}oc=ac}else oc=!1;Zg=oc&&(!document.documentMode||9<document.documentMode)}function lp(){vo&&(vo.detachEvent("onpropertychange",ey),Lo=vo=null)}function ey(t){if(t.propertyName==="value"&&yu(Lo)){var e=[];Xg(e,Lo,t,nd(t)),Ng(D1,e)}}function N1(t,e,n){t==="focusin"?(lp(),vo=e,Lo=n,vo.attachEvent("onpropertychange",ey)):t==="focusout"&&lp()}function b1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yu(Lo)}function j1(t,e){if(t==="click")return yu(e)}function L1(t,e){if(t==="input"||t==="change")return yu(e)}function O1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gn=typeof Object.is=="function"?Object.is:O1;function Oo(t,e){if(gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Nc.call(e,i)||!gn(t[i],e[i]))return!1}return!0}function up(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cp(t,e){var n=up(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=up(n)}}function ty(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ty(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ny(){for(var t=window,e=Al();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Al(t.document)}return e}function hd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function M1(t){var e=ny(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ty(n.ownerDocument.documentElement,n)){if(r!==null&&hd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=cp(n,s);var a=cp(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var F1=Wn&&"documentMode"in document&&11>=document.documentMode,Wi=null,Xc=null,_o=null,Zc=!1;function hp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zc||Wi==null||Wi!==Al(r)||(r=Wi,"selectionStart"in r&&hd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_o&&Oo(_o,r)||(_o=r,r=bl(Xc,"onSelect"),0<r.length&&(e=new ld("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wi)))}function Ga(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hi={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionend:Ga("Transition","TransitionEnd")},lc={},ry={};Wn&&(ry=document.createElement("div").style,"AnimationEvent"in window||(delete Hi.animationend.animation,delete Hi.animationiteration.animation,delete Hi.animationstart.animation),"TransitionEvent"in window||delete Hi.transitionend.transition);function vu(t){if(lc[t])return lc[t];if(!Hi[t])return t;var e=Hi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ry)return lc[t]=e[n];return t}var iy=vu("animationend"),sy=vu("animationiteration"),oy=vu("animationstart"),ay=vu("transitionend"),ly=new Map,dp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fr(t,e){ly.set(t,e),gi(e,[t])}for(var uc=0;uc<dp.length;uc++){var cc=dp[uc],z1=cc.toLowerCase(),B1=cc[0].toUpperCase()+cc.slice(1);Fr(z1,"on"+B1)}Fr(iy,"onAnimationEnd");Fr(sy,"onAnimationIteration");Fr(oy,"onAnimationStart");Fr("dblclick","onDoubleClick");Fr("focusin","onFocus");Fr("focusout","onBlur");Fr(ay,"onTransitionEnd");ls("onMouseEnter",["mouseout","mouseover"]);ls("onMouseLeave",["mouseout","mouseover"]);ls("onPointerEnter",["pointerout","pointerover"]);ls("onPointerLeave",["pointerout","pointerover"]);gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gi("onBeforeInput",["compositionend","keypress","textInput","paste"]);gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U1=new Set("cancel close invalid load scroll toggle".split(" ").concat(uo));function fp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,z_(r,e,void 0,t),t.currentTarget=null}function uy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;fp(i,l,h),s=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;fp(i,l,h),s=u}}}if(Rl)throw t=Gc,Rl=!1,Gc=null,t}function xe(t,e){var n=e[ih];n===void 0&&(n=e[ih]=new Set);var r=t+"__bubble";n.has(r)||(cy(e,t,2,!1),n.add(r))}function hc(t,e,n){var r=0;e&&(r|=4),cy(n,t,r,e)}var Qa="_reactListening"+Math.random().toString(36).slice(2);function Mo(t){if(!t[Qa]){t[Qa]=!0,yg.forEach(function(n){n!=="selectionchange"&&(U1.has(n)||hc(n,!1,t),hc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qa]||(e[Qa]=!0,hc("selectionchange",!1,e))}}function cy(t,e,n,r){switch(Kg(e)){case 1:var i=n1;break;case 4:i=r1;break;default:i=od}n=i.bind(null,e,n,t),i=void 0,!Kc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function dc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;l!==null;){if(a=ni(l),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}l=l.parentNode}}r=r.return}Ng(function(){var h=s,p=nd(n),v=[];e:{var _=ly.get(t);if(_!==void 0){var R=ld,j=t;switch(t){case"keypress":if(fl(n)===0)break e;case"keydown":case"keyup":R=v1;break;case"focusin":j="focus",R=sc;break;case"focusout":j="blur",R=sc;break;case"beforeblur":case"afterblur":R=sc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=tp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=o1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=w1;break;case iy:case sy:case oy:R=u1;break;case ay:R=S1;break;case"scroll":R=i1;break;case"wheel":R=C1;break;case"copy":case"cut":case"paste":R=h1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=rp}var L=(e&4)!==0,$=!L&&t==="scroll",x=L?_!==null?_+"Capture":null:_;L=[];for(var T=h,k;T!==null;){k=T;var M=k.stateNode;if(k.tag===5&&M!==null&&(k=M,x!==null&&(M=Vo(T,x),M!=null&&L.push(Fo(T,M,k)))),$)break;T=T.return}0<L.length&&(_=new R(_,j,null,n,p),v.push({event:_,listeners:L}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",_&&n!==Hc&&(j=n.relatedTarget||n.fromElement)&&(ni(j)||j[Hn]))break e;if((R||_)&&(_=p.window===p?p:(_=p.ownerDocument)?_.defaultView||_.parentWindow:window,R?(j=n.relatedTarget||n.toElement,R=h,j=j?ni(j):null,j!==null&&($=yi(j),j!==$||j.tag!==5&&j.tag!==6)&&(j=null)):(R=null,j=h),R!==j)){if(L=tp,M="onMouseLeave",x="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(L=rp,M="onPointerLeave",x="onPointerEnter",T="pointer"),$=R==null?_:qi(R),k=j==null?_:qi(j),_=new L(M,T+"leave",R,n,p),_.target=$,_.relatedTarget=k,M=null,ni(p)===h&&(L=new L(x,T+"enter",j,n,p),L.target=k,L.relatedTarget=$,M=L),$=M,R&&j)t:{for(L=R,x=j,T=0,k=L;k;k=Li(k))T++;for(k=0,M=x;M;M=Li(M))k++;for(;0<T-k;)L=Li(L),T--;for(;0<k-T;)x=Li(x),k--;for(;T--;){if(L===x||x!==null&&L===x.alternate)break t;L=Li(L),x=Li(x)}L=null}else L=null;R!==null&&pp(v,_,R,L,!1),j!==null&&$!==null&&pp(v,$,j,L,!0)}}e:{if(_=h?qi(h):window,R=_.nodeName&&_.nodeName.toLowerCase(),R==="select"||R==="input"&&_.type==="file")var H=V1;else if(op(_))if(Zg)H=L1;else{H=b1;var K=N1}else(R=_.nodeName)&&R.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(H=j1);if(H&&(H=H(t,h))){Xg(v,H,n,p);break e}K&&K(t,_,h),t==="focusout"&&(K=_._wrapperState)&&K.controlled&&_.type==="number"&&zc(_,"number",_.value)}switch(K=h?qi(h):window,t){case"focusin":(op(K)||K.contentEditable==="true")&&(Wi=K,Xc=h,_o=null);break;case"focusout":_o=Xc=Wi=null;break;case"mousedown":Zc=!0;break;case"contextmenu":case"mouseup":case"dragend":Zc=!1,hp(v,n,p);break;case"selectionchange":if(F1)break;case"keydown":case"keyup":hp(v,n,p)}var E;if(cd)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else $i?Yg(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Qg&&n.locale!=="ko"&&($i||y!=="onCompositionStart"?y==="onCompositionEnd"&&$i&&(E=Gg()):(gr=p,ad="value"in gr?gr.value:gr.textContent,$i=!0)),K=bl(h,y),0<K.length&&(y=new np(y,t,null,n,p),v.push({event:y,listeners:K}),E?y.data=E:(E=Jg(n),E!==null&&(y.data=E)))),(E=A1?k1(t,n):R1(t,n))&&(h=bl(h,"onBeforeInput"),0<h.length&&(p=new np("onBeforeInput","beforeinput",null,n,p),v.push({event:p,listeners:h}),p.data=E))}uy(v,e)})}function Fo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Vo(t,n),s!=null&&r.unshift(Fo(t,s,i)),s=Vo(t,e),s!=null&&r.push(Fo(t,s,i))),t=t.return}return r}function Li(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pp(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Vo(n,s),u!=null&&a.unshift(Fo(n,u,l))):i||(u=Vo(n,s),u!=null&&a.push(Fo(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var $1=/\r\n?/g,W1=/\u0000|\uFFFD/g;function mp(t){return(typeof t=="string"?t:""+t).replace($1,`
`).replace(W1,"")}function Ya(t,e,n){if(e=mp(e),mp(t)!==e&&n)throw Error(U(425))}function jl(){}var eh=null,th=null;function nh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rh=typeof setTimeout=="function"?setTimeout:void 0,H1=typeof clearTimeout=="function"?clearTimeout:void 0,gp=typeof Promise=="function"?Promise:void 0,q1=typeof queueMicrotask=="function"?queueMicrotask:typeof gp<"u"?function(t){return gp.resolve(null).then(t).catch(K1)}:rh;function K1(t){setTimeout(function(){throw t})}function fc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),jo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);jo(e)}function Tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ss=Math.random().toString(36).slice(2),xn="__reactFiber$"+Ss,zo="__reactProps$"+Ss,Hn="__reactContainer$"+Ss,ih="__reactEvents$"+Ss,G1="__reactListeners$"+Ss,Q1="__reactHandles$"+Ss;function ni(t){var e=t[xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hn]||n[xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yp(t);t!==null;){if(n=t[xn])return n;t=yp(t)}return e}t=n,n=t.parentNode}return null}function oa(t){return t=t[xn]||t[Hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function _u(t){return t[zo]||null}var sh=[],Ki=-1;function zr(t){return{current:t}}function ke(t){0>Ki||(t.current=sh[Ki],sh[Ki]=null,Ki--)}function Ce(t,e){Ki++,sh[Ki]=t.current,t.current=e}var Vr={},vt=zr(Vr),Vt=zr(!1),ui=Vr;function us(t,e){var n=t.type.contextTypes;if(!n)return Vr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Nt(t){return t=t.childContextTypes,t!=null}function Ll(){ke(Vt),ke(vt)}function vp(t,e,n){if(vt.current!==Vr)throw Error(U(168));Ce(vt,e),Ce(Vt,n)}function hy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,N_(t)||"Unknown",i));return Ne({},n,r)}function Ol(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vr,ui=vt.current,Ce(vt,t),Ce(Vt,Vt.current),!0}function _p(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=hy(t,e,ui),r.__reactInternalMemoizedMergedChildContext=t,ke(Vt),ke(vt),Ce(vt,t)):ke(Vt),Ce(Vt,n)}var Fn=null,Eu=!1,pc=!1;function dy(t){Fn===null?Fn=[t]:Fn.push(t)}function Y1(t){Eu=!0,dy(t)}function Br(){if(!pc&&Fn!==null){pc=!0;var t=0,e=_e;try{var n=Fn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fn=null,Eu=!1}catch(i){throw Fn!==null&&(Fn=Fn.slice(t+1)),Og(rd,Br),i}finally{_e=e,pc=!1}}return null}var Gi=[],Qi=0,Ml=null,Fl=0,Qt=[],Yt=0,ci=null,zn=1,Bn="";function Zr(t,e){Gi[Qi++]=Fl,Gi[Qi++]=Ml,Ml=t,Fl=e}function fy(t,e,n){Qt[Yt++]=zn,Qt[Yt++]=Bn,Qt[Yt++]=ci,ci=t;var r=zn;t=Bn;var i=32-fn(r)-1;r&=~(1<<i),n+=1;var s=32-fn(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,zn=1<<32-fn(e)+i|n<<i|r,Bn=s+t}else zn=1<<s|n<<i|r,Bn=t}function dd(t){t.return!==null&&(Zr(t,1),fy(t,1,0))}function fd(t){for(;t===Ml;)Ml=Gi[--Qi],Gi[Qi]=null,Fl=Gi[--Qi],Gi[Qi]=null;for(;t===ci;)ci=Qt[--Yt],Qt[Yt]=null,Bn=Qt[--Yt],Qt[Yt]=null,zn=Qt[--Yt],Qt[Yt]=null}var Ft=null,Mt=null,Re=!1,hn=null;function py(t,e){var n=Zt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ep(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ft=t,Mt=Tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ft=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ci!==null?{id:zn,overflow:Bn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ft=t,Mt=null,!0):!1;default:return!1}}function oh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ah(t){if(Re){var e=Mt;if(e){var n=e;if(!Ep(t,e)){if(oh(t))throw Error(U(418));e=Tr(n.nextSibling);var r=Ft;e&&Ep(t,e)?py(r,n):(t.flags=t.flags&-4097|2,Re=!1,Ft=t)}}else{if(oh(t))throw Error(U(418));t.flags=t.flags&-4097|2,Re=!1,Ft=t}}}function wp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ft=t}function Ja(t){if(t!==Ft)return!1;if(!Re)return wp(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nh(t.type,t.memoizedProps)),e&&(e=Mt)){if(oh(t))throw my(),Error(U(418));for(;e;)py(t,e),e=Tr(e.nextSibling)}if(wp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=Tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=Ft?Tr(t.stateNode.nextSibling):null;return!0}function my(){for(var t=Mt;t;)t=Tr(t.nextSibling)}function cs(){Mt=Ft=null,Re=!1}function pd(t){hn===null?hn=[t]:hn.push(t)}var J1=Jn.ReactCurrentBatchConfig;function Xs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Xa(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Tp(t){var e=t._init;return e(t._payload)}function gy(t){function e(x,T){if(t){var k=x.deletions;k===null?(x.deletions=[T],x.flags|=16):k.push(T)}}function n(x,T){if(!t)return null;for(;T!==null;)e(x,T),T=T.sibling;return null}function r(x,T){for(x=new Map;T!==null;)T.key!==null?x.set(T.key,T):x.set(T.index,T),T=T.sibling;return x}function i(x,T){return x=xr(x,T),x.index=0,x.sibling=null,x}function s(x,T,k){return x.index=k,t?(k=x.alternate,k!==null?(k=k.index,k<T?(x.flags|=2,T):k):(x.flags|=2,T)):(x.flags|=1048576,T)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,T,k,M){return T===null||T.tag!==6?(T=wc(k,x.mode,M),T.return=x,T):(T=i(T,k),T.return=x,T)}function u(x,T,k,M){var H=k.type;return H===Ui?p(x,T,k.props.children,M,k.key):T!==null&&(T.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===dr&&Tp(H)===T.type)?(M=i(T,k.props),M.ref=Xs(x,T,k),M.return=x,M):(M=El(k.type,k.key,k.props,null,x.mode,M),M.ref=Xs(x,T,k),M.return=x,M)}function h(x,T,k,M){return T===null||T.tag!==4||T.stateNode.containerInfo!==k.containerInfo||T.stateNode.implementation!==k.implementation?(T=Tc(k,x.mode,M),T.return=x,T):(T=i(T,k.children||[]),T.return=x,T)}function p(x,T,k,M,H){return T===null||T.tag!==7?(T=ai(k,x.mode,M,H),T.return=x,T):(T=i(T,k),T.return=x,T)}function v(x,T,k){if(typeof T=="string"&&T!==""||typeof T=="number")return T=wc(""+T,x.mode,k),T.return=x,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ba:return k=El(T.type,T.key,T.props,null,x.mode,k),k.ref=Xs(x,null,T),k.return=x,k;case Bi:return T=Tc(T,x.mode,k),T.return=x,T;case dr:var M=T._init;return v(x,M(T._payload),k)}if(ao(T)||Ks(T))return T=ai(T,x.mode,k,null),T.return=x,T;Xa(x,T)}return null}function _(x,T,k,M){var H=T!==null?T.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return H!==null?null:l(x,T,""+k,M);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ba:return k.key===H?u(x,T,k,M):null;case Bi:return k.key===H?h(x,T,k,M):null;case dr:return H=k._init,_(x,T,H(k._payload),M)}if(ao(k)||Ks(k))return H!==null?null:p(x,T,k,M,null);Xa(x,k)}return null}function R(x,T,k,M,H){if(typeof M=="string"&&M!==""||typeof M=="number")return x=x.get(k)||null,l(T,x,""+M,H);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Ba:return x=x.get(M.key===null?k:M.key)||null,u(T,x,M,H);case Bi:return x=x.get(M.key===null?k:M.key)||null,h(T,x,M,H);case dr:var K=M._init;return R(x,T,k,K(M._payload),H)}if(ao(M)||Ks(M))return x=x.get(k)||null,p(T,x,M,H,null);Xa(T,M)}return null}function j(x,T,k,M){for(var H=null,K=null,E=T,y=T=0,w=null;E!==null&&y<k.length;y++){E.index>y?(w=E,E=null):w=E.sibling;var I=_(x,E,k[y],M);if(I===null){E===null&&(E=w);break}t&&E&&I.alternate===null&&e(x,E),T=s(I,T,y),K===null?H=I:K.sibling=I,K=I,E=w}if(y===k.length)return n(x,E),Re&&Zr(x,y),H;if(E===null){for(;y<k.length;y++)E=v(x,k[y],M),E!==null&&(T=s(E,T,y),K===null?H=E:K.sibling=E,K=E);return Re&&Zr(x,y),H}for(E=r(x,E);y<k.length;y++)w=R(E,x,y,k[y],M),w!==null&&(t&&w.alternate!==null&&E.delete(w.key===null?y:w.key),T=s(w,T,y),K===null?H=w:K.sibling=w,K=w);return t&&E.forEach(function(C){return e(x,C)}),Re&&Zr(x,y),H}function L(x,T,k,M){var H=Ks(k);if(typeof H!="function")throw Error(U(150));if(k=H.call(k),k==null)throw Error(U(151));for(var K=H=null,E=T,y=T=0,w=null,I=k.next();E!==null&&!I.done;y++,I=k.next()){E.index>y?(w=E,E=null):w=E.sibling;var C=_(x,E,I.value,M);if(C===null){E===null&&(E=w);break}t&&E&&C.alternate===null&&e(x,E),T=s(C,T,y),K===null?H=C:K.sibling=C,K=C,E=w}if(I.done)return n(x,E),Re&&Zr(x,y),H;if(E===null){for(;!I.done;y++,I=k.next())I=v(x,I.value,M),I!==null&&(T=s(I,T,y),K===null?H=I:K.sibling=I,K=I);return Re&&Zr(x,y),H}for(E=r(x,E);!I.done;y++,I=k.next())I=R(E,x,y,I.value,M),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?y:I.key),T=s(I,T,y),K===null?H=I:K.sibling=I,K=I);return t&&E.forEach(function(P){return e(x,P)}),Re&&Zr(x,y),H}function $(x,T,k,M){if(typeof k=="object"&&k!==null&&k.type===Ui&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Ba:e:{for(var H=k.key,K=T;K!==null;){if(K.key===H){if(H=k.type,H===Ui){if(K.tag===7){n(x,K.sibling),T=i(K,k.props.children),T.return=x,x=T;break e}}else if(K.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===dr&&Tp(H)===K.type){n(x,K.sibling),T=i(K,k.props),T.ref=Xs(x,K,k),T.return=x,x=T;break e}n(x,K);break}else e(x,K);K=K.sibling}k.type===Ui?(T=ai(k.props.children,x.mode,M,k.key),T.return=x,x=T):(M=El(k.type,k.key,k.props,null,x.mode,M),M.ref=Xs(x,T,k),M.return=x,x=M)}return a(x);case Bi:e:{for(K=k.key;T!==null;){if(T.key===K)if(T.tag===4&&T.stateNode.containerInfo===k.containerInfo&&T.stateNode.implementation===k.implementation){n(x,T.sibling),T=i(T,k.children||[]),T.return=x,x=T;break e}else{n(x,T);break}else e(x,T);T=T.sibling}T=Tc(k,x.mode,M),T.return=x,x=T}return a(x);case dr:return K=k._init,$(x,T,K(k._payload),M)}if(ao(k))return j(x,T,k,M);if(Ks(k))return L(x,T,k,M);Xa(x,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,T!==null&&T.tag===6?(n(x,T.sibling),T=i(T,k),T.return=x,x=T):(n(x,T),T=wc(k,x.mode,M),T.return=x,x=T),a(x)):n(x,T)}return $}var hs=gy(!0),yy=gy(!1),zl=zr(null),Bl=null,Yi=null,md=null;function gd(){md=Yi=Bl=null}function yd(t){var e=zl.current;ke(zl),t._currentValue=e}function lh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function rs(t,e){Bl=t,md=Yi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dt=!0),t.firstContext=null)}function tn(t){var e=t._currentValue;if(md!==t)if(t={context:t,memoizedValue:e,next:null},Yi===null){if(Bl===null)throw Error(U(308));Yi=t,Bl.dependencies={lanes:0,firstContext:t}}else Yi=Yi.next=t;return e}var ri=null;function vd(t){ri===null?ri=[t]:ri.push(t)}function vy(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,vd(e)):(n.next=i.next,i.next=n),e.interleaved=n,qn(t,r)}function qn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fr=!1;function _d(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _y(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Sr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,qn(t,n)}return i=r.interleaved,i===null?(e.next=e,vd(r)):(e.next=i.next,i.next=e),r.interleaved=e,qn(t,n)}function pl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,id(t,n)}}function Sp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ul(t,e,n,r){var i=t.updateQueue;fr=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(s!==null){var v=i.baseState;a=0,p=h=u=null,l=s;do{var _=l.lane,R=l.eventTime;if((r&_)===_){p!==null&&(p=p.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=t,L=l;switch(_=e,R=n,L.tag){case 1:if(j=L.payload,typeof j=="function"){v=j.call(R,v,_);break e}v=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=L.payload,_=typeof j=="function"?j.call(R,v,_):j,_==null)break e;v=Ne({},v,_);break e;case 2:fr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[l]:_.push(l))}else R={eventTime:R,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=R,u=v):p=p.next=R,a|=_;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;_=l,l=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(p===null&&(u=v),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);di|=a,t.lanes=a,t.memoizedState=v}}function Ip(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var aa={},kn=zr(aa),Bo=zr(aa),Uo=zr(aa);function ii(t){if(t===aa)throw Error(U(174));return t}function Ed(t,e){switch(Ce(Uo,e),Ce(Bo,t),Ce(kn,aa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uc(e,t)}ke(kn),Ce(kn,e)}function ds(){ke(kn),ke(Bo),ke(Uo)}function Ey(t){ii(Uo.current);var e=ii(kn.current),n=Uc(e,t.type);e!==n&&(Ce(Bo,t),Ce(kn,n))}function wd(t){Bo.current===t&&(ke(kn),ke(Bo))}var Pe=zr(0);function $l(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mc=[];function Td(){for(var t=0;t<mc.length;t++)mc[t]._workInProgressVersionPrimary=null;mc.length=0}var ml=Jn.ReactCurrentDispatcher,gc=Jn.ReactCurrentBatchConfig,hi=0,Ve=null,qe=null,Xe=null,Wl=!1,Eo=!1,$o=0,X1=0;function dt(){throw Error(U(321))}function Sd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gn(t[n],e[n]))return!1;return!0}function Id(t,e,n,r,i,s){if(hi=s,Ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ml.current=t===null||t.memoizedState===null?nE:rE,t=n(r,i),Eo){s=0;do{if(Eo=!1,$o=0,25<=s)throw Error(U(301));s+=1,Xe=qe=null,e.updateQueue=null,ml.current=iE,t=n(r,i)}while(Eo)}if(ml.current=Hl,e=qe!==null&&qe.next!==null,hi=0,Xe=qe=Ve=null,Wl=!1,e)throw Error(U(300));return t}function Cd(){var t=$o!==0;return $o=0,t}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Ve.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function nn(){if(qe===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Xe===null?Ve.memoizedState:Xe.next;if(e!==null)Xe=e,qe=t;else{if(t===null)throw Error(U(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Xe===null?Ve.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Wo(t,e){return typeof e=="function"?e(t):e}function yc(t){var e=nn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=qe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,u=null,h=s;do{var p=h.lane;if((hi&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var v={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=v,a=r):u=u.next=v,Ve.lanes|=p,di|=p}h=h.next}while(h!==null&&h!==s);u===null?a=r:u.next=l,gn(r,e.memoizedState)||(Dt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ve.lanes|=s,di|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vc(t){var e=nn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);gn(s,e.memoizedState)||(Dt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function wy(){}function Ty(t,e){var n=Ve,r=nn(),i=e(),s=!gn(r.memoizedState,i);if(s&&(r.memoizedState=i,Dt=!0),r=r.queue,xd(Cy.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Ho(9,Iy.bind(null,n,r,i,e),void 0,null),et===null)throw Error(U(349));hi&30||Sy(n,e,i)}return i}function Sy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Iy(t,e,n,r){e.value=n,e.getSnapshot=r,xy(e)&&Ay(t)}function Cy(t,e,n){return n(function(){xy(e)&&Ay(t)})}function xy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gn(t,n)}catch{return!0}}function Ay(t){var e=qn(t,1);e!==null&&pn(e,t,1,-1)}function Cp(t){var e=In();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:t},e.queue=t,t=t.dispatch=tE.bind(null,Ve,t),[e.memoizedState,t]}function Ho(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ky(){return nn().memoizedState}function gl(t,e,n,r){var i=In();Ve.flags|=t,i.memoizedState=Ho(1|e,n,void 0,r===void 0?null:r)}function wu(t,e,n,r){var i=nn();r=r===void 0?null:r;var s=void 0;if(qe!==null){var a=qe.memoizedState;if(s=a.destroy,r!==null&&Sd(r,a.deps)){i.memoizedState=Ho(e,n,s,r);return}}Ve.flags|=t,i.memoizedState=Ho(1|e,n,s,r)}function xp(t,e){return gl(8390656,8,t,e)}function xd(t,e){return wu(2048,8,t,e)}function Ry(t,e){return wu(4,2,t,e)}function Py(t,e){return wu(4,4,t,e)}function Dy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vy(t,e,n){return n=n!=null?n.concat([t]):null,wu(4,4,Dy.bind(null,e,t),n)}function Ad(){}function Ny(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function by(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jy(t,e,n){return hi&21?(gn(n,e)||(n=zg(),Ve.lanes|=n,di|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dt=!0),t.memoizedState=n)}function Z1(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=gc.transition;gc.transition={};try{t(!1),e()}finally{_e=n,gc.transition=r}}function Ly(){return nn().memoizedState}function eE(t,e,n){var r=Cr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Oy(t))My(e,n);else if(n=vy(t,e,n,r),n!==null){var i=Ct();pn(n,t,r,i),Fy(n,e,r)}}function tE(t,e,n){var r=Cr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Oy(t))My(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,gn(l,a)){var u=e.interleaved;u===null?(i.next=i,vd(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=vy(t,e,i,r),n!==null&&(i=Ct(),pn(n,t,r,i),Fy(n,e,r))}}function Oy(t){var e=t.alternate;return t===Ve||e!==null&&e===Ve}function My(t,e){Eo=Wl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Fy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,id(t,n)}}var Hl={readContext:tn,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},nE={readContext:tn,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:tn,useEffect:xp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gl(4194308,4,Dy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gl(4194308,4,t,e)},useInsertionEffect:function(t,e){return gl(4,2,t,e)},useMemo:function(t,e){var n=In();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=In();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=eE.bind(null,Ve,t),[r.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:Cp,useDebugValue:Ad,useDeferredValue:function(t){return In().memoizedState=t},useTransition:function(){var t=Cp(!1),e=t[0];return t=Z1.bind(null,t[1]),In().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ve,i=In();if(Re){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),et===null)throw Error(U(349));hi&30||Sy(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,xp(Cy.bind(null,r,s,t),[t]),r.flags|=2048,Ho(9,Iy.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=In(),e=et.identifierPrefix;if(Re){var n=Bn,r=zn;n=(r&~(1<<32-fn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$o++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=X1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rE={readContext:tn,useCallback:Ny,useContext:tn,useEffect:xd,useImperativeHandle:Vy,useInsertionEffect:Ry,useLayoutEffect:Py,useMemo:by,useReducer:yc,useRef:ky,useState:function(){return yc(Wo)},useDebugValue:Ad,useDeferredValue:function(t){var e=nn();return jy(e,qe.memoizedState,t)},useTransition:function(){var t=yc(Wo)[0],e=nn().memoizedState;return[t,e]},useMutableSource:wy,useSyncExternalStore:Ty,useId:Ly,unstable_isNewReconciler:!1},iE={readContext:tn,useCallback:Ny,useContext:tn,useEffect:xd,useImperativeHandle:Vy,useInsertionEffect:Ry,useLayoutEffect:Py,useMemo:by,useReducer:vc,useRef:ky,useState:function(){return vc(Wo)},useDebugValue:Ad,useDeferredValue:function(t){var e=nn();return qe===null?e.memoizedState=t:jy(e,qe.memoizedState,t)},useTransition:function(){var t=vc(Wo)[0],e=nn().memoizedState;return[t,e]},useMutableSource:wy,useSyncExternalStore:Ty,useId:Ly,unstable_isNewReconciler:!1};function un(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tu={isMounted:function(t){return(t=t._reactInternals)?yi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=Cr(t),s=Un(r,i);s.payload=e,n!=null&&(s.callback=n),e=Sr(t,s,i),e!==null&&(pn(e,t,i,r),pl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=Cr(t),s=Un(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Sr(t,s,i),e!==null&&(pn(e,t,i,r),pl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),r=Cr(t),i=Un(n,r);i.tag=2,e!=null&&(i.callback=e),e=Sr(t,i,r),e!==null&&(pn(e,t,r,n),pl(e,t,r))}};function Ap(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Oo(n,r)||!Oo(i,s):!0}function zy(t,e,n){var r=!1,i=Vr,s=e.contextType;return typeof s=="object"&&s!==null?s=tn(s):(i=Nt(e)?ui:vt.current,r=e.contextTypes,s=(r=r!=null)?us(t,i):Vr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function kp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tu.enqueueReplaceState(e,e.state,null)}function ch(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},_d(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=tn(s):(s=Nt(e)?ui:vt.current,i.context=us(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(uh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Tu.enqueueReplaceState(i,i.state,null),Ul(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function fs(t,e){try{var n="",r=e;do n+=V_(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function _c(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sE=typeof WeakMap=="function"?WeakMap:Map;function By(t,e,n){n=Un(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kl||(Kl=!0,wh=r),hh(t,e)},n}function Uy(t,e,n){n=Un(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){hh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){hh(t,e),typeof r!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Rp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_E.bind(null,t,e,n),e.then(t,t))}function Pp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Dp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Un(-1,1),e.tag=2,Sr(n,e,1))),n.lanes|=1),t)}var oE=Jn.ReactCurrentOwner,Dt=!1;function It(t,e,n,r){e.child=t===null?yy(e,null,n,r):hs(e,t.child,n,r)}function Vp(t,e,n,r,i){n=n.render;var s=e.ref;return rs(e,i),r=Id(t,e,n,r,s,i),n=Cd(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kn(t,e,i)):(Re&&n&&dd(e),e.flags|=1,It(t,e,r,i),e.child)}function Np(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!jd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$y(t,e,s,r,i)):(t=El(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Oo,n(a,r)&&t.ref===e.ref)return Kn(t,e,i)}return e.flags|=1,t=xr(s,r),t.ref=e.ref,t.return=e,e.child=t}function $y(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Oo(s,r)&&t.ref===e.ref)if(Dt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Dt=!0);else return e.lanes=t.lanes,Kn(t,e,i)}return dh(t,e,n,r,i)}function Wy(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Xi,Ot),Ot|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(Xi,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ce(Xi,Ot),Ot|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ce(Xi,Ot),Ot|=r;return It(t,e,i,n),e.child}function Hy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dh(t,e,n,r,i){var s=Nt(n)?ui:vt.current;return s=us(e,s),rs(e,i),n=Id(t,e,n,r,s,i),r=Cd(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kn(t,e,i)):(Re&&r&&dd(e),e.flags|=1,It(t,e,n,i),e.child)}function bp(t,e,n,r,i){if(Nt(n)){var s=!0;Ol(e)}else s=!1;if(rs(e,i),e.stateNode===null)yl(t,e),zy(e,n,r),ch(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=tn(h):(h=Nt(n)?ui:vt.current,h=us(e,h));var p=n.getDerivedStateFromProps,v=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";v||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&kp(e,a,r,h),fr=!1;var _=e.memoizedState;a.state=_,Ul(e,r,a,i),u=e.memoizedState,l!==r||_!==u||Vt.current||fr?(typeof p=="function"&&(uh(e,n,p,r),u=e.memoizedState),(l=fr||Ap(e,n,l,r,_,u,h))?(v||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,_y(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:un(e.type,l),a.props=h,v=e.pendingProps,_=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=tn(u):(u=Nt(n)?ui:vt.current,u=us(e,u));var R=n.getDerivedStateFromProps;(p=typeof R=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==v||_!==u)&&kp(e,a,r,u),fr=!1,_=e.memoizedState,a.state=_,Ul(e,r,a,i);var j=e.memoizedState;l!==v||_!==j||Vt.current||fr?(typeof R=="function"&&(uh(e,n,R,r),j=e.memoizedState),(h=fr||Ap(e,n,h,r,_,j,u)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,j,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,j,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=j),a.props=r,a.state=j,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return fh(t,e,n,r,s,i)}function fh(t,e,n,r,i,s){Hy(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&_p(e,n,!1),Kn(t,e,s);r=e.stateNode,oE.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=hs(e,t.child,null,s),e.child=hs(e,null,l,s)):It(t,e,l,s),e.memoizedState=r.state,i&&_p(e,n,!0),e.child}function qy(t){var e=t.stateNode;e.pendingContext?vp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vp(t,e.context,!1),Ed(t,e.containerInfo)}function jp(t,e,n,r,i){return cs(),pd(i),e.flags|=256,It(t,e,n,r),e.child}var ph={dehydrated:null,treeContext:null,retryLane:0};function mh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ky(t,e,n){var r=e.pendingProps,i=Pe.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ce(Pe,i&1),t===null)return ah(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Cu(a,r,0,null),t=ai(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=mh(n),e.memoizedState=ph,t):kd(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return aE(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=xr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=xr(l,s):(s=ai(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?mh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=ph,r}return s=t.child,t=s.sibling,r=xr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function kd(t,e){return e=Cu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Za(t,e,n,r){return r!==null&&pd(r),hs(e,t.child,null,n),t=kd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function aE(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=_c(Error(U(422))),Za(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Cu({mode:"visible",children:r.children},i,0,null),s=ai(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&hs(e,t.child,null,a),e.child.memoizedState=mh(a),e.memoizedState=ph,s);if(!(e.mode&1))return Za(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(U(419)),r=_c(s,r,void 0),Za(t,e,a,r)}if(l=(a&t.childLanes)!==0,Dt||l){if(r=et,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,qn(t,i),pn(r,t,i,-1))}return bd(),r=_c(Error(U(421))),Za(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=EE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Mt=Tr(i.nextSibling),Ft=e,Re=!0,hn=null,t!==null&&(Qt[Yt++]=zn,Qt[Yt++]=Bn,Qt[Yt++]=ci,zn=t.id,Bn=t.overflow,ci=e),e=kd(e,r.children),e.flags|=4096,e)}function Lp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lh(t.return,e,n)}function Ec(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Gy(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(It(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lp(t,n,e);else if(t.tag===19)Lp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$l(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ec(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$l(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ec(e,!0,n,null,s);break;case"together":Ec(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),di|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=xr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lE(t,e,n){switch(e.tag){case 3:qy(e),cs();break;case 5:Ey(e);break;case 1:Nt(e.type)&&Ol(e);break;case 4:Ed(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ce(zl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?Ky(t,e,n):(Ce(Pe,Pe.current&1),t=Kn(t,e,n),t!==null?t.sibling:null);Ce(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Gy(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,Wy(t,e,n)}return Kn(t,e,n)}var Qy,gh,Yy,Jy;Qy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gh=function(){};Yy=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ii(kn.current);var s=null;switch(n){case"input":i=Mc(t,i),r=Mc(t,r),s=[];break;case"select":i=Ne({},i,{value:void 0}),r=Ne({},r,{value:void 0}),s=[];break;case"textarea":i=Bc(t,i),r=Bc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jl)}$c(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Po.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Po.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&xe("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};Jy=function(t,e,n,r){n!==r&&(e.flags|=4)};function Zs(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function uE(t,e,n){var r=e.pendingProps;switch(fd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return Nt(e.type)&&Ll(),ft(e),null;case 3:return r=e.stateNode,ds(),ke(Vt),ke(vt),Td(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ja(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&(Ih(hn),hn=null))),gh(t,e),ft(e),null;case 5:wd(e);var i=ii(Uo.current);if(n=e.type,t!==null&&e.stateNode!=null)Yy(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ft(e),null}if(t=ii(kn.current),Ja(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[xn]=e,r[zo]=s,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(i=0;i<uo.length;i++)xe(uo[i],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":Hf(r,s),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xe("invalid",r);break;case"textarea":Kf(r,s),xe("invalid",r)}$c(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Ya(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Ya(r.textContent,l,t),i=["children",""+l]):Po.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&xe("scroll",r)}switch(n){case"input":Ua(r),qf(r,s,!0);break;case"textarea":Ua(r),Gf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=jl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[xn]=e,t[zo]=r,Qy(t,e,!1,!1),e.stateNode=t;e:{switch(a=Wc(n,r),n){case"dialog":xe("cancel",t),xe("close",t),i=r;break;case"iframe":case"object":case"embed":xe("load",t),i=r;break;case"video":case"audio":for(i=0;i<uo.length;i++)xe(uo[i],t);i=r;break;case"source":xe("error",t),i=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),i=r;break;case"details":xe("toggle",t),i=r;break;case"input":Hf(t,r),i=Mc(t,r),xe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ne({},r,{value:void 0}),xe("invalid",t);break;case"textarea":Kf(t,r),i=Bc(t,r),xe("invalid",t);break;default:i=r}$c(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?kg(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&xg(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Do(t,u):typeof u=="number"&&Do(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Po.hasOwnProperty(s)?u!=null&&s==="onScroll"&&xe("scroll",t):u!=null&&Xh(t,s,u,a))}switch(n){case"input":Ua(t),qf(t,r,!1);break;case"textarea":Ua(t),Gf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Dr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Zi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Zi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=jl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)Jy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=ii(Uo.current),ii(kn.current),Ja(e)){if(r=e.stateNode,n=e.memoizedProps,r[xn]=e,(s=r.nodeValue!==n)&&(t=Ft,t!==null))switch(t.tag){case 3:Ya(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ya(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xn]=e,e.stateNode=r}return ft(e),null;case 13:if(ke(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Mt!==null&&e.mode&1&&!(e.flags&128))my(),cs(),e.flags|=98560,s=!1;else if(s=Ja(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[xn]=e}else cs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),s=!1}else hn!==null&&(Ih(hn),hn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Ge===0&&(Ge=3):bd())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return ds(),gh(t,e),t===null&&Mo(e.stateNode.containerInfo),ft(e),null;case 10:return yd(e.type._context),ft(e),null;case 17:return Nt(e.type)&&Ll(),ft(e),null;case 19:if(ke(Pe),s=e.memoizedState,s===null)return ft(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Zs(s,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=$l(t),a!==null){for(e.flags|=128,Zs(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Pe,Pe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Fe()>ps&&(e.flags|=128,r=!0,Zs(s,!1),e.lanes=4194304)}else{if(!r)if(t=$l(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Re)return ft(e),null}else 2*Fe()-s.renderingStartTime>ps&&n!==1073741824&&(e.flags|=128,r=!0,Zs(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Fe(),e.sibling=null,n=Pe.current,Ce(Pe,r?n&1|2:n&1),e):(ft(e),null);case 22:case 23:return Nd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ot&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function cE(t,e){switch(fd(e),e.tag){case 1:return Nt(e.type)&&Ll(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ds(),ke(Vt),ke(vt),Td(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wd(e),null;case 13:if(ke(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));cs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Pe),null;case 4:return ds(),null;case 10:return yd(e.type._context),null;case 22:case 23:return Nd(),null;case 24:return null;default:return null}}var el=!1,gt=!1,hE=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Ji(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function yh(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var Op=!1;function dE(t,e){if(eh=Vl,t=ny(),hd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,p=0,v=t,_=null;t:for(;;){for(var R;v!==n||i!==0&&v.nodeType!==3||(l=a+i),v!==s||r!==0&&v.nodeType!==3||(u=a+r),v.nodeType===3&&(a+=v.nodeValue.length),(R=v.firstChild)!==null;)_=v,v=R;for(;;){if(v===t)break t;if(_===n&&++h===i&&(l=a),_===s&&++p===r&&(u=a),(R=v.nextSibling)!==null)break;v=_,_=v.parentNode}v=R}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(th={focusedElem:t,selectionRange:n},Vl=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var j=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var L=j.memoizedProps,$=j.memoizedState,x=e.stateNode,T=x.getSnapshotBeforeUpdate(e.elementType===e.type?L:un(e.type,L),$);x.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(M){Oe(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return j=Op,Op=!1,j}function wo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&yh(e,n,s)}i=i.next}while(i!==r)}}function Su(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Xy(t){var e=t.alternate;e!==null&&(t.alternate=null,Xy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xn],delete e[zo],delete e[ih],delete e[G1],delete e[Q1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zy(t){return t.tag===5||t.tag===3||t.tag===4}function Mp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _h(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jl));else if(r!==4&&(t=t.child,t!==null))for(_h(t,e,n),t=t.sibling;t!==null;)_h(t,e,n),t=t.sibling}function Eh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Eh(t,e,n),t=t.sibling;t!==null;)Eh(t,e,n),t=t.sibling}var tt=null,cn=!1;function hr(t,e,n){for(n=n.child;n!==null;)ev(t,e,n),n=n.sibling}function ev(t,e,n){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(mu,n)}catch{}switch(n.tag){case 5:gt||Ji(n,e);case 6:var r=tt,i=cn;tt=null,hr(t,e,n),tt=r,cn=i,tt!==null&&(cn?(t=tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(cn?(t=tt,n=n.stateNode,t.nodeType===8?fc(t.parentNode,n):t.nodeType===1&&fc(t,n),jo(t)):fc(tt,n.stateNode));break;case 4:r=tt,i=cn,tt=n.stateNode.containerInfo,cn=!0,hr(t,e,n),tt=r,cn=i;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&yh(n,e,a),i=i.next}while(i!==r)}hr(t,e,n);break;case 1:if(!gt&&(Ji(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Oe(n,e,l)}hr(t,e,n);break;case 21:hr(t,e,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,hr(t,e,n),gt=r):hr(t,e,n);break;default:hr(t,e,n)}}function Fp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hE),e.forEach(function(r){var i=wE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:tt=l.stateNode,cn=!1;break e;case 3:tt=l.stateNode.containerInfo,cn=!0;break e;case 4:tt=l.stateNode.containerInfo,cn=!0;break e}l=l.return}if(tt===null)throw Error(U(160));ev(s,a,i),tt=null,cn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Oe(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tv(e,t),e=e.sibling}function tv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ln(e,t),Tn(t),r&4){try{wo(3,t,t.return),Su(3,t)}catch(L){Oe(t,t.return,L)}try{wo(5,t,t.return)}catch(L){Oe(t,t.return,L)}}break;case 1:ln(e,t),Tn(t),r&512&&n!==null&&Ji(n,n.return);break;case 5:if(ln(e,t),Tn(t),r&512&&n!==null&&Ji(n,n.return),t.flags&32){var i=t.stateNode;try{Do(i,"")}catch(L){Oe(t,t.return,L)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Sg(i,s),Wc(l,a);var h=Wc(l,s);for(a=0;a<u.length;a+=2){var p=u[a],v=u[a+1];p==="style"?kg(i,v):p==="dangerouslySetInnerHTML"?xg(i,v):p==="children"?Do(i,v):Xh(i,p,v,h)}switch(l){case"input":Fc(i,s);break;case"textarea":Ig(i,s);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var R=s.value;R!=null?Zi(i,!!s.multiple,R,!1):_!==!!s.multiple&&(s.defaultValue!=null?Zi(i,!!s.multiple,s.defaultValue,!0):Zi(i,!!s.multiple,s.multiple?[]:"",!1))}i[zo]=s}catch(L){Oe(t,t.return,L)}}break;case 6:if(ln(e,t),Tn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(L){Oe(t,t.return,L)}}break;case 3:if(ln(e,t),Tn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jo(e.containerInfo)}catch(L){Oe(t,t.return,L)}break;case 4:ln(e,t),Tn(t);break;case 13:ln(e,t),Tn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Dd=Fe())),r&4&&Fp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(gt=(h=gt)||p,ln(e,t),gt=h):ln(e,t),Tn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(Q=t,p=t.child;p!==null;){for(v=Q=p;Q!==null;){switch(_=Q,R=_.child,_.tag){case 0:case 11:case 14:case 15:wo(4,_,_.return);break;case 1:Ji(_,_.return);var j=_.stateNode;if(typeof j.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,j.props=e.memoizedProps,j.state=e.memoizedState,j.componentWillUnmount()}catch(L){Oe(r,n,L)}}break;case 5:Ji(_,_.return);break;case 22:if(_.memoizedState!==null){Bp(v);continue}}R!==null?(R.return=_,Q=R):Bp(v)}p=p.sibling}e:for(p=null,v=t;;){if(v.tag===5){if(p===null){p=v;try{i=v.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=v.stateNode,u=v.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Ag("display",a))}catch(L){Oe(t,t.return,L)}}}else if(v.tag===6){if(p===null)try{v.stateNode.nodeValue=h?"":v.memoizedProps}catch(L){Oe(t,t.return,L)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;p===v&&(p=null),v=v.return}p===v&&(p=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:ln(e,t),Tn(t),r&4&&Fp(t);break;case 21:break;default:ln(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Zy(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Do(i,""),r.flags&=-33);var s=Mp(t);Eh(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Mp(t);_h(t,l,a);break;default:throw Error(U(161))}}catch(u){Oe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fE(t,e,n){Q=t,nv(t)}function nv(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||el;if(!a){var l=i.alternate,u=l!==null&&l.memoizedState!==null||gt;l=el;var h=gt;if(el=a,(gt=u)&&!h)for(Q=i;Q!==null;)a=Q,u=a.child,a.tag===22&&a.memoizedState!==null?Up(i):u!==null?(u.return=a,Q=u):Up(i);for(;s!==null;)Q=s,nv(s),s=s.sibling;Q=i,el=l,gt=h}zp(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):zp(t)}}function zp(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||Su(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:un(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ip(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ip(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var v=p.dehydrated;v!==null&&jo(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}gt||e.flags&512&&vh(e)}catch(_){Oe(e,e.return,_)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Bp(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Up(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Su(4,e)}catch(u){Oe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Oe(e,i,u)}}var s=e.return;try{vh(e)}catch(u){Oe(e,s,u)}break;case 5:var a=e.return;try{vh(e)}catch(u){Oe(e,a,u)}}}catch(u){Oe(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var pE=Math.ceil,ql=Jn.ReactCurrentDispatcher,Rd=Jn.ReactCurrentOwner,en=Jn.ReactCurrentBatchConfig,me=0,et=null,Ue=null,it=0,Ot=0,Xi=zr(0),Ge=0,qo=null,di=0,Iu=0,Pd=0,To=null,Pt=null,Dd=0,ps=1/0,Mn=null,Kl=!1,wh=null,Ir=null,tl=!1,yr=null,Gl=0,So=0,Th=null,vl=-1,_l=0;function Ct(){return me&6?Fe():vl!==-1?vl:vl=Fe()}function Cr(t){return t.mode&1?me&2&&it!==0?it&-it:J1.transition!==null?(_l===0&&(_l=zg()),_l):(t=_e,t!==0||(t=window.event,t=t===void 0?16:Kg(t.type)),t):1}function pn(t,e,n,r){if(50<So)throw So=0,Th=null,Error(U(185));ia(t,n,r),(!(me&2)||t!==et)&&(t===et&&(!(me&2)&&(Iu|=n),Ge===4&&mr(t,it)),bt(t,r),n===1&&me===0&&!(e.mode&1)&&(ps=Fe()+500,Eu&&Br()))}function bt(t,e){var n=t.callbackNode;J_(t,e);var r=Dl(t,t===et?it:0);if(r===0)n!==null&&Jf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Jf(n),e===1)t.tag===0?Y1($p.bind(null,t)):dy($p.bind(null,t)),q1(function(){!(me&6)&&Br()}),n=null;else{switch(Bg(r)){case 1:n=rd;break;case 4:n=Mg;break;case 16:n=Pl;break;case 536870912:n=Fg;break;default:n=Pl}n=cv(n,rv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rv(t,e){if(vl=-1,_l=0,me&6)throw Error(U(327));var n=t.callbackNode;if(is()&&t.callbackNode!==n)return null;var r=Dl(t,t===et?it:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ql(t,r);else{e=r;var i=me;me|=2;var s=sv();(et!==t||it!==e)&&(Mn=null,ps=Fe()+500,oi(t,e));do try{yE();break}catch(l){iv(t,l)}while(!0);gd(),ql.current=s,me=i,Ue!==null?e=0:(et=null,it=0,e=Ge)}if(e!==0){if(e===2&&(i=Qc(t),i!==0&&(r=i,e=Sh(t,i))),e===1)throw n=qo,oi(t,0),mr(t,r),bt(t,Fe()),n;if(e===6)mr(t,r);else{if(i=t.current.alternate,!(r&30)&&!mE(i)&&(e=Ql(t,r),e===2&&(s=Qc(t),s!==0&&(r=s,e=Sh(t,s))),e===1))throw n=qo,oi(t,0),mr(t,r),bt(t,Fe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:ei(t,Pt,Mn);break;case 3:if(mr(t,r),(r&130023424)===r&&(e=Dd+500-Fe(),10<e)){if(Dl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ct(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=rh(ei.bind(null,t,Pt,Mn),e);break}ei(t,Pt,Mn);break;case 4:if(mr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-fn(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pE(r/1960))-r,10<r){t.timeoutHandle=rh(ei.bind(null,t,Pt,Mn),r);break}ei(t,Pt,Mn);break;case 5:ei(t,Pt,Mn);break;default:throw Error(U(329))}}}return bt(t,Fe()),t.callbackNode===n?rv.bind(null,t):null}function Sh(t,e){var n=To;return t.current.memoizedState.isDehydrated&&(oi(t,e).flags|=256),t=Ql(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&Ih(e)),t}function Ih(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function mE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!gn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mr(t,e){for(e&=~Pd,e&=~Iu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fn(e),r=1<<n;t[n]=-1,e&=~r}}function $p(t){if(me&6)throw Error(U(327));is();var e=Dl(t,0);if(!(e&1))return bt(t,Fe()),null;var n=Ql(t,e);if(t.tag!==0&&n===2){var r=Qc(t);r!==0&&(e=r,n=Sh(t,r))}if(n===1)throw n=qo,oi(t,0),mr(t,e),bt(t,Fe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ei(t,Pt,Mn),bt(t,Fe()),null}function Vd(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(ps=Fe()+500,Eu&&Br())}}function fi(t){yr!==null&&yr.tag===0&&!(me&6)&&is();var e=me;me|=1;var n=en.transition,r=_e;try{if(en.transition=null,_e=1,t)return t()}finally{_e=r,en.transition=n,me=e,!(me&6)&&Br()}}function Nd(){Ot=Xi.current,ke(Xi)}function oi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,H1(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(fd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ll();break;case 3:ds(),ke(Vt),ke(vt),Td();break;case 5:wd(r);break;case 4:ds();break;case 13:ke(Pe);break;case 19:ke(Pe);break;case 10:yd(r.type._context);break;case 22:case 23:Nd()}n=n.return}if(et=t,Ue=t=xr(t.current,null),it=Ot=e,Ge=0,qo=null,Pd=Iu=di=0,Pt=To=null,ri!==null){for(e=0;e<ri.length;e++)if(n=ri[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}ri=null}return t}function iv(t,e){do{var n=Ue;try{if(gd(),ml.current=Hl,Wl){for(var r=Ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wl=!1}if(hi=0,Xe=qe=Ve=null,Eo=!1,$o=0,Rd.current=null,n===null||n.return===null){Ge=1,qo=e,Ue=null;break}e:{var s=t,a=n.return,l=n,u=e;if(e=it,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,v=p.tag;if(!(p.mode&1)&&(v===0||v===11||v===15)){var _=p.alternate;_?(p.updateQueue=_.updateQueue,p.memoizedState=_.memoizedState,p.lanes=_.lanes):(p.updateQueue=null,p.memoizedState=null)}var R=Pp(a);if(R!==null){R.flags&=-257,Dp(R,a,l,s,e),R.mode&1&&Rp(s,h,e),e=R,u=h;var j=e.updateQueue;if(j===null){var L=new Set;L.add(u),e.updateQueue=L}else j.add(u);break e}else{if(!(e&1)){Rp(s,h,e),bd();break e}u=Error(U(426))}}else if(Re&&l.mode&1){var $=Pp(a);if($!==null){!($.flags&65536)&&($.flags|=256),Dp($,a,l,s,e),pd(fs(u,l));break e}}s=u=fs(u,l),Ge!==4&&(Ge=2),To===null?To=[s]:To.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=By(s,u,e);Sp(s,x);break e;case 1:l=u;var T=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Ir===null||!Ir.has(k)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=Uy(s,l,e);Sp(s,M);break e}}s=s.return}while(s!==null)}av(n)}catch(H){e=H,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function sv(){var t=ql.current;return ql.current=Hl,t===null?Hl:t}function bd(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),et===null||!(di&268435455)&&!(Iu&268435455)||mr(et,it)}function Ql(t,e){var n=me;me|=2;var r=sv();(et!==t||it!==e)&&(Mn=null,oi(t,e));do try{gE();break}catch(i){iv(t,i)}while(!0);if(gd(),me=n,ql.current=r,Ue!==null)throw Error(U(261));return et=null,it=0,Ge}function gE(){for(;Ue!==null;)ov(Ue)}function yE(){for(;Ue!==null&&!U_();)ov(Ue)}function ov(t){var e=uv(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?av(t):Ue=e,Rd.current=null}function av(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=cE(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,Ue=null;return}}else if(n=uE(n,e,Ot),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);Ge===0&&(Ge=5)}function ei(t,e,n){var r=_e,i=en.transition;try{en.transition=null,_e=1,vE(t,e,n,r)}finally{en.transition=i,_e=r}return null}function vE(t,e,n,r){do is();while(yr!==null);if(me&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(X_(t,s),t===et&&(Ue=et=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||tl||(tl=!0,cv(Pl,function(){return is(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=en.transition,en.transition=null;var a=_e;_e=1;var l=me;me|=4,Rd.current=null,dE(t,n),tv(n,t),M1(th),Vl=!!eh,th=eh=null,t.current=n,fE(n),$_(),me=l,_e=a,en.transition=s}else t.current=n;if(tl&&(tl=!1,yr=t,Gl=i),s=t.pendingLanes,s===0&&(Ir=null),q_(n.stateNode),bt(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,t=wh,wh=null,t;return Gl&1&&t.tag!==0&&is(),s=t.pendingLanes,s&1?t===Th?So++:(So=0,Th=t):So=0,Br(),null}function is(){if(yr!==null){var t=Bg(Gl),e=en.transition,n=_e;try{if(en.transition=null,_e=16>t?16:t,yr===null)var r=!1;else{if(t=yr,yr=null,Gl=0,me&6)throw Error(U(331));var i=me;for(me|=4,Q=t.current;Q!==null;){var s=Q,a=s.child;if(Q.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(Q=h;Q!==null;){var p=Q;switch(p.tag){case 0:case 11:case 15:wo(8,p,s)}var v=p.child;if(v!==null)v.return=p,Q=v;else for(;Q!==null;){p=Q;var _=p.sibling,R=p.return;if(Xy(p),p===h){Q=null;break}if(_!==null){_.return=R,Q=_;break}Q=R}}}var j=s.alternate;if(j!==null){var L=j.child;if(L!==null){j.child=null;do{var $=L.sibling;L.sibling=null,L=$}while(L!==null)}}Q=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Q=a;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wo(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Q=x;break e}Q=s.return}}var T=t.current;for(Q=T;Q!==null;){a=Q;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,Q=k;else e:for(a=T;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Su(9,l)}}catch(H){Oe(l,l.return,H)}if(l===a){Q=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,Q=M;break e}Q=l.return}}if(me=i,Br(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(mu,t)}catch{}r=!0}return r}finally{_e=n,en.transition=e}}return!1}function Wp(t,e,n){e=fs(n,e),e=By(t,e,1),t=Sr(t,e,1),e=Ct(),t!==null&&(ia(t,1,e),bt(t,e))}function Oe(t,e,n){if(t.tag===3)Wp(t,t,n);else for(;e!==null;){if(e.tag===3){Wp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ir===null||!Ir.has(r))){t=fs(n,t),t=Uy(e,t,1),e=Sr(e,t,1),t=Ct(),e!==null&&(ia(e,1,t),bt(e,t));break}}e=e.return}}function _E(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(it&n)===n&&(Ge===4||Ge===3&&(it&130023424)===it&&500>Fe()-Dd?oi(t,0):Pd|=n),bt(t,e)}function lv(t,e){e===0&&(t.mode&1?(e=Ha,Ha<<=1,!(Ha&130023424)&&(Ha=4194304)):e=1);var n=Ct();t=qn(t,e),t!==null&&(ia(t,e,n),bt(t,n))}function EE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lv(t,n)}function wE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),lv(t,n)}var uv;uv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vt.current)Dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dt=!1,lE(t,e,n);Dt=!!(t.flags&131072)}else Dt=!1,Re&&e.flags&1048576&&fy(e,Fl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yl(t,e),t=e.pendingProps;var i=us(e,vt.current);rs(e,n),i=Id(null,e,r,t,i,n);var s=Cd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(r)?(s=!0,Ol(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_d(e),i.updater=Tu,e.stateNode=i,i._reactInternals=e,ch(e,r,t,n),e=fh(null,e,r,!0,s,n)):(e.tag=0,Re&&s&&dd(e),It(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(yl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=SE(r),t=un(r,t),i){case 0:e=dh(null,e,r,t,n);break e;case 1:e=bp(null,e,r,t,n);break e;case 11:e=Vp(null,e,r,t,n);break e;case 14:e=Np(null,e,r,un(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:un(r,i),dh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:un(r,i),bp(t,e,r,i,n);case 3:e:{if(qy(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,_y(t,e),Ul(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=fs(Error(U(423)),e),e=jp(t,e,r,n,i);break e}else if(r!==i){i=fs(Error(U(424)),e),e=jp(t,e,r,n,i);break e}else for(Mt=Tr(e.stateNode.containerInfo.firstChild),Ft=e,Re=!0,hn=null,n=yy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cs(),r===i){e=Kn(t,e,n);break e}It(t,e,r,n)}e=e.child}return e;case 5:return Ey(e),t===null&&ah(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,nh(r,i)?a=null:s!==null&&nh(r,s)&&(e.flags|=32),Hy(t,e),It(t,e,a,n),e.child;case 6:return t===null&&ah(e),null;case 13:return Ky(t,e,n);case 4:return Ed(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=hs(e,null,r,n):It(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:un(r,i),Vp(t,e,r,i,n);case 7:return It(t,e,e.pendingProps,n),e.child;case 8:return It(t,e,e.pendingProps.children,n),e.child;case 12:return It(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ce(zl,r._currentValue),r._currentValue=a,s!==null)if(gn(s.value,a)){if(s.children===i.children&&!Vt.current){e=Kn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Un(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),lh(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(U(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),lh(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}It(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,rs(e,n),i=tn(i),r=r(i),e.flags|=1,It(t,e,r,n),e.child;case 14:return r=e.type,i=un(r,e.pendingProps),i=un(r.type,i),Np(t,e,r,i,n);case 15:return $y(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:un(r,i),yl(t,e),e.tag=1,Nt(r)?(t=!0,Ol(e)):t=!1,rs(e,n),zy(e,r,i),ch(e,r,i,n),fh(null,e,r,!0,t,n);case 19:return Gy(t,e,n);case 22:return Wy(t,e,n)}throw Error(U(156,e.tag))};function cv(t,e){return Og(t,e)}function TE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(t,e,n,r){return new TE(t,e,n,r)}function jd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function SE(t){if(typeof t=="function")return jd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ed)return 11;if(t===td)return 14}return 2}function xr(t,e){var n=t.alternate;return n===null?(n=Zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function El(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")jd(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ui:return ai(n.children,i,s,e);case Zh:a=8,i|=8;break;case bc:return t=Zt(12,n,e,i|2),t.elementType=bc,t.lanes=s,t;case jc:return t=Zt(13,n,e,i),t.elementType=jc,t.lanes=s,t;case Lc:return t=Zt(19,n,e,i),t.elementType=Lc,t.lanes=s,t;case Eg:return Cu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vg:a=10;break e;case _g:a=9;break e;case ed:a=11;break e;case td:a=14;break e;case dr:a=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Zt(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ai(t,e,n,r){return t=Zt(7,t,r,e),t.lanes=n,t}function Cu(t,e,n,r){return t=Zt(22,t,r,e),t.elementType=Eg,t.lanes=n,t.stateNode={isHidden:!1},t}function wc(t,e,n){return t=Zt(6,t,null,e),t.lanes=n,t}function Tc(t,e,n){return e=Zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function IE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nc(0),this.expirationTimes=nc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ld(t,e,n,r,i,s,a,l,u){return t=new IE(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Zt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_d(s),t}function CE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hv(t){if(!t)return Vr;t=t._reactInternals;e:{if(yi(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Nt(n))return hy(t,n,e)}return e}function dv(t,e,n,r,i,s,a,l,u){return t=Ld(n,r,!0,t,i,s,a,l,u),t.context=hv(null),n=t.current,r=Ct(),i=Cr(n),s=Un(r,i),s.callback=e??null,Sr(n,s,i),t.current.lanes=i,ia(t,i,r),bt(t,r),t}function xu(t,e,n,r){var i=e.current,s=Ct(),a=Cr(i);return n=hv(n),e.context===null?e.context=n:e.pendingContext=n,e=Un(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Sr(i,e,a),t!==null&&(pn(t,i,a,s),pl(t,i,a)),a}function Yl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Od(t,e){Hp(t,e),(t=t.alternate)&&Hp(t,e)}function xE(){return null}var fv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Md(t){this._internalRoot=t}Au.prototype.render=Md.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));xu(t,e,null,null)};Au.prototype.unmount=Md.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fi(function(){xu(null,t,null,null)}),e[Hn]=null}};function Au(t){this._internalRoot=t}Au.prototype.unstable_scheduleHydration=function(t){if(t){var e=Wg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pr.length&&e!==0&&e<pr[n].priority;n++);pr.splice(n,0,t),n===0&&qg(t)}};function Fd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ku(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qp(){}function AE(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Yl(a);s.call(h)}}var a=dv(e,r,t,0,null,!1,!1,"",qp);return t._reactRootContainer=a,t[Hn]=a.current,Mo(t.nodeType===8?t.parentNode:t),fi(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Yl(u);l.call(h)}}var u=Ld(t,0,!1,null,null,!1,!1,"",qp);return t._reactRootContainer=u,t[Hn]=u.current,Mo(t.nodeType===8?t.parentNode:t),fi(function(){xu(e,u,n,r)}),u}function Ru(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var u=Yl(a);l.call(u)}}xu(e,a,t,i)}else a=AE(n,e,t,i,r);return Yl(a)}Ug=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=lo(e.pendingLanes);n!==0&&(id(e,n|1),bt(e,Fe()),!(me&6)&&(ps=Fe()+500,Br()))}break;case 13:fi(function(){var r=qn(t,1);if(r!==null){var i=Ct();pn(r,t,1,i)}}),Od(t,1)}};sd=function(t){if(t.tag===13){var e=qn(t,134217728);if(e!==null){var n=Ct();pn(e,t,134217728,n)}Od(t,134217728)}};$g=function(t){if(t.tag===13){var e=Cr(t),n=qn(t,e);if(n!==null){var r=Ct();pn(n,t,e,r)}Od(t,e)}};Wg=function(){return _e};Hg=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};qc=function(t,e,n){switch(e){case"input":if(Fc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_u(r);if(!i)throw Error(U(90));Tg(r),Fc(r,i)}}}break;case"textarea":Ig(t,n);break;case"select":e=n.value,e!=null&&Zi(t,!!n.multiple,e,!1)}};Dg=Vd;Vg=fi;var kE={usingClientEntryPoint:!1,Events:[oa,qi,_u,Rg,Pg,Vd]},eo={findFiberByHostInstance:ni,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RE={bundleType:eo.bundleType,version:eo.version,rendererPackageName:eo.rendererPackageName,rendererConfig:eo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jg(t),t===null?null:t.stateNode},findFiberByHostInstance:eo.findFiberByHostInstance||xE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nl.isDisabled&&nl.supportsFiber)try{mu=nl.inject(RE),An=nl}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kE;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fd(e))throw Error(U(200));return CE(t,e,null,n)};Bt.createRoot=function(t,e){if(!Fd(t))throw Error(U(299));var n=!1,r="",i=fv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ld(t,1,!1,null,null,n,!1,r,i),t[Hn]=e.current,Mo(t.nodeType===8?t.parentNode:t),new Md(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=jg(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return fi(t)};Bt.hydrate=function(t,e,n){if(!ku(e))throw Error(U(200));return Ru(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!Fd(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=fv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=dv(e,null,t,1,n??null,i,!1,s,a),t[Hn]=e.current,Mo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Au(e)};Bt.render=function(t,e,n){if(!ku(e))throw Error(U(200));return Ru(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!ku(t))throw Error(U(40));return t._reactRootContainer?(fi(function(){Ru(null,null,t,!1,function(){t._reactRootContainer=null,t[Hn]=null})}),!0):!1};Bt.unstable_batchedUpdates=Vd;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ku(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Ru(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function pv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pv)}catch(t){console.error(t)}}pv(),pg.exports=Bt;var PE=pg.exports,Kp=PE;Vc.createRoot=Kp.createRoot,Vc.hydrateRoot=Kp.hydrateRoot;const DE=()=>{};var Gp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},VE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},gv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,p=s>>2,v=(s&3)<<4|l>>4;let _=(l&15)<<2|h>>6,R=h&63;u||(R=64,a||(_=64)),r.push(n[p],n[v],n[_],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||v==null)throw new NE;const _=s<<2|l>>4;if(r.push(_),h!==64){const R=l<<4&240|h>>2;if(r.push(R),v!==64){const j=h<<6&192|v;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class NE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bE=function(t){const e=mv(t);return gv.encodeByteArray(e,!0)},Jl=function(t){return bE(t).replace(/\./g,"")},jE=function(t){try{return gv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=()=>LE().__FIREBASE_DEFAULTS__,ME=()=>{if(typeof process>"u"||typeof Gp>"u")return;const t=Gp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jE(t[1]);return e&&JSON.parse(e)},zd=()=>{try{return DE()||OE()||ME()||FE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zE=t=>{var e,n;return(n=(e=zd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},BE=t=>{const e=zE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yv=()=>{var t;return(t=zd())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $E(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Jl(JSON.stringify(n)),Jl(JSON.stringify(a)),""].join(".")}const Io={};function HE(){const t={prod:[],emulator:[]};for(const e of Object.keys(Io))Io[e]?t.emulator.push(e):t.prod.push(e);return t}function qE(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Qp=!1;function KE(t,e){if(typeof window>"u"||typeof document>"u"||!Bd(window.location.host)||Io[t]===e||Io[t]||Qp)return;Io[t]=e;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",s=HE().prod.length>0;function a(){const _=document.getElementById(r);_&&_.remove()}function l(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function u(_,R){_.setAttribute("width","24"),_.setAttribute("id",R),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function h(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Qp=!0,a()},_}function p(_,R){_.setAttribute("id",R),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=qE(r),R=n("text"),j=document.getElementById(R)||document.createElement("span"),L=n("learnmore"),$=document.getElementById(L)||document.createElement("a"),x=n("preprendIcon"),T=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const k=_.element;l(k),p($,L);const M=h();u(T,x),k.append(T,j,$,M),document.body.appendChild(k)}s?(j.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QE(){var e;const t=(e=zd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YE(){return!QE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JE(){try{return typeof indexedDB=="object"}catch{return!1}}function XE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="FirebaseError";class Is extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ZE,Object.setPrototypeOf(this,Is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vv.prototype.create)}}class vv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?ew(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Is(i,l,r)}}function ew(t,e){return t.replace(tw,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const tw=/\{\$([^}]+)}/g;function Xl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(Yp(s)&&Yp(a)){if(!Xl(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Yp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t){return t&&t._delegate?t._delegate:t}class Ko{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new UE;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iw(e))try{this.getOrInitializeService({instanceIdentifier:ti})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ti){return this.instances.has(e)}getOptions(e=ti){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ti){return this.component?this.component.multipleInstances?e:ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rw(t){return t===ti?void 0:t}function iw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const ow={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},aw=pe.INFO,lw={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},uw=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=lw[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _v{constructor(e){this.name=e,this._logLevel=aw,this._logHandler=uw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ow[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const cw=(t,e)=>e.some(n=>t instanceof n);let Jp,Xp;function hw(){return Jp||(Jp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dw(){return Xp||(Xp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ev=new WeakMap,Ch=new WeakMap,wv=new WeakMap,Sc=new WeakMap,Ud=new WeakMap;function fw(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Ar(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Ev.set(n,t)}).catch(()=>{}),Ud.set(e,t),e}function pw(t){if(Ch.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Ch.set(t,e)}let xh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ch.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mw(t){xh=t(xh)}function gw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ic(this),e,...n);return wv.set(r,e.sort?e.sort():[e]),Ar(r)}:dw().includes(t)?function(...e){return t.apply(Ic(this),e),Ar(Ev.get(this))}:function(...e){return Ar(t.apply(Ic(this),e))}}function yw(t){return typeof t=="function"?gw(t):(t instanceof IDBTransaction&&pw(t),cw(t,hw())?new Proxy(t,xh):t)}function Ar(t){if(t instanceof IDBRequest)return fw(t);if(Sc.has(t))return Sc.get(t);const e=yw(t);return e!==t&&(Sc.set(t,e),Ud.set(e,t)),e}const Ic=t=>Ud.get(t);function vw(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=Ar(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Ar(a.result),u.oldVersion,u.newVersion,Ar(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const _w=["get","getKey","getAll","getAllKeys","count"],Ew=["put","add","delete","clear"],Cc=new Map;function Zp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cc.get(e))return Cc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Ew.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_w.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return Cc.set(e,s),s}mw(t=>({...t,get:(e,n,r)=>Zp(e,n)||t.get(e,n,r),has:(e,n)=>!!Zp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Tw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Tw(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ah="@firebase/app",em="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new _v("@firebase/app"),Sw="@firebase/app-compat",Iw="@firebase/analytics-compat",Cw="@firebase/analytics",xw="@firebase/app-check-compat",Aw="@firebase/app-check",kw="@firebase/auth",Rw="@firebase/auth-compat",Pw="@firebase/database",Dw="@firebase/data-connect",Vw="@firebase/database-compat",Nw="@firebase/functions",bw="@firebase/functions-compat",jw="@firebase/installations",Lw="@firebase/installations-compat",Ow="@firebase/messaging",Mw="@firebase/messaging-compat",Fw="@firebase/performance",zw="@firebase/performance-compat",Bw="@firebase/remote-config",Uw="@firebase/remote-config-compat",$w="@firebase/storage",Ww="@firebase/storage-compat",Hw="@firebase/firestore",qw="@firebase/ai",Kw="@firebase/firestore-compat",Gw="firebase",Qw="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh="[DEFAULT]",Yw={[Ah]:"fire-core",[Sw]:"fire-core-compat",[Cw]:"fire-analytics",[Iw]:"fire-analytics-compat",[Aw]:"fire-app-check",[xw]:"fire-app-check-compat",[kw]:"fire-auth",[Rw]:"fire-auth-compat",[Pw]:"fire-rtdb",[Dw]:"fire-data-connect",[Vw]:"fire-rtdb-compat",[Nw]:"fire-fn",[bw]:"fire-fn-compat",[jw]:"fire-iid",[Lw]:"fire-iid-compat",[Ow]:"fire-fcm",[Mw]:"fire-fcm-compat",[Fw]:"fire-perf",[zw]:"fire-perf-compat",[Bw]:"fire-rc",[Uw]:"fire-rc-compat",[$w]:"fire-gcs",[Ww]:"fire-gcs-compat",[Hw]:"fire-fst",[Kw]:"fire-fst-compat",[qw]:"fire-vertex","fire-js":"fire-js",[Gw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=new Map,Jw=new Map,Rh=new Map;function tm(t,e){try{t.container.addComponent(e)}catch(n){Gn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function tu(t){const e=t.name;if(Rh.has(e))return Gn.debug(`There were multiple attempts to register component ${e}.`),!1;Rh.set(e,t);for(const n of eu.values())tm(n,t);for(const n of Jw.values())tm(n,t);return!0}function Xw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zw(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kr=new vv("app","Firebase",eT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ko("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=Qw;function Tv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:kh,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw kr.create("bad-app-name",{appName:String(i)});if(n||(n=yv()),!n)throw kr.create("no-options");const s=eu.get(i);if(s){if(Xl(n,s.options)&&Xl(r,s.config))return s;throw kr.create("duplicate-app",{appName:i})}const a=new sw(i);for(const u of Rh.values())a.addComponent(u);const l=new tT(n,r,a);return eu.set(i,l),l}function rT(t=kh){const e=eu.get(t);if(!e&&t===kh&&yv())return Tv();if(!e)throw kr.create("no-app",{appName:t});return e}function ss(t,e,n){let r=Yw[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gn.warn(a.join(" "));return}tu(new Ko(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="firebase-heartbeat-database",sT=1,Go="firebase-heartbeat-store";let xc=null;function Sv(){return xc||(xc=vw(iT,sT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Go)}catch(n){console.warn(n)}}}}).catch(t=>{throw kr.create("idb-open",{originalErrorMessage:t.message})})),xc}async function oT(t){try{const n=(await Sv()).transaction(Go),r=await n.objectStore(Go).get(Iv(t));return await n.done,r}catch(e){if(e instanceof Is)Gn.warn(e.message);else{const n=kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gn.warn(n.message)}}}async function nm(t,e){try{const r=(await Sv()).transaction(Go,"readwrite");await r.objectStore(Go).put(e,Iv(t)),await r.done}catch(n){if(n instanceof Is)Gn.warn(n.message);else{const r=kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gn.warn(r.message)}}}function Iv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=1024,lT=30;class uT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=rm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>lT){const a=dT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Gn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rm(),{heartbeatsToSend:r,unsentEntries:i}=cT(this._heartbeatsCache.heartbeats),s=Jl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Gn.warn(n),""}}}function rm(){return new Date().toISOString().substring(0,10)}function cT(t,e=aT){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),im(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),im(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class hT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JE()?XE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function im(t){return Jl(JSON.stringify({version:2,heartbeats:t})).length}function dT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){tu(new Ko("platform-logger",e=>new ww(e),"PRIVATE")),tu(new Ko("heartbeat",e=>new uT(e),"PRIVATE")),ss(Ah,em,t),ss(Ah,em,"esm2020"),ss("fire-js","")}fT("");var pT="firebase",mT="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ss(pT,mT,"app");var sm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rr,Cv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function w(){}w.prototype=y.prototype,E.F=y.prototype,E.prototype=new w,E.prototype.constructor=E,E.D=function(I,C,P){for(var S=Array(arguments.length-2),je=2;je<arguments.length;je++)S[je-2]=arguments[je];return y.prototype[C].apply(I,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,y,w){w||(w=0);const I=Array(16);if(typeof y=="string")for(var C=0;C<16;++C)I[C]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(C=0;C<16;++C)I[C]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=E.g[0],w=E.g[1],C=E.g[2];let P=E.g[3],S;S=y+(P^w&(C^P))+I[0]+3614090360&4294967295,y=w+(S<<7&4294967295|S>>>25),S=P+(C^y&(w^C))+I[1]+3905402710&4294967295,P=y+(S<<12&4294967295|S>>>20),S=C+(w^P&(y^w))+I[2]+606105819&4294967295,C=P+(S<<17&4294967295|S>>>15),S=w+(y^C&(P^y))+I[3]+3250441966&4294967295,w=C+(S<<22&4294967295|S>>>10),S=y+(P^w&(C^P))+I[4]+4118548399&4294967295,y=w+(S<<7&4294967295|S>>>25),S=P+(C^y&(w^C))+I[5]+1200080426&4294967295,P=y+(S<<12&4294967295|S>>>20),S=C+(w^P&(y^w))+I[6]+2821735955&4294967295,C=P+(S<<17&4294967295|S>>>15),S=w+(y^C&(P^y))+I[7]+4249261313&4294967295,w=C+(S<<22&4294967295|S>>>10),S=y+(P^w&(C^P))+I[8]+1770035416&4294967295,y=w+(S<<7&4294967295|S>>>25),S=P+(C^y&(w^C))+I[9]+2336552879&4294967295,P=y+(S<<12&4294967295|S>>>20),S=C+(w^P&(y^w))+I[10]+4294925233&4294967295,C=P+(S<<17&4294967295|S>>>15),S=w+(y^C&(P^y))+I[11]+2304563134&4294967295,w=C+(S<<22&4294967295|S>>>10),S=y+(P^w&(C^P))+I[12]+1804603682&4294967295,y=w+(S<<7&4294967295|S>>>25),S=P+(C^y&(w^C))+I[13]+4254626195&4294967295,P=y+(S<<12&4294967295|S>>>20),S=C+(w^P&(y^w))+I[14]+2792965006&4294967295,C=P+(S<<17&4294967295|S>>>15),S=w+(y^C&(P^y))+I[15]+1236535329&4294967295,w=C+(S<<22&4294967295|S>>>10),S=y+(C^P&(w^C))+I[1]+4129170786&4294967295,y=w+(S<<5&4294967295|S>>>27),S=P+(w^C&(y^w))+I[6]+3225465664&4294967295,P=y+(S<<9&4294967295|S>>>23),S=C+(y^w&(P^y))+I[11]+643717713&4294967295,C=P+(S<<14&4294967295|S>>>18),S=w+(P^y&(C^P))+I[0]+3921069994&4294967295,w=C+(S<<20&4294967295|S>>>12),S=y+(C^P&(w^C))+I[5]+3593408605&4294967295,y=w+(S<<5&4294967295|S>>>27),S=P+(w^C&(y^w))+I[10]+38016083&4294967295,P=y+(S<<9&4294967295|S>>>23),S=C+(y^w&(P^y))+I[15]+3634488961&4294967295,C=P+(S<<14&4294967295|S>>>18),S=w+(P^y&(C^P))+I[4]+3889429448&4294967295,w=C+(S<<20&4294967295|S>>>12),S=y+(C^P&(w^C))+I[9]+568446438&4294967295,y=w+(S<<5&4294967295|S>>>27),S=P+(w^C&(y^w))+I[14]+3275163606&4294967295,P=y+(S<<9&4294967295|S>>>23),S=C+(y^w&(P^y))+I[3]+4107603335&4294967295,C=P+(S<<14&4294967295|S>>>18),S=w+(P^y&(C^P))+I[8]+1163531501&4294967295,w=C+(S<<20&4294967295|S>>>12),S=y+(C^P&(w^C))+I[13]+2850285829&4294967295,y=w+(S<<5&4294967295|S>>>27),S=P+(w^C&(y^w))+I[2]+4243563512&4294967295,P=y+(S<<9&4294967295|S>>>23),S=C+(y^w&(P^y))+I[7]+1735328473&4294967295,C=P+(S<<14&4294967295|S>>>18),S=w+(P^y&(C^P))+I[12]+2368359562&4294967295,w=C+(S<<20&4294967295|S>>>12),S=y+(w^C^P)+I[5]+4294588738&4294967295,y=w+(S<<4&4294967295|S>>>28),S=P+(y^w^C)+I[8]+2272392833&4294967295,P=y+(S<<11&4294967295|S>>>21),S=C+(P^y^w)+I[11]+1839030562&4294967295,C=P+(S<<16&4294967295|S>>>16),S=w+(C^P^y)+I[14]+4259657740&4294967295,w=C+(S<<23&4294967295|S>>>9),S=y+(w^C^P)+I[1]+2763975236&4294967295,y=w+(S<<4&4294967295|S>>>28),S=P+(y^w^C)+I[4]+1272893353&4294967295,P=y+(S<<11&4294967295|S>>>21),S=C+(P^y^w)+I[7]+4139469664&4294967295,C=P+(S<<16&4294967295|S>>>16),S=w+(C^P^y)+I[10]+3200236656&4294967295,w=C+(S<<23&4294967295|S>>>9),S=y+(w^C^P)+I[13]+681279174&4294967295,y=w+(S<<4&4294967295|S>>>28),S=P+(y^w^C)+I[0]+3936430074&4294967295,P=y+(S<<11&4294967295|S>>>21),S=C+(P^y^w)+I[3]+3572445317&4294967295,C=P+(S<<16&4294967295|S>>>16),S=w+(C^P^y)+I[6]+76029189&4294967295,w=C+(S<<23&4294967295|S>>>9),S=y+(w^C^P)+I[9]+3654602809&4294967295,y=w+(S<<4&4294967295|S>>>28),S=P+(y^w^C)+I[12]+3873151461&4294967295,P=y+(S<<11&4294967295|S>>>21),S=C+(P^y^w)+I[15]+530742520&4294967295,C=P+(S<<16&4294967295|S>>>16),S=w+(C^P^y)+I[2]+3299628645&4294967295,w=C+(S<<23&4294967295|S>>>9),S=y+(C^(w|~P))+I[0]+4096336452&4294967295,y=w+(S<<6&4294967295|S>>>26),S=P+(w^(y|~C))+I[7]+1126891415&4294967295,P=y+(S<<10&4294967295|S>>>22),S=C+(y^(P|~w))+I[14]+2878612391&4294967295,C=P+(S<<15&4294967295|S>>>17),S=w+(P^(C|~y))+I[5]+4237533241&4294967295,w=C+(S<<21&4294967295|S>>>11),S=y+(C^(w|~P))+I[12]+1700485571&4294967295,y=w+(S<<6&4294967295|S>>>26),S=P+(w^(y|~C))+I[3]+2399980690&4294967295,P=y+(S<<10&4294967295|S>>>22),S=C+(y^(P|~w))+I[10]+4293915773&4294967295,C=P+(S<<15&4294967295|S>>>17),S=w+(P^(C|~y))+I[1]+2240044497&4294967295,w=C+(S<<21&4294967295|S>>>11),S=y+(C^(w|~P))+I[8]+1873313359&4294967295,y=w+(S<<6&4294967295|S>>>26),S=P+(w^(y|~C))+I[15]+4264355552&4294967295,P=y+(S<<10&4294967295|S>>>22),S=C+(y^(P|~w))+I[6]+2734768916&4294967295,C=P+(S<<15&4294967295|S>>>17),S=w+(P^(C|~y))+I[13]+1309151649&4294967295,w=C+(S<<21&4294967295|S>>>11),S=y+(C^(w|~P))+I[4]+4149444226&4294967295,y=w+(S<<6&4294967295|S>>>26),S=P+(w^(y|~C))+I[11]+3174756917&4294967295,P=y+(S<<10&4294967295|S>>>22),S=C+(y^(P|~w))+I[2]+718787259&4294967295,C=P+(S<<15&4294967295|S>>>17),S=w+(P^(C|~y))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(C+(S<<21&4294967295|S>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+P&4294967295}r.prototype.v=function(E,y){y===void 0&&(y=E.length);const w=y-this.blockSize,I=this.C;let C=this.h,P=0;for(;P<y;){if(C==0)for(;P<=w;)i(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<y;)if(I[C++]=E.charCodeAt(P++),C==this.blockSize){i(this,I),C=0;break}}else for(;P<y;)if(I[C++]=E[P++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=y},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;y=this.o*8;for(var w=E.length-8;w<E.length;++w)E[w]=y&255,y/=256;for(this.v(E),E=Array(16),y=0,w=0;w<4;++w)for(let I=0;I<32;I+=8)E[y++]=this.g[w]>>>I&255;return E};function s(E,y){var w=l;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=y(E)}function a(E,y){this.h=y;const w=[];let I=!0;for(let C=E.length-1;C>=0;C--){const P=E[C]|0;I&&P==y||(w[C]=P,I=!1)}this.g=w}var l={};function u(E){return-128<=E&&E<128?s(E,function(y){return new a([y|0],y<0?-1:0)}):new a([E|0],E<0?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return v;if(E<0)return $(h(-E));const y=[];let w=1;for(let I=0;E>=w;I++)y[I]=E/w|0,w*=4294967296;return new a(y,0)}function p(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return $(p(E.substring(1),y));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=h(Math.pow(y,8));let I=v;for(let P=0;P<E.length;P+=8){var C=Math.min(8,E.length-P);const S=parseInt(E.substring(P,P+C),y);C<8?(C=h(Math.pow(y,C)),I=I.j(C).add(h(S))):(I=I.j(w),I=I.add(h(S)))}return I}var v=u(0),_=u(1),R=u(16777216);t=a.prototype,t.m=function(){if(L(this))return-$(this).m();let E=0,y=1;for(let w=0;w<this.g.length;w++){const I=this.i(w);E+=(I>=0?I:4294967296+I)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(j(this))return"0";if(L(this))return"-"+$(this).toString(E);const y=h(Math.pow(E,6));var w=this;let I="";for(;;){const C=M(w,y).g;w=x(w,C.j(y));let P=((w.g.length>0?w.g[0]:w.h)>>>0).toString(E);if(w=C,j(w))return P+I;for(;P.length<6;)P="0"+P;I=P+I}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function j(E){if(E.h!=0)return!1;for(let y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function L(E){return E.h==-1}t.l=function(E){return E=x(this,E),L(E)?-1:j(E)?0:1};function $(E){const y=E.g.length,w=[];for(let I=0;I<y;I++)w[I]=~E.g[I];return new a(w,~E.h).add(_)}t.abs=function(){return L(this)?$(this):this},t.add=function(E){const y=Math.max(this.g.length,E.g.length),w=[];let I=0;for(let C=0;C<=y;C++){let P=I+(this.i(C)&65535)+(E.i(C)&65535),S=(P>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);I=S>>>16,P&=65535,S&=65535,w[C]=S<<16|P}return new a(w,w[w.length-1]&-2147483648?-1:0)};function x(E,y){return E.add($(y))}t.j=function(E){if(j(this)||j(E))return v;if(L(this))return L(E)?$(this).j($(E)):$($(this).j(E));if(L(E))return $(this.j($(E)));if(this.l(R)<0&&E.l(R)<0)return h(this.m()*E.m());const y=this.g.length+E.g.length,w=[];for(var I=0;I<2*y;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(let C=0;C<E.g.length;C++){const P=this.i(I)>>>16,S=this.i(I)&65535,je=E.i(C)>>>16,_t=E.i(C)&65535;w[2*I+2*C]+=S*_t,T(w,2*I+2*C),w[2*I+2*C+1]+=P*_t,T(w,2*I+2*C+1),w[2*I+2*C+1]+=S*je,T(w,2*I+2*C+1),w[2*I+2*C+2]+=P*je,T(w,2*I+2*C+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new a(w,0)};function T(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function k(E,y){this.g=E,this.h=y}function M(E,y){if(j(y))throw Error("division by zero");if(j(E))return new k(v,v);if(L(E))return y=M($(E),y),new k($(y.g),$(y.h));if(L(y))return y=M(E,$(y)),new k($(y.g),y.h);if(E.g.length>30){if(L(E)||L(y))throw Error("slowDivide_ only works with positive integers.");for(var w=_,I=y;I.l(E)<=0;)w=H(w),I=H(I);var C=K(w,1),P=K(I,1);for(I=K(I,2),w=K(w,2);!j(I);){var S=P.add(I);S.l(E)<=0&&(C=C.add(w),P=S),I=K(I,1),w=K(w,1)}return y=x(E,C.j(y)),new k(C,y)}for(C=v;E.l(y)>=0;){for(w=Math.max(1,Math.floor(E.m()/y.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),P=h(w),S=P.j(y);L(S)||S.l(E)>0;)w-=I,P=h(w),S=P.j(y);j(P)&&(P=_),C=C.add(P),E=x(E,S)}return new k(C,E)}t.B=function(E){return M(this,E).h},t.and=function(E){const y=Math.max(this.g.length,E.g.length),w=[];for(let I=0;I<y;I++)w[I]=this.i(I)&E.i(I);return new a(w,this.h&E.h)},t.or=function(E){const y=Math.max(this.g.length,E.g.length),w=[];for(let I=0;I<y;I++)w[I]=this.i(I)|E.i(I);return new a(w,this.h|E.h)},t.xor=function(E){const y=Math.max(this.g.length,E.g.length),w=[];for(let I=0;I<y;I++)w[I]=this.i(I)^E.i(I);return new a(w,this.h^E.h)};function H(E){const y=E.g.length+1,w=[];for(let I=0;I<y;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new a(w,E.h)}function K(E,y){const w=y>>5;y%=32;const I=E.g.length-w,C=[];for(let P=0;P<I;P++)C[P]=y>0?E.i(P+w)>>>y|E.i(P+w+1)<<32-y:E.i(P+w);return new a(C,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Cv=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,Rr=a}).apply(typeof sm<"u"?sm:typeof self<"u"?self:typeof window<"u"?window:{});var rl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xv,co,Av,wl,Ph,kv,Rv,Pv;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof rl=="object"&&rl];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(o,c){if(c)e:{var d=r;o=o.split(".");for(var g=0;g<o.length-1;g++){var D=o[g];if(!(D in d))break e;d=d[D]}o=o[o.length-1],g=d[o],c=c(g),c!=g&&c!=null&&e(d,o,{configurable:!0,writable:!0,value:c})}}i("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(o){return o||function(c){var d=[],g;for(g in c)Object.prototype.hasOwnProperty.call(c,g)&&d.push([g,c[g]]);return d}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function u(o,c,d){return o.call.apply(o.bind,arguments)}function h(o,c,d){return h=u,h.apply(null,arguments)}function p(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function v(o,c){function d(){}d.prototype=c.prototype,o.Z=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Ob=function(g,D,N){for(var q=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)q[ae-2]=arguments[ae];return c.prototype[D].apply(g,q)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function R(o){const c=o.length;if(c>0){const d=Array(c);for(let g=0;g<c;g++)d[g]=o[g];return d}return[]}function j(o,c){for(let g=1;g<arguments.length;g++){const D=arguments[g];var d=typeof D;if(d=d!="object"?d:D?Array.isArray(D)?"array":d:"null",d=="array"||d=="object"&&typeof D.length=="number"){d=o.length||0;const N=D.length||0;o.length=d+N;for(let q=0;q<N;q++)o[d+q]=D[q]}else o.push(D)}}class L{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function $(o){a.setTimeout(()=>{throw o},0)}function x(){var o=E;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class T{constructor(){this.h=this.g=null}add(c,d){const g=k.get();g.set(c,d),this.h?this.h.next=g:this.g=g,this.h=g}}var k=new L(()=>new M,o=>o.reset());class M{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let H,K=!1,E=new T,y=()=>{const o=Promise.resolve(void 0);H=()=>{o.then(w)}};function w(){for(var o;o=x();){try{o.h.call(o.g)}catch(d){$(d)}var c=k;c.j(o),c.h<100&&(c.h++,o.next=c.g,c.g=o)}K=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};a.addEventListener("test",d,c),a.removeEventListener("test",d,c)}catch{}return o}();function S(o){return/^[\s\xa0]*$/.test(o)}function je(o,c){C.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,c)}v(je,C),je.prototype.init=function(o,c){const d=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget,c||(d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement)),this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&je.Z.h.call(this)},je.prototype.h=function(){je.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var _t="closure_listenable_"+(Math.random()*1e6|0),$t=0;function Xn(o,c,d,g,D){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!g,this.ha=D,this.key=++$t,this.da=this.fa=!1}function B(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Z(o,c,d){for(const g in o)c.call(d,o[g],g,o)}function re(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function ve(o){const c={};for(const d in o)c[d]=o[d];return c}const Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wt(o,c){let d,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(d in g)o[d]=g[d];for(let N=0;N<Ee.length;N++)d=Ee[N],Object.prototype.hasOwnProperty.call(g,d)&&(o[d]=g[d])}}function at(o){this.src=o,this.g={},this.h=0}at.prototype.add=function(o,c,d,g,D){const N=o.toString();o=this.g[N],o||(o=this.g[N]=[],this.h++);const q=jt(o,c,g,D);return q>-1?(c=o[q],d||(c.fa=!1)):(c=new Xn(c,this.src,N,!!g,D),c.fa=d,o.push(c)),c};function Ht(o,c){const d=c.type;if(d in o.g){var g=o.g[d],D=Array.prototype.indexOf.call(g,c,void 0),N;(N=D>=0)&&Array.prototype.splice.call(g,D,1),N&&(B(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function jt(o,c,d,g){for(let D=0;D<o.length;++D){const N=o[D];if(!N.da&&N.listener==c&&N.capture==!!d&&N.ha==g)return D}return-1}var rn="closure_lm_"+(Math.random()*1e6|0),yn={};function Rs(o,c,d,g,D){if(Array.isArray(c)){for(let N=0;N<c.length;N++)Rs(o,c[N],d,g,D);return null}return d=kt(d),o&&o[_t]?o.J(c,d,l(g)?!!g.capture:!1,D):Ti(o,c,d,!1,g,D)}function Ti(o,c,d,g,D,N){if(!c)throw Error("Invalid event type");const q=l(D)?!!D.capture:!!D;let ae=Et(o);if(ae||(o[rn]=ae=new at(o)),d=ae.add(c,d,g,q,N),d.proxy)return d;if(g=Ur(),d.proxy=g,g.src=o,g.listener=d,o.addEventListener)P||(D=q),D===void 0&&(D=!1),o.addEventListener(c.toString(),g,D);else if(o.attachEvent)o.attachEvent(lt(c.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Ur(){function o(d){return c.call(o.src,o.listener,d)}const c=$r;return o}function fa(o,c,d,g,D){if(Array.isArray(c))for(var N=0;N<c.length;N++)fa(o,c[N],d,g,D);else g=l(g)?!!g.capture:!!g,d=kt(d),o&&o[_t]?(o=o.i,N=String(c).toString(),N in o.g&&(c=o.g[N],d=jt(c,d,g,D),d>-1&&(B(c[d]),Array.prototype.splice.call(c,d,1),c.length==0&&(delete o.g[N],o.h--)))):o&&(o=Et(o))&&(c=o.g[c.toString()],o=-1,c&&(o=jt(c,d,g,D)),(d=o>-1?c[o]:null)&&Si(d))}function Si(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[_t])Ht(c.i,o);else{var d=o.type,g=o.proxy;c.removeEventListener?c.removeEventListener(d,g,o.capture):c.detachEvent?c.detachEvent(lt(d),g):c.addListener&&c.removeListener&&c.removeListener(g),(d=Et(c))?(Ht(d,o),d.h==0&&(d.src=null,c[rn]=null)):B(o)}}}function lt(o){return o in yn?yn[o]:yn[o]="on"+o}function $r(o,c){if(o.da)o=!0;else{c=new je(c,this);const d=o.listener,g=o.ha||o.src;o.fa&&Si(o),o=d.call(g,c)}return o}function Et(o){return o=o[rn],o instanceof at?o:null}var Wr="__closure_events_fn_"+(Math.random()*1e9>>>0);function kt(o){return typeof o=="function"?o:(o[Wr]||(o[Wr]=function(c){return o.handleEvent(c)}),o[Wr])}function ze(){I.call(this),this.i=new at(this),this.M=this,this.G=null}v(ze,I),ze.prototype[_t]=!0,ze.prototype.removeEventListener=function(o,c,d,g){fa(this,o,c,d,g)};function we(o,c){var d,g=o.G;if(g)for(d=[];g;g=g.G)d.push(g);if(o=o.M,g=c.type||c,typeof c=="string")c=new C(c,o);else if(c instanceof C)c.target=c.target||o;else{var D=c;c=new C(g,o),Wt(c,D)}D=!0;let N,q;if(d)for(q=d.length-1;q>=0;q--)N=c.g=d[q],D=sn(N,g,!0,c)&&D;if(N=c.g=o,D=sn(N,g,!0,c)&&D,D=sn(N,g,!1,c)&&D,d)for(q=0;q<d.length;q++)N=c.g=d[q],D=sn(N,g,!1,c)&&D}ze.prototype.N=function(){if(ze.Z.N.call(this),this.i){var o=this.i;for(const c in o.g){const d=o.g[c];for(let g=0;g<d.length;g++)B(d[g]);delete o.g[c],o.h--}}this.G=null},ze.prototype.J=function(o,c,d,g){return this.i.add(String(o),c,!1,d,g)},ze.prototype.K=function(o,c,d,g){return this.i.add(String(o),c,!0,d,g)};function sn(o,c,d,g){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();let D=!0;for(let N=0;N<c.length;++N){const q=c[N];if(q&&!q.da&&q.capture==d){const ae=q.listener,He=q.ha||q.src;q.fa&&Ht(o.i,q),D=ae.call(He,g)!==!1&&D}}return D&&!g.defaultPrevented}function wt(o,c){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=h(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:a.setTimeout(o,c||0)}function Le(o){o.g=wt(()=>{o.g=null,o.i&&(o.i=!1,Le(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Ii extends I{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Le(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function on(o){I.call(this),this.h=o,this.g={}}v(on,I);var Ps=[];function pa(o){Z(o.g,function(c,d){this.g.hasOwnProperty(d)&&Si(c)},o),o.g={}}on.prototype.N=function(){on.Z.N.call(this),pa(this)},on.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ds=a.JSON.stringify,ma=a.JSON.parse,Uu=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function ga(){}function ya(){}var Zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qt(){C.call(this,"d")}v(qt,C);function Vs(){C.call(this,"c")}v(Vs,C);var ut={},er=null;function tr(){return er=er||new ze}ut.Ia="serverreachability";function Ci(o){C.call(this,ut.Ia,o)}v(Ci,C);function vn(o){const c=tr();we(c,new Ci(c))}ut.STAT_EVENT="statevent";function xi(o,c){C.call(this,ut.STAT_EVENT,o),this.stat=c}v(xi,C);function Y(o){const c=tr();we(c,new xi(c,o))}ut.Ja="timingevent";function Ai(o,c){C.call(this,ut.Ja,o),this.size=c}v(Ai,C);function bn(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},c)}function le(){this.g=!0}le.prototype.ua=function(){this.g=!1};function ki(o,c,d,g,D,N){o.info(function(){if(o.g)if(N){var q="",ae=N.split("&");for(let Ie=0;Ie<ae.length;Ie++){var He=ae[Ie].split("=");if(He.length>1){const Ye=He[0];He=He[1];const wn=Ye.split("_");q=wn.length>=2&&wn[1]=="type"?q+(Ye+"="+He+"&"):q+(Ye+"=redacted&")}}}else q=null;else q=N;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+c+`
`+d+`
`+q})}function va(o,c,d,g,D,N,q){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+c+`
`+d+`
`+N+" "+q})}function nr(o,c,d,g){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+_a(o,d)+(g?" "+g:"")})}function We(o,c){o.info(function(){return"TIMEOUT: "+c})}le.prototype.info=function(){};function _a(o,c){if(!o.g)return c;if(!c)return null;try{const N=JSON.parse(c);if(N){for(o=0;o<N.length;o++)if(Array.isArray(N[o])){var d=N[o];if(!(d.length<2)){var g=d[1];if(Array.isArray(g)&&!(g.length<1)){var D=g[0];if(D!="noop"&&D!="stop"&&D!="close")for(let q=1;q<g.length;q++)g[q]=""}}}}return Ds(N)}catch{return c}}var Hr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ns={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ri;function bs(){}v(bs,ga),bs.prototype.g=function(){return new XMLHttpRequest},Ri=new bs;function qr(o){return encodeURIComponent(String(o))}function $u(o){var c=1;o=o.split(":");const d=[];for(;c>0&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function _n(o,c,d,g){this.j=o,this.i=c,this.l=d,this.S=g||1,this.V=new on(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ea}function Ea(){this.i=null,this.g="",this.h=!1}var wa={},js={};function Ls(o,c,d){o.M=1,o.A=Yr(Tt(c)),o.u=d,o.R=!0,Ta(o,null)}function Ta(o,c){o.F=Date.now(),rr(o),o.B=Tt(o.A);var d=o.B,g=o.S;Array.isArray(g)||(g=[String(g)]),$s(d.i,"t",g),o.C=0,d=o.j.L,o.h=new Ea,o.g=jf(o.j,d?c:null,!o.u),o.P>0&&(o.O=new Ii(h(o.Y,o,o.g),o.P)),c=o.V,d=o.g,g=o.ba;var D="readystatechange";Array.isArray(D)||(D&&(Ps[0]=D.toString()),D=Ps);for(let N=0;N<D.length;N++){const q=Rs(d,D[N],g||c.handleEvent,!1,c.h||c);if(!q)break;c.g[q.key]=q}c=o.J?ve(o.J):{},o.u?(o.v||(o.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,c)):(o.v="GET",o.g.ea(o.B,o.v,null,c)),vn(),ki(o.i,o.v,o.B,o.l,o.S,o.u)}_n.prototype.ba=function(o){o=o.target;const c=this.O;c&&lr(o)==3?c.j():this.Y(o)},_n.prototype.Y=function(o){try{if(o==this.g)e:{const ae=lr(this.g),He=this.g.ya(),Ie=this.g.ca();if(!(ae<3)&&(ae!=3||this.g&&(this.h.h||this.g.la()||If(this.g)))){this.K||ae!=4||He==7||(He==8||Ie<=0?vn(3):vn(2)),Os(this);var c=this.g.ca();this.X=c;var d=Wu(this);if(this.o=c==200,va(this.i,this.v,this.B,this.l,this.S,ae,c),this.o){if(this.U&&!this.L){t:{if(this.g){var g,D=this.g;if((g=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(g)){var N=g;break t}}N=null}if(o=N)nr(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Pi(this,o);else{this.o=!1,this.m=3,Y(12),jn(this),Kr(this);break e}}if(this.R){o=!0;let Ye;for(;!this.K&&this.C<d.length;)if(Ye=Hu(this,d),Ye==js){ae==4&&(this.m=4,Y(14),o=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ye==wa){this.m=4,Y(15),nr(this.i,this.l,d,"[Invalid Chunk]"),o=!1;break}else nr(this.i,this.l,Ye,null),Pi(this,Ye);if(Sa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ae!=4||d.length!=0||this.h.h||(this.m=1,Y(16),o=!1),this.o=this.o&&o,!o)nr(this.i,this.l,d,"[Invalid Chunked Response]"),jn(this),Kr(this);else if(d.length>0&&!this.W){this.W=!0;var q=this.j;q.g==this&&q.aa&&!q.P&&(q.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),Qu(q),q.P=!0,Y(11))}}else nr(this.i,this.l,d,null),Pi(this,d);ae==4&&jn(this),this.o&&!this.K&&(ae==4?Df(this.j,this):(this.o=!1,rr(this)))}else t_(this.g),c==400&&d.indexOf("Unknown SID")>0?(this.m=3,Y(12)):(this.m=0,Y(13)),jn(this),Kr(this)}}}catch{}finally{}};function Wu(o){if(!Sa(o))return o.g.la();const c=If(o.g);if(c==="")return"";let d="";const g=c.length,D=lr(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return jn(o),Kr(o),"";o.h.i=new a.TextDecoder}for(let N=0;N<g;N++)o.h.h=!0,d+=o.h.i.decode(c[N],{stream:!(D&&N==g-1)});return c.length=0,o.h.g+=d,o.C=0,o.h.g}function Sa(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function Hu(o,c){var d=o.C,g=c.indexOf(`
`,d);return g==-1?js:(d=Number(c.substring(d,g)),isNaN(d)?wa:(g+=1,g+d>c.length?js:(c=c.slice(g,g+d),o.C=g+d,c)))}_n.prototype.cancel=function(){this.K=!0,jn(this)};function rr(o){o.T=Date.now()+o.H,Ia(o,o.H)}function Ia(o,c){if(o.D!=null)throw Error("WatchDog timer not null");o.D=bn(h(o.aa,o),c)}function Os(o){o.D&&(a.clearTimeout(o.D),o.D=null)}_n.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(We(this.i,this.B),this.M!=2&&(vn(),Y(17)),jn(this),this.m=2,Kr(this)):Ia(this,this.T-o)};function Kr(o){o.j.I==0||o.K||Df(o.j,o)}function jn(o){Os(o);var c=o.O;c&&typeof c.dispose=="function"&&c.dispose(),o.O=null,pa(o.V),o.g&&(c=o.g,o.g=null,c.abort(),c.dispose())}function Pi(o,c){try{var d=o.j;if(d.I!=0&&(d.g==o||Ms(d.h,o))){if(!o.L&&Ms(d.h,o)&&d.I==3){try{var g=d.Ba.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<o.F)Oa(d),ja(d);else break e;Gu(d),Y(18)}}else d.xa=D[1],0<d.xa-d.K&&D[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=bn(h(d.Va,d),6e3));Gr(d.h)<=1&&d.ta&&(d.ta=void 0)}else Jr(d,11)}else if((o.L||d.g==o)&&Oa(d),!S(c))for(D=d.Ba.g.parse(c),c=0;c<D.length;c++){let Ie=D[c];const Ye=Ie[0];if(!(Ye<=d.K))if(d.K=Ye,Ie=Ie[1],d.I==2)if(Ie[0]=="c"){d.M=Ie[1],d.ba=Ie[2];const wn=Ie[3];wn!=null&&(d.ka=wn,d.j.info("VER="+d.ka));const Xr=Ie[4];Xr!=null&&(d.za=Xr,d.j.info("SVER="+d.za));const ur=Ie[5];ur!=null&&typeof ur=="number"&&ur>0&&(g=1.5*ur,d.O=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const cr=o.g;if(cr){const Fa=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fa){var N=g.h;N.g||Fa.indexOf("spdy")==-1&&Fa.indexOf("quic")==-1&&Fa.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Qr(N,N.h),N.h=null))}if(g.G){const Yu=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;Yu&&(g.wa=Yu,Te(g.J,g.G,Yu))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-o.F,d.j.info("Handshake RTT: "+d.T+"ms")),g=d;var q=o;if(g.na=bf(g,g.L?g.ba:null,g.W),q.L){Vi(g.h,q);var ae=q,He=g.O;He&&(ae.H=He),ae.D&&(Os(ae),rr(ae)),g.g=q}else Rf(g);d.i.length>0&&La(d)}else Ie[0]!="stop"&&Ie[0]!="close"||Jr(d,7);else d.I==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?Jr(d,7):Ku(d):Ie[0]!="noop"&&d.l&&d.l.qa(Ie),d.A=0)}}vn(4)}catch{}}var Di=class{constructor(o,c){this.g=o,this.map=c}};function Ca(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xa(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Gr(o){return o.h?1:o.g?o.g.size:0}function Ms(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Qr(o,c){o.g?o.g.add(c):o.h=c}function Vi(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Ca.prototype.cancel=function(){if(this.i=Ni(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Ni(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.G);return c}return R(o.i)}var Aa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qu(o,c){if(o){o=o.split("&");for(let d=0;d<o.length;d++){const g=o[d].indexOf("=");let D,N=null;g>=0?(D=o[d].substring(0,g),N=o[d].substring(g+1)):D=o[d],c(D,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function an(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;o instanceof an?(this.l=o.l,F(this,o.j),this.o=o.o,this.g=o.g,ir(this,o.u),this.h=o.h,bi(this,Ws(o.i)),this.m=o.m):o&&(c=String(o).match(Aa))?(this.l=!1,F(this,c[1]||"",!0),this.o=sr(c[2]||""),this.g=sr(c[3]||"",!0),ir(this,c[4]),this.h=sr(c[5]||"",!0),bi(this,c[6]||"",!0),this.m=sr(c[7]||"")):(this.l=!1,this.i=new ar(null,this.l))}an.prototype.toString=function(){const o=[];var c=this.j;c&&o.push(or(c,Fs,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(or(c,Fs,!0),"@"),o.push(qr(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&o.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(or(d,d.charAt(0)=="/"?Pa:Ra,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",or(d,Va)),o.join("")},an.prototype.resolve=function(o){const c=Tt(this);let d=!!o.j;d?F(c,o.j):d=!!o.o,d?c.o=o.o:d=!!o.g,d?c.g=o.g:d=o.u!=null;var g=o.h;if(d)ir(c,o.u);else if(d=!!o.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var D=c.h.lastIndexOf("/");D!=-1&&(g=c.h.slice(0,D+1)+g)}if(D=g,D==".."||D==".")g="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){g=D.lastIndexOf("/",0)==0,D=D.split("/");const N=[];for(let q=0;q<D.length;){const ae=D[q++];ae=="."?g&&q==D.length&&N.push(""):ae==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),g&&q==D.length&&N.push("")):(N.push(ae),g=!0)}g=N.join("/")}else g=D}return d?c.h=g:d=o.i.toString()!=="",d?bi(c,Ws(o.i)):d=!!o.m,d&&(c.m=o.m),c};function Tt(o){return new an(o)}function F(o,c,d){o.j=d?sr(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function ir(o,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);o.u=c}else o.u=null}function bi(o,c,d){c instanceof ar?(o.i=c,m(o.i,o.l)):(d||(c=or(c,Da)),o.i=new ar(c,o.l))}function Te(o,c,d){o.i.set(c,d)}function Yr(o){return Te(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function sr(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function or(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,ka),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function ka(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Fs=/[#\/\?@]/g,Ra=/[#\?:]/g,Pa=/[#\?]/g,Da=/[#\?@]/g,Va=/#/g;function ar(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function En(o){o.g||(o.g=new Map,o.h=0,o.i&&qu(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=ar.prototype,t.add=function(o,c){En(this),this.i=null,o=Ln(this,o);let d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function zs(o,c){En(o),c=Ln(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Bs(o,c){return En(o),c=Ln(o,c),o.g.has(c)}t.forEach=function(o,c){En(this),this.g.forEach(function(d,g){d.forEach(function(D){o.call(c,D,g,this)},this)},this)};function Us(o,c){En(o);let d=[];if(typeof c=="string")Bs(o,c)&&(d=d.concat(o.g.get(Ln(o,c))));else for(o=Array.from(o.g.values()),c=0;c<o.length;c++)d=d.concat(o[c]);return d}t.set=function(o,c){return En(this),this.i=null,o=Ln(this,o),Bs(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=Us(this,o),o.length>0?String(o[0]):c):c};function $s(o,c,d){zs(o,c),d.length>0&&(o.i=null,o.g.set(Ln(o,c),R(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(let g=0;g<c.length;g++){var d=c[g];const D=qr(d);d=Us(this,d);for(let N=0;N<d.length;N++){let q=D;d[N]!==""&&(q+="="+qr(d[N])),o.push(q)}}return this.i=o.join("&")};function Ws(o){const c=new ar;return c.i=o.i,o.g&&(c.g=new Map(o.g),c.h=o.h),c}function Ln(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function m(o,c){c&&!o.j&&(En(o),o.i=null,o.g.forEach(function(d,g){const D=g.toLowerCase();g!=D&&(zs(this,g),$s(this,D,d))},o)),o.j=c}function A(o,c){const d=new le;if(a.Image){const g=new Image;g.onload=p(b,d,"TestLoadImage: loaded",!0,c,g),g.onerror=p(b,d,"TestLoadImage: error",!1,c,g),g.onabort=p(b,d,"TestLoadImage: abort",!1,c,g),g.ontimeout=p(b,d,"TestLoadImage: timeout",!1,c,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else c(!1)}function V(o,c){const d=new le,g=new AbortController,D=setTimeout(()=>{g.abort(),b(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:g.signal}).then(N=>{clearTimeout(D),N.ok?b(d,"TestPingServer: ok",!0,c):b(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(D),b(d,"TestPingServer: error",!1,c)})}function b(o,c,d,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(d)}catch{}}function J(){this.g=new Uu}function ee(o){this.i=o.Sb||null,this.h=o.ab||!1}v(ee,ga),ee.prototype.g=function(){return new oe(this.i,this.h)};function oe(o,c){ze.call(this),this.H=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(oe,ze),t=oe.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=c,this.readyState=1,de(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(c.body=o),(this.H||a).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ct(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,de(this)),this.g&&(this.readyState=3,de(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Se(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function Se(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?ct(this):de(this),this.readyState==3&&Se(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,ct(this))},t.Na=function(o){this.g&&(this.response=o,ct(this))},t.ga=function(){this.g&&ct(this)};function ct(o){o.readyState=4,o.l=null,o.j=null,o.B=null,de(o)}t.setRequestHeader=function(o,c){this.A.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function de(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(oe.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function ht(o){let c="";return Z(o,function(d,g){c+=g,c+=":",c+=d,c+=`\r
`}),c}function St(o,c,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=ht(d),typeof o=="string"?d!=null&&qr(d):Te(o,c,d))}function ge(o){ze.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(ge,ze);var Na=/^https?$/i,e_=["POST","PUT"];t=ge.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,c,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ri.g(),this.g.onreadystatechange=_(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(N){wf(this,N);return}if(o=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)d.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const N of g.keys())d.set(N,g.get(N));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(N=>N.toLowerCase()=="content-type"),D=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(e_,c,void 0)>=0)||g||D||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,q]of d)this.g.setRequestHeader(N,q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(N){wf(this,N)}};function wf(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.o=5,Tf(o),ba(o)}function Tf(o){o.A||(o.A=!0,we(o,"complete"),we(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,we(this,"complete"),we(this,"abort"),ba(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ba(this,!0)),ge.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Sf(this):this.Xa())},t.Xa=function(){Sf(this)};function Sf(o){if(o.h&&typeof s<"u"){if(o.v&&lr(o)==4)setTimeout(o.Ca.bind(o),0);else if(we(o,"readystatechange"),lr(o)==4){o.h=!1;try{const N=o.ca();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var g;if(g=N===0){let q=String(o.D).match(Aa)[1]||null;!q&&a.self&&a.self.location&&(q=a.self.location.protocol.slice(0,-1)),g=!Na.test(q?q.toLowerCase():"")}d=g}if(d)we(o,"complete"),we(o,"success");else{o.o=6;try{var D=lr(o)>2?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.ca()+"]",Tf(o)}}finally{ba(o)}}}}function ba(o,c){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const d=o.g;o.g=null,c||we(o,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function lr(o){return o.g?o.g.readyState:0}t.ca=function(){try{return lr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),ma(c)}};function If(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function t_(o){const c={};o=(o.g&&lr(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(S(o[g]))continue;var d=$u(o[g]);const D=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const N=c[D]||[];c[D]=N,N.push(d)}re(c,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hs(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function Cf(o){this.za=0,this.i=[],this.j=new le,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hs("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hs("baseRetryDelayMs",5e3,o),this.Za=Hs("retryDelaySeedMs",1e4,o),this.Ta=Hs("forwardChannelMaxRetries",2,o),this.va=Hs("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Ca(o&&o.concurrentRequestLimit),this.Ba=new J,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Cf.prototype,t.ka=8,t.I=1,t.connect=function(o,c,d,g){Y(0),this.W=o,this.H=c||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.J=bf(this,null,this.W),La(this)};function Ku(o){if(xf(o),o.I==3){var c=o.V++,d=Tt(o.J);if(Te(d,"SID",o.M),Te(d,"RID",c),Te(d,"TYPE","terminate"),qs(o,d),c=new _n(o,o.j,c),c.M=2,c.A=Yr(Tt(d)),d=!1,a.navigator&&a.navigator.sendBeacon)try{d=a.navigator.sendBeacon(c.A.toString(),"")}catch{}!d&&a.Image&&(new Image().src=c.A,d=!0),d||(c.g=jf(c.j,null),c.g.ea(c.A)),c.F=Date.now(),rr(c)}Nf(o)}function ja(o){o.g&&(Qu(o),o.g.cancel(),o.g=null)}function xf(o){ja(o),o.v&&(a.clearTimeout(o.v),o.v=null),Oa(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function La(o){if(!xa(o.h)&&!o.m){o.m=!0;var c=o.Ea;H||y(),K||(H(),K=!0),E.add(c,o),o.D=0}}function n_(o,c){return Gr(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=c.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=bn(h(o.Ea,o,c),Vf(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const D=new _n(this,this.j,o);let N=this.o;if(this.U&&(N?(N=ve(N),Wt(N,this.U)):N=this.U),this.u!==null||this.R||(D.J=N,N=null),this.S)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(c+=g,c>4096){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=kf(this,D,c),d=Tt(this.J),Te(d,"RID",o),Te(d,"CVER",22),this.G&&Te(d,"X-HTTP-Session-Id",this.G),qs(this,d),N&&(this.R?c="headers="+qr(ht(N))+"&"+c:this.u&&St(d,this.u,N)),Qr(this.h,D),this.Ra&&Te(d,"TYPE","init"),this.S?(Te(d,"$req",c),Te(d,"SID","null"),D.U=!0,Ls(D,d,null)):Ls(D,d,c),this.I=2}}else this.I==3&&(o?Af(this,o):this.i.length==0||xa(this.h)||Af(this))};function Af(o,c){var d;c?d=c.l:d=o.V++;const g=Tt(o.J);Te(g,"SID",o.M),Te(g,"RID",d),Te(g,"AID",o.K),qs(o,g),o.u&&o.o&&St(g,o.u,o.o),d=new _n(o,o.j,d,o.D+1),o.u===null&&(d.J=o.o),c&&(o.i=c.G.concat(o.i)),c=kf(o,d,1e3),d.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Qr(o.h,d),Ls(d,g,c)}function qs(o,c){o.H&&Z(o.H,function(d,g){Te(c,g,d)}),o.l&&Z({},function(d,g){Te(c,g,d)})}function kf(o,c,d){d=Math.min(o.i.length,d);const g=o.l?h(o.l.Ka,o.l,o):null;e:{var D=o.i;let ae=-1;for(;;){const He=["count="+d];ae==-1?d>0?(ae=D[0].g,He.push("ofs="+ae)):ae=0:He.push("ofs="+ae);let Ie=!0;for(let Ye=0;Ye<d;Ye++){var N=D[Ye].g;const wn=D[Ye].map;if(N-=ae,N<0)ae=Math.max(0,D[Ye].g-100),Ie=!1;else try{N="req"+N+"_"||"";try{var q=wn instanceof Map?wn:Object.entries(wn);for(const[Xr,ur]of q){let cr=ur;l(ur)&&(cr=Ds(ur)),He.push(N+Xr+"="+encodeURIComponent(cr))}}catch(Xr){throw He.push(N+"type="+encodeURIComponent("_badmap")),Xr}}catch{g&&g(wn)}}if(Ie){q=He.join("&");break e}}q=void 0}return o=o.i.splice(0,d),c.G=o,q}function Rf(o){if(!o.g&&!o.v){o.Y=1;var c=o.Da;H||y(),K||(H(),K=!0),E.add(c,o),o.A=0}}function Gu(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=bn(h(o.Da,o),Vf(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,Pf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=bn(h(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Y(10),ja(this),Pf(this))};function Qu(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function Pf(o){o.g=new _n(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var c=Tt(o.na);Te(c,"RID","rpc"),Te(c,"SID",o.M),Te(c,"AID",o.K),Te(c,"CI",o.F?"0":"1"),!o.F&&o.ia&&Te(c,"TO",o.ia),Te(c,"TYPE","xmlhttp"),qs(o,c),o.u&&o.o&&St(c,o.u,o.o),o.O&&(o.g.H=o.O);var d=o.g;o=o.ba,d.M=1,d.A=Yr(Tt(c)),d.u=null,d.R=!0,Ta(d,o)}t.Va=function(){this.C!=null&&(this.C=null,ja(this),Gu(this),Y(19))};function Oa(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Df(o,c){var d=null;if(o.g==c){Oa(o),Qu(o),o.g=null;var g=2}else if(Ms(o.h,c))d=c.G,Vi(o.h,c),g=1;else return;if(o.I!=0){if(c.o)if(g==1){d=c.u?c.u.length:0,c=Date.now()-c.F;var D=o.D;g=tr(),we(g,new Ai(g,d)),La(o)}else Rf(o);else if(D=c.m,D==3||D==0&&c.X>0||!(g==1&&n_(o,c)||g==2&&Gu(o)))switch(d&&d.length>0&&(c=o.h,c.i=c.i.concat(d)),D){case 1:Jr(o,5);break;case 4:Jr(o,10);break;case 3:Jr(o,6);break;default:Jr(o,2)}}}function Vf(o,c){let d=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(d*=2),d*c}function Jr(o,c){if(o.j.info("Error code "+c),c==2){var d=h(o.bb,o),g=o.Ua;const D=!g;g=new an(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||F(g,"https"),Yr(g),D?A(g.toString(),d):V(g.toString(),d)}else Y(2);o.I=0,o.l&&o.l.pa(c),Nf(o),xf(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Y(2)):(this.j.info("Failed to ping google.com"),Y(1))};function Nf(o){if(o.I=0,o.ja=[],o.l){const c=Ni(o.h);(c.length!=0||o.i.length!=0)&&(j(o.ja,c),j(o.ja,o.i),o.h.i.length=0,R(o.i),o.i.length=0),o.l.oa()}}function bf(o,c,d){var g=d instanceof an?Tt(d):new an(d);if(g.g!="")c&&(g.g=c+"."+g.g),ir(g,g.u);else{var D=a.location;g=D.protocol,c=c?c+"."+D.hostname:D.hostname,D=+D.port;const N=new an(null);g&&F(N,g),c&&(N.g=c),D&&ir(N,D),d&&(N.h=d),g=N}return d=o.G,c=o.wa,d&&c&&Te(g,d,c),Te(g,"VER",o.ka),qs(o,g),g}function jf(o,c,d){if(c&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Aa&&!o.ma?new ge(new ee({ab:d})):new ge(o.ma),c.Fa(o.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lf(){}t=Lf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ma(){}Ma.prototype.g=function(o,c){return new Lt(o,c)};function Lt(o,c){ze.call(this),this.g=new Cf(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(o?o["X-WebChannel-Client-Profile"]=c.sa:o={"X-WebChannel-Client-Profile":c.sa}),this.g.U=o,(o=c&&c.Qb)&&!S(o)&&(this.g.u=o),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!S(c)&&(this.g.G=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new ji(this)}v(Lt,ze),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Ku(this.g)},Lt.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.v&&(d={},d.__data__=Ds(o),o=d);c.i.push(new Di(c.Ya++,o)),c.I==3&&La(c)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Ku(this.g),delete this.g,Lt.Z.N.call(this)};function Of(o){qt.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const d in c){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}v(Of,qt);function Mf(){Vs.call(this),this.status=1}v(Mf,Vs);function ji(o){this.g=o}v(ji,Lf),ji.prototype.ra=function(){we(this.g,"a")},ji.prototype.qa=function(o){we(this.g,new Of(o))},ji.prototype.pa=function(o){we(this.g,new Mf)},ji.prototype.oa=function(){we(this.g,"b")},Ma.prototype.createWebChannel=Ma.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,Pv=function(){return new Ma},Rv=function(){return tr()},kv=ut,Ph={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Hr.NO_ERROR=0,Hr.TIMEOUT=8,Hr.HTTP_ERROR=6,wl=Hr,Ns.COMPLETE="complete",Av=Ns,ya.EventType=Zn,Zn.OPEN="a",Zn.CLOSE="b",Zn.ERROR="c",Zn.MESSAGE="d",ze.prototype.listen=ze.prototype.J,co=ya,ge.prototype.listenOnce=ge.prototype.K,ge.prototype.getLastError=ge.prototype.Ha,ge.prototype.getLastErrorCode=ge.prototype.ya,ge.prototype.getStatus=ge.prototype.ca,ge.prototype.getResponseJson=ge.prototype.La,ge.prototype.getResponseText=ge.prototype.la,ge.prototype.send=ge.prototype.ea,ge.prototype.setWithCredentials=ge.prototype.Fa,xv=ge}).apply(typeof rl<"u"?rl:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cs="12.8.0";function gT(t){Cs=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new _v("@firebase/firestore");function Oi(){return pi.logLevel}function G(t,...e){if(pi.logLevel<=pe.DEBUG){const n=e.map($d);pi.debug(`Firestore (${Cs}): ${t}`,...n)}}function Qn(t,...e){if(pi.logLevel<=pe.ERROR){const n=e.map($d);pi.error(`Firestore (${Cs}): ${t}`,...n)}}function ms(t,...e){if(pi.logLevel<=pe.WARN){const n=e.map($d);pi.warn(`Firestore (${Cs}): ${t}`,...n)}}function $d(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Dv(t,r,n)}function Dv(t,e,n){let r=`FIRESTORE (${Cs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Qn(r),new Error(r)}function ye(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Dv(e,i,r)}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Is{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mt.UNAUTHENTICATED))}shutdown(){}}class vT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _T{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pr,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new Vv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new mt(e)}}class ET{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class wT{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ET(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class om{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TT{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zw(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ye(this.o===void 0,3512);const r=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,G("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new om(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new om(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=ST(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function Dh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Ac(i)===Ac(s)?ce(i,s):Ac(i)?1:-1}return ce(t.length,e.length)}const IT=55296,CT=57343;function Ac(t){const e=t.charCodeAt(0);return e>=IT&&e<=CT}function gs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="__name__";class Cn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Cn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Cn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ce(e.length,n.length)}static compareSegments(e,n){const r=Cn.isNumericId(e),i=Cn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Cn.extractNumericId(e).compare(Cn.extractNumericId(n)):Dh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rr.fromString(e.substring(4,e.length-2))}}class De extends Cn{construct(e,n,r){return new De(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new De(n)}static emptyPath(){return new De([])}}const xT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends Cn{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return xT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===am}static keyField(){return new rt([am])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new X(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new X(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new X(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new X(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(De.fromString(e))}static fromName(e){return new te(De.fromString(e).popFirst(5))}static empty(){return new te(De.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&De.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return De.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new De(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(t,e,n){if(!n)throw new X(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kT(t,e,n,r){if(e===!0&&r===!0)throw new X(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function lm(t){if(!te.isDocumentKey(t))throw new X(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Nv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Hd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Qo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hd(t);throw new X(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t,e){const n={typeString:t};return e&&(n.value=e),n}function la(t,e){if(!Nv(t))throw new X(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new X(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um=-62135596800,cm=1e6;class Ae{static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*cm);return new Ae(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<um)throw new X(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cm}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(la(e,Ae._jsonSchema))return new Ae(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-um;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:$e("string",Ae._jsonSchemaVersion),seconds:$e("number"),nanoseconds:$e("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Ae(0,0))}static max(){return new ie(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=-1;function RT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new Nr(i,te.empty(),e)}function PT(t){return new Nr(t.readTime,t.key,Yo)}class Nr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Nr(ie.min(),te.empty(),Yo)}static max(){return new Nr(ie.max(),te.empty(),Yo)}}function DT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xs(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==VT)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},u=>r(u))}),a=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(p=>{a[h]=p,++l,l===s&&r(a)},p=>i(p))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function bT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function As(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=-1;function Du(t){return t==null}function nu(t){return t===0&&1/t==-1/0}function jT(t){return typeof t=="number"&&Number.isInteger(t)&&!nu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="";function LT(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=hm(e)),e=OT(t.get(n),e);return hm(e)}function OT(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case bv:n+="";break;default:n+=s}}return n}function hm(t){return t+bv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||nt.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new il(this.root,e,this.comparator,!1)}getReverseIterator(){return new il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new il(this.root,e,this.comparator,!0)}}class il{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??nt.RED,this.left=i??nt.EMPTY,this.right=s??nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new nt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return nt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1;nt.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fm(this.data.getIterator())}getIteratorFrom(e){return new fm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qe(this.comparator);return n.data=e,n}}class fm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new dn([])}unionWith(e){let n=new Qe(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Lv("Invalid base64 string: "+s):s}}(e);return new ot(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const MT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(t){if(ye(!!t,39018),typeof t=="string"){let e=0;const n=MT.exec(t);if(ye(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function jr(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="server_timestamp",Mv="__type__",Fv="__previous_value__",zv="__local_write_time__";function Kd(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Mv])==null?void 0:r.stringValue)===Ov}function Vu(t){const e=t.mapValue.fields[Fv];return Kd(e)?Vu(e):e}function Jo(t){const e=br(t.mapValue.fields[zv].timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n,r,i,s,a,l,u,h,p,v){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=p,this.apiKey=v}}const ru="(default)";class Xo{constructor(e,n){this.projectId=e,this.database=n||ru}static empty(){return new Xo("","")}get isDefaultDatabase(){return this.database===ru}isEqual(e){return e instanceof Xo&&e.projectId===this.projectId&&e.database===this.database}}function zT(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new X(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="__type__",BT="__max__",sl={mapValue:{}},Uv="__vector__",iu="value";function Lr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kd(t)?4:$T(t)?9007199254740991:UT(t)?10:11:ne(28295,{value:t})}function Vn(t,e){if(t===e)return!0;const n=Lr(t);if(n!==Lr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jo(t).isEqual(Jo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=br(i.timestampValue),l=br(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return jr(i.bytesValue).isEqual(jr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Me(i.geoPointValue.latitude)===Me(s.geoPointValue.latitude)&&Me(i.geoPointValue.longitude)===Me(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Me(i.integerValue)===Me(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Me(i.doubleValue),l=Me(s.doubleValue);return a===l?nu(a)===nu(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return gs(t.arrayValue.values||[],e.arrayValue.values||[],Vn);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(dm(a)!==dm(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Vn(a[u],l[u])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function Zo(t,e){return(t.values||[]).find(n=>Vn(n,e))!==void 0}function ys(t,e){if(t===e)return 0;const n=Lr(t),r=Lr(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Me(s.integerValue||s.doubleValue),u=Me(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return pm(t.timestampValue,e.timestampValue);case 4:return pm(Jo(t),Jo(e));case 5:return Dh(t.stringValue,e.stringValue);case 6:return function(s,a){const l=jr(s),u=jr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=ce(l[h],u[h]);if(p!==0)return p}return ce(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=ce(Me(s.latitude),Me(a.latitude));return l!==0?l:ce(Me(s.longitude),Me(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mm(t.arrayValue,e.arrayValue);case 10:return function(s,a){var _,R,j,L;const l=s.fields||{},u=a.fields||{},h=(_=l[iu])==null?void 0:_.arrayValue,p=(R=u[iu])==null?void 0:R.arrayValue,v=ce(((j=h==null?void 0:h.values)==null?void 0:j.length)||0,((L=p==null?void 0:p.values)==null?void 0:L.length)||0);return v!==0?v:mm(h,p)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===sl.mapValue&&a===sl.mapValue)return 0;if(s===sl.mapValue)return 1;if(a===sl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let v=0;v<u.length&&v<p.length;++v){const _=Dh(u[v],p[v]);if(_!==0)return _;const R=ys(l[u[v]],h[p[v]]);if(R!==0)return R}return ce(u.length,p.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function pm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=br(t),r=br(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function mm(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ys(n[i],r[i]);if(s)return s}return ce(n.length,r.length)}function vs(t){return Vh(t)}function Vh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=br(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return jr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Vh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Vh(n.fields[a])}`;return i+"}"}(t.mapValue):ne(61005,{value:t})}function Tl(t){switch(Lr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vu(t);return e?16+Tl(e):16;case 5:return 2*t.stringValue.length;case 6:return jr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Tl(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return vi(r.fields,(s,a)=>{i+=s.length+Tl(a)}),i}(t.mapValue);default:throw ne(13486,{value:t})}}function Nh(t){return!!t&&"integerValue"in t}function Gd(t){return!!t&&"arrayValue"in t}function gm(t){return!!t&&"nullValue"in t}function ym(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Sl(t){return!!t&&"mapValue"in t}function UT(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Bv])==null?void 0:r.stringValue)===Uv}function Co(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return vi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Co(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Co(t.arrayValue.values[n]);return e}return{...t}}function $T(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===BT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Sl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Co(n)}setAll(e){let n=rt.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=Co(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Sl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Sl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){vi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Jt(Co(this.value))}}function $v(t){const e=[];return vi(t.fields,(n,r)=>{const i=new rt([n]);if(Sl(r)){const s=$v(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new yt(e,0,ie.min(),ie.min(),ie.min(),Jt.empty(),0)}static newFoundDocument(e,n,r,i){return new yt(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new yt(e,2,n,ie.min(),ie.min(),Jt.empty(),0)}static newUnknownDocument(e,n){return new yt(e,3,n,ie.min(),ie.min(),Jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.position=e,this.inclusive=n}}function vm(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(a.referenceValue),n.key):r=ys(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function _m(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n="asc"){this.field=e,this.dir=n}}function WT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{}class Ke extends Wv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new qT(e,n,r):n==="array-contains"?new QT(e,r):n==="in"?new YT(e,r):n==="not-in"?new JT(e,r):n==="array-contains-any"?new XT(e,r):new Ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new KT(e,r):new GT(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ys(n,this.value)):n!==null&&Lr(this.value)===Lr(n)&&this.matchesComparison(ys(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends Wv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Nn(e,n)}matches(e){return Hv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Hv(t){return t.op==="and"}function qv(t){return HT(t)&&Hv(t)}function HT(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function bh(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+vs(t.value);if(qv(t))return t.filters.map(e=>bh(e)).join(",");{const e=t.filters.map(n=>bh(n)).join(",");return`${t.op}(${e})`}}function Kv(t,e){return t instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&Vn(r.value,i.value)}(t,e):t instanceof Nn?function(r,i){return i instanceof Nn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&Kv(a,i.filters[l]),!0):!1}(t,e):void ne(19439)}function Gv(t){return t instanceof Ke?function(n){return`${n.field.canonicalString()} ${n.op} ${vs(n.value)}`}(t):t instanceof Nn?function(n){return n.op.toString()+" {"+n.getFilters().map(Gv).join(" ,")+"}"}(t):"Filter"}class qT extends Ke{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class KT extends Ke{constructor(e,n){super(e,"in",n),this.keys=Qv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class GT extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=Qv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Qv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class QT extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gd(n)&&Zo(n.arrayValue,this.value)}}class YT extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zo(this.value.arrayValue,n)}}class JT extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zo(this.value.arrayValue,n)}}class XT extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function Em(t,e=null,n=[],r=[],i=null,s=null,a=null){return new ZT(t,e,n,r,i,s,a)}function Qd(t){const e=se(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>bh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Du(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vs(r)).join(",")),e.Te=n}return e.Te}function Yd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!WT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Kv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_m(t.startAt,e.startAt)&&_m(t.endAt,e.endAt)}function jh(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function eS(t,e,n,r,i,s,a,l){return new Nu(t,e,n,r,i,s,a,l)}function Jd(t){return new Nu(t)}function wm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tS(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function nS(t){return t.collectionGroup!==null}function xo(t){const e=se(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Qe(rt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ou(s,r))}),n.has(rt.keyField().canonicalString())||e.Ie.push(new ou(rt.keyField(),r))}return e.Ie}function Rn(t){const e=se(t);return e.Ee||(e.Ee=rS(e,xo(t))),e.Ee}function rS(t,e){if(t.limitType==="F")return Em(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ou(i.field,s)});const n=t.endAt?new su(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new su(t.startAt.position,t.startAt.inclusive):null;return Em(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Lh(t,e,n){return new Nu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bu(t,e){return Yd(Rn(t),Rn(e))&&t.limitType===e.limitType}function Yv(t){return`${Qd(Rn(t))}|lt:${t.limitType}`}function Mi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Gv(i)).join(", ")}]`),Du(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>vs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>vs(i)).join(",")),`Target(${r})`}(Rn(t))}; limitType=${t.limitType})`}function ju(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of xo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,u){const h=vm(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,xo(r),i)||r.endAt&&!function(a,l,u){const h=vm(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,xo(r),i))}(t,e)}function iS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Jv(t){return(e,n)=>{let r=!1;for(const i of xo(t)){const s=sS(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function sS(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?ys(u,h):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return jv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=new be(te.comparator);function Yn(){return oS}const Xv=new be(te.comparator);function ho(...t){let e=Xv;for(const n of t)e=e.insert(n.key,n);return e}function Zv(t){let e=Xv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function si(){return Ao()}function e0(){return Ao()}function Ao(){return new _i(t=>t.toString(),(t,e)=>t.isEqual(e))}const aS=new be(te.comparator),lS=new Qe(te.comparator);function he(...t){let e=lS;for(const n of t)e=e.add(n);return e}const uS=new Qe(ce);function cS(){return uS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nu(e)?"-0":e}}function t0(t){return{integerValue:""+t}}function hS(t,e){return jT(e)?t0(e):Xd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(){this._=void 0}}function dS(t,e,n){return t instanceof au?function(i,s){const a={fields:{[Mv]:{stringValue:Ov},[zv]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Kd(s)&&(s=Vu(s)),s&&(a.fields[Fv]=s),{mapValue:a}}(n,e):t instanceof ea?r0(t,e):t instanceof ta?i0(t,e):function(i,s){const a=n0(i,s),l=Tm(a)+Tm(i.Ae);return Nh(a)&&Nh(i.Ae)?t0(l):Xd(i.serializer,l)}(t,e)}function fS(t,e,n){return t instanceof ea?r0(t,e):t instanceof ta?i0(t,e):n}function n0(t,e){return t instanceof lu?function(r){return Nh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class au extends Lu{}class ea extends Lu{constructor(e){super(),this.elements=e}}function r0(t,e){const n=s0(e);for(const r of t.elements)n.some(i=>Vn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ta extends Lu{constructor(e){super(),this.elements=e}}function i0(t,e){let n=s0(e);for(const r of t.elements)n=n.filter(i=>!Vn(i,r));return{arrayValue:{values:n}}}class lu extends Lu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Tm(t){return Me(t.integerValue||t.doubleValue)}function s0(t){return Gd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function pS(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ea&&i instanceof ea||r instanceof ta&&i instanceof ta?gs(r.elements,i.elements,Vn):r instanceof lu&&i instanceof lu?Vn(r.Ae,i.Ae):r instanceof au&&i instanceof au}(t.transform,e.transform)}class mS{constructor(e,n){this.version=e,this.transformResults=n}}class $n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Il(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ou{}function o0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new l0(t.key,$n.none()):new ua(t.key,t.data,$n.none());{const n=t.data,r=Jt.empty();let i=new Qe(rt.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Ei(t.key,r,new dn(i.toArray()),$n.none())}}function gS(t,e,n){t instanceof ua?function(i,s,a){const l=i.value.clone(),u=Im(i.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ei?function(i,s,a){if(!Il(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=Im(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(a0(i)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ko(t,e,n,r){return t instanceof ua?function(s,a,l,u){if(!Il(s.precondition,a))return l;const h=s.value.clone(),p=Cm(s.fieldTransforms,u,a);return h.setAll(p),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ei?function(s,a,l,u){if(!Il(s.precondition,a))return l;const h=Cm(s.fieldTransforms,u,a),p=a.data;return p.setAll(a0(s)),p.setAll(h),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(s,a,l){return Il(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function yS(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=n0(r.transform,i||null);s!=null&&(n===null&&(n=Jt.empty()),n.set(r.field,s))}return n||null}function Sm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gs(r,i,(s,a)=>pS(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ua extends Ou{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ei extends Ou{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function a0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Im(t,e,n){const r=new Map;ye(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,fS(a,l,n[i]))}return r}function Cm(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,dS(s,a,e))}return r}class l0 extends Ou{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vS extends Ou{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&gS(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ko(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ko(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=e0();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const u=o0(a,l);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&gs(this.mutations,e.mutations,(n,r)=>Sm(n,r))&&gs(this.baseMutations,e.baseMutations,(n,r)=>Sm(n,r))}}class Zd{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return aS}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new Zd(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,fe;function TS(t){switch(t){case z.OK:return ne(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function u0(t){if(t===void 0)return Qn("GRPC error has no .code"),z.UNKNOWN;switch(t){case Be.OK:return z.OK;case Be.CANCELLED:return z.CANCELLED;case Be.UNKNOWN:return z.UNKNOWN;case Be.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Be.INTERNAL:return z.INTERNAL;case Be.UNAVAILABLE:return z.UNAVAILABLE;case Be.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Be.NOT_FOUND:return z.NOT_FOUND;case Be.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Be.ABORTED:return z.ABORTED;case Be.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Be.DATA_LOSS:return z.DATA_LOSS;default:return ne(39323,{code:t})}}(fe=Be||(Be={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=new Rr([4294967295,4294967295],0);function xm(t){const e=SS().encode(t),n=new Cv;return n.update(e),new Uint8Array(n.digest())}function Am(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Rr([n,r],0),new Rr([i,s],0)]}class ef{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fo(`Invalid padding: ${n}`);if(r<0)throw new fo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Rr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Rr.fromNumber(r)));return i.compare(IS)===1&&(i=new Rr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=xm(e),[r,i]=Am(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new ef(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=xm(e),[r,i]=Am(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.be(a)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ca.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Mu(ie.min(),i,new be(ce),Yn(),he())}}class ca{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ca(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class c0{constructor(e,n){this.targetId=e,this.Ce=n}}class h0{constructor(e,n,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class km{constructor(){this.ve=0,this.Fe=Rm(),this.Me=ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=he(),n=he(),r=he();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne(38017,{changeType:s})}}),new ca(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Rm()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class CS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yn(),this.He=ol(),this.Je=ol(),this.Ze=new be(ce)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(jh(s))if(r===0){const a=new te(s.path);this.et(n,a,yt.newNoDocument(a,ie.min()))}else ye(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=jr(r).toUint8Array()}catch(u){if(u instanceof Lv)return ms("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new ef(a,i,s)}catch(u){return ms(u instanceof fo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&jh(l.target)){const u=new te(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,yt.newNoDocument(u,e))}s.Be&&(n.set(a,s.ke()),s.Ke())}});let r=he();this.Je.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const i=new Mu(e,n,this.Ze,this.je,r);return this.je=Yn(),this.He=ol(),this.Je=ol(),this.Ze=new be(ce),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new km,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Qe(ce),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Qe(ce),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new km),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ol(){return new be(te.comparator)}function Rm(){return new be(te.comparator)}const xS={asc:"ASCENDING",desc:"DESCENDING"},AS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kS={and:"AND",or:"OR"};class RS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Oh(t,e){return t.useProto3Json||Du(e)?e:{value:e}}function uu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function d0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function PS(t,e){return uu(t,e.toTimestamp())}function Pn(t){return ye(!!t,49232),ie.fromTimestamp(function(n){const r=br(n);return new Ae(r.seconds,r.nanos)}(t))}function tf(t,e){return Mh(t,e).canonicalString()}function Mh(t,e){const n=function(i){return new De(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function f0(t){const e=De.fromString(t);return ye(v0(e),10190,{key:e.toString()}),e}function Fh(t,e){return tf(t.databaseId,e.path)}function kc(t,e){const n=f0(e);if(n.get(1)!==t.databaseId.projectId)throw new X(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(m0(n))}function p0(t,e){return tf(t.databaseId,e)}function DS(t){const e=f0(t);return e.length===4?De.emptyPath():m0(e)}function zh(t){return new De(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function m0(t){return ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Pm(t,e,n){return{name:Fh(t,e),fields:n.value.mapValue.fields}}function VS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ne(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(ye(p===void 0||typeof p=="string",58123),ot.fromBase64String(p||"")):(ye(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ot.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const p=h.code===void 0?z.UNKNOWN:u0(h.code);return new X(p,h.message||"")}(a);n=new h0(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=kc(t,r.document.name),s=Pn(r.document.updateTime),a=r.document.createTime?Pn(r.document.createTime):ie.min(),l=new Jt({mapValue:{fields:r.document.fields}}),u=yt.newFoundDocument(i,s,a,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Cl(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=kc(t,r.document),s=r.readTime?Pn(r.readTime):ie.min(),a=yt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Cl([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=kc(t,r.document),s=r.removedTargetIds||[];n=new Cl([],s,i,null)}else{if(!("filter"in e))return ne(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new wS(i,s),l=r.targetId;n=new c0(l,a)}}return n}function NS(t,e){let n;if(e instanceof ua)n={update:Pm(t,e.key,e.value)};else if(e instanceof l0)n={delete:Fh(t,e.key)};else if(e instanceof Ei)n={update:Pm(t,e.key,e.data),updateMask:US(e.fieldMask)};else{if(!(e instanceof vS))return ne(16599,{dt:e.type});n={verify:Fh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof au)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ea)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ta)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof lu)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw ne(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:PS(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne(27497)}(t,e.precondition)),n}function bS(t,e){return t&&t.length>0?(ye(e!==void 0,14353),t.map(n=>function(i,s){let a=i.updateTime?Pn(i.updateTime):Pn(s);return a.isEqual(ie.min())&&(a=Pn(s)),new mS(a,i.transformResults||[])}(n,e))):[]}function jS(t,e){return{documents:[p0(t,e.path)]}}function LS(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=p0(t,i);const s=function(h){if(h.length!==0)return y0(Nn.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(p=>function(_){return{field:Fi(_.field),direction:FS(_.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Oh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:i}}function OS(t){let e=DS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ye(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(v){const _=g0(v);return _ instanceof Nn&&qv(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(v){return v.map(_=>function(j){return new ou(zi(j.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(v){let _;return _=typeof v=="object"?v.value:v,Du(_)?null:_}(n.limit));let u=null;n.startAt&&(u=function(v){const _=!!v.before,R=v.values||[];return new su(R,_)}(n.startAt));let h=null;return n.endAt&&(h=function(v){const _=!v.before,R=v.values||[];return new su(R,_)}(n.endAt)),eS(e,i,a,s,l,"F",u,h)}function MS(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function g0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zi(n.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=zi(n.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zi(n.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=zi(n.unaryFilter.field);return Ke.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ke.create(zi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Nn.create(n.compositeFilter.filters.map(r=>g0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function FS(t){return xS[t]}function zS(t){return AS[t]}function BS(t){return kS[t]}function Fi(t){return{fieldPath:t.canonicalString()}}function zi(t){return rt.fromServerFormat(t.fieldPath)}function y0(t){return t instanceof Ke?function(n){if(n.op==="=="){if(ym(n.value))return{unaryFilter:{field:Fi(n.field),op:"IS_NAN"}};if(gm(n.value))return{unaryFilter:{field:Fi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ym(n.value))return{unaryFilter:{field:Fi(n.field),op:"IS_NOT_NAN"}};if(gm(n.value))return{unaryFilter:{field:Fi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fi(n.field),op:zS(n.op),value:n.value}}}(t):t instanceof Nn?function(n){const r=n.getFilters().map(i=>y0(i));return r.length===1?r[0]:{compositeFilter:{op:BS(n.op),filters:r}}}(t):ne(54877,{filter:t})}function US(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function v0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function _0(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,r,i,s=ie.min(),a=ie.min(),l=ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.yt=e}}function WS(t){const e=OS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(){this.Sn=new qS}addToCollectionParentIndex(e,n){return this.Sn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Nr.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class qS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Qe(De.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qe(De.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},E0=41943040;class Rt{static withCacheSize(e){return new Rt(e,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rt.DEFAULT_COLLECTION_PERCENTILE=10,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rt.DEFAULT=new Rt(E0,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rt.DISABLED=new Rt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new _s(0)}static ar(){return new _s(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="LruGarbageCollector",KS=1048576;function Nm([t,e],[n,r]){const i=ce(t,n);return i===0?ce(e,r):i}class GS{constructor(e){this.Pr=e,this.buffer=new Qe(Nm),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Nm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class QS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){G(Vm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){As(n)?G(Vm,"Ignoring IndexedDB error during garbage collection: ",n):await xs(n)}await this.Ar(3e5)})}}class YS{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(Pu.ce);const r=new GS(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(Dm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dm):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,s,a,l,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,a=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,l=Date.now(),this.removeTargets(e,r,n))).next(v=>(s=v,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(h=Date.now(),Oi()<=pe.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${v} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:v})))}}function JS(t,e){return new YS(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.changes=new _i(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ko(r.mutation,i,dn.empty(),Ae.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const i=si();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=ho();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=si();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=Yn();const a=Ao(),l=function(){return Ao()}();return n.forEach((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Ei)?s=s.insert(h.key,h):p!==void 0?(a.set(h.key,p.mutation.getFieldMask()),ko(p.mutation,h,p.mutation.getFieldMask(),Ae.now())):a.set(h.key,dn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,p)=>a.set(h,p)),n.forEach((h,p)=>l.set(h,new ZS(p,a.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Ao();let i=new be((a,l)=>a-l),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||dn.empty();p=l.applyToLocalView(h,p),r.set(u,p);const v=(i.get(l.batchId)||he()).add(u);i=i.insert(l.batchId,v)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,v=e0();p.forEach(_=>{if(!s.has(_)){const R=o0(n.get(_),r.get(_));R!==null&&v.set(_,R),s=s.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,v))}return O.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return tS(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(si());let l=Yo,u=s;return a.next(h=>O.forEach(h,(p,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),s.get(p)?O.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{u=u.insert(p,_)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,he())).next(p=>({batchId:l,changes:Zv(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=ho();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=ho();return this.indexManager.getCollectionParents(e,s).next(l=>O.forEach(l,u=>{const h=function(v,_){return new Nu(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((v,_)=>{a=a.insert(v,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((u,h)=>{const p=h.getKey();a.get(p)===null&&(a=a.insert(p,yt.newInvalidDocument(p)))});let l=ho();return a.forEach((u,h)=>{const p=s.get(u);p!==void 0&&ko(p.mutation,h,dn.empty(),Ae.now()),ju(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return O.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Pn(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:WS(i.bundledQuery),readTime:Pn(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.overlays=new be(te.comparator),this.Lr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=si();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.bt(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Lr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=si(),s=n.length+1,a=new te(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new be((h,p)=>h-p);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=si(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=si(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=i)););return O.resolve(l)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new ES(n,r));let s=this.Lr.get(n);s===void 0&&(s=he(),this.Lr.set(n,s)),this.Lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(){this.kr=new Qe(Je.Kr),this.qr=new Qe(Je.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Je(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Je(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new te(new De([])),r=new Je(n,e),i=new Je(n,e+1),s=[];return this.qr.forEachInRange([r,i],a=>{this.Wr(a),s.push(a.key)}),s}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new te(new De([])),r=new Je(n,e),i=new Je(n,e+1);let s=he();return this.qr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Je(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Je{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return te.comparator(e.key,n.key)||ce(e.Hr,n.Hr)}static Ur(e,n){return ce(e.Hr,n.Hr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Qe(Je.Kr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new _S(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.Jr=this.Jr.add(new Je(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,n){return O.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?qd:this.Yn-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Je(n,0),i=new Je(n,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],a=>{const l=this.Zr(a.Hr);s.push(l)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(ce);return n.forEach(i=>{const s=new Je(i,0),a=new Je(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,a],l=>{r=r.add(l.Hr)})}),O.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;te.isDocumentKey(s)||(s=s.child(""));const a=new Je(new te(s),0);let l=new Qe(ce);return this.Jr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.Hr)),!0)},a),O.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ye(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return O.forEach(n.mutations,i=>{const s=new Je(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Je(n,0),i=this.Jr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.ti=e,this.docs=function(){return new be(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(n))}getEntries(e,n){let r=Yn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():yt.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Yn();const a=n.path,l=new te(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||DT(PT(p),r)<=0||(i.has(p.key)||ju(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne(9500)}ni(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new oI(this)}getSize(e){return O.resolve(this.size)}}class oI extends XS{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.persistence=e,this.ri=new _i(n=>Qd(n),Yd),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.ii=0,this.si=new nf,this.targetCount=0,this.oi=_s._r()}forEachTarget(e,n){return this.ri.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),O.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new _s(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.lr(n),O.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ri.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n){this._i={},this.overlays={},this.ai=new Pu(0),this.ui=!1,this.ui=!0,this.ci=new rI,this.referenceDelegate=e(this),this.li=new aI(this),this.indexManager=new HS,this.remoteDocumentCache=function(i){return new sI(i)}(r=>this.referenceDelegate.hi(r)),this.serializer=new $S(n),this.Pi=new tI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new iI(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const i=new lI(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(s=>this.referenceDelegate.Ii(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return O.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class lI extends NT{constructor(e){super(),this.currentSequenceNumber=e}}class rf{constructor(e){this.persistence=e,this.Ri=new nf,this.Ai=null}static Vi(e){return new rf(e)}get di(){if(this.Ai)return this.Ai;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.di,r=>{const i=te.fromPath(r);return this.mi(e,i).next(s=>{s||n.removeEntry(i,ie.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class cu{constructor(e,n){this.persistence=e,this.fi=new _i(r=>LT(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=JS(this,n)}static Vi(e,n){return new cu(e,n)}Ti(){}Ii(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return O.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(s=>s?O.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,a=>this.wr(e,a,n).next(l=>{l||(r++,s.removeEntry(a,ie.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Tl(e.data.value)),n}wr(e,n,r){return O.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=he(),i=he();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new sf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return YE()?8:bT(GE())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.gs(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ps(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new uI;return this.ys(e,n,a).next(l=>{if(s.result=l,this.As)return this.ws(e,n,a,l.size)})}).next(()=>s.result)}ws(e,n,r,i){return r.documentReadCount<this.Vs?(Oi()<=pe.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Mi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(Oi()<=pe.DEBUG&&G("QueryEngine","Query:",Mi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Oi()<=pe.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Mi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rn(n))):O.resolve())}gs(e,n){if(wm(n))return O.resolve(null);let r=Rn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Lh(n,null,"F"),r=Rn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=he(...s);return this.fs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.bs(n,l);return this.Ss(n,h,a,u.readTime)?this.gs(e,Lh(n,null,"F")):this.Ds(e,h,n,u)}))})))}ps(e,n,r,i){return wm(n)||i.isEqual(ie.min())?O.resolve(null):this.fs.getDocuments(e,r).next(s=>{const a=this.bs(n,s);return this.Ss(n,a,r,i)?O.resolve(null):(Oi()<=pe.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Mi(n)),this.Ds(e,a,n,RT(i,Yo)).next(l=>l))})}bs(e,n){let r=new Qe(Jv(e));return n.forEach((i,s)=>{ju(e,s)&&(r=r.add(s))}),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,n,r){return Oi()<=pe.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Mi(n)),this.fs.getDocumentsMatchingQuery(e,n,Nr.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="LocalStore",hI=3e8;class dI{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new be(ce),this.Fs=new _i(s=>Qd(s),Yd),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function fI(t,e,n,r){return new dI(t,e,n,r)}async function T0(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let u=he();for(const h of i){a.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of s){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ns:h,removedBatchIds:a,addedBatchIds:l}))})})}function pI(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const v=h.batch,_=v.keys();let R=O.resolve();return _.forEach(j=>{R=R.next(()=>p.getEntry(u,j)).next(L=>{const $=h.docVersions.get(j);ye($!==null,48541),L.version.compareTo($)<0&&(v.applyToRemoteDocument(L,h),L.isValidDocument()&&(L.setReadTime(h.commitVersion),p.addEntry(L)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(u,v))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=he();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function S0(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function mI(t,e){const n=se(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const l=[];e.targetChanges.forEach((p,v)=>{const _=i.get(v);if(!_)return;l.push(n.li.removeMatchingKeys(s,p.removedDocuments,v).next(()=>n.li.addMatchingKeys(s,p.addedDocuments,v)));let R=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(v)!==null?R=R.withResumeToken(ot.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):p.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(p.resumeToken,r)),i=i.insert(v,R),function(L,$,x){return L.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=hI?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(_,R,p)&&l.push(n.li.updateTargetData(s,R))});let u=Yn(),h=he();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push(gI(s,a,e.documentUpdates).next(p=>{u=p.Bs,h=p.Ls})),!r.isEqual(ie.min())){const p=n.li.getLastRemoteSnapshotVersion(s).next(v=>n.li.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(p)}return O.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.vs=i,s))}function gI(t,e,n){let r=he(),i=he();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Yn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):G(of,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Bs:a,Ls:i}})}function yI(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vI(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.li.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.li.allocateTargetId(r).next(a=>(i=new vr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function Bh(t,e,n){const r=se(t),i=r.vs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!As(a))throw a;G(of,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function bm(t,e,n){const r=se(t);let i=ie.min(),s=he();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,p){const v=se(u),_=v.Fs.get(p);return _!==void 0?O.resolve(v.vs.get(_)):v.li.getTargetData(h,p)}(r,a,Rn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?i:ie.min(),n?s:he())).next(l=>(_I(r,iS(e),l),{documents:l,ks:s})))}function _I(t,e,n){let r=t.Ms.get(e)||ie.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ms.set(e,r)}class jm{constructor(){this.activeTargetIds=cS()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EI{constructor(){this.vo=new jm,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new jm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="ConnectivityMonitor";class Om{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){G(Lm,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){G(Lm,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al=null;function Uh(){return al===null?al=function(){return 268435456+Math.round(2147483648*Math.random())}():al++,"0x"+al.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc="RestConnection",TI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class SI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===ru?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const a=Uh(),l=this.Qo(e,n.toUriEncodedString());G(Rc,`Sending RPC '${e}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,i,s);const{host:h}=new URL(l),p=Bd(h);return this.zo(e,l,u,r,p).then(v=>(G(Rc,`Received RPC '${e}' ${a}: `,v),v),v=>{throw ms(Rc,`RPC '${e}' ${a} failed with error: `,v,"url: ",l,"request:",r),v})}jo(e,n,r,i,s,a){return this.Wo(e,n,r,i,s)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Qo(e,n){const r=TI[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection",to=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(i){setTimeout(()=>{throw i},0)}})};class os extends SI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!os.c_){const e=Rv();to(e,kv.STAT_EVENT,n=>{n.stat===Ph.PROXY?G(pt,"STAT_EVENT: detected buffering proxy"):n.stat===Ph.NOPROXY&&G(pt,"STAT_EVENT: detected no buffering proxy")}),os.c_=!0}}zo(e,n,r,i,s){const a=Uh();return new Promise((l,u)=>{const h=new xv;h.setWithCredentials(!0),h.listenOnce(Av.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case wl.NO_ERROR:const v=h.getResponseJson();G(pt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),l(v);break;case wl.TIMEOUT:G(pt,`RPC '${e}' ${a} timed out`),u(new X(z.DEADLINE_EXCEEDED,"Request time out"));break;case wl.HTTP_ERROR:const _=h.getStatus();if(G(pt,`RPC '${e}' ${a} failed with status:`,_,"response text:",h.getResponseText()),_>0){let R=h.getResponseJson();Array.isArray(R)&&(R=R[0]);const j=R==null?void 0:R.error;if(j&&j.status&&j.message){const L=function(x){const T=x.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(T)>=0?T:z.UNKNOWN}(j.status);u(new X(L,j.message))}else u(new X(z.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new X(z.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{G(pt,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(i);G(pt,`RPC '${e}' ${a} sending request:`,i),h.send(n,"POST",p,r,15)})}T_(e,n,r){const i=Uh(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");G(pt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=a.createWebChannel(h,l);this.I_(p);let v=!1,_=!1;const R=new II({Ho:j=>{_?G(pt,`Not sending because RPC '${e}' stream ${i} is closed:`,j):(v||(G(pt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),G(pt,`RPC '${e}' stream ${i} sending:`,j),p.send(j))},Jo:()=>p.close()});return to(p,co.EventType.OPEN,()=>{_||(G(pt,`RPC '${e}' stream ${i} transport opened.`),R.i_())}),to(p,co.EventType.CLOSE,()=>{_||(_=!0,G(pt,`RPC '${e}' stream ${i} transport closed`),R.o_(),this.E_(p))}),to(p,co.EventType.ERROR,j=>{_||(_=!0,ms(pt,`RPC '${e}' stream ${i} transport errored. Name:`,j.name,"Message:",j.message),R.o_(new X(z.UNAVAILABLE,"The operation could not be completed")))}),to(p,co.EventType.MESSAGE,j=>{var L;if(!_){const $=j.data[0];ye(!!$,16349);const x=$,T=(x==null?void 0:x.error)||((L=x[0])==null?void 0:L.error);if(T){G(pt,`RPC '${e}' stream ${i} received error:`,T);const k=T.status;let M=function(E){const y=Be[E];if(y!==void 0)return u0(y)}(k),H=T.message;M===void 0&&(M=z.INTERNAL,H="Unknown error status: "+k+" with message "+T.message),_=!0,R.o_(new X(M,H)),p.close()}else G(pt,`RPC '${e}' stream ${i} received:`,$),R.__($)}}),os.u_(),setTimeout(()=>{R.s_()},0),R}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Pv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t){return new os(t)}function Pc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(t){return new RS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */os.c_=!1;class I0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="PersistentStream";class C0{constructor(e,n,r,i,s,a,l,u){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new I0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Qn(n.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new X(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return G(Mm,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(G(Mm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xI extends C0{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=VS(this.serializer,e),r=function(s){if(!("targetChange"in s))return ie.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?ie.min():a.readTime?Pn(a.readTime):ie.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=zh(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=jh(u)?{documents:jS(s,u)}:{query:LS(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=d0(s,a.resumeToken);const h=Oh(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(ie.min())>0){l.readTime=uu(s,a.snapshotVersion.toTimestamp());const h=Oh(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=MS(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=zh(this.serializer),n.removeTarget=e,this.K_(n)}}class AI extends C0{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=bS(e.writeResults,e.commitTime),r=Pn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=zh(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>NS(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{}class RI extends kI{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new X(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,Mh(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(z.UNKNOWN,s.toString())})}jo(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.jo(e,Mh(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new X(z.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function PI(t,e,n,r){return new RI(t,e,n,r)}class DI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qn(n),this.aa=!1):G("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi="RemoteStore";class VI{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo(a=>{r.enqueueAndForget(async()=>{wi(this)&&(G(mi,"Restarting streams for network reachability change."),await async function(u){const h=se(u);h.Ea.add(4),await ha(h),h.Va.set("Unknown"),h.Ea.delete(4),await zu(h)}(this))})}),this.Va=new DI(r,i)}}async function zu(t){if(wi(t))for(const e of t.Ra)await e(!0)}async function ha(t){for(const e of t.Ra)await e(!1)}function x0(t,e){const n=se(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),cf(n)?uf(n):ks(n).O_()&&lf(n,e))}function af(t,e){const n=se(t),r=ks(n);n.Ia.delete(e),r.O_()&&A0(n,e),n.Ia.size===0&&(r.O_()?r.L_():wi(n)&&n.Va.set("Unknown"))}function lf(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ks(t).Z_(e)}function A0(t,e){t.da.$e(e),ks(t).X_(e)}function uf(t){t.da=new CS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ks(t).start(),t.Va.ua()}function cf(t){return wi(t)&&!ks(t).x_()&&t.Ia.size>0}function wi(t){return se(t).Ea.size===0}function k0(t){t.da=void 0}async function NI(t){t.Va.set("Online")}async function bI(t){t.Ia.forEach((e,n)=>{lf(t,e)})}async function jI(t,e){k0(t),cf(t)?(t.Va.ha(e),uf(t)):t.Va.set("Unknown")}async function LI(t,e,n){if(t.Va.set("Online"),e instanceof h0&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ia.delete(l),i.da.removeTarget(l))}(t,e)}catch(r){G(mi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hu(t,r)}else if(e instanceof Cl?t.da.Xe(e):e instanceof c0?t.da.st(e):t.da.tt(e),!n.isEqual(ie.min()))try{const r=await S0(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.da.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.Ia.get(h);p&&s.Ia.set(h,p.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const p=s.Ia.get(u);if(!p)return;s.Ia.set(u,p.withResumeToken(ot.EMPTY_BYTE_STRING,p.snapshotVersion)),A0(s,u);const v=new vr(p.target,u,h,p.sequenceNumber);lf(s,v)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G(mi,"Failed to raise snapshot:",r),await hu(t,r)}}async function hu(t,e,n){if(!As(e))throw e;t.Ea.add(1),await ha(t),t.Va.set("Offline"),n||(n=()=>S0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(mi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await zu(t)})}function R0(t,e){return e().catch(n=>hu(t,n,e))}async function Bu(t){const e=se(t),n=Or(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qd;for(;OI(e);)try{const i=await yI(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,MI(e,i)}catch(i){await hu(e,i)}P0(e)&&D0(e)}function OI(t){return wi(t)&&t.Ta.length<10}function MI(t,e){t.Ta.push(e);const n=Or(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function P0(t){return wi(t)&&!Or(t).x_()&&t.Ta.length>0}function D0(t){Or(t).start()}async function FI(t){Or(t).ra()}async function zI(t){const e=Or(t);for(const n of t.Ta)e.ea(n.mutations)}async function BI(t,e,n){const r=t.Ta.shift(),i=Zd.from(r,e,n);await R0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Bu(t)}async function UI(t,e){e&&Or(t).Y_&&await async function(r,i){if(function(a){return TS(a)&&a!==z.ABORTED}(i.code)){const s=r.Ta.shift();Or(r).B_(),await R0(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Bu(r)}}(t,e),P0(t)&&D0(t)}async function Fm(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),G(mi,"RemoteStore received new credentials");const r=wi(n);n.Ea.add(3),await ha(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await zu(n)}async function $I(t,e){const n=se(t);e?(n.Ea.delete(2),await zu(n)):e||(n.Ea.add(2),await ha(n),n.Va.set("Unknown"))}function ks(t){return t.ma||(t.ma=function(n,r,i){const s=se(n);return s.sa(),new xI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:NI.bind(null,t),Yo:bI.bind(null,t),t_:jI.bind(null,t),J_:LI.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),cf(t)?uf(t):t.Va.set("Unknown")):(await t.ma.stop(),k0(t))})),t.ma}function Or(t){return t.fa||(t.fa=function(n,r,i){const s=se(n);return s.sa(),new AI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:FI.bind(null,t),t_:UI.bind(null,t),ta:zI.bind(null,t),na:BI.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Bu(t)):(await t.fa.stop(),t.Ta.length>0&&(G(mi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new hf(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function df(t,e){if(Qn("AsyncQueue",`${e}: ${t}`),As(t))return new X(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{static emptySet(e){return new as(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=ho(),this.sortedSet=new be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof as)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new as;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(){this.ga=new be(te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Es{constructor(e,n,r,i,s,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Es(e,n,as.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class HI{constructor(){this.queries=Bm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=se(n),s=i.queries;i.queries=Bm(),s.forEach((a,l)=>{for(const u of l.ba)u.onError(r)})})(this,new X(z.ABORTED,"Firestore shutting down"))}}function Bm(){return new _i(t=>Yv(t),bu)}async function qI(t,e){const n=se(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new WI,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=df(a,`Initialization of query '${Mi(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.ba.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&ff(n)}async function KI(t,e){const n=se(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.ba.indexOf(e);a>=0&&(s.ba.splice(a,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function GI(t,e){const n=se(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.ba)l.Fa(i)&&(r=!0);a.wa=i}}r&&ff(n)}function QI(t,e,n){const r=se(t),i=r.queries.get(e);if(i)for(const s of i.ba)s.onError(n);r.queries.delete(e)}function ff(t){t.Ca.forEach(e=>{e.next()})}var $h,Um;(Um=$h||($h={})).Ma="default",Um.Cache="cache";class YI{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Es(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Es.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$h.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e){this.key=e}}class N0{constructor(e){this.key=e}}class JI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=he(),this.mutatedKeys=he(),this.eu=Jv(e),this.tu=new as(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new zm,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,v)=>{const _=i.get(p),R=ju(this.query,v)?v:null,j=!!_&&this.mutatedKeys.has(_.key),L=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let $=!1;_&&R?_.data.isEqual(R.data)?j!==L&&(r.track({type:3,doc:R}),$=!0):this.su(_,R)||(r.track({type:2,doc:R}),$=!0,(u&&this.eu(R,u)>0||h&&this.eu(R,h)<0)&&(l=!0)):!_&&R?(r.track({type:0,doc:R}),$=!0):_&&!R&&(r.track({type:1,doc:_}),$=!0,(u||h)&&(l=!0)),$&&(R?(a=a.add(R),s=L?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{tu:a,iu:r,Ss:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((p,v)=>function(R,j){const L=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Vt:$})}};return L(R)-L(j)}(p.type,v.type)||this.eu(p.doc,v.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Ya.size===0&&this.current&&!i?1:0,h=u!==this.Xa;return this.Xa=u,a.length!==0||h?{snapshot:new Es(this.query,e.tu,s,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zm,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=he(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new N0(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new V0(r))}),n}cu(e){this.Za=e.ks,this.Ya=he();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Es.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const pf="SyncEngine";class XI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ZI{constructor(e){this.key=e,this.hu=!1}}class e2{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new _i(l=>Yv(l),bu),this.Iu=new Map,this.Eu=new Set,this.Ru=new be(te.comparator),this.Au=new Map,this.Vu=new nf,this.du={},this.mu=new Map,this.fu=_s.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function t2(t,e,n=!0){const r=F0(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await b0(r,e,n,!0),i}async function n2(t,e){const n=F0(t);await b0(n,e,!0,!1)}async function b0(t,e,n,r){const i=await vI(t.localStore,Rn(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await r2(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&x0(t.remoteStore,i),l}async function r2(t,e,n,r,i){t.pu=(v,_,R)=>async function(L,$,x,T){let k=$.view.ru(x);k.Ss&&(k=await bm(L.localStore,$.query,!1).then(({documents:E})=>$.view.ru(E,k)));const M=T&&T.targetChanges.get($.targetId),H=T&&T.targetMismatches.get($.targetId)!=null,K=$.view.applyChanges(k,L.isPrimaryClient,M,H);return Wm(L,$.targetId,K.au),K.snapshot}(t,v,_,R);const s=await bm(t.localStore,e,!0),a=new JI(e,s.ks),l=a.ru(s.documents),u=ca.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=a.applyChanges(l,t.isPrimaryClient,u);Wm(t,n,h.au);const p=new XI(e,n,a);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function i2(t,e,n){const r=se(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(a=>!bu(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Bh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&af(r.remoteStore,i.targetId),Wh(r,i.targetId)}).catch(xs)):(Wh(r,i.targetId),await Bh(r.localStore,i.targetId,!0))}async function s2(t,e){const n=se(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),af(n.remoteStore,r.targetId))}async function o2(t,e,n){const r=f2(t);try{const i=await function(a,l){const u=se(a),h=Ae.now(),p=l.reduce((R,j)=>R.add(j.key),he());let v,_;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let j=Yn(),L=he();return u.xs.getEntries(R,p).next($=>{j=$,j.forEach((x,T)=>{T.isValidDocument()||(L=L.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,j)).next($=>{v=$;const x=[];for(const T of l){const k=yS(T,v.get(T.key).overlayedDocument);k!=null&&x.push(new Ei(T.key,k,$v(k.value.mapValue),$n.exists(!0)))}return u.mutationQueue.addMutationBatch(R,h,x,l)}).next($=>{_=$;const x=$.applyToLocalDocumentSet(v,L);return u.documentOverlayCache.saveOverlays(R,$.batchId,x)})}).then(()=>({batchId:_.batchId,changes:Zv(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,u){let h=a.du[a.currentUser.toKey()];h||(h=new be(ce)),h=h.insert(l,u),a.du[a.currentUser.toKey()]=h}(r,i.batchId,n),await da(r,i.changes),await Bu(r.remoteStore)}catch(i){const s=df(i,"Failed to persist write");n.reject(s)}}async function j0(t,e){const n=se(t);try{const r=await mI(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Au.get(s);a&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?ye(a.hu,14607):i.removedDocuments.size>0&&(ye(a.hu,42227),a.hu=!1))}),await da(n,r,e)}catch(r){await xs(r)}}function $m(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,a)=>{const l=a.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const u=se(a);u.onlineState=l;let h=!1;u.queries.forEach((p,v)=>{for(const _ of v.ba)_.va(l)&&(h=!0)}),h&&ff(u)}(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function a2(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new be(te.comparator);a=a.insert(s,yt.newNoDocument(s,ie.min()));const l=he().add(s),u=new Mu(ie.min(),new Map,new be(ce),a,l);await j0(r,u),r.Ru=r.Ru.remove(s),r.Au.delete(e),mf(r)}else await Bh(r.localStore,e,!1).then(()=>Wh(r,e,n)).catch(xs)}async function l2(t,e){const n=se(t),r=e.batch.batchId;try{const i=await pI(n.localStore,e);O0(n,r,null),L0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await da(n,i)}catch(i){await xs(i)}}async function u2(t,e,n){const r=se(t);try{const i=await function(a,l){const u=se(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(v=>(ye(v!==null,37113),p=v.keys(),u.mutationQueue.removeMutationBatch(h,v))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);O0(r,e,n),L0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await da(r,i)}catch(i){await xs(i)}}function L0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function O0(t,e,n){const r=se(t);let i=r.du[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Wh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||M0(t,r)})}function M0(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(af(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),mf(t))}function Wm(t,e,n){for(const r of n)r instanceof V0?(t.Vu.addReference(r.key,e),c2(t,r)):r instanceof N0?(G(pf,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||M0(t,r.key)):ne(19791,{wu:r})}function c2(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(G(pf,"New document in limbo: "+n),t.Eu.add(r),mf(t))}function mf(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new te(De.fromString(e)),r=t.fu.next();t.Au.set(r,new ZI(n)),t.Ru=t.Ru.insert(n,r),x0(t.remoteStore,new vr(Rn(Jd(n.path)),r,"TargetPurposeLimboResolution",Pu.ce))}}async function da(t,e,n){const r=se(t),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{a.push(r.pu(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const v=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,v?"current":"not-current")}if(h){i.push(h);const v=sf.Es(u.targetId,h);s.push(v)}}))}),await Promise.all(a),r.Pu.J_(i),await async function(u,h){const p=se(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>O.forEach(h,_=>O.forEach(_.Ts,R=>p.persistence.referenceDelegate.addReference(v,_.targetId,R)).next(()=>O.forEach(_.Is,R=>p.persistence.referenceDelegate.removeReference(v,_.targetId,R)))))}catch(v){if(!As(v))throw v;G(of,"Failed to update sequence numbers: "+v)}for(const v of h){const _=v.targetId;if(!v.fromCache){const R=p.vs.get(_),j=R.snapshotVersion,L=R.withLastLimboFreeSnapshotVersion(j);p.vs=p.vs.insert(_,L)}}}(r.localStore,s))}async function h2(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){G(pf,"User change. New user:",e.toKey());const r=await T0(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new X(z.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await da(n,r.Ns)}}function d2(t,e){const n=se(t),r=n.Au.get(e);if(r&&r.hu)return he().add(r.key);{let i=he();const s=n.Iu.get(e);if(!s)return i;for(const a of s){const l=n.Tu.get(a);i=i.unionWith(l.view.nu)}return i}}function F0(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=j0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a2.bind(null,e),e.Pu.J_=GI.bind(null,e.eventManager),e.Pu.yu=QI.bind(null,e.eventManager),e}function f2(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u2.bind(null,e),e}class du{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return fI(this.persistence,new cI,e.initialUser,this.serializer)}Cu(e){return new w0(rf.Vi,this.serializer)}Du(e){return new EI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}du.provider={build:()=>new du};class p2 extends du{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ye(this.persistence.referenceDelegate instanceof cu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new QS(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Rt.withCacheSize(this.cacheSizeBytes):Rt.DEFAULT;return new w0(r=>cu.Vi(r,n),this.serializer)}}class Hh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$m(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=h2.bind(null,this.syncEngine),await $I(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HI}()}createDatastore(e){const n=Fu(e.databaseInfo.databaseId),r=CI(e.databaseInfo);return PI(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new VI(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>$m(this.syncEngine,n,0),function(){return Om.v()?new Om:new wI}())}createSyncEngine(e,n){return function(i,s,a,l,u,h,p){const v=new e2(i,s,a,l,u,h);return p&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=se(i);G(mi,"RemoteStore shutting down."),s.Ea.add(5),await ha(s),s.Aa.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Hh.provider={build:()=>new Hh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="FirestoreClient";class g2{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=mt.UNAUTHENTICATED,this.clientId=Wd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{G(Mr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(G(Mr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=df(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Dc(t,e){t.asyncQueue.verifyOperationInProgress(),G(Mr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await T0(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Hm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await y2(t);G(Mr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Fm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Fm(e.remoteStore,i)),t._onlineComponents=e}async function y2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(Mr,"Using user provided OfflineComponentProvider");try{await Dc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ms("Error using user provided cache. Falling back to memory cache: "+n),await Dc(t,new du)}}else G(Mr,"Using default OfflineComponentProvider"),await Dc(t,new p2(void 0));return t._offlineComponents}async function z0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(Mr,"Using user provided OnlineComponentProvider"),await Hm(t,t._uninitializedComponentsProvider._online)):(G(Mr,"Using default OnlineComponentProvider"),await Hm(t,new Hh))),t._onlineComponents}function v2(t){return z0(t).then(e=>e.syncEngine)}async function _2(t){const e=await z0(t),n=e.eventManager;return n.onListen=t2.bind(null,e.syncEngine),n.onUnlisten=i2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=n2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=s2.bind(null,e.syncEngine),n}function E2(t,e,n={}){const r=new Pr;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const p=new m2({next:_=>{p.Nu(),a.enqueueAndForget(()=>KI(s,v));const R=_.docs.has(l);!R&&_.fromCache?h.reject(new X(z.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&_.fromCache&&u&&u.source==="server"?h.reject(new X(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),v=new YI(Jd(l.path),p,{includeMetadataChanges:!0,Ka:!0});return qI(s,v)}(await _2(t),t.asyncQueue,e,n,r)),r.promise}function w2(t,e){const n=new Pr;return t.asyncQueue.enqueueAndForget(async()=>o2(await v2(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="ComponentProvider",qm=new Map;function S2(t,e,n,r,i){return new FT(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,B0(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="firestore.googleapis.com",Km=!0;class Gm{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=U0,this.ssl=Km}else this.host=e.host,this.ssl=e.ssl??Km;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=E0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KS)throw new X(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=B0(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yT;switch(r.type){case"firstParty":return new wT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=qm.get(n);r&&(G(T2,"Removing Datastore"),qm.delete(n),r.terminate())}(this),Promise.resolve()}}function I2(t,e,n,r={}){var h;t=Qo(t,gf);const i=Bd(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&($E(`https://${l}`),KE("Firestore",!0)),s.host!==U0&&s.host!==l&&ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!Xl(u,a)&&(t._setSettings(u),r.mockUserToken)){let p,v;if(typeof r.mockUserToken=="string")p=r.mockUserToken,v=mt.MOCK_USER;else{p=WE(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new X(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new mt(_)}t._authCredentials=new vT(new Vv(p,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yf(this.firestore,e,this._query)}}class Ze{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ze(this.firestore,e,this._key)}toJSON(){return{type:Ze._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(la(n,Ze._jsonSchema))return new Ze(e,r||null,new te(De.fromString(n.referencePath)))}}Ze._jsonSchemaVersion="firestore/documentReference/1.0",Ze._jsonSchema={type:$e("string",Ze._jsonSchemaVersion),referencePath:$e("string")};class na extends yf{constructor(e,n,r){super(e,n,Jd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new te(e))}withConverter(e){return new na(this.firestore,e,this._path)}}function $0(t,e,...n){if(t=Zl(t),arguments.length===1&&(e=Wd.newId()),AT("doc","path",e),t instanceof gf){const r=De.fromString(e,...n);return lm(r),new Ze(t,null,new te(r))}{if(!(t instanceof Ze||t instanceof na))throw new X(z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(De.fromString(e,...n));return lm(r),new Ze(t.firestore,t instanceof na?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="AsyncQueue";class Ym{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new I0(this,"async_queue_retry"),this._c=()=>{const r=Pc();r&&G(Qm,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Pc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Pc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Pr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!As(e))throw e;G(Qm,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Qn("INTERNAL UNHANDLED ERROR: ",Jm(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=hf.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ne(47125,{Pc:Jm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Jm(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class vf extends gf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ym,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ym(e),this._firestoreClient=void 0,await e}}}function C2(t,e){const n=typeof t=="object"?t:rT(),r=typeof t=="string"?t:ru,i=Xw(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=BE("firestore");s&&I2(i,...s)}return i}function W0(t){if(t._terminated)throw new X(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||x2(t),t._firestoreClient}function x2(t){var r,i,s,a;const e=t._freezeSettings(),n=S2(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new g2(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xt(ot.fromBase64String(e))}catch(n){throw new X(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xt(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(la(e,Xt._jsonSchema))return Xt.fromBase64String(e.bytes)}}Xt._jsonSchemaVersion="firestore/bytes/1.0",Xt._jsonSchema={type:$e("string",Xt._jsonSchemaVersion),bytes:$e("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Dn._jsonSchemaVersion}}static fromJSON(e){if(la(e,Dn._jsonSchema))return new Dn(e.latitude,e.longitude)}}Dn._jsonSchemaVersion="firestore/geoPoint/1.0",Dn._jsonSchema={type:$e("string",Dn._jsonSchemaVersion),latitude:$e("number"),longitude:$e("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:mn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(la(e,mn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new mn(e.vectorValues);throw new X(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mn._jsonSchemaVersion="firestore/vectorValue/1.0",mn._jsonSchema={type:$e("string",mn._jsonSchemaVersion),vectorValues:$e("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=/^__.*__$/;class k2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ei(e,this.data,this.fieldMask,n,this.fieldTransforms):new ua(e,this.data,n,this.fieldTransforms)}}function K0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{dataSource:t})}}class _f{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new _f({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return fu(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(K0(this.dataSource)&&A2.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class R2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fu(e)}createContext(e,n,r,i=!1){return new _f({dataSource:e,methodName:n,targetDoc:r,path:rt.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function P2(t){const e=t._freezeSettings(),n=Fu(t._databaseId);return new R2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function D2(t,e,n,r,i,s={}){const a=t.createContext(s.merge||s.mergeFields?2:0,e,n,i);J0("Data must be an object, but it was:",a,r);const l=Q0(r,a);let u,h;if(s.merge)u=new dn(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const v of s.mergeFields){const _=Ef(e,v,n);if(!a.contains(_))throw new X(z.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);b2(p,_)||p.push(_)}u=new dn(p),h=a.fieldTransforms.filter(v=>u.covers(v.field))}else u=null,h=a.fieldTransforms;return new k2(new Jt(l),u,h)}function G0(t,e){if(Y0(t=Zl(t)))return J0("Unsupported field value:",e,t),Q0(t,e);if(t instanceof q0)return function(r,i){if(!K0(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let u=G0(l,i.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Zl(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ae.fromDate(r);return{timestampValue:uu(i.serializer,s)}}if(r instanceof Ae){const s=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:uu(i.serializer,s)}}if(r instanceof Dn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xt)return{bytesValue:d0(i.serializer,r._byteString)};if(r instanceof Ze){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:tf(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof mn)return function(a,l){const u=a instanceof mn?a.toArray():a;return{mapValue:{fields:{[Bv]:{stringValue:Uv},[iu]:{arrayValue:{values:u.map(p=>{if(typeof p!="number")throw l.createError("VectorValues must only contain numeric values.");return Xd(l.serializer,p)})}}}}}}(r,i);if(_0(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Hd(r)}`)}(t,e)}function Q0(t,e){const n={};return jv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vi(t,(r,i)=>{const s=G0(i,e.childContextForField(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Y0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof Dn||t instanceof Xt||t instanceof Ze||t instanceof q0||t instanceof mn||_0(t))}function J0(t,e,n){if(!Y0(n)||!Nv(n)){const r=Hd(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Ef(t,e,n){if((e=Zl(e))instanceof H0)return e._internalPath;if(typeof e=="string")return N2(t,e);throw fu("Field path arguments must be of type string or ",t,!1,void 0,n)}const V2=new RegExp("[~\\*/\\[\\]]");function N2(t,e,n){if(e.search(V2)>=0)throw fu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new H0(...e.split("."))._internalPath}catch{throw fu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fu(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new X(z.INVALID_ARGUMENT,l+t+u)}function b2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{convertValue(e,n="none"){switch(Lr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return vi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[iu].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>Me(a.doubleValue));return new mn(n)}convertGeoPoint(e){return new Dn(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Jo(e));default:return null}}convertTimestamp(e){const n=br(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=De.fromString(e);ye(v0(r),9688,{name:e});const i=new Xo(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(n)||Qn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2 extends j2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,n)}}const Xm="@firebase/firestore",Zm="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new O2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Ef("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class O2 extends X0{data(){return super.data()}}function M2(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class po{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class li extends X0{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ef("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=li._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}li._jsonSchemaVersion="firestore/documentSnapshot/1.0",li._jsonSchema={type:$e("string",li._jsonSchemaVersion),bundleSource:$e("string","DocumentSnapshot"),bundleName:$e("string"),bundle:$e("string")};class xl extends li{data(e={}){return super.data(e)}}class Ro{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new po(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xl(this._firestore,this._userDataWriter,r.key,r,new po(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const u=new xl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new po(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new xl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new po(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:F2(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ro._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function F2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ro._jsonSchemaVersion="firestore/querySnapshot/1.0",Ro._jsonSchema={type:$e("string",Ro._jsonSchemaVersion),bundleSource:$e("string","QuerySnapshot"),bundleName:$e("string"),bundle:$e("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t){t=Qo(t,Ze);const e=Qo(t.firestore,vf),n=W0(e);return E2(n,t._key).then(r=>$2(e,t,r))}function B2(t,e,n){t=Qo(t,Ze);const r=Qo(t.firestore,vf),i=M2(t.converter,e),s=P2(r);return U2(r,[D2(s,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,$n.none())])}function U2(t,e){const n=W0(t);return w2(n,e)}function $2(t,e,n){const r=n.docs.get(e._key),i=new L2(t);return new li(t,i,e._key,r,new po(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){gT(nT),tu(new Ko("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new vf(new _T(r.getProvider("auth-internal")),new TT(a,r.getProvider("app-check-internal")),zT(a,i),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),ss(Xm,Zm,e),ss(Xm,Zm,"esm2020")})();const W2={apiKey:"AIzaSyA1TRqHaNsytLwPZWevHgtf0H-MKYmo2VA",authDomain:"life-manager-f5fd8.firebaseapp.com",projectId:"life-manager-f5fd8",storageBucket:"life-manager-f5fd8.firebasestorage.app",messagingSenderId:"93366478624",appId:"1:93366478624:web:acce1cdf19327acc751945"},H2=Tv(W2),Z0=C2(H2),eg=async(t,e)=>{const n=$0(Z0,"users",t.toLowerCase());await B2(n,{...e,lastUpdated:new Date().toISOString()})},tg=async t=>{const e=$0(Z0,"users",t.toLowerCase()),n=await z2(e);return n.exists()?n.data():null},no=()=>Math.random().toString(36).substr(2,9),ro={WORKOUT:{name:"Workout",color:"#ef4444",icon:""},PROFESSIONAL:{name:"Professional",color:"#3b82f6",icon:""},SELF_CARE:{name:"Self-care",color:"#a855f7",icon:""},PRODUCTIVITY:{name:"Productivity",color:"#6b7280",icon:""},SOCIAL:{name:"Social",color:"#f59e0b",icon:""},LEARNING:{name:"Learning",color:"#10b981",icon:""}},q2=[{id:"1",name:"Eat clean",type:"count",target:3,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"},{id:"2",name:"Meditation",type:"binary",target:1,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"},{id:"3",name:"Get out of the house",type:"binary",target:1,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"},{id:"4",name:"Personal care",type:"binary",target:1,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"},{id:"5",name:"Stretching",type:"binary",target:1,category:"WORKOUT",streak:0,createdAt:"2020-01-01"},{id:"6",name:"Job applications",type:"count",target:25,category:"PROFESSIONAL",streak:0,createdAt:"2020-01-01"},{id:"7",name:"Workout",type:"binary",target:1,category:"WORKOUT",streak:0,createdAt:"2020-01-01"},{id:"8",name:"Current events article",type:"binary",target:1,category:"LEARNING",streak:0,createdAt:"2020-01-01",link:"https://www.nytimes.com"},{id:"9",name:"Take vitamins",type:"binary",target:1,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"},{id:"10",name:"Pray",type:"binary",target:1,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"}],K2=[{id:"1",title:"Get job offer",metricType:"milestone",milestones:[{text:"Resume updated",completed:!1},{text:"50 applications",completed:!1},{text:"10 interviews",completed:!1}]},{id:"2",title:"Consistent fitness routine",metricType:"milestone",milestones:[{text:"7 day streak",completed:!1},{text:"14 day streak",completed:!1},{text:"30 day streak",completed:!1}]}],Kt=(t,e)=>{try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}},On=(t,e)=>{try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error("Storage error:",n)}},Gt=(t=new Date)=>{const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`},G2=t=>{const[e,n,r]=t.split("-").map(Number);return new Date(e,n-1,r)},Q2=(t=new Date)=>{const e=new Date(t);return e.setHours(0,0,0,0),e.setDate(e.getDate()-e.getDay()),Gt(e)},Y2=(t=new Date)=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,ll=(t,e=new Date)=>t==="daily"?Gt(e):t==="weekly"?Q2(e):t==="monthly"?Y2(e):null,J2=(t,e,n=null)=>{const r=t||{},i=n?e.filter(l=>!l.createdAt||l.createdAt<=n):e;let s=0,a=i.length;return i.forEach(l=>{const u=r[l.id];l.type==="count"?u!=null&&u.completed||(u==null?void 0:u.value)>=l.target?s+=1:(u==null?void 0:u.value)>0&&(s+=u.value/l.target):u!=null&&u.completed&&(s+=1)}),{total:a>0?Math.round(s/a*100):0,completed:Math.round(s*10)/10,totalHabits:a}},io=t=>!t&&t!==0?"#3f3f46":t>=80?"#10b981":t>=60?"#8b5cf6":t>=40?"#a855f7":t>=20?"#f97316":t>0?"#ef4444":"#3f3f46",ng=t=>t>=80?"#10b981":t>=60?"#8b5cf6":t>=40?"#a855f7":t>=20?"#f97316":t>0?"#ef4444":"#71717a",Sn=({isOpen:t,onClose:e,title:n,children:r,size:i="md"})=>(W.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),t?f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,display:"flex",alignItems:"flex-end",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.7)"},onClick:e,children:f.jsxs("div",{style:{width:"100%",maxWidth:i==="lg"?"32rem":"28rem",maxHeight:"85vh",backgroundColor:"#18181b",borderTopLeftRadius:"1.25rem",borderTopRightRadius:"1.25rem",display:"flex",flexDirection:"column",border:"1px solid #27272a",borderBottom:"none"},onClick:s=>s.stopPropagation(),children:[f.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid #27272a",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#18181b",borderTopLeftRadius:"1.25rem",borderTopRightRadius:"1.25rem"},children:[f.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:600,margin:0,color:"#fafafa"},children:n}),f.jsx("button",{onClick:e,style:{width:"2.75rem",height:"2.75rem",borderRadius:"0.75rem",backgroundColor:"#27272a",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",border:"none",color:"#a1a1aa",cursor:"pointer",flexShrink:0},children:""})]}),f.jsx("div",{style:{overflowY:"scroll",padding:"1rem 1.25rem",paddingBottom:"2rem",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",minHeight:0,flex:"1 1 auto"},onTouchMove:s=>s.stopPropagation(),children:r})]})}):null),so={today:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),f.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),f.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),f.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),f.jsx("circle",{cx:"12",cy:"16",r:"2",fill:"currentColor"})]}),calendar:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),f.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),f.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),goals:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("circle",{cx:"12",cy:"12",r:"6"}),f.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"})]}),ideas:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{d:"M9 18h6"}),f.jsx("path",{d:"M10 22h4"}),f.jsx("path",{d:"M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7z"})]}),backup:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),f.jsx("polyline",{points:"7 10 12 15 17 10"}),f.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})};function X2(){var ir,bi,Te,Yr,sr,or,ka,Fs,Ra,Pa,Da,Va,ar,En,zs,Bs,Us,$s,Ws,Ln;const[t,e]=W.useState("today"),[n,r]=W.useState(()=>Kt("lm_tasks_v11",[])),[i,s]=W.useState(()=>Kt("lm_habits_v11",q2).map(A=>A.name.toLowerCase().includes("current events")&&!A.link?{...A,link:"https://www.nytimes.com"}:A)),[a,l]=W.useState(()=>Kt("lm_goals_v11",K2)),[u,h]=W.useState(()=>Kt("lm_dailyLogs_v11",{})),[p,v]=W.useState(()=>Kt("lm_scores_v11",{})),[_,R]=W.useState(()=>Kt("lm_ideas_v11",[])),[j,L]=W.useState(!1),[$,x]=W.useState(!1),[T,k]=W.useState(!1),[M,H]=W.useState(!1),[K,E]=W.useState(!1),[y,w]=W.useState(!1),[I,C]=W.useState(!1),[P,S]=W.useState(null),[je,_t]=W.useState(""),[$t,Xn]=W.useState(new Date),[B,Z]=W.useState(null),[re,ve]=W.useState("Today"),[Ee,Wt]=W.useState(null),[at,Ht]=W.useState(null),[jt,rn]=W.useState(null),[yn,Rs]=W.useState(null),[Ti,Ur]=W.useState(new Date),[fa,Si]=W.useState(null),[lt,$r]=W.useState(null),[Et,Wr]=W.useState(()=>Kt("lm_syncCode_v11","")),[kt,ze]=W.useState(""),[we,sn]=W.useState(!1),[wt,Le]=W.useState(null),[Ii,on]=W.useState(()=>Kt("lm_lastSynced_v11",null)),Ps=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),pa=/iPhone|iPad|iPod/i.test(navigator.userAgent),Ds=/Android/i.test(navigator.userAgent),ma=window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches,[Uu,ga]=W.useState(()=>Ps&&!ma),[ya,Zn]=W.useState(()=>{const m=Kt("lm_hasSeenWelcome_v11",!1),A=Kt("lm_syncCode_v11","");return Ps&&!ma?!1:!m&&!A}),[qt,Vs]=W.useState({habits:!1,tasks:!1,sleep:!0,fact:!0}),[ut,er]=W.useState({habits:null,sleep:null,fact:null}),[tr,Ci]=W.useState({habits:!1,sleep:!1,fact:!1}),vn=m=>Vs(A=>({...A,[m]:!A[m]})),xi=Gt(),Y=Gt(Ti),Ai=W.useCallback(m=>{const A=u[Y]||{habitLogs:{},sleep:{},screenTime:0,factLearned:""};m==="habits"?(er(V=>({...V,habits:A.habitLogs})),h(V=>({...V,[Y]:{...V[Y],habitLogs:{}}}))):m==="sleep"?(er(V=>({...V,sleep:{sleep:A.sleep,screenTime:A.screenTime}})),h(V=>({...V,[Y]:{...V[Y],sleep:{},screenTime:0}}))):m==="fact"&&(er(V=>({...V,fact:A.factLearned})),h(V=>({...V,[Y]:{...V[Y],factLearned:""}}))),Ci(V=>({...V,[m]:!0})),setTimeout(()=>{Ci(V=>({...V,[m]:!1})),er(V=>({...V,[m]:null}))},5e3)},[Y,u]),bn=W.useCallback(m=>{m==="habits"&&ut.habits?h(A=>({...A,[Y]:{...A[Y],habitLogs:ut.habits}})):m==="sleep"&&ut.sleep?h(A=>({...A,[Y]:{...A[Y],sleep:ut.sleep.sleep,screenTime:ut.sleep.screenTime}})):m==="fact"&&ut.fact!==null&&h(A=>({...A,[Y]:{...A[Y],factLearned:ut.fact}})),Ci(A=>({...A,[m]:!1})),er(A=>({...A,[m]:null}))},[Y,ut]),le=u[Y]||{habitLogs:{},sleep:{},screenTime:0,factLearned:""},ki=()=>{const m=new Date,A=new Date(Ti);m.setHours(0,0,0,0),A.setHours(0,0,0,0);const V=Math.round((A-m)/(1e3*60*60*24));return V===0?"Today":V===-1?"Yesterday":V===1?"Tomorrow":A.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},va=m=>Ur(A=>{const V=new Date(A);return V.setDate(V.getDate()+m),V}),nr=()=>Ur(new Date);W.useEffect(()=>{On("lm_tasks_v11",n)},[n]),W.useEffect(()=>{On("lm_habits_v11",i)},[i]),W.useEffect(()=>{On("lm_goals_v11",a)},[a]),W.useEffect(()=>{On("lm_dailyLogs_v11",u)},[u]),W.useEffect(()=>{On("lm_scores_v11",p)},[p]),W.useEffect(()=>{On("lm_ideas_v11",_)},[_]);const We=W.useMemo(()=>J2(le.habitLogs,i,Y),[le,i,Y]);W.useEffect(()=>{le.habitLogs&&Object.keys(le.habitLogs).length>0&&v(m=>({...m,[Y]:We}))},[le.habitLogs,We,Y]);const _a=W.useCallback(m=>{var A;(A=m.title)!=null&&A.trim()&&(r(V=>[...V,{...m,id:no(),status:"pending",createdAt:new Date().toISOString(),recurring:m.recurring||null,completions:{}}]),L(!1),ve("Today"),Wt(null))},[]),Hr=W.useCallback(m=>{r(A=>A.map(V=>{var b;if(V.id!==m)return V;if(V.recurring){const J=ll(V.recurring),ee=(b=V.completions)==null?void 0:b[J],oe={...V.completions};return ee?delete oe[J]:oe[J]=new Date().toISOString(),{...V,completions:oe}}else return{...V,status:V.status==="done"?"pending":"done",completedAt:V.status==="done"?null:new Date().toISOString()}}))},[]);W.useCallback(m=>{var A;if(m.recurring){const V=ll(m.recurring);return!!((A=m.completions)!=null&&A[V])}return m.status==="done"},[]);const Ns=W.useCallback((m,A)=>{var V;if(m.recurring){const b=ll(m.recurring,G2(A));return!!((V=m.completions)!=null&&V[b])}return m.status==="done"},[]),Ri=W.useCallback((m,A=null)=>{h(V=>{var ct;const b=V[Y]||{habitLogs:{},sleep:{},screenTime:0,factLearned:""},J=i.find(de=>de.id===m);if(!J)return V;const ee=((ct=b.habitLogs)==null?void 0:ct[m])||{completed:!1,value:0};let oe,Se;return J.type==="binary"?(Se=!ee.completed,oe=Se?1:0):(oe=A!==null?A:(ee.value+1)%(J.target+1),Se=oe>=J.target),{...V,[Y]:{...b,habitLogs:{...b.habitLogs,[m]:{completed:Se,value:oe}}}}})},[Y,i]),bs=W.useCallback(m=>{var A;(A=m.name)!=null&&A.trim()&&(s(V=>[...V,{id:no(),name:m.name.trim(),type:m.type||"binary",target:parseInt(m.target)||1,category:m.category||"PRODUCTIVITY",streak:0,createdAt:Gt()}]),x(!1))},[]),qr=W.useCallback((m,A)=>s(V=>V.map(b=>b.id===m?{...b,...A}:b)),[]),$u=W.useCallback(m=>{s(A=>A.filter(V=>V.id!==m)),h(A=>{const V={...A};return Object.keys(V).forEach(b=>{var J,ee;if((ee=(J=V[b])==null?void 0:J.habitLogs)!=null&&ee[m]){const{[m]:oe,...Se}=V[b].habitLogs;V[b]={...V[b],habitLogs:Se}}}),V}),S(null),_t("")},[]),_n=W.useCallback(m=>{h(A=>{const V=A[Y]||{habitLogs:{}},{[m]:b,...J}=V.habitLogs||{};return{...A,[Y]:{...V,habitLogs:J}}}),S(null),_t("")},[Y]),Ea=W.useCallback((m,A)=>{l(V=>V.map(b=>{if(b.id===m){const J=[...b.milestones];return J[A]={...J[A],completed:!J[A].completed},{...b,milestones:J}}return b}))},[]),wa=W.useCallback(m=>{var V;if(!((V=m.title)!=null&&V.trim()))return;const A=(m.milestonesText||"").split(`
`).filter(b=>b.trim()).map(b=>({text:b.trim(),completed:!1}));l(b=>[...b,{id:no(),title:m.title.trim(),metricType:"milestone",milestones:A}]),w(!1)},[]),js=W.useCallback(m=>l(A=>A.filter(V=>V.id!==m)),[]),Ls=W.useCallback((m,A)=>{A!=null&&A.trim()&&l(V=>V.map(b=>b.id===m?{...b,milestones:[...b.milestones,{text:A.trim(),completed:!1}]}:b))},[]),Ta=W.useCallback((m,A)=>{l(V=>V.map(b=>b.id===m?{...b,milestones:b.milestones.filter((J,ee)=>ee!==A)}:b))},[]),Wu=W.useCallback((m,A,V)=>{V!=null&&V.trim()&&l(b=>b.map(J=>{if(J.id===m){const ee=[...J.milestones];return ee[A]={...ee[A],text:V.trim()},{...J,milestones:ee}}return J}))},[]),Sa=W.useCallback((m,A)=>l(V=>V.map(b=>b.id===m?{...b,...A}:b)),[]),Hu=W.useCallback(m=>{var A;(A=m.text)!=null&&A.trim()&&(R(V=>[...V,{id:no(),text:m.text.trim(),category:m.category||"PRODUCTIVITY",createdAt:new Date().toISOString(),status:"idea",notes:"",points:[],nextStep:""}]),E(!1))},[]),rr=W.useCallback((m,A)=>R(V=>V.map(b=>b.id===m?{...b,...A}:b)),[]),Ia=W.useCallback((m,A)=>{A!=null&&A.trim()&&R(V=>V.map(b=>b.id===m?{...b,points:[...b.points||[],{id:no(),text:A.trim(),done:!1}]}:b))},[]),Os=W.useCallback((m,A)=>R(V=>V.map(b=>b.id===m?{...b,points:(b.points||[]).map(J=>J.id===A?{...J,done:!J.done}:J)}:b)),[]),Kr=W.useCallback((m,A)=>R(V=>V.map(b=>b.id===m?{...b,points:(b.points||[]).filter(J=>J.id!==A)}:b)),[]),jn=W.useCallback(m=>{R(A=>A.filter(V=>V.id!==m)),Si(null)},[]);W.useCallback(()=>{const m={version:"v11",exportedAt:new Date().toISOString(),habits:i,tasks:n,goals:a,ideas:_,dailyLogs:u,scores:p},A=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),V=URL.createObjectURL(A),b=document.createElement("a");b.href=V,b.download=`life-manager-backup-${Gt()}.json`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(V)},[i,n,a,_,u,p]),W.useCallback(m=>{const A=new FileReader;A.onload=V=>{try{const b=JSON.parse(V.target.result);if(!b.version||!b.exportedAt){$r({type:"error",message:"Invalid backup file"});return}b.habits&&s(b.habits),b.tasks&&r(b.tasks),b.goals&&l(b.goals),b.ideas&&R(b.ideas),b.dailyLogs&&h(b.dailyLogs),b.scores&&v(b.scores),$r({type:"success",message:`Restored from ${new Date(b.exportedAt).toLocaleDateString()}`}),setTimeout(()=>$r(null),3e3)}catch{$r({type:"error",message:"Failed to parse file"}),setTimeout(()=>$r(null),3e3)}},A.readAsText(m)},[]),W.useEffect(()=>{On("lm_syncCode_v11",Et)},[Et]),W.useEffect(()=>{On("lm_lastSynced_v11",Ii)},[Ii]);const Pi=W.useCallback(()=>{ga(!1);const m=Kt("lm_hasSeenWelcome_v11",!1),A=Kt("lm_syncCode_v11","");!m&&!A&&Zn(!0)},[]),Di=W.useCallback(()=>{Zn(!1),On("lm_hasSeenWelcome_v11",!0)},[]),Ca=W.useCallback(async()=>{if(Et){sn(!0),Le(null);try{await eg(Et,{version:"v11",habits:i,tasks:n,goals:a,ideas:_,dailyLogs:u,scores:p});const A=new Date().toISOString();on(A),Le({type:"success",message:"Data synced to cloud!"}),setTimeout(()=>Le(null),3e3)}catch(m){console.error("Sync error:",m),Le({type:"error",message:"Failed to sync. Check connection."}),setTimeout(()=>Le(null),3e3)}finally{sn(!1)}}},[Et,i,n,a,_,u,p]),xa=W.useCallback(async()=>{if(Et){sn(!0),Le(null);try{const m=await tg(Et);m?(m.habits&&s(m.habits),m.tasks&&r(m.tasks),m.goals&&l(m.goals),m.ideas&&R(m.ideas),m.dailyLogs&&h(m.dailyLogs),m.scores&&v(m.scores),on(m.lastUpdated||new Date().toISOString()),Le({type:"success",message:"Data loaded from cloud!"})):Le({type:"error",message:"No data found for this code."}),setTimeout(()=>Le(null),3e3)}catch(m){console.error("Load error:",m),Le({type:"error",message:"Failed to load. Check connection."}),setTimeout(()=>Le(null),3e3)}finally{sn(!1)}}},[Et]),Gr=W.useCallback(async()=>{if(!kt.trim())return;const m=kt.trim().toLowerCase();sn(!0),Le(null);try{const A=await tg(m);if(A)A.habits&&s(A.habits),A.tasks&&r(A.tasks),A.goals&&l(A.goals),A.ideas&&R(A.ideas),A.dailyLogs&&h(A.dailyLogs),A.scores&&v(A.scores),Wr(m),on(A.lastUpdated||new Date().toISOString()),Le({type:"success",message:"Connected! Data loaded from cloud."});else{await eg(m,{version:"v11",habits:i,tasks:n,goals:a,ideas:_,dailyLogs:u,scores:p}),Wr(m);const b=new Date().toISOString();on(b),Le({type:"success",message:"New sync code created!"})}ze(""),setTimeout(()=>Le(null),3e3)}catch(A){console.error("Connect error:",A),Le({type:"error",message:"Connection failed. Try again."}),setTimeout(()=>Le(null),3e3)}finally{sn(!1)}},[kt,i,n,a,_,u,p]),Ms=W.useCallback(()=>{Wr(""),on(null),Le({type:"success",message:"Disconnected from sync."}),setTimeout(()=>Le(null),3e3)},[]),Qr=n.filter(m=>m.recurring?!0:m.status!=="done"&&(!m.dueDate||m.dueDate<=xi)),Vi=n.filter(m=>{var A;if(m.recurring){const V=ll(m.recurring,Ti);return(A=m.completions)!=null&&A[V]?Gt(new Date(m.completions[V]))===Y:!1}return m.status!=="done"||!m.completedAt?!1:Gt(new Date(m.completedAt))===Y}),Ni=i.filter(m=>!m.createdAt||m.createdAt<=Y),Aa=m=>{const A=m.getFullYear(),V=m.getMonth(),b=new Date(A,V,1),ee=new Date(A,V+1,0).getDate(),oe=b.getDay(),Se=[],de=new Date(A,V,0).getDate();for(let St=oe-1;St>=0;St--){const ge=de-St,Na=new Date(A,V-1,ge);Se.push({date:Na,isCurrentMonth:!1,key:Gt(Na)})}for(let St=1;St<=ee;St++){const ge=new Date(A,V,St);Se.push({date:ge,isCurrentMonth:!0,key:Gt(ge)})}const ht=42-Se.length;for(let St=1;St<=ht;St++){const ge=new Date(A,V+1,St);Se.push({date:ge,isCurrentMonth:!1,key:Gt(ge)})}return Se},qu=W.useMemo(()=>Aa($t),[$t]),an=m=>{Xn(A=>{const V=new Date(A);return V.setMonth(V.getMonth()+m),V}),Z(null)},Tt=W.useMemo(()=>{const m=$t.getFullYear(),A=$t.getMonth(),V=new Date(m,A+1,0).getDate();let b=0,J=0,ee={score:0,date:null},oe=0,Se=0;for(let ct=1;ct<=V;ct++){const de=new Date(m,A,ct),ht=Gt(de);p[ht]&&p[ht].total>0?(b+=p[ht].total,J++,p[ht].total>ee.score&&(ee={score:p[ht].total,date:de}),oe++,oe>Se&&(Se=oe)):oe=0}return{avgScore:J?Math.round(b/J):0,daysTracked:J,bestDay:ee,longestStreak:Se}},[$t,p]),F={page:{minHeight:"100vh",backgroundColor:"#09090b",color:"#fafafa",fontFamily:"'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif",paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"},nav:{position:"fixed",top:"calc(0.5rem + env(safe-area-inset-top))",left:"50%",transform:"translateX(-50%)",zIndex:50,backgroundColor:"rgba(24,24,27,0.95)",backdropFilter:"blur(12px)",border:"1px solid #27272a",borderRadius:"1rem",padding:"0.375rem",maxWidth:"95vw"},navInner:{display:"flex",alignItems:"center",gap:"0.25rem"},navBtn:m=>({display:"flex",flexDirection:"column",alignItems:"center",gap:"0.125rem",padding:"0.5rem 0.75rem",borderRadius:"0.75rem",border:"none",backgroundColor:m?"rgba(139,92,246,0.15)":"transparent",color:m?"#8b5cf6":"#a1a1aa",cursor:"pointer",minHeight:"44px",minWidth:"44px",transition:"all 0.2s"}),navLabel:{fontSize:"0.625rem",fontWeight:500},main:{paddingTop:"calc(5rem + env(safe-area-inset-top))",paddingBottom:"calc(2rem + env(safe-area-inset-bottom))",paddingLeft:"1rem",paddingRight:"1rem",maxWidth:"64rem",marginLeft:"auto",marginRight:"auto"},card:{backgroundColor:"rgba(24,24,27,0.7)",border:"1px solid #27272a",borderRadius:"1rem",marginBottom:"1rem",overflow:"hidden"},cardHeader:{padding:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",cursor:"pointer"},cardContent:{padding:"0 1rem 1rem"},btn:(m="secondary")=>({minHeight:"44px",padding:"0.5rem 1rem",borderRadius:"0.75rem",border:"none",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"all 0.2s",...m==="primary"?{backgroundColor:"#8b5cf6",color:"white"}:m==="danger"?{backgroundColor:"rgba(239,68,68,0.2)",color:"#f87171"}:{backgroundColor:"#27272a",color:"#fafafa"}}),input:{width:"100%",minHeight:"44px",padding:"0.75rem 1rem",backgroundColor:"#27272a",border:"1px solid #3f3f46",borderRadius:"0.75rem",color:"#fafafa",fontSize:"1rem",outline:"none"},tag:(m="#8b5cf6")=>({padding:"0.25rem 0.625rem",borderRadius:"0.375rem",fontSize:"0.6875rem",fontWeight:600,backgroundColor:`${m}20`,color:m}),checkbox:m=>({width:"1.75rem",height:"1.75rem",borderRadius:"0.5rem",border:m?"none":"2px solid #3f3f46",backgroundColor:m?"#10b981":"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0,transition:"all 0.2s"})};return f.jsxs("div",{style:F.page,children:[f.jsx("nav",{style:F.nav,children:f.jsxs("div",{style:F.navInner,children:[[{id:"today",label:"Today",icon:so.today},{id:"calendar",label:"Stats",icon:so.calendar},{id:"goals",label:"Goals",icon:so.goals},{id:"ideas",label:"Ideas",icon:so.ideas}].map(m=>f.jsxs("button",{onClick:()=>e(m.id),style:F.navBtn(t===m.id),children:[m.icon,f.jsx("span",{style:F.navLabel,children:m.label})]},m.id)),f.jsx("div",{style:{width:"1px",height:"2rem",backgroundColor:"#27272a",margin:"0 0.25rem"}}),f.jsx("button",{onClick:()=>C(!0),style:{...F.navBtn(!1),padding:"0.5rem"},children:so.backup})]})}),f.jsxs("main",{style:F.main,children:[t==="today"&&f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",marginBottom:"1.5rem"},children:[f.jsx("button",{onClick:()=>va(-1),style:{...F.btn(),width:"3rem",padding:0},children:""}),f.jsxs("div",{style:{textAlign:"center",flex:1},children:[f.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,margin:0},children:ki()}),f.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a",margin:"0.25rem 0 0"},children:Ti.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),f.jsx("button",{onClick:()=>va(1),style:{...F.btn(),width:"3rem",padding:0},children:""})]}),ki()!=="Today"&&f.jsx("button",{onClick:nr,style:{display:"block",margin:"0 auto 1rem",background:"none",border:"none",color:"#8b5cf6",fontSize:"0.875rem",cursor:"pointer"},children:" Back to Today"}),f.jsx("div",{style:F.card,children:f.jsxs("div",{style:{padding:"1.25rem"},children:[f.jsxs("p",{style:{fontSize:"0.75rem",fontWeight:600,color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"1rem"},children:[ki(),"'s Score"]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[f.jsx("div",{style:{width:"6rem",height:"6rem",borderRadius:"50%",background:`conic-gradient(${io(We.total)} ${We.total}%, #27272a ${We.total}%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 0 30px ${io(We.total)}40`},children:f.jsx("div",{style:{width:"4.5rem",height:"4.5rem",borderRadius:"50%",backgroundColor:"#09090b",display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:800,fontFamily:"JetBrains Mono, monospace",color:ng(We.total)},children:[We.total,"%"]})})}),f.jsxs("div",{style:{flex:1},children:[We.total>=25&&f.jsx("p",{style:{fontSize:"1rem",fontWeight:600,color:ng(We.total),marginBottom:"0.25rem"},children:We.total>=90?" Crushing it!":We.total>=70?" Great progress!":We.total>=50?" Solid day":" Getting started"}),f.jsxs("p",{style:{fontSize:"0.875rem",color:"#71717a"},children:[We.completed," of ",We.totalHabits," habits"]}),f.jsx("div",{style:{height:"0.375rem",borderRadius:"0.1875rem",backgroundColor:"#27272a",marginTop:"0.75rem",overflow:"hidden"},children:f.jsx("div",{style:{height:"100%",width:`${We.total}%`,backgroundColor:io(We.total),borderRadius:"0.1875rem",transition:"width 0.5s"}})})]})]})]})}),f.jsxs("div",{style:F.card,children:[f.jsxs("div",{style:F.cardHeader,onClick:()=>vn("habits"),children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("span",{style:{color:"#71717a",transform:qt.habits?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:""}),f.jsx("span",{style:{fontWeight:600},children:"Daily Habits"}),f.jsxs("span",{style:F.tag("#8b5cf6"),children:[Object.values(le.habitLogs||{}).filter(m=>m.completed).length,"/",Ni.length]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[f.jsx("button",{onClick:m=>{m.stopPropagation(),k(!0)},style:{...F.btn(),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.75rem"},children:"Edit"}),f.jsx("button",{onClick:m=>{m.stopPropagation(),x(!0)},style:{...F.btn("primary"),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.75rem"},children:"+ Add"})]})]}),!qt.habits&&f.jsxs(f.Fragment,{children:[Object.keys(le.habitLogs||{}).length>0&&f.jsx("div",{style:{padding:"0 1rem 0.5rem",display:"flex",justifyContent:"flex-end"},children:tr.habits?f.jsx("button",{onClick:()=>bn("habits"),style:{background:"none",border:"none",color:"#f59e0b",fontSize:"0.6875rem",cursor:"pointer",padding:"0.25rem 0.5rem"},children:" Undo"}):f.jsx("button",{onClick:()=>Ai("habits"),style:{background:"none",border:"none",color:"#71717a",fontSize:"0.6875rem",cursor:"pointer",padding:"0.25rem 0.5rem"},children:"Clear"})}),f.jsx("div",{style:F.cardContent,children:Ni.length===0?f.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem"},children:[f.jsx("p",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),f.jsx("p",{style:{color:"#71717a",marginBottom:"1rem"},children:"No habits yet"}),f.jsx("button",{onClick:()=>x(!0),style:F.btn("primary"),children:"+ Add your first habit"})]}):f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.5rem"},children:Ni.map(m=>{var V;const A=((V=le.habitLogs)==null?void 0:V[m.id])||{completed:!1,value:0};return f.jsxs("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:A.completed?"rgba(16,185,129,0.15)":"rgba(39,39,42,0.5)",border:`1px solid ${A.completed?"rgba(16,185,129,0.3)":"#27272a"}`},children:[f.jsx("div",{style:{marginBottom:"0.5rem"},children:m.link?f.jsxs("a",{href:m.link,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"0.8125rem",fontWeight:500,color:"#60a5fa",textDecoration:"none"},children:[m.name," "]}):f.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:500},children:m.name})}),m.type==="count"?f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("button",{onClick:()=>Ri(m.id,Math.max(0,A.value-1)),style:{width:"2.25rem",height:"2.25rem",borderRadius:"0.5rem",border:"none",backgroundColor:"#27272a",color:"white",fontSize:"1.125rem",cursor:"pointer"},children:""}),f.jsx("button",{onClick:()=>Ri(m.id,A.value+1),style:{width:"2.25rem",height:"2.25rem",borderRadius:"0.5rem",border:"none",backgroundColor:"#27272a",color:"white",fontSize:"1.125rem",cursor:"pointer"},children:"+"}),f.jsxs("span",{style:{fontSize:"0.8125rem",fontWeight:600,fontFamily:"JetBrains Mono, monospace",color:A.completed?"#10b981":"#a1a1aa"},children:[A.value,"/",m.target]}),A.completed&&f.jsx("span",{style:{marginLeft:"auto",color:"#10b981"},children:""})]}):f.jsx("button",{onClick:()=>Ri(m.id),style:{width:"100%",padding:"0.5rem",borderRadius:"0.5rem",border:"none",backgroundColor:A.completed?"#10b981":"#27272a",color:A.completed?"white":"#a1a1aa",fontSize:"0.75rem",fontWeight:500,cursor:"pointer"},children:A.completed?" Done":"Mark Done"})]},m.id)})})})]})]}),f.jsxs("div",{style:F.card,children:[f.jsxs("div",{style:F.cardHeader,onClick:()=>vn("tasks"),children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("span",{style:{color:"#71717a",transform:qt.tasks?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:""}),f.jsx("span",{style:{fontWeight:600},children:"Tasks"}),f.jsxs("span",{style:F.tag("#71717a"),children:[Qr.filter(m=>!Ns(m,Y)).length," pending"]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[f.jsx("button",{onClick:m=>{m.stopPropagation(),H(!0)},style:{...F.btn(),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.75rem"},children:"Edit"}),f.jsx("button",{onClick:m=>{m.stopPropagation(),L(!0)},style:{...F.btn("primary"),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.75rem"},children:"+ Add"})]})]}),!qt.tasks&&f.jsxs("div",{style:F.cardContent,children:[Qr.length===0?f.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem"},children:[f.jsx("p",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),f.jsx("p",{style:{color:"#71717a",marginBottom:"1rem"},children:"No tasks yet"}),f.jsx("button",{onClick:()=>L(!0),style:F.btn("primary"),children:"+ Add a task"})]}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Qr.map(m=>{const A=Ns(m,Y);return f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:"rgba(39,39,42,0.3)"},children:[f.jsx("div",{onClick:()=>Hr(m.id),style:F.checkbox(A),children:A&&f.jsx("span",{style:{color:"white",fontSize:"0.875rem"},children:""})}),f.jsx("span",{style:{flex:1,fontSize:"0.875rem",textDecoration:A?"line-through":"none",color:A?"#71717a":"#fafafa"},children:m.title}),m.recurring&&f.jsxs("span",{style:F.tag(m.recurring==="daily"?"#06b6d4":m.recurring==="weekly"?"#3b82f6":"#a855f7"),children:[" ",m.recurring]})]},m.id)})}),Vi.length>0&&f.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #27272a"},children:[f.jsxs("p",{style:{fontSize:"0.6875rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:[" Completed (",Vi.length,")"]}),Vi.map(m=>f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0",color:"#71717a",fontSize:"0.875rem"},children:[f.jsx("span",{onClick:()=>Hr(m.id),style:{cursor:"pointer",color:"#10b981"},children:""}),f.jsx("span",{style:{textDecoration:"line-through",flex:1},children:m.title})]},m.id))]})]})]}),f.jsxs("div",{style:F.card,children:[f.jsx("div",{style:F.cardHeader,onClick:()=>vn("sleep"),children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("span",{style:{color:"#71717a",transform:qt.sleep?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:""}),f.jsx("span",{style:{fontWeight:600},children:" Sleep &  Screen"}),((ir=le.sleep)==null?void 0:ir.hoursSlept)&&f.jsxs("span",{style:F.tag(le.sleep.hoursSlept>=7?"#10b981":le.sleep.hoursSlept>=5?"#f59e0b":"#ef4444"),children:[le.sleep.hoursSlept," hrs"]})]})}),!qt.sleep&&f.jsxs(f.Fragment,{children:[(((bi=le.sleep)==null?void 0:bi.bedTime)||((Te=le.sleep)==null?void 0:Te.wakeTime)||le.screenTime>0)&&f.jsx("div",{style:{padding:"0 1rem 0.5rem",display:"flex",justifyContent:"flex-end"},children:tr.sleep?f.jsx("button",{onClick:()=>bn("sleep"),style:{background:"none",border:"none",color:"#f59e0b",fontSize:"0.6875rem",cursor:"pointer",padding:"0.25rem 0.5rem"},children:" Undo"}):f.jsx("button",{onClick:()=>Ai("sleep"),style:{background:"none",border:"none",color:"#71717a",fontSize:"0.6875rem",cursor:"pointer",padding:"0.25rem 0.5rem"},children:"Clear"})}),f.jsx("div",{style:F.cardContent,children:f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"1rem"},children:[f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Bedtime"}),f.jsx("input",{type:"time",value:((Yr=le.sleep)==null?void 0:Yr.bedTime)||"",onChange:m=>{var J;const A=m.target.value,V=(J=le.sleep)==null?void 0:J.wakeTime;let b=null;if(A&&V){const ee=new Date(`2000-01-01T${A}`);let oe=new Date(`2000-01-01T${V}`);oe<ee&&oe.setDate(oe.getDate()+1),b=Math.round((oe-ee)/36e3)/100}h(ee=>{var oe,Se;return{...ee,[Y]:{...ee[Y],habitLogs:((oe=ee[Y])==null?void 0:oe.habitLogs)||{},sleep:{...(Se=ee[Y])==null?void 0:Se.sleep,bedTime:A,hoursSlept:b}}}})},style:{...F.input,fontFamily:"JetBrains Mono, monospace",fontSize:"0.875rem"}})]}),f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Wake time"}),f.jsx("input",{type:"time",value:((sr=le.sleep)==null?void 0:sr.wakeTime)||"",onChange:m=>{var J;const A=m.target.value,V=(J=le.sleep)==null?void 0:J.bedTime;let b=null;if(V&&A){const ee=new Date(`2000-01-01T${V}`);let oe=new Date(`2000-01-01T${A}`);oe<ee&&oe.setDate(oe.getDate()+1),b=Math.round((oe-ee)/36e3)/100}h(ee=>{var oe,Se;return{...ee,[Y]:{...ee[Y],habitLogs:((oe=ee[Y])==null?void 0:oe.habitLogs)||{},sleep:{...(Se=ee[Y])==null?void 0:Se.sleep,wakeTime:A,hoursSlept:b}}}})},style:{...F.input,fontFamily:"JetBrains Mono, monospace",fontSize:"0.875rem"}})]}),f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Hours slept"}),f.jsx("div",{style:{...F.input,backgroundColor:((or=le.sleep)==null?void 0:or.hoursSlept)>=7?"rgba(16,185,129,0.2)":((ka=le.sleep)==null?void 0:ka.hoursSlept)>=5?"rgba(245,158,11,0.2)":(Fs=le.sleep)!=null&&Fs.hoursSlept?"rgba(239,68,68,0.2)":"#27272a",textAlign:"center",fontWeight:600,fontFamily:"JetBrains Mono, monospace",color:((Ra=le.sleep)==null?void 0:Ra.hoursSlept)>=7?"#10b981":((Pa=le.sleep)==null?void 0:Pa.hoursSlept)>=5?"#f59e0b":(Da=le.sleep)!=null&&Da.hoursSlept?"#ef4444":"#71717a"},children:(Va=le.sleep)!=null&&Va.hoursSlept?`${le.sleep.hoursSlept} hrs`:""})]}),f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Screen time (hrs)"}),f.jsx("input",{type:"number",step:"0.5",min:"0",max:"24",value:le.screenTime||"",onChange:m=>h(A=>{var V;return{...A,[Y]:{...A[Y],habitLogs:((V=A[Y])==null?void 0:V.habitLogs)||{},screenTime:parseFloat(m.target.value)||0}}}),placeholder:"0",style:{...F.input,fontFamily:"JetBrains Mono, monospace",fontSize:"0.875rem"}})]})]})})]})]}),f.jsxs("div",{style:F.card,children:[f.jsx("div",{style:F.cardHeader,onClick:()=>vn("fact"),children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("span",{style:{color:"#71717a",transform:qt.fact?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:""}),f.jsx("span",{style:{fontWeight:600},children:" Fact I Learned"}),le.factLearned&&f.jsx("span",{style:F.tag("#10b981"),children:" Recorded"})]})}),!qt.fact&&f.jsxs(f.Fragment,{children:[le.factLearned&&f.jsx("div",{style:{padding:"0 1rem 0.5rem",display:"flex",justifyContent:"flex-end"},children:tr.fact?f.jsx("button",{onClick:()=>bn("fact"),style:{background:"none",border:"none",color:"#f59e0b",fontSize:"0.6875rem",cursor:"pointer",padding:"0.25rem 0.5rem"},children:" Undo"}):f.jsx("button",{onClick:()=>Ai("fact"),style:{background:"none",border:"none",color:"#71717a",fontSize:"0.6875rem",cursor:"pointer",padding:"0.25rem 0.5rem"},children:"Clear"})}),f.jsx("div",{style:F.cardContent,children:f.jsx("textarea",{value:le.factLearned||"",onChange:m=>h(A=>{var V;return{...A,[Y]:{...A[Y],habitLogs:((V=A[Y])==null?void 0:V.habitLogs)||{},factLearned:m.target.value}}}),placeholder:"What's something interesting you learned today?",style:{...F.input,minHeight:"5rem",resize:"none",fontSize:"0.875rem"}})})]})]})]}),t==="calendar"&&f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.25rem"},children:[f.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,margin:0},children:"Score Calendar"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("button",{onClick:()=>an(-1),style:{...F.btn(),width:"2.75rem",padding:0},children:""}),f.jsx("span",{style:{flex:1,textAlign:"center",fontWeight:600},children:$t.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),f.jsx("button",{onClick:()=>an(1),style:{...F.btn(),width:"2.75rem",padding:0},children:""}),f.jsx("button",{onClick:()=>{Xn(new Date),Z(null)},style:{...F.btn(),fontSize:"0.8125rem"},children:"Today"})]})]}),f.jsx("div",{style:F.card,children:f.jsxs("div",{style:{padding:"1rem"},children:[f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem",marginBottom:"0.5rem"},children:["S","M","T","W","T","F","S"].map((m,A)=>f.jsx("div",{style:{textAlign:"center",fontSize:"0.6875rem",fontWeight:500,color:"#71717a",padding:"0.375rem"},children:m},A))}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem"},children:qu.map((m,A)=>{var ee;const V=(ee=p[m.key])==null?void 0:ee.total,b=(B==null?void 0:B.key)===m.key,J=m.key===xi;return f.jsxs("button",{onClick:()=>Z(m),onDoubleClick:()=>{Ur(m.date),e("today")},style:{aspectRatio:"1",borderRadius:"0.5rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:J?"2px solid #3b82f6":b?"2px solid #8b5cf6":"none",backgroundColor:io(V),color:V>0?"white":"#71717a",opacity:m.isCurrentMonth?1:.3,cursor:"pointer",fontSize:"0.75rem",fontWeight:500},children:[f.jsx("span",{children:m.date.getDate()}),V>0&&f.jsx("span",{style:{fontSize:"0.625rem",fontFamily:"JetBrains Mono, monospace"},children:V})]},A)})})]})}),f.jsx("div",{style:F.card,children:f.jsxs("div",{style:{padding:"1rem"},children:[f.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"#a1a1aa",marginBottom:"1rem"},children:"Month Summary"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[f.jsxs("div",{children:[f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Average"}),f.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:"#8b5cf6"},children:[Tt.avgScore,"%"]})]}),f.jsxs("div",{children:[f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Days Tracked"}),f.jsx("p",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace"},children:Tt.daysTracked})]}),f.jsxs("div",{children:[f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Best Day"}),f.jsx("p",{style:{fontSize:"1.25rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:"#10b981"},children:Tt.bestDay.score||""})]}),f.jsxs("div",{children:[f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Best Streak"}),f.jsxs("p",{style:{fontSize:"1.25rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:"#f59e0b"},children:[Tt.longestStreak||""," days"]})]})]})]})}),B&&f.jsx("div",{style:F.card,children:f.jsxs("div",{style:{padding:"1rem"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[f.jsx("h3",{style:{fontWeight:600,margin:0},children:B.date.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),f.jsx("button",{onClick:()=>Z(null),style:{background:"none",border:"none",color:"#71717a",fontSize:"1.25rem",cursor:"pointer"},children:""})]}),p[B.key]?f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem"},children:f.jsx("div",{style:{width:"5rem",height:"5rem",borderRadius:"0.75rem",backgroundColor:io(p[B.key].total),display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:"white"},children:[p[B.key].total,"%"]})})}),f.jsxs("p",{style:{textAlign:"center",color:"#71717a",fontSize:"0.875rem",marginBottom:"1rem"},children:[p[B.key].completed,"/",p[B.key].totalHabits," habits completed"]}),(((En=(ar=u[B.key])==null?void 0:ar.sleep)==null?void 0:En.hoursSlept)||((zs=u[B.key])==null?void 0:zs.screenTime)||((Bs=u[B.key])==null?void 0:Bs.factLearned))&&f.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",borderRadius:"0.5rem",backgroundColor:"rgba(39,39,42,0.5)"},children:[f.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem"},children:[(($s=(Us=u[B.key])==null?void 0:Us.sleep)==null?void 0:$s.hoursSlept)&&f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[f.jsx("span",{style:{fontSize:"0.875rem"},children:""}),f.jsxs("span",{style:{fontSize:"0.8125rem",color:u[B.key].sleep.hoursSlept>=7?"#10b981":u[B.key].sleep.hoursSlept>=5?"#f59e0b":"#ef4444",fontWeight:500},children:[u[B.key].sleep.hoursSlept," hrs"]})]}),((Ws=u[B.key])==null?void 0:Ws.screenTime)>0&&f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[f.jsx("span",{style:{fontSize:"0.875rem"},children:""}),f.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa",fontWeight:500},children:[u[B.key].screenTime," hrs"]})]})]}),((Ln=u[B.key])==null?void 0:Ln.factLearned)&&f.jsx("div",{style:{marginTop:"0.625rem",paddingTop:"0.625rem",borderTop:"1px solid #3f3f46"},children:f.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.375rem"},children:[f.jsx("span",{style:{fontSize:"0.875rem",flexShrink:0},children:""}),f.jsx("span",{style:{fontSize:"0.75rem",color:"#a1a1aa",lineHeight:"1.5",wordBreak:"break-word",overflowWrap:"break-word"},children:u[B.key].factLearned.length>100?u[B.key].factLearned.substring(0,100)+"...":u[B.key].factLearned})]})})]}),f.jsx("button",{onClick:()=>{Ur(B.date),e("today"),Z(null)},style:{...F.btn("primary"),width:"100%"},children:"View Day "})]}):f.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[f.jsx("p",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),f.jsx("p",{style:{color:"#71717a",marginBottom:"1rem"},children:"No data recorded"}),f.jsx("button",{onClick:()=>{Ur(B.date),e("today"),Z(null)},style:F.btn("primary"),children:B.key===xi?"Start tracking":"Add data"})]})]})})]}),t==="goals"&&f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem",gap:"1rem",flexWrap:"wrap"},children:[f.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,margin:0},children:"Goals"}),f.jsx("button",{onClick:()=>w(!0),style:F.btn("primary"),children:"+ New Goal"})]}),a.length===0?f.jsxs("div",{style:{...F.card,padding:"3rem 1.5rem",textAlign:"center"},children:[f.jsx("p",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:""}),f.jsx("p",{style:{color:"#71717a",marginBottom:"1.5rem"},children:"No goals yet. Set your first goal!"}),f.jsx("button",{onClick:()=>w(!0),style:F.btn("primary"),children:"+ Create Goal"})]}):a.map(m=>{const A=m.milestones.filter(b=>b.completed).length,V=m.milestones.length>0?Math.round(A/m.milestones.length*100):0;return f.jsx("div",{style:F.card,children:f.jsxs("div",{style:{padding:"1.25rem"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",gap:"1rem"},children:[f.jsxs("div",{style:{flex:1,minWidth:0},children:[jt===m.id?f.jsx("input",{defaultValue:m.title,autoFocus:!0,style:{...F.input,fontSize:"1.125rem",fontWeight:600},onBlur:b=>{b.target.value.trim()&&Sa(m.id,{title:b.target.value.trim()}),rn(null)},onKeyDown:b=>{b.key==="Enter"&&b.target.blur()}}):f.jsx("h3",{onClick:()=>rn(m.id),style:{fontSize:"1.125rem",fontWeight:600,margin:0,cursor:"pointer"},children:m.title}),f.jsxs("p",{style:{fontSize:"0.8125rem",color:"#71717a",margin:"0.25rem 0 0"},children:[A,"/",m.milestones.length," milestones"]})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:V===100?"#10b981":"#8b5cf6"},children:[V,"%"]}),f.jsx("button",{onClick:()=>js(m.id),style:{background:"none",border:"none",color:"#71717a",cursor:"pointer",fontSize:"1.25rem"},children:""})]})]}),f.jsx("div",{style:{height:"0.5rem",borderRadius:"0.25rem",backgroundColor:"#27272a",marginBottom:"1rem",overflow:"hidden"},children:f.jsx("div",{style:{height:"100%",width:`${V}%`,backgroundColor:V===100?"#10b981":"#8b5cf6",borderRadius:"0.25rem",transition:"width 0.5s"}})}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[m.milestones.map((b,J)=>f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:b.completed?"rgba(16,185,129,0.1)":"rgba(39,39,42,0.5)",border:`1px solid ${b.completed?"rgba(16,185,129,0.3)":"#27272a"}`},children:[f.jsx("div",{onClick:()=>Ea(m.id,J),style:F.checkbox(b.completed),children:b.completed&&f.jsx("span",{style:{color:"white",fontSize:"0.75rem"},children:""})}),(yn==null?void 0:yn.goalId)===m.id&&(yn==null?void 0:yn.index)===J?f.jsx("input",{defaultValue:b.text,autoFocus:!0,style:{...F.input,flex:1,minHeight:"36px",padding:"0.5rem"},onBlur:ee=>{ee.target.value.trim()&&Wu(m.id,J,ee.target.value.trim()),Rs(null)},onKeyDown:ee=>{ee.key==="Enter"&&ee.target.blur()}}):f.jsx("span",{onClick:()=>Rs({goalId:m.id,index:J}),style:{flex:1,fontSize:"0.875rem",textDecoration:b.completed?"line-through":"none",color:b.completed?"#71717a":"#fafafa",cursor:"pointer"},children:b.text}),f.jsx("button",{onClick:()=>Ta(m.id,J),style:{background:"none",border:"none",color:"#71717a",cursor:"pointer",opacity:.5},children:""})]},J)),f.jsx("form",{onSubmit:b=>{b.preventDefault();const J=b.target.elements[`milestone-${m.id}`];J.value.trim()&&(Ls(m.id,J.value.trim()),J.value="")},children:f.jsx("input",{name:`milestone-${m.id}`,type:"text",placeholder:"+ Add milestone...",style:{...F.input,fontSize:"0.875rem"}})})]})]})},m.id)})]}),t==="ideas"&&f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.25rem"},children:[f.jsxs("div",{children:[f.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,margin:0},children:"Ideas"}),f.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a",margin:"0.25rem 0 0"},children:"Capture and develop your ideas"})]}),f.jsx("button",{onClick:()=>E(!0),style:{...F.btn("primary"),width:"100%"},children:"+ New Idea"})]}),_.length===0?f.jsxs("div",{style:{...F.card,padding:"3rem 1.5rem",textAlign:"center"},children:[f.jsx("p",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:""}),f.jsx("p",{style:{color:"#71717a",marginBottom:"1.5rem"},children:"No ideas yet. Capture your first one!"}),f.jsx("button",{onClick:()=>E(!0),style:F.btn("primary"),children:"+ Add Idea"})]}):_.map(m=>{var oe,Se,ct;const A=fa===m.id,V=m.status||"idea",b={idea:{icon:"",color:"#71717a"},exploring:{icon:"",color:"#3b82f6"},planning:{icon:"",color:"#a855f7"},active:{icon:"",color:"#10b981"},done:{icon:"",color:"#10b981"}}[V],J=(m.points||[]).filter(de=>de.done).length,ee=(m.points||[]).length;return f.jsxs("div",{style:F.card,children:[f.jsx("div",{onClick:()=>Si(A?null:m.id),style:{padding:"1rem",cursor:"pointer"},children:f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"0.75rem"},children:[f.jsxs("div",{style:{flex:1,minWidth:0},children:[f.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,margin:0,marginBottom:"0.5rem"},children:m.text}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[f.jsxs("span",{style:F.tag(b.color),children:[b.icon," ",V]}),f.jsxs("span",{style:F.tag(((oe=ro[m.category])==null?void 0:oe.color)||"#71717a"),children:[(Se=ro[m.category])==null?void 0:Se.icon," ",((ct=ro[m.category])==null?void 0:ct.name)||"General"]}),ee>0&&f.jsxs("span",{style:{fontSize:"0.6875rem",color:"#71717a"},children:[J,"/",ee," points"]})]})]}),f.jsx("span",{style:{color:"#71717a",transform:A?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""})]})}),A&&f.jsxs("div",{style:{padding:"0 1rem 1rem",borderTop:"1px solid #27272a"},children:[f.jsxs("div",{style:{paddingTop:"1rem"},children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"0.5rem"},children:"Status"}),f.jsx("div",{style:{display:"flex",gap:"0.375rem",flexWrap:"wrap"},children:["idea","exploring","planning","active","done"].map(de=>{const ht={idea:"",exploring:"",planning:"",active:"",done:""}[de];return f.jsxs("button",{onClick:()=>rr(m.id,{status:de}),style:{...F.btn(V===de?"primary":"secondary"),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.625rem"},children:[ht," ",de]},de)})})]}),f.jsxs("div",{style:{marginTop:"1rem"},children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"0.5rem"},children:"Notes"}),f.jsx("textarea",{value:m.notes||"",onChange:de=>rr(m.id,{notes:de.target.value}),placeholder:"Add notes...",style:{...F.input,minHeight:"4rem",resize:"none",fontSize:"0.875rem"}})]}),f.jsxs("div",{style:{marginTop:"1rem"},children:[f.jsxs("label",{style:{fontSize:"0.6875rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"0.5rem"},children:["Brainstorm Points (",J,"/",ee,")"]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.375rem"},children:[(m.points||[]).map(de=>f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",borderRadius:"0.5rem",backgroundColor:"rgba(39,39,42,0.3)"},children:[f.jsx("div",{onClick:()=>Os(m.id,de.id),style:{...F.checkbox(de.done),width:"1.5rem",height:"1.5rem"},children:de.done&&f.jsx("span",{style:{color:"white",fontSize:"0.625rem"},children:""})}),f.jsx("span",{style:{flex:1,fontSize:"0.8125rem",textDecoration:de.done?"line-through":"none",color:de.done?"#71717a":"#fafafa"},children:de.text}),f.jsx("button",{onClick:()=>Kr(m.id,de.id),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"0.875rem",opacity:.7},children:""})]},de.id)),f.jsxs("form",{onSubmit:de=>{de.preventDefault();const ht=de.target.elements.point;ht.value.trim()&&(Ia(m.id,ht.value.trim()),ht.value="")},style:{display:"flex",gap:"0.5rem"},children:[f.jsx("input",{name:"point",type:"text",placeholder:"+ Add point...",style:{...F.input,flex:1,fontSize:"0.8125rem"}}),f.jsx("button",{type:"submit",style:{...F.btn(),fontSize:"0.75rem"},children:"Add"})]})]})]}),f.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #27272a",display:"flex",justifyContent:"space-between"},children:[f.jsx("button",{onClick:()=>{_a({title:m.text,term:"This Week"}),rr(m.id,{status:"active"})},style:{background:"none",border:"none",color:"#8b5cf6",cursor:"pointer",fontSize:"0.8125rem"},children:" Make Task"}),f.jsx("button",{onClick:()=>jn(m.id),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"0.8125rem"},children:" Delete"})]})]})]},m.id)})]})]}),f.jsx(Sn,{isOpen:j,onClose:()=>{L(!1),ve("Today"),Wt(null)},title:"New Task",children:f.jsxs("form",{onSubmit:m=>{m.preventDefault(),_a({title:m.target.title.value,term:Ee?"Today":re,recurring:Ee})},children:[f.jsx("input",{name:"title",type:"text",placeholder:"What needs to be done?",style:{...F.input,marginBottom:"1rem"},autoFocus:!0,required:!0}),f.jsx("label",{style:{fontSize:"0.75rem",color:"#71717a",display:"block",marginBottom:"0.5rem"},children:"Repeat"}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginBottom:"1rem"},children:[{v:null,l:"Once",i:"1"},{v:"daily",l:"Daily",i:""},{v:"weekly",l:"Weekly",i:""},{v:"monthly",l:"Monthly",i:""}].map(m=>f.jsxs("button",{type:"button",onClick:()=>Wt(m.v),style:{padding:"0.75rem 0.5rem",borderRadius:"0.75rem",border:Ee===m.v?"2px solid #10b981":"2px solid #27272a",backgroundColor:Ee===m.v?"rgba(16,185,129,0.15)":"#27272a",color:Ee===m.v?"#10b981":"#fafafa",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem"},children:[f.jsx("span",{style:{fontSize:"1.25rem"},children:m.i}),f.jsx("span",{style:{fontSize:"0.6875rem",fontWeight:500},children:m.l})]},m.l))}),!Ee&&f.jsxs(f.Fragment,{children:[f.jsx("label",{style:{fontSize:"0.75rem",color:"#71717a",display:"block",marginBottom:"0.5rem"},children:"When"}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.5rem",marginBottom:"1rem"},children:[{v:"Today",c:"#8b5cf6"},{v:"This Week",c:"#3b82f6"},{v:"This Month",c:"#a855f7"},{v:"Long Term",c:"#71717a"}].map(m=>f.jsx("button",{type:"button",onClick:()=>ve(m.v),style:{padding:"0.75rem",borderRadius:"0.75rem",border:re===m.v?`2px solid ${m.c}`:"2px solid #27272a",backgroundColor:re===m.v?`${m.c}20`:"#27272a",color:re===m.v?m.c:"#fafafa",cursor:"pointer",fontSize:"0.8125rem",fontWeight:500},children:m.v},m.v))})]}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem"},children:[f.jsx("button",{type:"button",onClick:()=>{L(!1),ve("Today"),Wt(null)},style:{...F.btn(),flex:1},children:"Cancel"}),f.jsx("button",{type:"submit",style:{...F.btn("primary"),flex:1},children:"Add Task"})]})]})}),f.jsx(Sn,{isOpen:$,onClose:()=>x(!1),title:"New Habit",children:f.jsxs("form",{onSubmit:m=>{m.preventDefault();const A=m.target;bs({name:A.name.value,type:A.type.value,target:A.target.value,category:A.category.value})},children:[f.jsx("input",{name:"name",type:"text",placeholder:"Habit name",style:{...F.input,marginBottom:"0.75rem"},autoFocus:!0,required:!0}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[f.jsxs("select",{name:"type",style:F.input,children:[f.jsx("option",{value:"binary",children:"Yes/No"}),f.jsx("option",{value:"count",children:"Count"})]}),f.jsx("input",{name:"target",type:"number",placeholder:"Target (1)",defaultValue:1,style:F.input})]}),f.jsx("select",{name:"category",style:{...F.input,marginBottom:"1.5rem"},children:Object.entries(ro).map(([m,A])=>f.jsxs("option",{value:m,children:[A.icon," ",A.name]},m))}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[f.jsx("button",{type:"button",onClick:()=>x(!1),style:{...F.btn(),flex:1},children:"Cancel"}),f.jsx("button",{type:"submit",style:{...F.btn("primary"),flex:1},children:"Add Habit"})]})]})}),f.jsxs(Sn,{isOpen:T,onClose:()=>{k(!1),Ht(null)},title:"Edit Habits",size:"lg",children:[f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:i.length===0?f.jsx("p",{style:{textAlign:"center",color:"#71717a",padding:"2rem"},children:"No habits yet"}):i.map(m=>f.jsx("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:"#27272a"},children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("div",{style:{flex:1,minWidth:0},children:at===m.id?f.jsx("input",{defaultValue:m.name,autoFocus:!0,style:{...F.input,minHeight:"36px",padding:"0.5rem",fontSize:"0.875rem"},onBlur:A=>{A.target.value.trim()&&qr(m.id,{name:A.target.value.trim()}),Ht(null)},onKeyDown:A=>{A.key==="Enter"&&A.target.blur()}}):f.jsxs("div",{children:[f.jsx("span",{style:{fontWeight:500,fontSize:"0.875rem"},children:m.name}),f.jsxs("span",{style:{fontSize:"0.75rem",color:"#71717a",marginLeft:"0.5rem"},children:["(",m.type==="count"?`${m.target}/day`:"daily",")"]})]})}),f.jsx("button",{onClick:()=>Ht(at===m.id?null:m.id),style:{...F.btn(),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.625rem"},children:at===m.id?"Done":"Edit"}),f.jsx("button",{onClick:()=>{k(!1),S(m)},style:{...F.btn("danger"),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.625rem"},children:"Delete"})]})},m.id))}),f.jsx("button",{onClick:()=>{k(!1),Ht(null)},style:{...F.btn(),width:"100%",marginTop:"1rem"},children:"Done"})]}),f.jsxs(Sn,{isOpen:M,onClose:()=>H(!1),title:"Edit Tasks",size:"lg",children:[f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:n.length===0?f.jsx("p",{style:{textAlign:"center",color:"#71717a",padding:"2rem"},children:"No tasks yet"}):n.map(m=>f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:"#27272a",opacity:m.status==="done"?.6:1},children:[f.jsx("span",{style:{flex:1,fontSize:"0.875rem",textDecoration:m.status==="done"?"line-through":"none"},children:m.title}),m.recurring&&f.jsx("span",{style:F.tag("#06b6d4"),children:m.recurring}),f.jsx("button",{onClick:()=>r(A=>A.filter(V=>V.id!==m.id)),style:{...F.btn("danger"),fontSize:"0.75rem",minHeight:"32px",padding:"0.25rem 0.5rem"},children:""})]},m.id))}),f.jsx("button",{onClick:()=>H(!1),style:{...F.btn(),width:"100%",marginTop:"1rem"},children:"Done"})]}),f.jsx(Sn,{isOpen:K,onClose:()=>E(!1),title:" New Idea",children:f.jsxs("form",{onSubmit:m=>{m.preventDefault(),Hu({text:m.target.text.value,category:m.target.category.value})},children:[f.jsx("input",{name:"text",type:"text",placeholder:"What's your idea?",style:{...F.input,marginBottom:"0.75rem",fontSize:"1rem"},autoFocus:!0,required:!0}),f.jsx("select",{name:"category",style:{...F.input,marginBottom:"1.5rem"},children:Object.entries(ro).map(([m,A])=>f.jsxs("option",{value:m,children:[A.icon," ",A.name]},m))}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[f.jsx("button",{type:"button",onClick:()=>E(!1),style:{...F.btn(),flex:1},children:"Cancel"}),f.jsx("button",{type:"submit",style:{...F.btn("primary"),flex:1},children:"Capture"})]})]})}),f.jsx(Sn,{isOpen:y,onClose:()=>w(!1),title:"New Goal",children:f.jsxs("form",{onSubmit:m=>{m.preventDefault(),wa({title:m.target.title.value,milestonesText:m.target.milestones.value})},children:[f.jsx("input",{name:"title",type:"text",placeholder:"Goal title",style:{...F.input,marginBottom:"0.75rem"},autoFocus:!0,required:!0}),f.jsx("label",{style:{fontSize:"0.75rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Milestones (one per line)"}),f.jsx("textarea",{name:"milestones",placeholder:`First milestone
Second milestone
Third milestone`,style:{...F.input,minHeight:"6rem",resize:"none",marginBottom:"1.5rem"}}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[f.jsx("button",{type:"button",onClick:()=>w(!1),style:{...F.btn(),flex:1},children:"Cancel"}),f.jsx("button",{type:"submit",style:{...F.btn("primary"),flex:1},children:"Create Goal"})]})]})}),f.jsxs(Sn,{isOpen:I,onClose:()=>C(!1),title:" Backup & Sync",children:[(lt||wt)&&f.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:((lt==null?void 0:lt.type)||(wt==null?void 0:wt.type))==="success"?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)",color:((lt==null?void 0:lt.type)||(wt==null?void 0:wt.type))==="success"?"#10b981":"#ef4444",fontSize:"0.875rem"},children:[((lt==null?void 0:lt.type)||(wt==null?void 0:wt.type))==="success"?"":""," ",(lt==null?void 0:lt.message)||(wt==null?void 0:wt.message)]}),f.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",backgroundColor:"#27272a",marginBottom:"0.75rem",border:Et?"1px solid rgba(16,185,129,0.3)":"1px solid transparent"},children:[f.jsx("h3",{style:{fontWeight:600,marginBottom:"0.75rem",fontSize:"0.9375rem"},children:" Cloud Sync"}),Et?f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",borderRadius:"0.5rem",backgroundColor:"#3f3f46",textAlign:"center"},children:[f.jsx("p",{style:{fontSize:"0.75rem",color:"#a1a1aa",marginBottom:"0.25rem"},children:"Your sync code"}),f.jsx("p",{style:{fontFamily:"JetBrains Mono, monospace",fontSize:"1.25rem",fontWeight:700,color:"#fafafa",letterSpacing:"0.05em"},children:Et.toUpperCase()}),f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a",marginTop:"0.375rem"},children:"Codes are not case-sensitive"})]}),f.jsx("div",{style:{marginBottom:"1rem",padding:"0.625rem",borderRadius:"0.5rem",backgroundColor:"rgba(59,130,246,0.1)",border:"1px solid rgba(59,130,246,0.2)"},children:f.jsx("p",{style:{fontSize:"0.75rem",color:"#60a5fa",margin:0},children:" Save this code somewhere safe  you'll need it to sync on other devices"})}),Ii&&f.jsxs("p",{style:{fontSize:"0.75rem",color:"#71717a",marginBottom:"0.75rem"},children:["Last synced: ",new Date(Ii).toLocaleString()]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[f.jsx("button",{onClick:Ca,disabled:we,style:{...F.btn("primary"),flex:1,opacity:we?.7:1,fontSize:"0.8125rem"},children:we?"...":" Upload to Cloud"}),f.jsx("button",{onClick:xa,disabled:we,style:{...F.btn(),flex:1,opacity:we?.7:1,fontSize:"0.8125rem"},children:we?"...":" Download from Cloud"})]}),f.jsx("p",{style:{fontSize:"0.6875rem",color:"#a1a1aa",marginBottom:"1rem",lineHeight:"1.4"},children:'Data does not sync automatically. Tap "Upload to Cloud" to save your data, or "Download from Cloud" to load data from another device.'}),f.jsxs("div",{style:{paddingTop:"0.75rem",borderTop:"1px solid #3f3f46"},children:[f.jsx("button",{onClick:Ms,style:{background:"none",border:"none",color:"#f59e0b",fontSize:"0.8125rem",cursor:"pointer",padding:0,fontWeight:500},children:" Change Code"}),f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a",marginTop:"0.375rem"},children:"Changing your code won't delete local data."})]})]}):f.jsxs(f.Fragment,{children:[f.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a",marginBottom:"0.75rem"},children:"Enter a personal sync code to backup & sync across devices"}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[f.jsx("input",{type:"text",value:kt,onChange:m=>ze(m.target.value.toUpperCase()),placeholder:"e.g. LIFEMANAGER",style:{...F.input,flex:1,fontFamily:"JetBrains Mono, monospace",textTransform:"uppercase"},onKeyDown:m=>{m.key==="Enter"&&Gr()}}),f.jsx("button",{onClick:Gr,disabled:we||!kt.trim(),style:{...F.btn("primary"),opacity:we||!kt.trim()?.7:1},children:we?"...":"Connect"})]}),f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Codes are not case-sensitive"})]})]}),f.jsx("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:"rgba(39,39,42,0.5)",fontSize:"0.75rem",color:"#71717a",marginBottom:"0.75rem"},children:f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.25rem"},children:[f.jsxs("span",{children:[i.length," habits"]}),f.jsxs("span",{children:[n.length," tasks"]}),f.jsxs("span",{children:[a.length," goals"]}),f.jsxs("span",{children:[_.length," ideas"]}),f.jsxs("span",{children:[Object.keys(u).length," days logged"]}),f.jsxs("span",{children:[Object.keys(p).length," scores"]})]})}),f.jsx("button",{onClick:()=>C(!1),style:{...F.btn(),width:"100%"},children:"Close"})]}),f.jsxs(Sn,{isOpen:Uu,onClose:Pi,title:" Add to Home Screen",children:[f.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[f.jsx("p",{style:{fontSize:"3rem",marginBottom:"0.75rem"},children:""}),f.jsx("p",{style:{fontSize:"0.9375rem",color:"#fafafa",marginBottom:"0.5rem"},children:"Get the full app experience"}),f.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a"},children:"Add Life Manager to your home screen for quick access and a better experience."})]}),pa?f.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",backgroundColor:"#27272a",marginBottom:"1rem"},children:[f.jsx("p",{style:{fontSize:"0.8125rem",fontWeight:600,color:"#fafafa",marginBottom:"0.75rem"},children:"For iPhone/iPad (Safari):"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:[f.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"1."}),f.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Tap the ",f.jsx("strong",{style:{color:"#fafafa"},children:"Share"})," button at the bottom (square with arrow )"]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"2."}),f.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Scroll down and tap ",f.jsx("strong",{style:{color:"#fafafa"},children:'"Add to Home Screen"'})]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"3."}),f.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Tap ",f.jsx("strong",{style:{color:"#fafafa"},children:'"Add"'})]})]})]})]}):Ds?f.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",backgroundColor:"#27272a",marginBottom:"1rem"},children:[f.jsx("p",{style:{fontSize:"0.8125rem",fontWeight:600,color:"#fafafa",marginBottom:"0.75rem"},children:"For Android (Chrome):"}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:[f.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"1."}),f.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Tap the ",f.jsx("strong",{style:{color:"#fafafa"},children:"menu icon"})," (three dots ) in the top right"]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"2."}),f.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Tap ",f.jsx("strong",{style:{color:"#fafafa"},children:'"Add to Home Screen"'})," or ",f.jsx("strong",{style:{color:"#fafafa"},children:'"Install App"'})]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[f.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"3."}),f.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Tap ",f.jsx("strong",{style:{color:"#fafafa"},children:'"Add"'})]})]})]})]}):null,f.jsx("button",{onClick:Pi,style:{...F.btn("primary"),width:"100%"},children:"Got it"})]}),f.jsxs(Sn,{isOpen:ya,onClose:Di,title:" Set Up Cloud Sync",children:[f.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[f.jsx("p",{style:{fontSize:"3rem",marginBottom:"0.75rem"},children:""}),f.jsx("p",{style:{fontSize:"0.9375rem",color:"#fafafa",marginBottom:"0.5rem"},children:"Sync your data across devices"}),f.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a"},children:"Enter a personal code to backup and access your habits, goals, and tasks from anywhere."})]}),f.jsxs("div",{style:{marginBottom:"1rem"},children:[f.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:f.jsx("input",{type:"text",value:kt,onChange:m=>ze(m.target.value.toUpperCase()),placeholder:"e.g. LIFEMANAGER",style:{...F.input,flex:1,fontFamily:"JetBrains Mono, monospace",textTransform:"uppercase"},onKeyDown:m=>{m.key==="Enter"&&kt.trim()&&(Gr(),Di())}})}),f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Codes are not case-sensitive"})]}),f.jsx("button",{onClick:()=>{kt.trim()&&(Gr(),Di())},disabled:we||!kt.trim(),style:{...F.btn("primary"),width:"100%",marginBottom:"0.75rem",opacity:we||!kt.trim()?.7:1},children:we?"Connecting...":"Connect"}),f.jsx("button",{onClick:Di,style:{...F.btn(),width:"100%",marginBottom:"1rem"},children:"Skip for Now"}),f.jsx("p",{style:{fontSize:"0.75rem",color:"#71717a",textAlign:"center"},children:"You can view or change your code anytime in the Backup menu."})]}),f.jsx(Sn,{isOpen:!!P,onClose:()=>{S(null),_t("")},title:"Delete Habit",children:P&&f.jsxs(f.Fragment,{children:[f.jsxs("p",{style:{color:"#a1a1aa",marginBottom:"1rem"},children:['"',P.name,'"']}),f.jsxs("button",{onClick:()=>_n(P.id),style:{width:"100%",padding:"1rem",borderRadius:"0.75rem",border:"2px solid #27272a",backgroundColor:"#27272a",color:"#fafafa",cursor:"pointer",textAlign:"left",marginBottom:"0.75rem"},children:[f.jsxs("div",{style:{fontWeight:500,marginBottom:"0.25rem"},children:["Remove from ",ki()]}),f.jsx("div",{style:{fontSize:"0.8125rem",color:"#71717a"},children:"Clears today's data only. Habit stays in your list."})]}),f.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",border:"2px solid rgba(239,68,68,0.3)",backgroundColor:"rgba(239,68,68,0.1)"},children:[f.jsx("div",{style:{fontWeight:500,color:"#f87171",marginBottom:"0.5rem"},children:"Delete permanently"}),f.jsxs("div",{style:{fontSize:"0.8125rem",color:"#71717a",marginBottom:"0.75rem"},children:["Removes habit and all history. Type ",f.jsx("span",{style:{color:"#f87171",fontFamily:"JetBrains Mono, monospace"},children:"delete"})," to confirm."]}),f.jsx("input",{type:"text",value:je,onChange:m=>_t(m.target.value),placeholder:'Type "delete"',style:{...F.input,marginBottom:"0.75rem",fontSize:"0.875rem"}}),f.jsx("button",{onClick:()=>$u(P.id),disabled:je.toLowerCase()!=="delete",style:{...F.btn("danger"),width:"100%",opacity:je.toLowerCase()!=="delete"?.5:1,cursor:je.toLowerCase()!=="delete"?"not-allowed":"pointer"},children:"Delete Forever"})]}),f.jsx("button",{onClick:()=>{S(null),_t("")},style:{...F.btn(),width:"100%",marginTop:"1rem"},children:"Cancel"})]})})]})}Vc.createRoot(document.getElementById("root")).render(f.jsx(__.StrictMode,{children:f.jsx(X2,{})}));
