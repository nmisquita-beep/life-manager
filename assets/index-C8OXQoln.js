(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function r0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ym={exports:{}},Xl={},Jm={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yo=Symbol.for("react.element"),i0=Symbol.for("react.portal"),s0=Symbol.for("react.fragment"),o0=Symbol.for("react.strict_mode"),a0=Symbol.for("react.profiler"),l0=Symbol.for("react.provider"),u0=Symbol.for("react.context"),c0=Symbol.for("react.forward_ref"),h0=Symbol.for("react.suspense"),d0=Symbol.for("react.memo"),f0=Symbol.for("react.lazy"),Vf=Symbol.iterator;function p0(t){return t===null||typeof t!="object"?null:(t=Vf&&t[Vf]||t["@@iterator"],typeof t=="function"?t:null)}var Xm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zm=Object.assign,eg={};function fs(t,e,n){this.props=t,this.context=e,this.refs=eg,this.updater=n||Xm}fs.prototype.isReactComponent={};fs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tg(){}tg.prototype=fs.prototype;function Vh(t,e,n){this.props=t,this.context=e,this.refs=eg,this.updater=n||Xm}var Nh=Vh.prototype=new tg;Nh.constructor=Vh;Zm(Nh,fs.prototype);Nh.isPureReactComponent=!0;var Nf=Array.isArray,ng=Object.prototype.hasOwnProperty,bh={current:null},rg={key:!0,ref:!0,__self:!0,__source:!0};function ig(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)ng.call(e,r)&&!rg.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Yo,type:t,key:s,ref:a,props:i,_owner:bh.current}}function m0(t,e){return{$$typeof:Yo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Lh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yo}function g0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bf=/\/+/g;function Ou(t,e){return typeof t=="object"&&t!==null&&t.key!=null?g0(""+t.key):e.toString(36)}function Ka(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Yo:case i0:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Ou(a,0):r,Nf(i)?(n="",t!=null&&(n=t.replace(bf,"$&/")+"/"),Ka(i,e,n,"",function(h){return h})):i!=null&&(Lh(i)&&(i=m0(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(bf,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Nf(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Ou(s,l);a+=Ka(s,e,n,u,i)}else if(u=p0(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Ou(s,l++),a+=Ka(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ia(t,e,n){if(t==null)return t;var r=[],i=0;return Ka(t,r,"","",function(s){return e.call(n,s,i++)}),r}function y0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},Ga={transition:null},v0={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:Ga,ReactCurrentOwner:bh};function sg(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Ia,forEach:function(t,e,n){Ia(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ia(t,function(){e++}),e},toArray:function(t){return Ia(t,function(e){return e})||[]},only:function(t){if(!Lh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=fs;ae.Fragment=s0;ae.Profiler=a0;ae.PureComponent=Vh;ae.StrictMode=o0;ae.Suspense=h0;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v0;ae.act=sg;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Zm({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=bh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)ng.call(e,u)&&!rg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Yo,type:t.type,key:i,ref:s,props:r,_owner:a}};ae.createContext=function(t){return t={$$typeof:u0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:l0,_context:t},t.Consumer=t};ae.createElement=ig;ae.createFactory=function(t){var e=ig.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:c0,render:t}};ae.isValidElement=Lh;ae.lazy=function(t){return{$$typeof:f0,_payload:{_status:-1,_result:t},_init:y0}};ae.memo=function(t,e){return{$$typeof:d0,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=Ga.transition;Ga.transition={};try{t()}finally{Ga.transition=e}};ae.unstable_act=sg;ae.useCallback=function(t,e){return St.current.useCallback(t,e)};ae.useContext=function(t){return St.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return St.current.useDeferredValue(t)};ae.useEffect=function(t,e){return St.current.useEffect(t,e)};ae.useId=function(){return St.current.useId()};ae.useImperativeHandle=function(t,e,n){return St.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return St.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return St.current.useReducer(t,e,n)};ae.useRef=function(t){return St.current.useRef(t)};ae.useState=function(t){return St.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return St.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return St.current.useTransition()};ae.version="18.3.1";Jm.exports=ae;var K=Jm.exports;const _0=r0(K);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0=K,w0=Symbol.for("react.element"),T0=Symbol.for("react.fragment"),S0=Object.prototype.hasOwnProperty,I0=E0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C0={key:!0,ref:!0,__self:!0,__source:!0};function og(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)S0.call(e,r)&&!C0.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:w0,type:t,key:s,ref:a,props:i,_owner:I0.current}}Xl.Fragment=T0;Xl.jsx=og;Xl.jsxs=og;Ym.exports=Xl;var f=Ym.exports,vc={},ag={exports:{}},Mt={},lg={exports:{}},ug={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Z){var re=$.length;$.push(Z);e:for(;0<re;){var ye=re-1>>>1,Ee=$[ye];if(0<i(Ee,Z))$[ye]=Z,$[re]=Ee,re=ye;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Z=$[0],re=$.pop();if(re!==Z){$[0]=re;e:for(var ye=0,Ee=$.length,Bt=Ee>>>1;ye<Bt;){var at=2*(ye+1)-1,Ut=$[at],Vt=at+1,Xt=$[Vt];if(0>i(Ut,re))Vt<Ee&&0>i(Xt,Ut)?($[ye]=Xt,$[Vt]=re,ye=Vt):($[ye]=Ut,$[at]=re,ye=at);else if(Vt<Ee&&0>i(Xt,re))$[ye]=Xt,$[Vt]=re,ye=Vt;else break e}}return Z}function i($,Z){var re=$.sortIndex-Z.sortIndex;return re!==0?re:$.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],p=1,v=null,_=3,R=!1,b=!1,j=!1,U=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A($){for(var Z=n(h);Z!==null;){if(Z.callback===null)r(h);else if(Z.startTime<=$)r(h),Z.sortIndex=Z.expirationTime,e(u,Z);else break;Z=n(h)}}function M($){if(j=!1,A($),!b)if(n(u)!==null)b=!0,zt(H);else{var Z=n(h);Z!==null&&Hn(M,Z.startTime-$)}}function H($,Z){b=!1,j&&(j=!1,x(y),y=-1),R=!0;var re=_;try{for(A(Z),v=n(u);v!==null&&(!(v.expirationTime>Z)||$&&!C());){var ye=v.callback;if(typeof ye=="function"){v.callback=null,_=v.priorityLevel;var Ee=ye(v.expirationTime<=Z);Z=t.unstable_now(),typeof Ee=="function"?v.callback=Ee:v===n(u)&&r(u),A(Z)}else r(u);v=n(u)}if(v!==null)var Bt=!0;else{var at=n(h);at!==null&&Hn(M,at.startTime-Z),Bt=!1}return Bt}finally{v=null,_=re,R=!1}}var q=!1,E=null,y=-1,w=5,I=-1;function C(){return!(t.unstable_now()-I<w)}function P(){if(E!==null){var $=t.unstable_now();I=$;var Z=!0;try{Z=E(!0,$)}finally{Z?S():(q=!1,E=null)}}else q=!1}var S;if(typeof T=="function")S=function(){T(P)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,yt=Ne.port2;Ne.port1.onmessage=P,S=function(){yt.postMessage(null)}}else S=function(){U(P,0)};function zt($){E=$,q||(q=!0,S())}function Hn($,Z){y=U(function(){$(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){b||R||(b=!0,zt(H))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(_){case 1:case 2:case 3:var Z=3;break;default:Z=_}var re=_;_=Z;try{return $()}finally{_=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Z){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var re=_;_=$;try{return Z()}finally{_=re}},t.unstable_scheduleCallback=function($,Z,re){var ye=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ye+re:ye):re=ye,$){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=re+Ee,$={id:p++,callback:Z,priorityLevel:$,startTime:re,expirationTime:Ee,sortIndex:-1},re>ye?($.sortIndex=re,e(h,$),n(u)===null&&$===n(h)&&(j?(x(y),y=-1):j=!0,Hn(M,re-ye))):($.sortIndex=Ee,e(u,$),b||R||(b=!0,zt(H))),$},t.unstable_shouldYield=C,t.unstable_wrapCallback=function($){var Z=_;return function(){var re=_;_=Z;try{return $.apply(this,arguments)}finally{_=re}}}})(ug);lg.exports=ug;var x0=lg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0=K,Ot=x0;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cg=new Set,So={};function ai(t,e){es(t,e),es(t+"Capture",e)}function es(t,e){for(So[t]=e,t=0;t<e.length;t++)cg.add(e[t])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_c=Object.prototype.hasOwnProperty,k0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lf={},jf={};function R0(t){return _c.call(jf,t)?!0:_c.call(Lf,t)?!1:k0.test(t)?jf[t]=!0:(Lf[t]=!0,!1)}function P0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function D0(t,e,n,r){if(e===null||typeof e>"u"||P0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var jh=/[\-:]([a-z])/g;function Oh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jh,Oh);st[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jh,Oh);st[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jh,Oh);st[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mh(t,e,n,r){var i=st.hasOwnProperty(e)?st[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(D0(e,n,i,r)&&(n=null),r||i===null?R0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $n=A0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ca=Symbol.for("react.element"),Ni=Symbol.for("react.portal"),bi=Symbol.for("react.fragment"),Fh=Symbol.for("react.strict_mode"),Ec=Symbol.for("react.profiler"),hg=Symbol.for("react.provider"),dg=Symbol.for("react.context"),zh=Symbol.for("react.forward_ref"),wc=Symbol.for("react.suspense"),Tc=Symbol.for("react.suspense_list"),Bh=Symbol.for("react.memo"),nr=Symbol.for("react.lazy"),fg=Symbol.for("react.offscreen"),Of=Symbol.iterator;function zs(t){return t===null||typeof t!="object"?null:(t=Of&&t[Of]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Mu;function Zs(t){if(Mu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mu=e&&e[1]||""}return`
`+Mu+t}var Fu=!1;function zu(t,e){if(!t||Fu)return"";Fu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{Fu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zs(t):""}function V0(t){switch(t.tag){case 5:return Zs(t.type);case 16:return Zs("Lazy");case 13:return Zs("Suspense");case 19:return Zs("SuspenseList");case 0:case 2:case 15:return t=zu(t.type,!1),t;case 11:return t=zu(t.type.render,!1),t;case 1:return t=zu(t.type,!0),t;default:return""}}function Sc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bi:return"Fragment";case Ni:return"Portal";case Ec:return"Profiler";case Fh:return"StrictMode";case wc:return"Suspense";case Tc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dg:return(t.displayName||"Context")+".Consumer";case hg:return(t._context.displayName||"Context")+".Provider";case zh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bh:return e=t.displayName||null,e!==null?e:Sc(t.type)||"Memo";case nr:e=t._payload,t=t._init;try{return Sc(t(e))}catch{}}return null}function N0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sc(e);case 8:return e===Fh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function b0(t){var e=pg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xa(t){t._valueTracker||(t._valueTracker=b0(t))}function mg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=pg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function hl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ic(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Mf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gg(t,e){e=e.checked,e!=null&&Mh(t,"checked",e,!1)}function Cc(t,e){gg(t,e);var n=wr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xc(t,e.type,n):e.hasOwnProperty("defaultValue")&&xc(t,e.type,wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ff(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xc(t,e,n){(e!=="number"||hl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var eo=Array.isArray;function Wi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ac(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(eo(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wr(n)}}function yg(t,e){var n=wr(e.value),r=wr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Bf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Aa,_g=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Aa=Aa||document.createElement("div"),Aa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Aa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Io(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ao={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L0=["Webkit","ms","Moz","O"];Object.keys(ao).forEach(function(t){L0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ao[e]=ao[t]})});function Eg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ao.hasOwnProperty(t)&&ao[t]?(""+e).trim():e+"px"}function wg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Eg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var j0=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rc(t,e){if(e){if(j0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Pc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dc=null;function Uh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vc=null,qi=null,Ki=null;function Uf(t){if(t=Zo(t)){if(typeof Vc!="function")throw Error(B(280));var e=t.stateNode;e&&(e=ru(e),Vc(t.stateNode,t.type,e))}}function Tg(t){qi?Ki?Ki.push(t):Ki=[t]:qi=t}function Sg(){if(qi){var t=qi,e=Ki;if(Ki=qi=null,Uf(t),e)for(t=0;t<e.length;t++)Uf(e[t])}}function Ig(t,e){return t(e)}function Cg(){}var Bu=!1;function xg(t,e,n){if(Bu)return t(e,n);Bu=!0;try{return Ig(t,e,n)}finally{Bu=!1,(qi!==null||Ki!==null)&&(Cg(),Sg())}}function Co(t,e){var n=t.stateNode;if(n===null)return null;var r=ru(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Nc=!1;if(jn)try{var Bs={};Object.defineProperty(Bs,"passive",{get:function(){Nc=!0}}),window.addEventListener("test",Bs,Bs),window.removeEventListener("test",Bs,Bs)}catch{Nc=!1}function O0(t,e,n,r,i,s,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var lo=!1,dl=null,fl=!1,bc=null,M0={onError:function(t){lo=!0,dl=t}};function F0(t,e,n,r,i,s,a,l,u){lo=!1,dl=null,O0.apply(M0,arguments)}function z0(t,e,n,r,i,s,a,l,u){if(F0.apply(this,arguments),lo){if(lo){var h=dl;lo=!1,dl=null}else throw Error(B(198));fl||(fl=!0,bc=h)}}function li(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ag(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $f(t){if(li(t)!==t)throw Error(B(188))}function B0(t){var e=t.alternate;if(!e){if(e=li(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return $f(i),t;if(s===r)return $f(i),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function kg(t){return t=B0(t),t!==null?Rg(t):null}function Rg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Rg(t);if(e!==null)return e;t=t.sibling}return null}var Pg=Ot.unstable_scheduleCallback,Hf=Ot.unstable_cancelCallback,U0=Ot.unstable_shouldYield,$0=Ot.unstable_requestPaint,Fe=Ot.unstable_now,H0=Ot.unstable_getCurrentPriorityLevel,$h=Ot.unstable_ImmediatePriority,Dg=Ot.unstable_UserBlockingPriority,pl=Ot.unstable_NormalPriority,W0=Ot.unstable_LowPriority,Vg=Ot.unstable_IdlePriority,Zl=null,wn=null;function q0(t){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Zl,t,void 0,(t.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:Q0,K0=Math.log,G0=Math.LN2;function Q0(t){return t>>>=0,t===0?32:31-(K0(t)/G0|0)|0}var ka=64,Ra=4194304;function to(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ml(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=to(l):(s&=a,s!==0&&(r=to(s)))}else a=n&~i,a!==0?r=to(a):s!==0&&(r=to(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ln(e),i=1<<n,r|=t[n],e&=~i;return r}function Y0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-ln(s),l=1<<a,u=i[a];u===-1?(!(l&n)||l&r)&&(i[a]=Y0(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Lc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ng(){var t=ka;return ka<<=1,!(ka&4194240)&&(ka=64),t}function Uu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ln(e),t[e]=n}function X0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ln(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Hh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ln(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function bg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Lg,Wh,jg,Og,Mg,jc=!1,Pa=[],ur=null,cr=null,hr=null,xo=new Map,Ao=new Map,ir=[],Z0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wf(t,e){switch(t){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":xo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ao.delete(e.pointerId)}}function Us(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Zo(e),e!==null&&Wh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function e1(t,e,n,r,i){switch(e){case"focusin":return ur=Us(ur,t,e,n,r,i),!0;case"dragenter":return cr=Us(cr,t,e,n,r,i),!0;case"mouseover":return hr=Us(hr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xo.set(s,Us(xo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ao.set(s,Us(Ao.get(s)||null,t,e,n,r,i)),!0}return!1}function Fg(t){var e=Kr(t.target);if(e!==null){var n=li(e);if(n!==null){if(e=n.tag,e===13){if(e=Ag(n),e!==null){t.blockedOn=e,Mg(t.priority,function(){jg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Oc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Dc=r,n.target.dispatchEvent(r),Dc=null}else return e=Zo(n),e!==null&&Wh(e),t.blockedOn=n,!1;e.shift()}return!0}function qf(t,e,n){Qa(t)&&n.delete(e)}function t1(){jc=!1,ur!==null&&Qa(ur)&&(ur=null),cr!==null&&Qa(cr)&&(cr=null),hr!==null&&Qa(hr)&&(hr=null),xo.forEach(qf),Ao.forEach(qf)}function $s(t,e){t.blockedOn===e&&(t.blockedOn=null,jc||(jc=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,t1)))}function ko(t){function e(i){return $s(i,t)}if(0<Pa.length){$s(Pa[0],t);for(var n=1;n<Pa.length;n++){var r=Pa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ur!==null&&$s(ur,t),cr!==null&&$s(cr,t),hr!==null&&$s(hr,t),xo.forEach(e),Ao.forEach(e),n=0;n<ir.length;n++)r=ir[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ir.length&&(n=ir[0],n.blockedOn===null);)Fg(n),n.blockedOn===null&&ir.shift()}var Gi=$n.ReactCurrentBatchConfig,gl=!0;function n1(t,e,n,r){var i=_e,s=Gi.transition;Gi.transition=null;try{_e=1,qh(t,e,n,r)}finally{_e=i,Gi.transition=s}}function r1(t,e,n,r){var i=_e,s=Gi.transition;Gi.transition=null;try{_e=4,qh(t,e,n,r)}finally{_e=i,Gi.transition=s}}function qh(t,e,n,r){if(gl){var i=Oc(t,e,n,r);if(i===null)Xu(t,e,r,yl,n),Wf(t,r);else if(e1(i,t,e,n,r))r.stopPropagation();else if(Wf(t,r),e&4&&-1<Z0.indexOf(t)){for(;i!==null;){var s=Zo(i);if(s!==null&&Lg(s),s=Oc(t,e,n,r),s===null&&Xu(t,e,r,yl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Xu(t,e,r,null,n)}}var yl=null;function Oc(t,e,n,r){if(yl=null,t=Uh(r),t=Kr(t),t!==null)if(e=li(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ag(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yl=t,null}function zg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(H0()){case $h:return 1;case Dg:return 4;case pl:case W0:return 16;case Vg:return 536870912;default:return 16}default:return 16}}var or=null,Kh=null,Ya=null;function Bg(){if(Ya)return Ya;var t,e=Kh,n=e.length,r,i="value"in or?or.value:or.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Ya=i.slice(t,1<r?1-r:void 0)}function Ja(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Da(){return!0}function Kf(){return!1}function Ft(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Da:Kf,this.isPropagationStopped=Kf,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Da)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Da)},persist:function(){},isPersistent:Da}),e}var ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gh=Ft(ps),Xo=De({},ps,{view:0,detail:0}),i1=Ft(Xo),$u,Hu,Hs,eu=De({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hs&&(Hs&&t.type==="mousemove"?($u=t.screenX-Hs.screenX,Hu=t.screenY-Hs.screenY):Hu=$u=0,Hs=t),$u)},movementY:function(t){return"movementY"in t?t.movementY:Hu}}),Gf=Ft(eu),s1=De({},eu,{dataTransfer:0}),o1=Ft(s1),a1=De({},Xo,{relatedTarget:0}),Wu=Ft(a1),l1=De({},ps,{animationName:0,elapsedTime:0,pseudoElement:0}),u1=Ft(l1),c1=De({},ps,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),h1=Ft(c1),d1=De({},ps,{data:0}),Qf=Ft(d1),f1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=m1[t])?!!e[t]:!1}function Qh(){return g1}var y1=De({},Xo,{key:function(t){if(t.key){var e=f1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ja(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?p1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qh,charCode:function(t){return t.type==="keypress"?Ja(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ja(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),v1=Ft(y1),_1=De({},eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yf=Ft(_1),E1=De({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qh}),w1=Ft(E1),T1=De({},ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),S1=Ft(T1),I1=De({},eu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),C1=Ft(I1),x1=[9,13,27,32],Yh=jn&&"CompositionEvent"in window,uo=null;jn&&"documentMode"in document&&(uo=document.documentMode);var A1=jn&&"TextEvent"in window&&!uo,Ug=jn&&(!Yh||uo&&8<uo&&11>=uo),Jf=" ",Xf=!1;function $g(t,e){switch(t){case"keyup":return x1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Li=!1;function k1(t,e){switch(t){case"compositionend":return Hg(e);case"keypress":return e.which!==32?null:(Xf=!0,Jf);case"textInput":return t=e.data,t===Jf&&Xf?null:t;default:return null}}function R1(t,e){if(Li)return t==="compositionend"||!Yh&&$g(t,e)?(t=Bg(),Ya=Kh=or=null,Li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ug&&e.locale!=="ko"?null:e.data;default:return null}}var P1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!P1[t.type]:e==="textarea"}function Wg(t,e,n,r){Tg(r),e=vl(e,"onChange"),0<e.length&&(n=new Gh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var co=null,Ro=null;function D1(t){ny(t,0)}function tu(t){var e=Mi(t);if(mg(e))return t}function V1(t,e){if(t==="change")return e}var qg=!1;if(jn){var qu;if(jn){var Ku="oninput"in document;if(!Ku){var ep=document.createElement("div");ep.setAttribute("oninput","return;"),Ku=typeof ep.oninput=="function"}qu=Ku}else qu=!1;qg=qu&&(!document.documentMode||9<document.documentMode)}function tp(){co&&(co.detachEvent("onpropertychange",Kg),Ro=co=null)}function Kg(t){if(t.propertyName==="value"&&tu(Ro)){var e=[];Wg(e,Ro,t,Uh(t)),xg(D1,e)}}function N1(t,e,n){t==="focusin"?(tp(),co=e,Ro=n,co.attachEvent("onpropertychange",Kg)):t==="focusout"&&tp()}function b1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tu(Ro)}function L1(t,e){if(t==="click")return tu(e)}function j1(t,e){if(t==="input"||t==="change")return tu(e)}function O1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:O1;function Po(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!_c.call(e,i)||!hn(t[i],e[i]))return!1}return!0}function np(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rp(t,e){var n=np(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=np(n)}}function Gg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Gg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qg(){for(var t=window,e=hl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hl(t.document)}return e}function Jh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function M1(t){var e=Qg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Gg(n.ownerDocument.documentElement,n)){if(r!==null&&Jh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=rp(n,s);var a=rp(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var F1=jn&&"documentMode"in document&&11>=document.documentMode,ji=null,Mc=null,ho=null,Fc=!1;function ip(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fc||ji==null||ji!==hl(r)||(r=ji,"selectionStart"in r&&Jh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ho&&Po(ho,r)||(ho=r,r=vl(Mc,"onSelect"),0<r.length&&(e=new Gh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ji)))}function Va(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oi={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionend:Va("Transition","TransitionEnd")},Gu={},Yg={};jn&&(Yg=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function nu(t){if(Gu[t])return Gu[t];if(!Oi[t])return t;var e=Oi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Yg)return Gu[t]=e[n];return t}var Jg=nu("animationend"),Xg=nu("animationiteration"),Zg=nu("animationstart"),ey=nu("transitionend"),ty=new Map,sp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(t,e){ty.set(t,e),ai(e,[t])}for(var Qu=0;Qu<sp.length;Qu++){var Yu=sp[Qu],z1=Yu.toLowerCase(),B1=Yu[0].toUpperCase()+Yu.slice(1);Rr(z1,"on"+B1)}Rr(Jg,"onAnimationEnd");Rr(Xg,"onAnimationIteration");Rr(Zg,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(ey,"onTransitionEnd");es("onMouseEnter",["mouseout","mouseover"]);es("onMouseLeave",["mouseout","mouseover"]);es("onPointerEnter",["pointerout","pointerover"]);es("onPointerLeave",["pointerout","pointerover"]);ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ai("onBeforeInput",["compositionend","keypress","textInput","paste"]);ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U1=new Set("cancel close invalid load scroll toggle".split(" ").concat(no));function op(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,z0(r,e,void 0,t),t.currentTarget=null}function ny(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;op(i,l,h),s=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;op(i,l,h),s=u}}}if(fl)throw t=bc,fl=!1,bc=null,t}function Ie(t,e){var n=e[Hc];n===void 0&&(n=e[Hc]=new Set);var r=t+"__bubble";n.has(r)||(ry(e,t,2,!1),n.add(r))}function Ju(t,e,n){var r=0;e&&(r|=4),ry(n,t,r,e)}var Na="_reactListening"+Math.random().toString(36).slice(2);function Do(t){if(!t[Na]){t[Na]=!0,cg.forEach(function(n){n!=="selectionchange"&&(U1.has(n)||Ju(n,!1,t),Ju(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Na]||(e[Na]=!0,Ju("selectionchange",!1,e))}}function ry(t,e,n,r){switch(zg(e)){case 1:var i=n1;break;case 4:i=r1;break;default:i=qh}n=i.bind(null,e,n,t),i=void 0,!Nc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Xu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Kr(l),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}l=l.parentNode}}r=r.return}xg(function(){var h=s,p=Uh(n),v=[];e:{var _=ty.get(t);if(_!==void 0){var R=Gh,b=t;switch(t){case"keypress":if(Ja(n)===0)break e;case"keydown":case"keyup":R=v1;break;case"focusin":b="focus",R=Wu;break;case"focusout":b="blur",R=Wu;break;case"beforeblur":case"afterblur":R=Wu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=Gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=o1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=w1;break;case Jg:case Xg:case Zg:R=u1;break;case ey:R=S1;break;case"scroll":R=i1;break;case"wheel":R=C1;break;case"copy":case"cut":case"paste":R=h1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Yf}var j=(e&4)!==0,U=!j&&t==="scroll",x=j?_!==null?_+"Capture":null:_;j=[];for(var T=h,A;T!==null;){A=T;var M=A.stateNode;if(A.tag===5&&M!==null&&(A=M,x!==null&&(M=Co(T,x),M!=null&&j.push(Vo(T,M,A)))),U)break;T=T.return}0<j.length&&(_=new R(_,b,null,n,p),v.push({event:_,listeners:j}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",_&&n!==Dc&&(b=n.relatedTarget||n.fromElement)&&(Kr(b)||b[On]))break e;if((R||_)&&(_=p.window===p?p:(_=p.ownerDocument)?_.defaultView||_.parentWindow:window,R?(b=n.relatedTarget||n.toElement,R=h,b=b?Kr(b):null,b!==null&&(U=li(b),b!==U||b.tag!==5&&b.tag!==6)&&(b=null)):(R=null,b=h),R!==b)){if(j=Gf,M="onMouseLeave",x="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(j=Yf,M="onPointerLeave",x="onPointerEnter",T="pointer"),U=R==null?_:Mi(R),A=b==null?_:Mi(b),_=new j(M,T+"leave",R,n,p),_.target=U,_.relatedTarget=A,M=null,Kr(p)===h&&(j=new j(x,T+"enter",b,n,p),j.target=A,j.relatedTarget=U,M=j),U=M,R&&b)t:{for(j=R,x=b,T=0,A=j;A;A=ki(A))T++;for(A=0,M=x;M;M=ki(M))A++;for(;0<T-A;)j=ki(j),T--;for(;0<A-T;)x=ki(x),A--;for(;T--;){if(j===x||x!==null&&j===x.alternate)break t;j=ki(j),x=ki(x)}j=null}else j=null;R!==null&&ap(v,_,R,j,!1),b!==null&&U!==null&&ap(v,U,b,j,!0)}}e:{if(_=h?Mi(h):window,R=_.nodeName&&_.nodeName.toLowerCase(),R==="select"||R==="input"&&_.type==="file")var H=V1;else if(Zf(_))if(qg)H=j1;else{H=b1;var q=N1}else(R=_.nodeName)&&R.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(H=L1);if(H&&(H=H(t,h))){Wg(v,H,n,p);break e}q&&q(t,_,h),t==="focusout"&&(q=_._wrapperState)&&q.controlled&&_.type==="number"&&xc(_,"number",_.value)}switch(q=h?Mi(h):window,t){case"focusin":(Zf(q)||q.contentEditable==="true")&&(ji=q,Mc=h,ho=null);break;case"focusout":ho=Mc=ji=null;break;case"mousedown":Fc=!0;break;case"contextmenu":case"mouseup":case"dragend":Fc=!1,ip(v,n,p);break;case"selectionchange":if(F1)break;case"keydown":case"keyup":ip(v,n,p)}var E;if(Yh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Li?$g(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Ug&&n.locale!=="ko"&&(Li||y!=="onCompositionStart"?y==="onCompositionEnd"&&Li&&(E=Bg()):(or=p,Kh="value"in or?or.value:or.textContent,Li=!0)),q=vl(h,y),0<q.length&&(y=new Qf(y,t,null,n,p),v.push({event:y,listeners:q}),E?y.data=E:(E=Hg(n),E!==null&&(y.data=E)))),(E=A1?k1(t,n):R1(t,n))&&(h=vl(h,"onBeforeInput"),0<h.length&&(p=new Qf("onBeforeInput","beforeinput",null,n,p),v.push({event:p,listeners:h}),p.data=E))}ny(v,e)})}function Vo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Co(t,n),s!=null&&r.unshift(Vo(t,s,i)),s=Co(t,e),s!=null&&r.push(Vo(t,s,i))),t=t.return}return r}function ki(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ap(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Co(n,s),u!=null&&a.unshift(Vo(n,u,l))):i||(u=Co(n,s),u!=null&&a.push(Vo(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var $1=/\r\n?/g,H1=/\u0000|\uFFFD/g;function lp(t){return(typeof t=="string"?t:""+t).replace($1,`
`).replace(H1,"")}function ba(t,e,n){if(e=lp(e),lp(t)!==e&&n)throw Error(B(425))}function _l(){}var zc=null,Bc=null;function Uc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $c=typeof setTimeout=="function"?setTimeout:void 0,W1=typeof clearTimeout=="function"?clearTimeout:void 0,up=typeof Promise=="function"?Promise:void 0,q1=typeof queueMicrotask=="function"?queueMicrotask:typeof up<"u"?function(t){return up.resolve(null).then(t).catch(K1)}:$c;function K1(t){setTimeout(function(){throw t})}function Zu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ko(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ko(e)}function dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ms=Math.random().toString(36).slice(2),En="__reactFiber$"+ms,No="__reactProps$"+ms,On="__reactContainer$"+ms,Hc="__reactEvents$"+ms,G1="__reactListeners$"+ms,Q1="__reactHandles$"+ms;function Kr(t){var e=t[En];if(e)return e;for(var n=t.parentNode;n;){if(e=n[On]||n[En]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=cp(t);t!==null;){if(n=t[En])return n;t=cp(t)}return e}t=n,n=t.parentNode}return null}function Zo(t){return t=t[En]||t[On],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function ru(t){return t[No]||null}var Wc=[],Fi=-1;function Pr(t){return{current:t}}function xe(t){0>Fi||(t.current=Wc[Fi],Wc[Fi]=null,Fi--)}function Te(t,e){Fi++,Wc[Fi]=t.current,t.current=e}var Tr={},gt=Pr(Tr),Rt=Pr(!1),ei=Tr;function ts(t,e){var n=t.type.contextTypes;if(!n)return Tr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Pt(t){return t=t.childContextTypes,t!=null}function El(){xe(Rt),xe(gt)}function hp(t,e,n){if(gt.current!==Tr)throw Error(B(168));Te(gt,e),Te(Rt,n)}function iy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,N0(t)||"Unknown",i));return De({},n,r)}function wl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Tr,ei=gt.current,Te(gt,t),Te(Rt,Rt.current),!0}function dp(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=iy(t,e,ei),r.__reactInternalMemoizedMergedChildContext=t,xe(Rt),xe(gt),Te(gt,t)):xe(Rt),Te(Rt,n)}var Dn=null,iu=!1,ec=!1;function sy(t){Dn===null?Dn=[t]:Dn.push(t)}function Y1(t){iu=!0,sy(t)}function Dr(){if(!ec&&Dn!==null){ec=!0;var t=0,e=_e;try{var n=Dn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dn=null,iu=!1}catch(i){throw Dn!==null&&(Dn=Dn.slice(t+1)),Pg($h,Dr),i}finally{_e=e,ec=!1}}return null}var zi=[],Bi=0,Tl=null,Sl=0,Ht=[],Wt=0,ti=null,Vn=1,Nn="";function Hr(t,e){zi[Bi++]=Sl,zi[Bi++]=Tl,Tl=t,Sl=e}function oy(t,e,n){Ht[Wt++]=Vn,Ht[Wt++]=Nn,Ht[Wt++]=ti,ti=t;var r=Vn;t=Nn;var i=32-ln(r)-1;r&=~(1<<i),n+=1;var s=32-ln(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Vn=1<<32-ln(e)+i|n<<i|r,Nn=s+t}else Vn=1<<s|n<<i|r,Nn=t}function Xh(t){t.return!==null&&(Hr(t,1),oy(t,1,0))}function Zh(t){for(;t===Tl;)Tl=zi[--Bi],zi[Bi]=null,Sl=zi[--Bi],zi[Bi]=null;for(;t===ti;)ti=Ht[--Wt],Ht[Wt]=null,Nn=Ht[--Wt],Ht[Wt]=null,Vn=Ht[--Wt],Ht[Wt]=null}var jt=null,Lt=null,Ae=!1,on=null;function ay(t,e){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jt=t,Lt=dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jt=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ti!==null?{id:Vn,overflow:Nn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jt=t,Lt=null,!0):!1;default:return!1}}function qc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kc(t){if(Ae){var e=Lt;if(e){var n=e;if(!fp(t,e)){if(qc(t))throw Error(B(418));e=dr(n.nextSibling);var r=jt;e&&fp(t,e)?ay(r,n):(t.flags=t.flags&-4097|2,Ae=!1,jt=t)}}else{if(qc(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ae=!1,jt=t}}}function pp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jt=t}function La(t){if(t!==jt)return!1;if(!Ae)return pp(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Uc(t.type,t.memoizedProps)),e&&(e=Lt)){if(qc(t))throw ly(),Error(B(418));for(;e;)ay(t,e),e=dr(e.nextSibling)}if(pp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=jt?dr(t.stateNode.nextSibling):null;return!0}function ly(){for(var t=Lt;t;)t=dr(t.nextSibling)}function ns(){Lt=jt=null,Ae=!1}function ed(t){on===null?on=[t]:on.push(t)}var J1=$n.ReactCurrentBatchConfig;function Ws(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function ja(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mp(t){var e=t._init;return e(t._payload)}function uy(t){function e(x,T){if(t){var A=x.deletions;A===null?(x.deletions=[T],x.flags|=16):A.push(T)}}function n(x,T){if(!t)return null;for(;T!==null;)e(x,T),T=T.sibling;return null}function r(x,T){for(x=new Map;T!==null;)T.key!==null?x.set(T.key,T):x.set(T.index,T),T=T.sibling;return x}function i(x,T){return x=gr(x,T),x.index=0,x.sibling=null,x}function s(x,T,A){return x.index=A,t?(A=x.alternate,A!==null?(A=A.index,A<T?(x.flags|=2,T):A):(x.flags|=2,T)):(x.flags|=1048576,T)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,T,A,M){return T===null||T.tag!==6?(T=ac(A,x.mode,M),T.return=x,T):(T=i(T,A),T.return=x,T)}function u(x,T,A,M){var H=A.type;return H===bi?p(x,T,A.props.children,M,A.key):T!==null&&(T.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===nr&&mp(H)===T.type)?(M=i(T,A.props),M.ref=Ws(x,T,A),M.return=x,M):(M=il(A.type,A.key,A.props,null,x.mode,M),M.ref=Ws(x,T,A),M.return=x,M)}function h(x,T,A,M){return T===null||T.tag!==4||T.stateNode.containerInfo!==A.containerInfo||T.stateNode.implementation!==A.implementation?(T=lc(A,x.mode,M),T.return=x,T):(T=i(T,A.children||[]),T.return=x,T)}function p(x,T,A,M,H){return T===null||T.tag!==7?(T=Xr(A,x.mode,M,H),T.return=x,T):(T=i(T,A),T.return=x,T)}function v(x,T,A){if(typeof T=="string"&&T!==""||typeof T=="number")return T=ac(""+T,x.mode,A),T.return=x,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ca:return A=il(T.type,T.key,T.props,null,x.mode,A),A.ref=Ws(x,null,T),A.return=x,A;case Ni:return T=lc(T,x.mode,A),T.return=x,T;case nr:var M=T._init;return v(x,M(T._payload),A)}if(eo(T)||zs(T))return T=Xr(T,x.mode,A,null),T.return=x,T;ja(x,T)}return null}function _(x,T,A,M){var H=T!==null?T.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return H!==null?null:l(x,T,""+A,M);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ca:return A.key===H?u(x,T,A,M):null;case Ni:return A.key===H?h(x,T,A,M):null;case nr:return H=A._init,_(x,T,H(A._payload),M)}if(eo(A)||zs(A))return H!==null?null:p(x,T,A,M,null);ja(x,A)}return null}function R(x,T,A,M,H){if(typeof M=="string"&&M!==""||typeof M=="number")return x=x.get(A)||null,l(T,x,""+M,H);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Ca:return x=x.get(M.key===null?A:M.key)||null,u(T,x,M,H);case Ni:return x=x.get(M.key===null?A:M.key)||null,h(T,x,M,H);case nr:var q=M._init;return R(x,T,A,q(M._payload),H)}if(eo(M)||zs(M))return x=x.get(A)||null,p(T,x,M,H,null);ja(T,M)}return null}function b(x,T,A,M){for(var H=null,q=null,E=T,y=T=0,w=null;E!==null&&y<A.length;y++){E.index>y?(w=E,E=null):w=E.sibling;var I=_(x,E,A[y],M);if(I===null){E===null&&(E=w);break}t&&E&&I.alternate===null&&e(x,E),T=s(I,T,y),q===null?H=I:q.sibling=I,q=I,E=w}if(y===A.length)return n(x,E),Ae&&Hr(x,y),H;if(E===null){for(;y<A.length;y++)E=v(x,A[y],M),E!==null&&(T=s(E,T,y),q===null?H=E:q.sibling=E,q=E);return Ae&&Hr(x,y),H}for(E=r(x,E);y<A.length;y++)w=R(E,x,y,A[y],M),w!==null&&(t&&w.alternate!==null&&E.delete(w.key===null?y:w.key),T=s(w,T,y),q===null?H=w:q.sibling=w,q=w);return t&&E.forEach(function(C){return e(x,C)}),Ae&&Hr(x,y),H}function j(x,T,A,M){var H=zs(A);if(typeof H!="function")throw Error(B(150));if(A=H.call(A),A==null)throw Error(B(151));for(var q=H=null,E=T,y=T=0,w=null,I=A.next();E!==null&&!I.done;y++,I=A.next()){E.index>y?(w=E,E=null):w=E.sibling;var C=_(x,E,I.value,M);if(C===null){E===null&&(E=w);break}t&&E&&C.alternate===null&&e(x,E),T=s(C,T,y),q===null?H=C:q.sibling=C,q=C,E=w}if(I.done)return n(x,E),Ae&&Hr(x,y),H;if(E===null){for(;!I.done;y++,I=A.next())I=v(x,I.value,M),I!==null&&(T=s(I,T,y),q===null?H=I:q.sibling=I,q=I);return Ae&&Hr(x,y),H}for(E=r(x,E);!I.done;y++,I=A.next())I=R(E,x,y,I.value,M),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?y:I.key),T=s(I,T,y),q===null?H=I:q.sibling=I,q=I);return t&&E.forEach(function(P){return e(x,P)}),Ae&&Hr(x,y),H}function U(x,T,A,M){if(typeof A=="object"&&A!==null&&A.type===bi&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Ca:e:{for(var H=A.key,q=T;q!==null;){if(q.key===H){if(H=A.type,H===bi){if(q.tag===7){n(x,q.sibling),T=i(q,A.props.children),T.return=x,x=T;break e}}else if(q.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===nr&&mp(H)===q.type){n(x,q.sibling),T=i(q,A.props),T.ref=Ws(x,q,A),T.return=x,x=T;break e}n(x,q);break}else e(x,q);q=q.sibling}A.type===bi?(T=Xr(A.props.children,x.mode,M,A.key),T.return=x,x=T):(M=il(A.type,A.key,A.props,null,x.mode,M),M.ref=Ws(x,T,A),M.return=x,x=M)}return a(x);case Ni:e:{for(q=A.key;T!==null;){if(T.key===q)if(T.tag===4&&T.stateNode.containerInfo===A.containerInfo&&T.stateNode.implementation===A.implementation){n(x,T.sibling),T=i(T,A.children||[]),T.return=x,x=T;break e}else{n(x,T);break}else e(x,T);T=T.sibling}T=lc(A,x.mode,M),T.return=x,x=T}return a(x);case nr:return q=A._init,U(x,T,q(A._payload),M)}if(eo(A))return b(x,T,A,M);if(zs(A))return j(x,T,A,M);ja(x,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,T!==null&&T.tag===6?(n(x,T.sibling),T=i(T,A),T.return=x,x=T):(n(x,T),T=ac(A,x.mode,M),T.return=x,x=T),a(x)):n(x,T)}return U}var rs=uy(!0),cy=uy(!1),Il=Pr(null),Cl=null,Ui=null,td=null;function nd(){td=Ui=Cl=null}function rd(t){var e=Il.current;xe(Il),t._currentValue=e}function Gc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qi(t,e){Cl=t,td=Ui=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kt=!0),t.firstContext=null)}function Yt(t){var e=t._currentValue;if(td!==t)if(t={context:t,memoizedValue:e,next:null},Ui===null){if(Cl===null)throw Error(B(308));Ui=t,Cl.dependencies={lanes:0,firstContext:t}}else Ui=Ui.next=t;return e}var Gr=null;function id(t){Gr===null?Gr=[t]:Gr.push(t)}function hy(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,id(e)):(n.next=i.next,i.next=n),e.interleaved=n,Mn(t,r)}function Mn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var rr=!1;function sd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Mn(t,n)}return i=r.interleaved,i===null?(e.next=e,id(r)):(e.next=i.next,i.next=e),r.interleaved=e,Mn(t,n)}function Xa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hh(t,n)}}function gp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xl(t,e,n,r){var i=t.updateQueue;rr=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(s!==null){var v=i.baseState;a=0,p=h=u=null,l=s;do{var _=l.lane,R=l.eventTime;if((r&_)===_){p!==null&&(p=p.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,j=l;switch(_=e,R=n,j.tag){case 1:if(b=j.payload,typeof b=="function"){v=b.call(R,v,_);break e}v=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=j.payload,_=typeof b=="function"?b.call(R,v,_):b,_==null)break e;v=De({},v,_);break e;case 2:rr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[l]:_.push(l))}else R={eventTime:R,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=R,u=v):p=p.next=R,a|=_;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;_=l,l=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(p===null&&(u=v),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ri|=a,t.lanes=a,t.memoizedState=v}}function yp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var ea={},Tn=Pr(ea),bo=Pr(ea),Lo=Pr(ea);function Qr(t){if(t===ea)throw Error(B(174));return t}function od(t,e){switch(Te(Lo,e),Te(bo,t),Te(Tn,ea),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=kc(e,t)}xe(Tn),Te(Tn,e)}function is(){xe(Tn),xe(bo),xe(Lo)}function fy(t){Qr(Lo.current);var e=Qr(Tn.current),n=kc(e,t.type);e!==n&&(Te(bo,t),Te(Tn,n))}function ad(t){bo.current===t&&(xe(Tn),xe(bo))}var ke=Pr(0);function Al(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tc=[];function ld(){for(var t=0;t<tc.length;t++)tc[t]._workInProgressVersionPrimary=null;tc.length=0}var Za=$n.ReactCurrentDispatcher,nc=$n.ReactCurrentBatchConfig,ni=0,Pe=null,We=null,Je=null,kl=!1,fo=!1,jo=0,X1=0;function ct(){throw Error(B(321))}function ud(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hn(t[n],e[n]))return!1;return!0}function cd(t,e,n,r,i,s){if(ni=s,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Za.current=t===null||t.memoizedState===null?nE:rE,t=n(r,i),fo){s=0;do{if(fo=!1,jo=0,25<=s)throw Error(B(301));s+=1,Je=We=null,e.updateQueue=null,Za.current=iE,t=n(r,i)}while(fo)}if(Za.current=Rl,e=We!==null&&We.next!==null,ni=0,Je=We=Pe=null,kl=!1,e)throw Error(B(300));return t}function hd(){var t=jo!==0;return jo=0,t}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Pe.memoizedState=Je=t:Je=Je.next=t,Je}function Jt(){if(We===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Je===null?Pe.memoizedState:Je.next;if(e!==null)Je=e,We=t;else{if(t===null)throw Error(B(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Je===null?Pe.memoizedState=Je=t:Je=Je.next=t}return Je}function Oo(t,e){return typeof e=="function"?e(t):e}function rc(t){var e=Jt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=We,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,u=null,h=s;do{var p=h.lane;if((ni&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var v={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=v,a=r):u=u.next=v,Pe.lanes|=p,ri|=p}h=h.next}while(h!==null&&h!==s);u===null?a=r:u.next=l,hn(r,e.memoizedState)||(kt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Pe.lanes|=s,ri|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ic(t){var e=Jt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);hn(s,e.memoizedState)||(kt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function py(){}function my(t,e){var n=Pe,r=Jt(),i=e(),s=!hn(r.memoizedState,i);if(s&&(r.memoizedState=i,kt=!0),r=r.queue,dd(vy.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,Mo(9,yy.bind(null,n,r,i,e),void 0,null),Ze===null)throw Error(B(349));ni&30||gy(n,e,i)}return i}function gy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yy(t,e,n,r){e.value=n,e.getSnapshot=r,_y(e)&&Ey(t)}function vy(t,e,n){return n(function(){_y(e)&&Ey(t)})}function _y(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hn(t,n)}catch{return!0}}function Ey(t){var e=Mn(t,1);e!==null&&un(e,t,1,-1)}function vp(t){var e=vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:t},e.queue=t,t=t.dispatch=tE.bind(null,Pe,t),[e.memoizedState,t]}function Mo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wy(){return Jt().memoizedState}function el(t,e,n,r){var i=vn();Pe.flags|=t,i.memoizedState=Mo(1|e,n,void 0,r===void 0?null:r)}function su(t,e,n,r){var i=Jt();r=r===void 0?null:r;var s=void 0;if(We!==null){var a=We.memoizedState;if(s=a.destroy,r!==null&&ud(r,a.deps)){i.memoizedState=Mo(e,n,s,r);return}}Pe.flags|=t,i.memoizedState=Mo(1|e,n,s,r)}function _p(t,e){return el(8390656,8,t,e)}function dd(t,e){return su(2048,8,t,e)}function Ty(t,e){return su(4,2,t,e)}function Sy(t,e){return su(4,4,t,e)}function Iy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cy(t,e,n){return n=n!=null?n.concat([t]):null,su(4,4,Iy.bind(null,e,t),n)}function fd(){}function xy(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ud(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ay(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ud(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ky(t,e,n){return ni&21?(hn(n,e)||(n=Ng(),Pe.lanes|=n,ri|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kt=!0),t.memoizedState=n)}function Z1(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=nc.transition;nc.transition={};try{t(!1),e()}finally{_e=n,nc.transition=r}}function Ry(){return Jt().memoizedState}function eE(t,e,n){var r=mr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Py(t))Dy(e,n);else if(n=hy(t,e,n,r),n!==null){var i=Tt();un(n,t,r,i),Vy(n,e,r)}}function tE(t,e,n){var r=mr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Py(t))Dy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,hn(l,a)){var u=e.interleaved;u===null?(i.next=i,id(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=hy(t,e,i,r),n!==null&&(i=Tt(),un(n,t,r,i),Vy(n,e,r))}}function Py(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function Dy(t,e){fo=kl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Vy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hh(t,n)}}var Rl={readContext:Yt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},nE={readContext:Yt,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:Yt,useEffect:_p,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,el(4194308,4,Iy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return el(4194308,4,t,e)},useInsertionEffect:function(t,e){return el(4,2,t,e)},useMemo:function(t,e){var n=vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=eE.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:vp,useDebugValue:fd,useDeferredValue:function(t){return vn().memoizedState=t},useTransition:function(){var t=vp(!1),e=t[0];return t=Z1.bind(null,t[1]),vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,i=vn();if(Ae){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Ze===null)throw Error(B(349));ni&30||gy(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,_p(vy.bind(null,r,s,t),[t]),r.flags|=2048,Mo(9,yy.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=vn(),e=Ze.identifierPrefix;if(Ae){var n=Nn,r=Vn;n=(r&~(1<<32-ln(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=jo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=X1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rE={readContext:Yt,useCallback:xy,useContext:Yt,useEffect:dd,useImperativeHandle:Cy,useInsertionEffect:Ty,useLayoutEffect:Sy,useMemo:Ay,useReducer:rc,useRef:wy,useState:function(){return rc(Oo)},useDebugValue:fd,useDeferredValue:function(t){var e=Jt();return ky(e,We.memoizedState,t)},useTransition:function(){var t=rc(Oo)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:py,useSyncExternalStore:my,useId:Ry,unstable_isNewReconciler:!1},iE={readContext:Yt,useCallback:xy,useContext:Yt,useEffect:dd,useImperativeHandle:Cy,useInsertionEffect:Ty,useLayoutEffect:Sy,useMemo:Ay,useReducer:ic,useRef:wy,useState:function(){return ic(Oo)},useDebugValue:fd,useDeferredValue:function(t){var e=Jt();return We===null?e.memoizedState=t:ky(e,We.memoizedState,t)},useTransition:function(){var t=ic(Oo)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:py,useSyncExternalStore:my,useId:Ry,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ou={isMounted:function(t){return(t=t._reactInternals)?li(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=mr(t),s=bn(r,i);s.payload=e,n!=null&&(s.callback=n),e=fr(t,s,i),e!==null&&(un(e,t,i,r),Xa(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=mr(t),s=bn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=fr(t,s,i),e!==null&&(un(e,t,i,r),Xa(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=mr(t),i=bn(n,r);i.tag=2,e!=null&&(i.callback=e),e=fr(t,i,r),e!==null&&(un(e,t,r,n),Xa(e,t,r))}};function Ep(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Po(n,r)||!Po(i,s):!0}function Ny(t,e,n){var r=!1,i=Tr,s=e.contextType;return typeof s=="object"&&s!==null?s=Yt(s):(i=Pt(e)?ei:gt.current,r=e.contextTypes,s=(r=r!=null)?ts(t,i):Tr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ou,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function wp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ou.enqueueReplaceState(e,e.state,null)}function Yc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},sd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Yt(s):(s=Pt(e)?ei:gt.current,i.context=ts(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Qc(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ou.enqueueReplaceState(i,i.state,null),xl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ss(t,e){try{var n="",r=e;do n+=V0(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function sc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sE=typeof WeakMap=="function"?WeakMap:Map;function by(t,e,n){n=bn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Dl||(Dl=!0,ah=r),Jc(t,e)},n}function Ly(t,e,n){n=bn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Jc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Jc(t,e),typeof r!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Tp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_E.bind(null,t,e,n),e.then(t,t))}function Sp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ip(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bn(-1,1),e.tag=2,fr(n,e,1))),n.lanes|=1),t)}var oE=$n.ReactCurrentOwner,kt=!1;function wt(t,e,n,r){e.child=t===null?cy(e,null,n,r):rs(e,t.child,n,r)}function Cp(t,e,n,r,i){n=n.render;var s=e.ref;return Qi(e,i),r=cd(t,e,n,r,s,i),n=hd(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fn(t,e,i)):(Ae&&n&&Xh(e),e.flags|=1,wt(t,e,r,i),e.child)}function xp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!wd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,jy(t,e,s,r,i)):(t=il(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Po,n(a,r)&&t.ref===e.ref)return Fn(t,e,i)}return e.flags|=1,t=gr(s,r),t.ref=e.ref,t.return=e,e.child=t}function jy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Po(s,r)&&t.ref===e.ref)if(kt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(kt=!0);else return e.lanes=t.lanes,Fn(t,e,i)}return Xc(t,e,n,r,i)}function Oy(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Hi,bt),bt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Hi,bt),bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Te(Hi,bt),bt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Te(Hi,bt),bt|=r;return wt(t,e,i,n),e.child}function My(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Xc(t,e,n,r,i){var s=Pt(n)?ei:gt.current;return s=ts(e,s),Qi(e,i),n=cd(t,e,n,r,s,i),r=hd(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fn(t,e,i)):(Ae&&r&&Xh(e),e.flags|=1,wt(t,e,n,i),e.child)}function Ap(t,e,n,r,i){if(Pt(n)){var s=!0;wl(e)}else s=!1;if(Qi(e,i),e.stateNode===null)tl(t,e),Ny(e,n,r),Yc(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Yt(h):(h=Pt(n)?ei:gt.current,h=ts(e,h));var p=n.getDerivedStateFromProps,v=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";v||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&wp(e,a,r,h),rr=!1;var _=e.memoizedState;a.state=_,xl(e,r,a,i),u=e.memoizedState,l!==r||_!==u||Rt.current||rr?(typeof p=="function"&&(Qc(e,n,p,r),u=e.memoizedState),(l=rr||Ep(e,n,l,r,_,u,h))?(v||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,dy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:rn(e.type,l),a.props=h,v=e.pendingProps,_=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Yt(u):(u=Pt(n)?ei:gt.current,u=ts(e,u));var R=n.getDerivedStateFromProps;(p=typeof R=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==v||_!==u)&&wp(e,a,r,u),rr=!1,_=e.memoizedState,a.state=_,xl(e,r,a,i);var b=e.memoizedState;l!==v||_!==b||Rt.current||rr?(typeof R=="function"&&(Qc(e,n,R,r),b=e.memoizedState),(h=rr||Ep(e,n,h,r,_,b,u)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),a.props=r,a.state=b,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return Zc(t,e,n,r,s,i)}function Zc(t,e,n,r,i,s){My(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&dp(e,n,!1),Fn(t,e,s);r=e.stateNode,oE.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=rs(e,t.child,null,s),e.child=rs(e,null,l,s)):wt(t,e,l,s),e.memoizedState=r.state,i&&dp(e,n,!0),e.child}function Fy(t){var e=t.stateNode;e.pendingContext?hp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&hp(t,e.context,!1),od(t,e.containerInfo)}function kp(t,e,n,r,i){return ns(),ed(i),e.flags|=256,wt(t,e,n,r),e.child}var eh={dehydrated:null,treeContext:null,retryLane:0};function th(t){return{baseLanes:t,cachePool:null,transitions:null}}function zy(t,e,n){var r=e.pendingProps,i=ke.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Te(ke,i&1),t===null)return Kc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=uu(a,r,0,null),t=Xr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=th(n),e.memoizedState=eh,t):pd(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return aE(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=gr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=gr(l,s):(s=Xr(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?th(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=eh,r}return s=t.child,t=s.sibling,r=gr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pd(t,e){return e=uu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Oa(t,e,n,r){return r!==null&&ed(r),rs(e,t.child,null,n),t=pd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function aE(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=sc(Error(B(422))),Oa(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=uu({mode:"visible",children:r.children},i,0,null),s=Xr(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&rs(e,t.child,null,a),e.child.memoizedState=th(a),e.memoizedState=eh,s);if(!(e.mode&1))return Oa(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(B(419)),r=sc(s,r,void 0),Oa(t,e,a,r)}if(l=(a&t.childLanes)!==0,kt||l){if(r=Ze,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Mn(t,i),un(r,t,i,-1))}return Ed(),r=sc(Error(B(421))),Oa(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=EE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Lt=dr(i.nextSibling),jt=e,Ae=!0,on=null,t!==null&&(Ht[Wt++]=Vn,Ht[Wt++]=Nn,Ht[Wt++]=ti,Vn=t.id,Nn=t.overflow,ti=e),e=pd(e,r.children),e.flags|=4096,e)}function Rp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gc(t.return,e,n)}function oc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function By(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(wt(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rp(t,n,e);else if(t.tag===19)Rp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Al(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),oc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Al(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}oc(e,!0,n,null,s);break;case"together":oc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ri|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lE(t,e,n){switch(e.tag){case 3:Fy(e),ns();break;case 5:fy(e);break;case 1:Pt(e.type)&&wl(e);break;case 4:od(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Te(Il,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?zy(t,e,n):(Te(ke,ke.current&1),t=Fn(t,e,n),t!==null?t.sibling:null);Te(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return By(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Te(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,Oy(t,e,n)}return Fn(t,e,n)}var Uy,nh,$y,Hy;Uy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};nh=function(){};$y=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Qr(Tn.current);var s=null;switch(n){case"input":i=Ic(t,i),r=Ic(t,r),s=[];break;case"select":i=De({},i,{value:void 0}),r=De({},r,{value:void 0}),s=[];break;case"textarea":i=Ac(t,i),r=Ac(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=_l)}Rc(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(So.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(So.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ie("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};Hy=function(t,e,n,r){n!==r&&(e.flags|=4)};function qs(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function uE(t,e,n){var r=e.pendingProps;switch(Zh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(e),null;case 1:return Pt(e.type)&&El(),ht(e),null;case 3:return r=e.stateNode,is(),xe(Rt),xe(gt),ld(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(La(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,on!==null&&(ch(on),on=null))),nh(t,e),ht(e),null;case 5:ad(e);var i=Qr(Lo.current);if(n=e.type,t!==null&&e.stateNode!=null)$y(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return ht(e),null}if(t=Qr(Tn.current),La(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[En]=e,r[No]=s,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(i=0;i<no.length;i++)Ie(no[i],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":Mf(r,s),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ie("invalid",r);break;case"textarea":zf(r,s),Ie("invalid",r)}Rc(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&ba(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ba(r.textContent,l,t),i=["children",""+l]):So.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ie("scroll",r)}switch(n){case"input":xa(r),Ff(r,s,!0);break;case"textarea":xa(r),Bf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=_l)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[En]=e,t[No]=r,Uy(t,e,!1,!1),e.stateNode=t;e:{switch(a=Pc(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),i=r;break;case"iframe":case"object":case"embed":Ie("load",t),i=r;break;case"video":case"audio":for(i=0;i<no.length;i++)Ie(no[i],t);i=r;break;case"source":Ie("error",t),i=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),i=r;break;case"details":Ie("toggle",t),i=r;break;case"input":Mf(t,r),i=Ic(t,r),Ie("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=De({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":zf(t,r),i=Ac(t,r),Ie("invalid",t);break;default:i=r}Rc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?wg(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&_g(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Io(t,u):typeof u=="number"&&Io(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(So.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ie("scroll",t):u!=null&&Mh(t,s,u,a))}switch(n){case"input":xa(t),Ff(t,r,!1);break;case"textarea":xa(t),Bf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Wi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Wi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=_l)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ht(e),null;case 6:if(t&&e.stateNode!=null)Hy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Qr(Lo.current),Qr(Tn.current),La(e)){if(r=e.stateNode,n=e.memoizedProps,r[En]=e,(s=r.nodeValue!==n)&&(t=jt,t!==null))switch(t.tag){case 3:ba(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ba(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[En]=e,e.stateNode=r}return ht(e),null;case 13:if(xe(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Lt!==null&&e.mode&1&&!(e.flags&128))ly(),ns(),e.flags|=98560,s=!1;else if(s=La(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[En]=e}else ns(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ht(e),s=!1}else on!==null&&(ch(on),on=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?Ke===0&&(Ke=3):Ed())),e.updateQueue!==null&&(e.flags|=4),ht(e),null);case 4:return is(),nh(t,e),t===null&&Do(e.stateNode.containerInfo),ht(e),null;case 10:return rd(e.type._context),ht(e),null;case 17:return Pt(e.type)&&El(),ht(e),null;case 19:if(xe(ke),s=e.memoizedState,s===null)return ht(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)qs(s,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Al(t),a!==null){for(e.flags|=128,qs(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(ke,ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&Fe()>os&&(e.flags|=128,r=!0,qs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Al(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ae)return ht(e),null}else 2*Fe()-s.renderingStartTime>os&&n!==1073741824&&(e.flags|=128,r=!0,qs(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Fe(),e.sibling=null,n=ke.current,Te(ke,r?n&1|2:n&1),e):(ht(e),null);case 22:case 23:return _d(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bt&1073741824&&(ht(e),e.subtreeFlags&6&&(e.flags|=8192)):ht(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function cE(t,e){switch(Zh(e),e.tag){case 1:return Pt(e.type)&&El(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return is(),xe(Rt),xe(gt),ld(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ad(e),null;case 13:if(xe(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));ns()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(ke),null;case 4:return is(),null;case 10:return rd(e.type._context),null;case 22:case 23:return _d(),null;case 24:return null;default:return null}}var Ma=!1,pt=!1,hE=typeof WeakSet=="function"?WeakSet:Set,Q=null;function $i(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function rh(t,e,n){try{n()}catch(r){je(t,e,r)}}var Pp=!1;function dE(t,e){if(zc=gl,t=Qg(),Jh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,p=0,v=t,_=null;t:for(;;){for(var R;v!==n||i!==0&&v.nodeType!==3||(l=a+i),v!==s||r!==0&&v.nodeType!==3||(u=a+r),v.nodeType===3&&(a+=v.nodeValue.length),(R=v.firstChild)!==null;)_=v,v=R;for(;;){if(v===t)break t;if(_===n&&++h===i&&(l=a),_===s&&++p===r&&(u=a),(R=v.nextSibling)!==null)break;v=_,_=v.parentNode}v=R}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bc={focusedElem:t,selectionRange:n},gl=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var j=b.memoizedProps,U=b.memoizedState,x=e.stateNode,T=x.getSnapshotBeforeUpdate(e.elementType===e.type?j:rn(e.type,j),U);x.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(M){je(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return b=Pp,Pp=!1,b}function po(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&rh(e,n,s)}i=i.next}while(i!==r)}}function au(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ih(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Wy(t){var e=t.alternate;e!==null&&(t.alternate=null,Wy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[En],delete e[No],delete e[Hc],delete e[G1],delete e[Q1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qy(t){return t.tag===5||t.tag===3||t.tag===4}function Dp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_l));else if(r!==4&&(t=t.child,t!==null))for(sh(t,e,n),t=t.sibling;t!==null;)sh(t,e,n),t=t.sibling}function oh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(oh(t,e,n),t=t.sibling;t!==null;)oh(t,e,n),t=t.sibling}var tt=null,sn=!1;function Xn(t,e,n){for(n=n.child;n!==null;)Ky(t,e,n),n=n.sibling}function Ky(t,e,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Zl,n)}catch{}switch(n.tag){case 5:pt||$i(n,e);case 6:var r=tt,i=sn;tt=null,Xn(t,e,n),tt=r,sn=i,tt!==null&&(sn?(t=tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(sn?(t=tt,n=n.stateNode,t.nodeType===8?Zu(t.parentNode,n):t.nodeType===1&&Zu(t,n),ko(t)):Zu(tt,n.stateNode));break;case 4:r=tt,i=sn,tt=n.stateNode.containerInfo,sn=!0,Xn(t,e,n),tt=r,sn=i;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&rh(n,e,a),i=i.next}while(i!==r)}Xn(t,e,n);break;case 1:if(!pt&&($i(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){je(n,e,l)}Xn(t,e,n);break;case 21:Xn(t,e,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,Xn(t,e,n),pt=r):Xn(t,e,n);break;default:Xn(t,e,n)}}function Vp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hE),e.forEach(function(r){var i=wE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:tt=l.stateNode,sn=!1;break e;case 3:tt=l.stateNode.containerInfo,sn=!0;break e;case 4:tt=l.stateNode.containerInfo,sn=!0;break e}l=l.return}if(tt===null)throw Error(B(160));Ky(s,a,i),tt=null,sn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){je(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gy(e,t),e=e.sibling}function Gy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nn(e,t),yn(t),r&4){try{po(3,t,t.return),au(3,t)}catch(j){je(t,t.return,j)}try{po(5,t,t.return)}catch(j){je(t,t.return,j)}}break;case 1:nn(e,t),yn(t),r&512&&n!==null&&$i(n,n.return);break;case 5:if(nn(e,t),yn(t),r&512&&n!==null&&$i(n,n.return),t.flags&32){var i=t.stateNode;try{Io(i,"")}catch(j){je(t,t.return,j)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&gg(i,s),Pc(l,a);var h=Pc(l,s);for(a=0;a<u.length;a+=2){var p=u[a],v=u[a+1];p==="style"?wg(i,v):p==="dangerouslySetInnerHTML"?_g(i,v):p==="children"?Io(i,v):Mh(i,p,v,h)}switch(l){case"input":Cc(i,s);break;case"textarea":yg(i,s);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var R=s.value;R!=null?Wi(i,!!s.multiple,R,!1):_!==!!s.multiple&&(s.defaultValue!=null?Wi(i,!!s.multiple,s.defaultValue,!0):Wi(i,!!s.multiple,s.multiple?[]:"",!1))}i[No]=s}catch(j){je(t,t.return,j)}}break;case 6:if(nn(e,t),yn(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(j){je(t,t.return,j)}}break;case 3:if(nn(e,t),yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ko(e.containerInfo)}catch(j){je(t,t.return,j)}break;case 4:nn(e,t),yn(t);break;case 13:nn(e,t),yn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(yd=Fe())),r&4&&Vp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(pt=(h=pt)||p,nn(e,t),pt=h):nn(e,t),yn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(Q=t,p=t.child;p!==null;){for(v=Q=p;Q!==null;){switch(_=Q,R=_.child,_.tag){case 0:case 11:case 14:case 15:po(4,_,_.return);break;case 1:$i(_,_.return);var b=_.stateNode;if(typeof b.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(j){je(r,n,j)}}break;case 5:$i(_,_.return);break;case 22:if(_.memoizedState!==null){bp(v);continue}}R!==null?(R.return=_,Q=R):bp(v)}p=p.sibling}e:for(p=null,v=t;;){if(v.tag===5){if(p===null){p=v;try{i=v.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=v.stateNode,u=v.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Eg("display",a))}catch(j){je(t,t.return,j)}}}else if(v.tag===6){if(p===null)try{v.stateNode.nodeValue=h?"":v.memoizedProps}catch(j){je(t,t.return,j)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;p===v&&(p=null),v=v.return}p===v&&(p=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:nn(e,t),yn(t),r&4&&Vp(t);break;case 21:break;default:nn(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qy(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Io(i,""),r.flags&=-33);var s=Dp(t);oh(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Dp(t);sh(t,l,a);break;default:throw Error(B(161))}}catch(u){je(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fE(t,e,n){Q=t,Qy(t)}function Qy(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Ma;if(!a){var l=i.alternate,u=l!==null&&l.memoizedState!==null||pt;l=Ma;var h=pt;if(Ma=a,(pt=u)&&!h)for(Q=i;Q!==null;)a=Q,u=a.child,a.tag===22&&a.memoizedState!==null?Lp(i):u!==null?(u.return=a,Q=u):Lp(i);for(;s!==null;)Q=s,Qy(s),s=s.sibling;Q=i,Ma=l,pt=h}Np(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):Np(t)}}function Np(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pt||au(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&yp(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var v=p.dehydrated;v!==null&&ko(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}pt||e.flags&512&&ih(e)}catch(_){je(e,e.return,_)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function bp(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Lp(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{au(4,e)}catch(u){je(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){je(e,i,u)}}var s=e.return;try{ih(e)}catch(u){je(e,s,u)}break;case 5:var a=e.return;try{ih(e)}catch(u){je(e,a,u)}}}catch(u){je(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var pE=Math.ceil,Pl=$n.ReactCurrentDispatcher,md=$n.ReactCurrentOwner,Qt=$n.ReactCurrentBatchConfig,fe=0,Ze=null,Be=null,it=0,bt=0,Hi=Pr(0),Ke=0,Fo=null,ri=0,lu=0,gd=0,mo=null,At=null,yd=0,os=1/0,Pn=null,Dl=!1,ah=null,pr=null,Fa=!1,ar=null,Vl=0,go=0,lh=null,nl=-1,rl=0;function Tt(){return fe&6?Fe():nl!==-1?nl:nl=Fe()}function mr(t){return t.mode&1?fe&2&&it!==0?it&-it:J1.transition!==null?(rl===0&&(rl=Ng()),rl):(t=_e,t!==0||(t=window.event,t=t===void 0?16:zg(t.type)),t):1}function un(t,e,n,r){if(50<go)throw go=0,lh=null,Error(B(185));Jo(t,n,r),(!(fe&2)||t!==Ze)&&(t===Ze&&(!(fe&2)&&(lu|=n),Ke===4&&sr(t,it)),Dt(t,r),n===1&&fe===0&&!(e.mode&1)&&(os=Fe()+500,iu&&Dr()))}function Dt(t,e){var n=t.callbackNode;J0(t,e);var r=ml(t,t===Ze?it:0);if(r===0)n!==null&&Hf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Hf(n),e===1)t.tag===0?Y1(jp.bind(null,t)):sy(jp.bind(null,t)),q1(function(){!(fe&6)&&Dr()}),n=null;else{switch(bg(r)){case 1:n=$h;break;case 4:n=Dg;break;case 16:n=pl;break;case 536870912:n=Vg;break;default:n=pl}n=rv(n,Yy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Yy(t,e){if(nl=-1,rl=0,fe&6)throw Error(B(327));var n=t.callbackNode;if(Yi()&&t.callbackNode!==n)return null;var r=ml(t,t===Ze?it:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Nl(t,r);else{e=r;var i=fe;fe|=2;var s=Xy();(Ze!==t||it!==e)&&(Pn=null,os=Fe()+500,Jr(t,e));do try{yE();break}catch(l){Jy(t,l)}while(!0);nd(),Pl.current=s,fe=i,Be!==null?e=0:(Ze=null,it=0,e=Ke)}if(e!==0){if(e===2&&(i=Lc(t),i!==0&&(r=i,e=uh(t,i))),e===1)throw n=Fo,Jr(t,0),sr(t,r),Dt(t,Fe()),n;if(e===6)sr(t,r);else{if(i=t.current.alternate,!(r&30)&&!mE(i)&&(e=Nl(t,r),e===2&&(s=Lc(t),s!==0&&(r=s,e=uh(t,s))),e===1))throw n=Fo,Jr(t,0),sr(t,r),Dt(t,Fe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Wr(t,At,Pn);break;case 3:if(sr(t,r),(r&130023424)===r&&(e=yd+500-Fe(),10<e)){if(ml(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=$c(Wr.bind(null,t,At,Pn),e);break}Wr(t,At,Pn);break;case 4:if(sr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-ln(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pE(r/1960))-r,10<r){t.timeoutHandle=$c(Wr.bind(null,t,At,Pn),r);break}Wr(t,At,Pn);break;case 5:Wr(t,At,Pn);break;default:throw Error(B(329))}}}return Dt(t,Fe()),t.callbackNode===n?Yy.bind(null,t):null}function uh(t,e){var n=mo;return t.current.memoizedState.isDehydrated&&(Jr(t,e).flags|=256),t=Nl(t,e),t!==2&&(e=At,At=n,e!==null&&ch(e)),t}function ch(t){At===null?At=t:At.push.apply(At,t)}function mE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!hn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sr(t,e){for(e&=~gd,e&=~lu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ln(e),r=1<<n;t[n]=-1,e&=~r}}function jp(t){if(fe&6)throw Error(B(327));Yi();var e=ml(t,0);if(!(e&1))return Dt(t,Fe()),null;var n=Nl(t,e);if(t.tag!==0&&n===2){var r=Lc(t);r!==0&&(e=r,n=uh(t,r))}if(n===1)throw n=Fo,Jr(t,0),sr(t,e),Dt(t,Fe()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wr(t,At,Pn),Dt(t,Fe()),null}function vd(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(os=Fe()+500,iu&&Dr())}}function ii(t){ar!==null&&ar.tag===0&&!(fe&6)&&Yi();var e=fe;fe|=1;var n=Qt.transition,r=_e;try{if(Qt.transition=null,_e=1,t)return t()}finally{_e=r,Qt.transition=n,fe=e,!(fe&6)&&Dr()}}function _d(){bt=Hi.current,xe(Hi)}function Jr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,W1(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(Zh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&El();break;case 3:is(),xe(Rt),xe(gt),ld();break;case 5:ad(r);break;case 4:is();break;case 13:xe(ke);break;case 19:xe(ke);break;case 10:rd(r.type._context);break;case 22:case 23:_d()}n=n.return}if(Ze=t,Be=t=gr(t.current,null),it=bt=e,Ke=0,Fo=null,gd=lu=ri=0,At=mo=null,Gr!==null){for(e=0;e<Gr.length;e++)if(n=Gr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Gr=null}return t}function Jy(t,e){do{var n=Be;try{if(nd(),Za.current=Rl,kl){for(var r=Pe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}kl=!1}if(ni=0,Je=We=Pe=null,fo=!1,jo=0,md.current=null,n===null||n.return===null){Ke=1,Fo=e,Be=null;break}e:{var s=t,a=n.return,l=n,u=e;if(e=it,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,v=p.tag;if(!(p.mode&1)&&(v===0||v===11||v===15)){var _=p.alternate;_?(p.updateQueue=_.updateQueue,p.memoizedState=_.memoizedState,p.lanes=_.lanes):(p.updateQueue=null,p.memoizedState=null)}var R=Sp(a);if(R!==null){R.flags&=-257,Ip(R,a,l,s,e),R.mode&1&&Tp(s,h,e),e=R,u=h;var b=e.updateQueue;if(b===null){var j=new Set;j.add(u),e.updateQueue=j}else b.add(u);break e}else{if(!(e&1)){Tp(s,h,e),Ed();break e}u=Error(B(426))}}else if(Ae&&l.mode&1){var U=Sp(a);if(U!==null){!(U.flags&65536)&&(U.flags|=256),Ip(U,a,l,s,e),ed(ss(u,l));break e}}s=u=ss(u,l),Ke!==4&&(Ke=2),mo===null?mo=[s]:mo.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=by(s,u,e);gp(s,x);break e;case 1:l=u;var T=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(pr===null||!pr.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=Ly(s,l,e);gp(s,M);break e}}s=s.return}while(s!==null)}ev(n)}catch(H){e=H,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function Xy(){var t=Pl.current;return Pl.current=Rl,t===null?Rl:t}function Ed(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Ze===null||!(ri&268435455)&&!(lu&268435455)||sr(Ze,it)}function Nl(t,e){var n=fe;fe|=2;var r=Xy();(Ze!==t||it!==e)&&(Pn=null,Jr(t,e));do try{gE();break}catch(i){Jy(t,i)}while(!0);if(nd(),fe=n,Pl.current=r,Be!==null)throw Error(B(261));return Ze=null,it=0,Ke}function gE(){for(;Be!==null;)Zy(Be)}function yE(){for(;Be!==null&&!U0();)Zy(Be)}function Zy(t){var e=nv(t.alternate,t,bt);t.memoizedProps=t.pendingProps,e===null?ev(t):Be=e,md.current=null}function ev(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=cE(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,Be=null;return}}else if(n=uE(n,e,bt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);Ke===0&&(Ke=5)}function Wr(t,e,n){var r=_e,i=Qt.transition;try{Qt.transition=null,_e=1,vE(t,e,n,r)}finally{Qt.transition=i,_e=r}return null}function vE(t,e,n,r){do Yi();while(ar!==null);if(fe&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(X0(t,s),t===Ze&&(Be=Ze=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fa||(Fa=!0,rv(pl,function(){return Yi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Qt.transition,Qt.transition=null;var a=_e;_e=1;var l=fe;fe|=4,md.current=null,dE(t,n),Gy(n,t),M1(Bc),gl=!!zc,Bc=zc=null,t.current=n,fE(n),$0(),fe=l,_e=a,Qt.transition=s}else t.current=n;if(Fa&&(Fa=!1,ar=t,Vl=i),s=t.pendingLanes,s===0&&(pr=null),q0(n.stateNode),Dt(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Dl)throw Dl=!1,t=ah,ah=null,t;return Vl&1&&t.tag!==0&&Yi(),s=t.pendingLanes,s&1?t===lh?go++:(go=0,lh=t):go=0,Dr(),null}function Yi(){if(ar!==null){var t=bg(Vl),e=Qt.transition,n=_e;try{if(Qt.transition=null,_e=16>t?16:t,ar===null)var r=!1;else{if(t=ar,ar=null,Vl=0,fe&6)throw Error(B(331));var i=fe;for(fe|=4,Q=t.current;Q!==null;){var s=Q,a=s.child;if(Q.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(Q=h;Q!==null;){var p=Q;switch(p.tag){case 0:case 11:case 15:po(8,p,s)}var v=p.child;if(v!==null)v.return=p,Q=v;else for(;Q!==null;){p=Q;var _=p.sibling,R=p.return;if(Wy(p),p===h){Q=null;break}if(_!==null){_.return=R,Q=_;break}Q=R}}}var b=s.alternate;if(b!==null){var j=b.child;if(j!==null){b.child=null;do{var U=j.sibling;j.sibling=null,j=U}while(j!==null)}}Q=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Q=a;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:po(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Q=x;break e}Q=s.return}}var T=t.current;for(Q=T;Q!==null;){a=Q;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,Q=A;else e:for(a=T;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:au(9,l)}}catch(H){je(l,l.return,H)}if(l===a){Q=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,Q=M;break e}Q=l.return}}if(fe=i,Dr(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Zl,t)}catch{}r=!0}return r}finally{_e=n,Qt.transition=e}}return!1}function Op(t,e,n){e=ss(n,e),e=by(t,e,1),t=fr(t,e,1),e=Tt(),t!==null&&(Jo(t,1,e),Dt(t,e))}function je(t,e,n){if(t.tag===3)Op(t,t,n);else for(;e!==null;){if(e.tag===3){Op(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pr===null||!pr.has(r))){t=ss(n,t),t=Ly(e,t,1),e=fr(e,t,1),t=Tt(),e!==null&&(Jo(e,1,t),Dt(e,t));break}}e=e.return}}function _E(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(it&n)===n&&(Ke===4||Ke===3&&(it&130023424)===it&&500>Fe()-yd?Jr(t,0):gd|=n),Dt(t,e)}function tv(t,e){e===0&&(t.mode&1?(e=Ra,Ra<<=1,!(Ra&130023424)&&(Ra=4194304)):e=1);var n=Tt();t=Mn(t,e),t!==null&&(Jo(t,e,n),Dt(t,n))}function EE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tv(t,n)}function wE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),tv(t,n)}var nv;nv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kt=!1,lE(t,e,n);kt=!!(t.flags&131072)}else kt=!1,Ae&&e.flags&1048576&&oy(e,Sl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;tl(t,e),t=e.pendingProps;var i=ts(e,gt.current);Qi(e,n),i=cd(null,e,r,t,i,n);var s=hd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pt(r)?(s=!0,wl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,sd(e),i.updater=ou,e.stateNode=i,i._reactInternals=e,Yc(e,r,t,n),e=Zc(null,e,r,!0,s,n)):(e.tag=0,Ae&&s&&Xh(e),wt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(tl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=SE(r),t=rn(r,t),i){case 0:e=Xc(null,e,r,t,n);break e;case 1:e=Ap(null,e,r,t,n);break e;case 11:e=Cp(null,e,r,t,n);break e;case 14:e=xp(null,e,r,rn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Xc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Ap(t,e,r,i,n);case 3:e:{if(Fy(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,i=s.element,dy(t,e),xl(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ss(Error(B(423)),e),e=kp(t,e,r,n,i);break e}else if(r!==i){i=ss(Error(B(424)),e),e=kp(t,e,r,n,i);break e}else for(Lt=dr(e.stateNode.containerInfo.firstChild),jt=e,Ae=!0,on=null,n=cy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ns(),r===i){e=Fn(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return fy(e),t===null&&Kc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Uc(r,i)?a=null:s!==null&&Uc(r,s)&&(e.flags|=32),My(t,e),wt(t,e,a,n),e.child;case 6:return t===null&&Kc(e),null;case 13:return zy(t,e,n);case 4:return od(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=rs(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),Cp(t,e,r,i,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Te(Il,r._currentValue),r._currentValue=a,s!==null)if(hn(s.value,a)){if(s.children===i.children&&!Rt.current){e=Fn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=bn(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Gc(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(B(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Gc(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}wt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Qi(e,n),i=Yt(i),r=r(i),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,i=rn(r,e.pendingProps),i=rn(r.type,i),xp(t,e,r,i,n);case 15:return jy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),tl(t,e),e.tag=1,Pt(r)?(t=!0,wl(e)):t=!1,Qi(e,n),Ny(e,r,i),Yc(e,r,i,n),Zc(null,e,r,!0,t,n);case 19:return By(t,e,n);case 22:return Oy(t,e,n)}throw Error(B(156,e.tag))};function rv(t,e){return Pg(t,e)}function TE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,e,n,r){return new TE(t,e,n,r)}function wd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function SE(t){if(typeof t=="function")return wd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zh)return 11;if(t===Bh)return 14}return 2}function gr(t,e){var n=t.alternate;return n===null?(n=Gt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function il(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")wd(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case bi:return Xr(n.children,i,s,e);case Fh:a=8,i|=8;break;case Ec:return t=Gt(12,n,e,i|2),t.elementType=Ec,t.lanes=s,t;case wc:return t=Gt(13,n,e,i),t.elementType=wc,t.lanes=s,t;case Tc:return t=Gt(19,n,e,i),t.elementType=Tc,t.lanes=s,t;case fg:return uu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hg:a=10;break e;case dg:a=9;break e;case zh:a=11;break e;case Bh:a=14;break e;case nr:a=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Gt(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Xr(t,e,n,r){return t=Gt(7,t,r,e),t.lanes=n,t}function uu(t,e,n,r){return t=Gt(22,t,r,e),t.elementType=fg,t.lanes=n,t.stateNode={isHidden:!1},t}function ac(t,e,n){return t=Gt(6,t,null,e),t.lanes=n,t}function lc(t,e,n){return e=Gt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function IE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uu(0),this.expirationTimes=Uu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Td(t,e,n,r,i,s,a,l,u){return t=new IE(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Gt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sd(s),t}function CE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ni,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function iv(t){if(!t)return Tr;t=t._reactInternals;e:{if(li(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Pt(n))return iy(t,n,e)}return e}function sv(t,e,n,r,i,s,a,l,u){return t=Td(n,r,!0,t,i,s,a,l,u),t.context=iv(null),n=t.current,r=Tt(),i=mr(n),s=bn(r,i),s.callback=e??null,fr(n,s,i),t.current.lanes=i,Jo(t,i,r),Dt(t,r),t}function cu(t,e,n,r){var i=e.current,s=Tt(),a=mr(i);return n=iv(n),e.context===null?e.context=n:e.pendingContext=n,e=bn(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fr(i,e,a),t!==null&&(un(t,i,a,s),Xa(t,i,a)),a}function bl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Sd(t,e){Mp(t,e),(t=t.alternate)&&Mp(t,e)}function xE(){return null}var ov=typeof reportError=="function"?reportError:function(t){console.error(t)};function Id(t){this._internalRoot=t}hu.prototype.render=Id.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));cu(t,e,null,null)};hu.prototype.unmount=Id.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ii(function(){cu(null,t,null,null)}),e[On]=null}};function hu(t){this._internalRoot=t}hu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Og();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ir.length&&e!==0&&e<ir[n].priority;n++);ir.splice(n,0,t),n===0&&Fg(t)}};function Cd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function du(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fp(){}function AE(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=bl(a);s.call(h)}}var a=sv(e,r,t,0,null,!1,!1,"",Fp);return t._reactRootContainer=a,t[On]=a.current,Do(t.nodeType===8?t.parentNode:t),ii(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=bl(u);l.call(h)}}var u=Td(t,0,!1,null,null,!1,!1,"",Fp);return t._reactRootContainer=u,t[On]=u.current,Do(t.nodeType===8?t.parentNode:t),ii(function(){cu(e,u,n,r)}),u}function fu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var u=bl(a);l.call(u)}}cu(e,a,t,i)}else a=AE(n,e,t,i,r);return bl(a)}Lg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=to(e.pendingLanes);n!==0&&(Hh(e,n|1),Dt(e,Fe()),!(fe&6)&&(os=Fe()+500,Dr()))}break;case 13:ii(function(){var r=Mn(t,1);if(r!==null){var i=Tt();un(r,t,1,i)}}),Sd(t,1)}};Wh=function(t){if(t.tag===13){var e=Mn(t,134217728);if(e!==null){var n=Tt();un(e,t,134217728,n)}Sd(t,134217728)}};jg=function(t){if(t.tag===13){var e=mr(t),n=Mn(t,e);if(n!==null){var r=Tt();un(n,t,e,r)}Sd(t,e)}};Og=function(){return _e};Mg=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};Vc=function(t,e,n){switch(e){case"input":if(Cc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ru(r);if(!i)throw Error(B(90));mg(r),Cc(r,i)}}}break;case"textarea":yg(t,n);break;case"select":e=n.value,e!=null&&Wi(t,!!n.multiple,e,!1)}};Ig=vd;Cg=ii;var kE={usingClientEntryPoint:!1,Events:[Zo,Mi,ru,Tg,Sg,vd]},Ks={findFiberByHostInstance:Kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},RE={bundleType:Ks.bundleType,version:Ks.version,rendererPackageName:Ks.rendererPackageName,rendererConfig:Ks.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$n.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=kg(t),t===null?null:t.stateNode},findFiberByHostInstance:Ks.findFiberByHostInstance||xE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!za.isDisabled&&za.supportsFiber)try{Zl=za.inject(RE),wn=za}catch{}}Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kE;Mt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cd(e))throw Error(B(200));return CE(t,e,null,n)};Mt.createRoot=function(t,e){if(!Cd(t))throw Error(B(299));var n=!1,r="",i=ov;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Td(t,1,!1,null,null,n,!1,r,i),t[On]=e.current,Do(t.nodeType===8?t.parentNode:t),new Id(e)};Mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=kg(e),t=t===null?null:t.stateNode,t};Mt.flushSync=function(t){return ii(t)};Mt.hydrate=function(t,e,n){if(!du(e))throw Error(B(200));return fu(null,t,e,!0,n)};Mt.hydrateRoot=function(t,e,n){if(!Cd(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=ov;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=sv(e,null,t,1,n??null,i,!1,s,a),t[On]=e.current,Do(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new hu(e)};Mt.render=function(t,e,n){if(!du(e))throw Error(B(200));return fu(null,t,e,!1,n)};Mt.unmountComponentAtNode=function(t){if(!du(t))throw Error(B(40));return t._reactRootContainer?(ii(function(){fu(null,null,t,!1,function(){t._reactRootContainer=null,t[On]=null})}),!0):!1};Mt.unstable_batchedUpdates=vd;Mt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!du(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return fu(t,e,n,!1,r)};Mt.version="18.3.1-next-f1338f8080-20240426";function av(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(av)}catch(t){console.error(t)}}av(),ag.exports=Mt;var PE=ag.exports,zp=PE;vc.createRoot=zp.createRoot,vc.hydrateRoot=zp.hydrateRoot;const DE=()=>{};var Bp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},VE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},uv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,p=s>>2,v=(s&3)<<4|l>>4;let _=(l&15)<<2|h>>6,R=h&63;u||(R=64,a||(_=64)),r.push(n[p],n[v],n[_],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||v==null)throw new NE;const _=s<<2|l>>4;if(r.push(_),h!==64){const R=l<<4&240|h>>2;if(r.push(R),v!==64){const b=h<<6&192|v;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class NE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bE=function(t){const e=lv(t);return uv.encodeByteArray(e,!0)},Ll=function(t){return bE(t).replace(/\./g,"")},LE=function(t){try{return uv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=()=>jE().__FIREBASE_DEFAULTS__,ME=()=>{if(typeof process>"u"||typeof Bp>"u")return;const t=Bp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LE(t[1]);return e&&JSON.parse(e)},xd=()=>{try{return DE()||OE()||ME()||FE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zE=t=>{var e,n;return(n=(e=xd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},BE=t=>{const e=zE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},cv=()=>{var t;return(t=xd())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $E(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ll(JSON.stringify(n)),Ll(JSON.stringify(a)),""].join(".")}const yo={};function WE(){const t={prod:[],emulator:[]};for(const e of Object.keys(yo))yo[e]?t.emulator.push(e):t.prod.push(e);return t}function qE(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Up=!1;function KE(t,e){if(typeof window>"u"||typeof document>"u"||!Ad(window.location.host)||yo[t]===e||yo[t]||Up)return;yo[t]=e;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",s=WE().prod.length>0;function a(){const _=document.getElementById(r);_&&_.remove()}function l(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function u(_,R){_.setAttribute("width","24"),_.setAttribute("id",R),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function h(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Up=!0,a()},_}function p(_,R){_.setAttribute("id",R),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=qE(r),R=n("text"),b=document.getElementById(R)||document.createElement("span"),j=n("learnmore"),U=document.getElementById(j)||document.createElement("a"),x=n("preprendIcon"),T=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const A=_.element;l(A),p(U,j);const M=h();u(T,x),A.append(T,b,U,M),document.body.appendChild(A)}s?(b.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QE(){var e;const t=(e=xd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YE(){return!QE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JE(){try{return typeof indexedDB=="object"}catch{return!1}}function XE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="FirebaseError";class gs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ZE,Object.setPrototypeOf(this,gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hv.prototype.create)}}class hv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?ew(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new gs(i,l,r)}}function ew(t,e){return t.replace(tw,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const tw=/\{\$([^}]+)}/g;function jl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if($p(s)&&$p(a)){if(!jl(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function $p(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t){return t&&t._delegate?t._delegate:t}class zo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new UE;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iw(e))try{this.getOrInitializeService({instanceIdentifier:qr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qr){return this.instances.has(e)}getOptions(e=qr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qr){return this.component?this.component.multipleInstances?e:qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rw(t){return t===qr?void 0:t}function iw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const ow={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},aw=de.INFO,lw={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},uw=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=lw[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dv{constructor(e){this.name=e,this._logLevel=aw,this._logHandler=uw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ow[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const cw=(t,e)=>e.some(n=>t instanceof n);let Hp,Wp;function hw(){return Hp||(Hp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dw(){return Wp||(Wp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fv=new WeakMap,hh=new WeakMap,pv=new WeakMap,uc=new WeakMap,kd=new WeakMap;function fw(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(yr(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&fv.set(n,t)}).catch(()=>{}),kd.set(e,t),e}function pw(t){if(hh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});hh.set(t,e)}let dh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mw(t){dh=t(dh)}function gw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cc(this),e,...n);return pv.set(r,e.sort?e.sort():[e]),yr(r)}:dw().includes(t)?function(...e){return t.apply(cc(this),e),yr(fv.get(this))}:function(...e){return yr(t.apply(cc(this),e))}}function yw(t){return typeof t=="function"?gw(t):(t instanceof IDBTransaction&&pw(t),cw(t,hw())?new Proxy(t,dh):t)}function yr(t){if(t instanceof IDBRequest)return fw(t);if(uc.has(t))return uc.get(t);const e=yw(t);return e!==t&&(uc.set(t,e),kd.set(e,t)),e}const cc=t=>kd.get(t);function vw(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=yr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(yr(a.result),u.oldVersion,u.newVersion,yr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const _w=["get","getKey","getAll","getAllKeys","count"],Ew=["put","add","delete","clear"],hc=new Map;function qp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hc.get(e))return hc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Ew.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_w.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return hc.set(e,s),s}mw(t=>({...t,get:(e,n,r)=>qp(e,n)||t.get(e,n,r),has:(e,n)=>!!qp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Tw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Tw(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fh="@firebase/app",Kp="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn=new dv("@firebase/app"),Sw="@firebase/app-compat",Iw="@firebase/analytics-compat",Cw="@firebase/analytics",xw="@firebase/app-check-compat",Aw="@firebase/app-check",kw="@firebase/auth",Rw="@firebase/auth-compat",Pw="@firebase/database",Dw="@firebase/data-connect",Vw="@firebase/database-compat",Nw="@firebase/functions",bw="@firebase/functions-compat",Lw="@firebase/installations",jw="@firebase/installations-compat",Ow="@firebase/messaging",Mw="@firebase/messaging-compat",Fw="@firebase/performance",zw="@firebase/performance-compat",Bw="@firebase/remote-config",Uw="@firebase/remote-config-compat",$w="@firebase/storage",Hw="@firebase/storage-compat",Ww="@firebase/firestore",qw="@firebase/ai",Kw="@firebase/firestore-compat",Gw="firebase",Qw="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="[DEFAULT]",Yw={[fh]:"fire-core",[Sw]:"fire-core-compat",[Cw]:"fire-analytics",[Iw]:"fire-analytics-compat",[Aw]:"fire-app-check",[xw]:"fire-app-check-compat",[kw]:"fire-auth",[Rw]:"fire-auth-compat",[Pw]:"fire-rtdb",[Dw]:"fire-data-connect",[Vw]:"fire-rtdb-compat",[Nw]:"fire-fn",[bw]:"fire-fn-compat",[Lw]:"fire-iid",[jw]:"fire-iid-compat",[Ow]:"fire-fcm",[Mw]:"fire-fcm-compat",[Fw]:"fire-perf",[zw]:"fire-perf-compat",[Bw]:"fire-rc",[Uw]:"fire-rc-compat",[$w]:"fire-gcs",[Hw]:"fire-gcs-compat",[Ww]:"fire-fst",[Kw]:"fire-fst-compat",[qw]:"fire-vertex","fire-js":"fire-js",[Gw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=new Map,Jw=new Map,mh=new Map;function Gp(t,e){try{t.container.addComponent(e)}catch(n){zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fl(t){const e=t.name;if(mh.has(e))return zn.debug(`There were multiple attempts to register component ${e}.`),!1;mh.set(e,t);for(const n of Ml.values())Gp(n,t);for(const n of Jw.values())Gp(n,t);return!0}function Xw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zw(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vr=new hv("app","Firebase",eT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=Qw;function mv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ph,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw vr.create("bad-app-name",{appName:String(i)});if(n||(n=cv()),!n)throw vr.create("no-options");const s=Ml.get(i);if(s){if(jl(n,s.options)&&jl(r,s.config))return s;throw vr.create("duplicate-app",{appName:i})}const a=new sw(i);for(const u of mh.values())a.addComponent(u);const l=new tT(n,r,a);return Ml.set(i,l),l}function rT(t=ph){const e=Ml.get(t);if(!e&&t===ph&&cv())return mv();if(!e)throw vr.create("no-app",{appName:t});return e}function Ji(t,e,n){let r=Yw[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zn.warn(a.join(" "));return}Fl(new zo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="firebase-heartbeat-database",sT=1,Bo="firebase-heartbeat-store";let dc=null;function gv(){return dc||(dc=vw(iT,sT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bo)}catch(n){console.warn(n)}}}}).catch(t=>{throw vr.create("idb-open",{originalErrorMessage:t.message})})),dc}async function oT(t){try{const n=(await gv()).transaction(Bo),r=await n.objectStore(Bo).get(yv(t));return await n.done,r}catch(e){if(e instanceof gs)zn.warn(e.message);else{const n=vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zn.warn(n.message)}}}async function Qp(t,e){try{const r=(await gv()).transaction(Bo,"readwrite");await r.objectStore(Bo).put(e,yv(t)),await r.done}catch(n){if(n instanceof gs)zn.warn(n.message);else{const r=vr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zn.warn(r.message)}}}function yv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=1024,lT=30;class uT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Yp();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>lT){const a=dT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){zn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Yp(),{heartbeatsToSend:r,unsentEntries:i}=cT(this._heartbeatsCache.heartbeats),s=Ll(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return zn.warn(n),""}}}function Yp(){return new Date().toISOString().substring(0,10)}function cT(t,e=aT){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Jp(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Jp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class hT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JE()?XE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Qp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Qp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Jp(t){return Ll(JSON.stringify({version:2,heartbeats:t})).length}function dT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){Fl(new zo("platform-logger",e=>new ww(e),"PRIVATE")),Fl(new zo("heartbeat",e=>new uT(e),"PRIVATE")),Ji(fh,Kp,t),Ji(fh,Kp,"esm2020"),Ji("fire-js","")}fT("");var pT="firebase",mT="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ji(pT,mT,"app");var Xp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _r,vv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function w(){}w.prototype=y.prototype,E.F=y.prototype,E.prototype=new w,E.prototype.constructor=E,E.D=function(I,C,P){for(var S=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)S[Ne-2]=arguments[Ne];return y.prototype[C].apply(I,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,y,w){w||(w=0);const I=Array(16);if(typeof y=="string")for(var C=0;C<16;++C)I[C]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(C=0;C<16;++C)I[C]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=E.g[0],w=E.g[1],C=E.g[2];let P=E.g[3],S;S=y+(P^w&(C^P))+I[0]+3614090360&4294967295,y=w+(S<<7&4294967295|S>>>25),S=P+(C^y&(w^C))+I[1]+3905402710&4294967295,P=y+(S<<12&4294967295|S>>>20),S=C+(w^P&(y^w))+I[2]+606105819&4294967295,C=P+(S<<17&4294967295|S>>>15),S=w+(y^C&(P^y))+I[3]+3250441966&4294967295,w=C+(S<<22&4294967295|S>>>10),S=y+(P^w&(C^P))+I[4]+4118548399&4294967295,y=w+(S<<7&4294967295|S>>>25),S=P+(C^y&(w^C))+I[5]+1200080426&4294967295,P=y+(S<<12&4294967295|S>>>20),S=C+(w^P&(y^w))+I[6]+2821735955&4294967295,C=P+(S<<17&4294967295|S>>>15),S=w+(y^C&(P^y))+I[7]+4249261313&4294967295,w=C+(S<<22&4294967295|S>>>10),S=y+(P^w&(C^P))+I[8]+1770035416&4294967295,y=w+(S<<7&4294967295|S>>>25),S=P+(C^y&(w^C))+I[9]+2336552879&4294967295,P=y+(S<<12&4294967295|S>>>20),S=C+(w^P&(y^w))+I[10]+4294925233&4294967295,C=P+(S<<17&4294967295|S>>>15),S=w+(y^C&(P^y))+I[11]+2304563134&4294967295,w=C+(S<<22&4294967295|S>>>10),S=y+(P^w&(C^P))+I[12]+1804603682&4294967295,y=w+(S<<7&4294967295|S>>>25),S=P+(C^y&(w^C))+I[13]+4254626195&4294967295,P=y+(S<<12&4294967295|S>>>20),S=C+(w^P&(y^w))+I[14]+2792965006&4294967295,C=P+(S<<17&4294967295|S>>>15),S=w+(y^C&(P^y))+I[15]+1236535329&4294967295,w=C+(S<<22&4294967295|S>>>10),S=y+(C^P&(w^C))+I[1]+4129170786&4294967295,y=w+(S<<5&4294967295|S>>>27),S=P+(w^C&(y^w))+I[6]+3225465664&4294967295,P=y+(S<<9&4294967295|S>>>23),S=C+(y^w&(P^y))+I[11]+643717713&4294967295,C=P+(S<<14&4294967295|S>>>18),S=w+(P^y&(C^P))+I[0]+3921069994&4294967295,w=C+(S<<20&4294967295|S>>>12),S=y+(C^P&(w^C))+I[5]+3593408605&4294967295,y=w+(S<<5&4294967295|S>>>27),S=P+(w^C&(y^w))+I[10]+38016083&4294967295,P=y+(S<<9&4294967295|S>>>23),S=C+(y^w&(P^y))+I[15]+3634488961&4294967295,C=P+(S<<14&4294967295|S>>>18),S=w+(P^y&(C^P))+I[4]+3889429448&4294967295,w=C+(S<<20&4294967295|S>>>12),S=y+(C^P&(w^C))+I[9]+568446438&4294967295,y=w+(S<<5&4294967295|S>>>27),S=P+(w^C&(y^w))+I[14]+3275163606&4294967295,P=y+(S<<9&4294967295|S>>>23),S=C+(y^w&(P^y))+I[3]+4107603335&4294967295,C=P+(S<<14&4294967295|S>>>18),S=w+(P^y&(C^P))+I[8]+1163531501&4294967295,w=C+(S<<20&4294967295|S>>>12),S=y+(C^P&(w^C))+I[13]+2850285829&4294967295,y=w+(S<<5&4294967295|S>>>27),S=P+(w^C&(y^w))+I[2]+4243563512&4294967295,P=y+(S<<9&4294967295|S>>>23),S=C+(y^w&(P^y))+I[7]+1735328473&4294967295,C=P+(S<<14&4294967295|S>>>18),S=w+(P^y&(C^P))+I[12]+2368359562&4294967295,w=C+(S<<20&4294967295|S>>>12),S=y+(w^C^P)+I[5]+4294588738&4294967295,y=w+(S<<4&4294967295|S>>>28),S=P+(y^w^C)+I[8]+2272392833&4294967295,P=y+(S<<11&4294967295|S>>>21),S=C+(P^y^w)+I[11]+1839030562&4294967295,C=P+(S<<16&4294967295|S>>>16),S=w+(C^P^y)+I[14]+4259657740&4294967295,w=C+(S<<23&4294967295|S>>>9),S=y+(w^C^P)+I[1]+2763975236&4294967295,y=w+(S<<4&4294967295|S>>>28),S=P+(y^w^C)+I[4]+1272893353&4294967295,P=y+(S<<11&4294967295|S>>>21),S=C+(P^y^w)+I[7]+4139469664&4294967295,C=P+(S<<16&4294967295|S>>>16),S=w+(C^P^y)+I[10]+3200236656&4294967295,w=C+(S<<23&4294967295|S>>>9),S=y+(w^C^P)+I[13]+681279174&4294967295,y=w+(S<<4&4294967295|S>>>28),S=P+(y^w^C)+I[0]+3936430074&4294967295,P=y+(S<<11&4294967295|S>>>21),S=C+(P^y^w)+I[3]+3572445317&4294967295,C=P+(S<<16&4294967295|S>>>16),S=w+(C^P^y)+I[6]+76029189&4294967295,w=C+(S<<23&4294967295|S>>>9),S=y+(w^C^P)+I[9]+3654602809&4294967295,y=w+(S<<4&4294967295|S>>>28),S=P+(y^w^C)+I[12]+3873151461&4294967295,P=y+(S<<11&4294967295|S>>>21),S=C+(P^y^w)+I[15]+530742520&4294967295,C=P+(S<<16&4294967295|S>>>16),S=w+(C^P^y)+I[2]+3299628645&4294967295,w=C+(S<<23&4294967295|S>>>9),S=y+(C^(w|~P))+I[0]+4096336452&4294967295,y=w+(S<<6&4294967295|S>>>26),S=P+(w^(y|~C))+I[7]+1126891415&4294967295,P=y+(S<<10&4294967295|S>>>22),S=C+(y^(P|~w))+I[14]+2878612391&4294967295,C=P+(S<<15&4294967295|S>>>17),S=w+(P^(C|~y))+I[5]+4237533241&4294967295,w=C+(S<<21&4294967295|S>>>11),S=y+(C^(w|~P))+I[12]+1700485571&4294967295,y=w+(S<<6&4294967295|S>>>26),S=P+(w^(y|~C))+I[3]+2399980690&4294967295,P=y+(S<<10&4294967295|S>>>22),S=C+(y^(P|~w))+I[10]+4293915773&4294967295,C=P+(S<<15&4294967295|S>>>17),S=w+(P^(C|~y))+I[1]+2240044497&4294967295,w=C+(S<<21&4294967295|S>>>11),S=y+(C^(w|~P))+I[8]+1873313359&4294967295,y=w+(S<<6&4294967295|S>>>26),S=P+(w^(y|~C))+I[15]+4264355552&4294967295,P=y+(S<<10&4294967295|S>>>22),S=C+(y^(P|~w))+I[6]+2734768916&4294967295,C=P+(S<<15&4294967295|S>>>17),S=w+(P^(C|~y))+I[13]+1309151649&4294967295,w=C+(S<<21&4294967295|S>>>11),S=y+(C^(w|~P))+I[4]+4149444226&4294967295,y=w+(S<<6&4294967295|S>>>26),S=P+(w^(y|~C))+I[11]+3174756917&4294967295,P=y+(S<<10&4294967295|S>>>22),S=C+(y^(P|~w))+I[2]+718787259&4294967295,C=P+(S<<15&4294967295|S>>>17),S=w+(P^(C|~y))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(C+(S<<21&4294967295|S>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+P&4294967295}r.prototype.v=function(E,y){y===void 0&&(y=E.length);const w=y-this.blockSize,I=this.C;let C=this.h,P=0;for(;P<y;){if(C==0)for(;P<=w;)i(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<y;)if(I[C++]=E.charCodeAt(P++),C==this.blockSize){i(this,I),C=0;break}}else for(;P<y;)if(I[C++]=E[P++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=y},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;y=this.o*8;for(var w=E.length-8;w<E.length;++w)E[w]=y&255,y/=256;for(this.v(E),E=Array(16),y=0,w=0;w<4;++w)for(let I=0;I<32;I+=8)E[y++]=this.g[w]>>>I&255;return E};function s(E,y){var w=l;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=y(E)}function a(E,y){this.h=y;const w=[];let I=!0;for(let C=E.length-1;C>=0;C--){const P=E[C]|0;I&&P==y||(w[C]=P,I=!1)}this.g=w}var l={};function u(E){return-128<=E&&E<128?s(E,function(y){return new a([y|0],y<0?-1:0)}):new a([E|0],E<0?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return v;if(E<0)return U(h(-E));const y=[];let w=1;for(let I=0;E>=w;I++)y[I]=E/w|0,w*=4294967296;return new a(y,0)}function p(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return U(p(E.substring(1),y));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=h(Math.pow(y,8));let I=v;for(let P=0;P<E.length;P+=8){var C=Math.min(8,E.length-P);const S=parseInt(E.substring(P,P+C),y);C<8?(C=h(Math.pow(y,C)),I=I.j(C).add(h(S))):(I=I.j(w),I=I.add(h(S)))}return I}var v=u(0),_=u(1),R=u(16777216);t=a.prototype,t.m=function(){if(j(this))return-U(this).m();let E=0,y=1;for(let w=0;w<this.g.length;w++){const I=this.i(w);E+=(I>=0?I:4294967296+I)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(j(this))return"-"+U(this).toString(E);const y=h(Math.pow(E,6));var w=this;let I="";for(;;){const C=M(w,y).g;w=x(w,C.j(y));let P=((w.g.length>0?w.g[0]:w.h)>>>0).toString(E);if(w=C,b(w))return P+I;for(;P.length<6;)P="0"+P;I=P+I}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(let y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function j(E){return E.h==-1}t.l=function(E){return E=x(this,E),j(E)?-1:b(E)?0:1};function U(E){const y=E.g.length,w=[];for(let I=0;I<y;I++)w[I]=~E.g[I];return new a(w,~E.h).add(_)}t.abs=function(){return j(this)?U(this):this},t.add=function(E){const y=Math.max(this.g.length,E.g.length),w=[];let I=0;for(let C=0;C<=y;C++){let P=I+(this.i(C)&65535)+(E.i(C)&65535),S=(P>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);I=S>>>16,P&=65535,S&=65535,w[C]=S<<16|P}return new a(w,w[w.length-1]&-2147483648?-1:0)};function x(E,y){return E.add(U(y))}t.j=function(E){if(b(this)||b(E))return v;if(j(this))return j(E)?U(this).j(U(E)):U(U(this).j(E));if(j(E))return U(this.j(U(E)));if(this.l(R)<0&&E.l(R)<0)return h(this.m()*E.m());const y=this.g.length+E.g.length,w=[];for(var I=0;I<2*y;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(let C=0;C<E.g.length;C++){const P=this.i(I)>>>16,S=this.i(I)&65535,Ne=E.i(C)>>>16,yt=E.i(C)&65535;w[2*I+2*C]+=S*yt,T(w,2*I+2*C),w[2*I+2*C+1]+=P*yt,T(w,2*I+2*C+1),w[2*I+2*C+1]+=S*Ne,T(w,2*I+2*C+1),w[2*I+2*C+2]+=P*Ne,T(w,2*I+2*C+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new a(w,0)};function T(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function A(E,y){this.g=E,this.h=y}function M(E,y){if(b(y))throw Error("division by zero");if(b(E))return new A(v,v);if(j(E))return y=M(U(E),y),new A(U(y.g),U(y.h));if(j(y))return y=M(E,U(y)),new A(U(y.g),y.h);if(E.g.length>30){if(j(E)||j(y))throw Error("slowDivide_ only works with positive integers.");for(var w=_,I=y;I.l(E)<=0;)w=H(w),I=H(I);var C=q(w,1),P=q(I,1);for(I=q(I,2),w=q(w,2);!b(I);){var S=P.add(I);S.l(E)<=0&&(C=C.add(w),P=S),I=q(I,1),w=q(w,1)}return y=x(E,C.j(y)),new A(C,y)}for(C=v;E.l(y)>=0;){for(w=Math.max(1,Math.floor(E.m()/y.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),P=h(w),S=P.j(y);j(S)||S.l(E)>0;)w-=I,P=h(w),S=P.j(y);b(P)&&(P=_),C=C.add(P),E=x(E,S)}return new A(C,E)}t.B=function(E){return M(this,E).h},t.and=function(E){const y=Math.max(this.g.length,E.g.length),w=[];for(let I=0;I<y;I++)w[I]=this.i(I)&E.i(I);return new a(w,this.h&E.h)},t.or=function(E){const y=Math.max(this.g.length,E.g.length),w=[];for(let I=0;I<y;I++)w[I]=this.i(I)|E.i(I);return new a(w,this.h|E.h)},t.xor=function(E){const y=Math.max(this.g.length,E.g.length),w=[];for(let I=0;I<y;I++)w[I]=this.i(I)^E.i(I);return new a(w,this.h^E.h)};function H(E){const y=E.g.length+1,w=[];for(let I=0;I<y;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new a(w,E.h)}function q(E,y){const w=y>>5;y%=32;const I=E.g.length-w,C=[];for(let P=0;P<I;P++)C[P]=y>0?E.i(P+w)>>>y|E.i(P+w+1)<<32-y:E.i(P+w);return new a(C,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,vv=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,_r=a}).apply(typeof Xp<"u"?Xp:typeof self<"u"?self:typeof window<"u"?window:{});var Ba=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _v,ro,Ev,sl,gh,wv,Tv,Sv;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ba=="object"&&Ba];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(o,c){if(c)e:{var d=r;o=o.split(".");for(var g=0;g<o.length-1;g++){var D=o[g];if(!(D in d))break e;d=d[D]}o=o[o.length-1],g=d[o],c=c(g),c!=g&&c!=null&&e(d,o,{configurable:!0,writable:!0,value:c})}}i("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(o){return o||function(c){var d=[],g;for(g in c)Object.prototype.hasOwnProperty.call(c,g)&&d.push([g,c[g]]);return d}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function u(o,c,d){return o.call.apply(o.bind,arguments)}function h(o,c,d){return h=u,h.apply(null,arguments)}function p(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function v(o,c){function d(){}d.prototype=c.prototype,o.Z=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Ob=function(g,D,V){for(var W=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)W[oe-2]=arguments[oe];return c.prototype[D].apply(g,W)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function R(o){const c=o.length;if(c>0){const d=Array(c);for(let g=0;g<c;g++)d[g]=o[g];return d}return[]}function b(o,c){for(let g=1;g<arguments.length;g++){const D=arguments[g];var d=typeof D;if(d=d!="object"?d:D?Array.isArray(D)?"array":d:"null",d=="array"||d=="object"&&typeof D.length=="number"){d=o.length||0;const V=D.length||0;o.length=d+V;for(let W=0;W<V;W++)o[d+W]=D[W]}else o.push(D)}}class j{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function U(o){a.setTimeout(()=>{throw o},0)}function x(){var o=E;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class T{constructor(){this.h=this.g=null}add(c,d){const g=A.get();g.set(c,d),this.h?this.h.next=g:this.g=g,this.h=g}}var A=new j(()=>new M,o=>o.reset());class M{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let H,q=!1,E=new T,y=()=>{const o=Promise.resolve(void 0);H=()=>{o.then(w)}};function w(){for(var o;o=x();){try{o.h.call(o.g)}catch(d){U(d)}var c=A;c.j(o),c.h<100&&(c.h++,o.next=c.g,c.g=o)}q=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};a.addEventListener("test",d,c),a.removeEventListener("test",d,c)}catch{}return o}();function S(o){return/^[\s\xa0]*$/.test(o)}function Ne(o,c){C.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,c)}v(Ne,C),Ne.prototype.init=function(o,c){const d=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget,c||(d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement)),this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var yt="closure_listenable_"+(Math.random()*1e6|0),zt=0;function Hn(o,c,d,g,D){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!g,this.ha=D,this.key=++zt,this.da=this.fa=!1}function $(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Z(o,c,d){for(const g in o)c.call(d,o[g],g,o)}function re(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function ye(o){const c={};for(const d in o)c[d]=o[d];return c}const Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bt(o,c){let d,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(d in g)o[d]=g[d];for(let V=0;V<Ee.length;V++)d=Ee[V],Object.prototype.hasOwnProperty.call(g,d)&&(o[d]=g[d])}}function at(o){this.src=o,this.g={},this.h=0}at.prototype.add=function(o,c,d,g,D){const V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);const W=Vt(o,c,g,D);return W>-1?(c=o[W],d||(c.fa=!1)):(c=new Hn(c,this.src,V,!!g,D),c.fa=d,o.push(c)),c};function Ut(o,c){const d=c.type;if(d in o.g){var g=o.g[d],D=Array.prototype.indexOf.call(g,c,void 0),V;(V=D>=0)&&Array.prototype.splice.call(g,D,1),V&&($(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Vt(o,c,d,g){for(let D=0;D<o.length;++D){const V=o[D];if(!V.da&&V.listener==c&&V.capture==!!d&&V.ha==g)return D}return-1}var Xt="closure_lm_"+(Math.random()*1e6|0),dn={};function ws(o,c,d,g,D){if(Array.isArray(c)){for(let V=0;V<c.length;V++)ws(o,c[V],d,g,D);return null}return d=kn(d),o&&o[yt]?o.J(c,d,l(g)?!!g.capture:!1,D):fi(o,c,d,!1,g,D)}function fi(o,c,d,g,D,V){if(!c)throw Error("Invalid event type");const W=l(D)?!!D.capture:!!D;let oe=vt(o);if(oe||(o[Xt]=oe=new at(o)),d=oe.add(c,d,g,W,V),d.proxy)return d;if(g=Vr(),d.proxy=g,g.src=o,g.listener=d,o.addEventListener)P||(D=W),D===void 0&&(D=!1),o.addEventListener(c.toString(),g,D);else if(o.attachEvent)o.attachEvent(lt(c.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Vr(){function o(d){return c.call(o.src,o.listener,d)}const c=Nr;return o}function oa(o,c,d,g,D){if(Array.isArray(c))for(var V=0;V<c.length;V++)oa(o,c[V],d,g,D);else g=l(g)?!!g.capture:!!g,d=kn(d),o&&o[yt]?(o=o.i,V=String(c).toString(),V in o.g&&(c=o.g[V],d=Vt(c,d,g,D),d>-1&&($(c[d]),Array.prototype.splice.call(c,d,1),c.length==0&&(delete o.g[V],o.h--)))):o&&(o=vt(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Vt(c,d,g,D)),(d=o>-1?c[o]:null)&&pi(d))}function pi(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[yt])Ut(c.i,o);else{var d=o.type,g=o.proxy;c.removeEventListener?c.removeEventListener(d,g,o.capture):c.detachEvent?c.detachEvent(lt(d),g):c.addListener&&c.removeListener&&c.removeListener(g),(d=vt(c))?(Ut(d,o),d.h==0&&(d.src=null,c[Xt]=null)):$(o)}}}function lt(o){return o in dn?dn[o]:dn[o]="on"+o}function Nr(o,c){if(o.da)o=!0;else{c=new Ne(c,this);const d=o.listener,g=o.ha||o.src;o.fa&&pi(o),o=d.call(g,c)}return o}function vt(o){return o=o[Xt],o instanceof at?o:null}var br="__closure_events_fn_"+(Math.random()*1e9>>>0);function kn(o){return typeof o=="function"?o:(o[br]||(o[br]=function(c){return o.handleEvent(c)}),o[br])}function $e(){I.call(this),this.i=new at(this),this.M=this,this.G=null}v($e,I),$e.prototype[yt]=!0,$e.prototype.removeEventListener=function(o,c,d,g){oa(this,o,c,d,g)};function Se(o,c){var d,g=o.G;if(g)for(d=[];g;g=g.G)d.push(g);if(o=o.M,g=c.type||c,typeof c=="string")c=new C(c,o);else if(c instanceof C)c.target=c.target||o;else{var D=c;c=new C(g,o),Bt(c,D)}D=!0;let V,W;if(d)for(W=d.length-1;W>=0;W--)V=c.g=d[W],D=Zt(V,g,!0,c)&&D;if(V=c.g=o,D=Zt(V,g,!0,c)&&D,D=Zt(V,g,!1,c)&&D,d)for(W=0;W<d.length;W++)V=c.g=d[W],D=Zt(V,g,!1,c)&&D}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var o=this.i;for(const c in o.g){const d=o.g[c];for(let g=0;g<d.length;g++)$(d[g]);delete o.g[c],o.h--}}this.G=null},$e.prototype.J=function(o,c,d,g){return this.i.add(String(o),c,!1,d,g)},$e.prototype.K=function(o,c,d,g){return this.i.add(String(o),c,!0,d,g)};function Zt(o,c,d,g){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();let D=!0;for(let V=0;V<c.length;++V){const W=c[V];if(W&&!W.da&&W.capture==d){const oe=W.listener,He=W.ha||W.src;W.fa&&Ut(o.i,W),D=oe.call(He,g)!==!1&&D}}return D&&!g.defaultPrevented}function _t(o,c){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=h(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:a.setTimeout(o,c||0)}function be(o){o.g=_t(()=>{o.g=null,o.i&&(o.i=!1,be(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class mi extends I{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:be(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function en(o){I.call(this),this.h=o,this.g={}}v(en,I);var tn=[];function aa(o){Z(o.g,function(c,d){this.g.hasOwnProperty(d)&&pi(c)},o),o.g={}}en.prototype.N=function(){en.Z.N.call(this),aa(this)},en.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wn=a.JSON.stringify,Ts=a.JSON.parse,pe=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function ve(){}function Lr(){}var qn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ss(){C.call(this,"d")}v(Ss,C);function Oe(){C.call(this,"c")}v(Oe,C);var fn={},Is=null;function jr(){return Is=Is||new $e}fn.Ia="serverreachability";function gi(o){C.call(this,fn.Ia,o)}v(gi,C);function Or(o){const c=jr();Se(c,new gi(c))}fn.STAT_EVENT="statevent";function la(o,c){C.call(this,fn.STAT_EVENT,o),this.stat=c}v(la,C);function et(o){const c=jr();Se(c,new la(c,o))}fn.Ja="timingevent";function ua(o,c){C.call(this,fn.Ja,o),this.size=c}v(ua,C);function Mr(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},c)}function Fr(){this.g=!0}Fr.prototype.ua=function(){this.g=!1};function xu(o,c,d,g,D,V){o.info(function(){if(o.g)if(V){var W="",oe=V.split("&");for(let we=0;we<oe.length;we++){var He=oe[we].split("=");if(He.length>1){const Qe=He[0];He=He[1];const gn=Qe.split("_");W=gn.length>=2&&gn[1]=="type"?W+(Qe+"="+He+"&"):W+(Qe+"=redacted&")}}}else W=null;else W=V;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+c+`
`+d+`
`+W})}function Au(o,c,d,g,D,V,W){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+c+`
`+d+`
`+V+" "+W})}function Kn(o,c,d,g){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+Ru(o,d)+(g?" "+g:"")})}function ku(o,c){o.info(function(){return"TIMEOUT: "+c})}Fr.prototype.info=function(){};function Ru(o,c){if(!o.g)return c;if(!c)return null;try{const V=JSON.parse(c);if(V){for(o=0;o<V.length;o++)if(Array.isArray(V[o])){var d=V[o];if(!(d.length<2)){var g=d[1];if(Array.isArray(g)&&!(g.length<1)){var D=g[0];if(D!="noop"&&D!="stop"&&D!="close")for(let W=1;W<g.length;W++)g[W]=""}}}}return Wn(V)}catch{return c}}var yi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ca;function Cs(){}v(Cs,ve),Cs.prototype.g=function(){return new XMLHttpRequest},ca=new Cs;function zr(o){return encodeURIComponent(String(o))}function Pu(o){var c=1;o=o.split(":");const d=[];for(;c>0&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function pn(o,c,d,g){this.j=o,this.i=c,this.l=d,this.S=g||1,this.V=new en(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ha}function ha(){this.i=null,this.g="",this.h=!1}var da={},xs={};function _i(o,c,d){o.M=1,o.A=me(N(c)),o.u=d,o.R=!0,fa(o,null)}function fa(o,c){o.F=Date.now(),wi(o),o.B=N(o.A);var d=o.B,g=o.S;Array.isArray(g)||(g=[String(g)]),cf(d.i,"t",g),o.C=0,d=o.j.L,o.h=new ha,o.g=kf(o.j,d?c:null,!o.u),o.P>0&&(o.O=new mi(h(o.Y,o,o.g),o.P)),c=o.V,d=o.g,g=o.ba;var D="readystatechange";Array.isArray(D)||(D&&(tn[0]=D.toString()),D=tn);for(let V=0;V<D.length;V++){const W=ws(d,D[V],g||c.handleEvent,!1,c.h||c);if(!W)break;c.g[W.key]=W}c=o.J?ye(o.J):{},o.u?(o.v||(o.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,c)):(o.v="GET",o.g.ea(o.B,o.v,null,c)),Or(),xu(o.i,o.v,o.B,o.l,o.S,o.u)}pn.prototype.ba=function(o){o=o.target;const c=this.O;c&&Qn(o)==3?c.j():this.Y(o)},pn.prototype.Y=function(o){try{if(o==this.g)e:{const oe=Qn(this.g),He=this.g.ya(),we=this.g.ca();if(!(oe<3)&&(oe!=3||this.g&&(this.h.h||this.g.la()||yf(this.g)))){this.K||oe!=4||He==7||(He==8||we<=0?Or(3):Or(2)),Ti(this);var c=this.g.ca();this.X=c;var d=As(this);if(this.o=c==200,Au(this.i,this.v,this.B,this.l,this.S,oe,c),this.o){if(this.U&&!this.L){t:{if(this.g){var g,D=this.g;if((g=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(g)){var V=g;break t}}V=null}if(o=V)Kn(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Si(this,o);else{this.o=!1,this.m=3,et(12),F(this),mn(this);break e}}if(this.R){o=!0;let Qe;for(;!this.K&&this.C<d.length;)if(Qe=ks(this,d),Qe==xs){oe==4&&(this.m=4,et(14),o=!1),Kn(this.i,this.l,null,"[Incomplete Response]");break}else if(Qe==da){this.m=4,et(15),Kn(this.i,this.l,d,"[Invalid Chunk]"),o=!1;break}else Kn(this.i,this.l,Qe,null),Si(this,Qe);if(Ei(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),oe!=4||d.length!=0||this.h.h||(this.m=1,et(16),o=!1),this.o=this.o&&o,!o)Kn(this.i,this.l,d,"[Invalid Chunked Response]"),F(this),mn(this);else if(d.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),Lu(W),W.P=!0,et(11))}}else Kn(this.i,this.l,d,null),Si(this,d);oe==4&&F(this),this.o&&!this.K&&(oe==4?If(this.j,this):(this.o=!1,wi(this)))}else t0(this.g),c==400&&d.indexOf("Unknown SID")>0?(this.m=3,et(12)):(this.m=0,et(13)),F(this),mn(this)}}}catch{}finally{}};function As(o){if(!Ei(o))return o.g.la();const c=yf(o.g);if(c==="")return"";let d="";const g=c.length,D=Qn(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return F(o),mn(o),"";o.h.i=new a.TextDecoder}for(let V=0;V<g;V++)o.h.h=!0,d+=o.h.i.decode(c[V],{stream:!(D&&V==g-1)});return c.length=0,o.h.g+=d,o.C=0,o.h.g}function Ei(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function ks(o,c){var d=o.C,g=c.indexOf(`
`,d);return g==-1?xs:(d=Number(c.substring(d,g)),isNaN(d)?da:(g+=1,g+d>c.length?xs:(c=c.slice(g,g+d),o.C=g+d,c)))}pn.prototype.cancel=function(){this.K=!0,F(this)};function wi(o){o.T=Date.now()+o.H,pa(o,o.H)}function pa(o,c){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Mr(h(o.aa,o),c)}function Ti(o){o.D&&(a.clearTimeout(o.D),o.D=null)}pn.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(ku(this.i,this.B),this.M!=2&&(Or(),et(17)),F(this),this.m=2,mn(this)):pa(this,this.T-o)};function mn(o){o.j.I==0||o.K||If(o.j,o)}function F(o){Ti(o);var c=o.O;c&&typeof c.dispose=="function"&&c.dispose(),o.O=null,aa(o.V),o.g&&(c=o.g,o.g=null,c.abort(),c.dispose())}function Si(o,c){try{var d=o.j;if(d.I!=0&&(d.g==o||Ii(d.h,o))){if(!o.L&&Ii(d.h,o)&&d.I==3){try{var g=d.Ba.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<o.F)wa(d),_a(d);else break e;bu(d),et(18)}}else d.xa=D[1],0<d.xa-d.K&&D[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Mr(h(d.Va,d),6e3));Ds(d.h)<=1&&d.ta&&(d.ta=void 0)}else Ur(d,11)}else if((o.L||d.g==o)&&wa(d),!S(c))for(D=d.Ba.g.parse(c),c=0;c<D.length;c++){let we=D[c];const Qe=we[0];if(!(Qe<=d.K))if(d.K=Qe,we=we[1],d.I==2)if(we[0]=="c"){d.M=we[1],d.ba=we[2];const gn=we[3];gn!=null&&(d.ka=gn,d.j.info("VER="+d.ka));const $r=we[4];$r!=null&&(d.za=$r,d.j.info("SVER="+d.za));const Yn=we[5];Yn!=null&&typeof Yn=="number"&&Yn>0&&(g=1.5*Yn,d.O=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const Jn=o.g;if(Jn){const Sa=Jn.g?Jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sa){var V=g.h;V.g||Sa.indexOf("spdy")==-1&&Sa.indexOf("quic")==-1&&Sa.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Ci(V,V.h),V.h=null))}if(g.G){const ju=Jn.g?Jn.g.getResponseHeader("X-HTTP-Session-Id"):null;ju&&(g.wa=ju,J(g.J,g.G,ju))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-o.F,d.j.info("Handshake RTT: "+d.T+"ms")),g=d;var W=o;if(g.na=Af(g,g.L?g.ba:null,g.W),W.L){Vs(g.h,W);var oe=W,He=g.O;He&&(oe.H=He),oe.D&&(Ti(oe),wi(oe)),g.g=W}else Tf(g);d.i.length>0&&Ea(d)}else we[0]!="stop"&&we[0]!="close"||Ur(d,7);else d.I==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?Ur(d,7):Nu(d):we[0]!="noop"&&d.l&&d.l.qa(we),d.A=0)}}Or(4)}catch{}}var ma=class{constructor(o,c){this.g=o,this.map=c}};function Rs(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ps(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Ds(o){return o.h?1:o.g?o.g.size:0}function Ii(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Ci(o,c){o.g?o.g.add(c):o.h=c}function Vs(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Rs.prototype.cancel=function(){if(this.i=Ns(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Ns(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.G);return c}return R(o.i)}var bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function m(o,c){if(o){o=o.split("&");for(let d=0;d<o.length;d++){const g=o[d].indexOf("=");let D,V=null;g>=0?(D=o[d].substring(0,g),V=o[d].substring(g+1)):D=o[d],c(D,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function k(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;o instanceof k?(this.l=o.l,L(this,o.j),this.o=o.o,this.g=o.g,Y(this,o.u),this.h=o.h,ee(this,hf(o.i)),this.m=o.m):o&&(c=String(o).match(bs))?(this.l=!1,L(this,c[1]||"",!0),this.o=ut(c[2]||""),this.g=ut(c[3]||"",!0),Y(this,c[4]),this.h=ut(c[5]||"",!0),ee(this,c[6]||"",!0),this.m=ut(c[7]||"")):(this.l=!1,this.i=new Ls(null,this.l))}k.prototype.toString=function(){const o=[];var c=this.j;c&&o.push(ce(c,Ct,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(ce(c,Ct,!0),"@"),o.push(zr(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&o.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(ce(d,d.charAt(0)=="/"?ga:Rn,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",ce(d,G_)),o.join("")},k.prototype.resolve=function(o){const c=N(this);let d=!!o.j;d?L(c,o.j):d=!!o.o,d?c.o=o.o:d=!!o.g,d?c.g=o.g:d=o.u!=null;var g=o.h;if(d)Y(c,o.u);else if(d=!!o.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var D=c.h.lastIndexOf("/");D!=-1&&(g=c.h.slice(0,D+1)+g)}if(D=g,D==".."||D==".")g="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){g=D.lastIndexOf("/",0)==0,D=D.split("/");const V=[];for(let W=0;W<D.length;){const oe=D[W++];oe=="."?g&&W==D.length&&V.push(""):oe==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),g&&W==D.length&&V.push("")):(V.push(oe),g=!0)}g=V.join("/")}else g=D}return d?c.h=g:d=o.i.toString()!=="",d?ee(c,hf(o.i)):d=!!o.m,d&&(c.m=o.m),c};function N(o){return new k(o)}function L(o,c,d){o.j=d?ut(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Y(o,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);o.u=c}else o.u=null}function ee(o,c,d){c instanceof Ls?(o.i=c,Q_(o.i,o.l)):(d||(c=ce(c,K_)),o.i=new Ls(c,o.l))}function J(o,c,d){o.i.set(c,d)}function me(o){return J(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function ut(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ce(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,Et),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Et(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Ct=/[#\/\?@]/g,Rn=/[#\?:]/g,ga=/[#\?]/g,K_=/[#\?@]/g,G_=/#/g;function Ls(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Br(o){o.g||(o.g=new Map,o.h=0,o.i&&m(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=Ls.prototype,t.add=function(o,c){Br(this),this.i=null,o=xi(this,o);let d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function af(o,c){Br(o),c=xi(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function lf(o,c){return Br(o),c=xi(o,c),o.g.has(c)}t.forEach=function(o,c){Br(this),this.g.forEach(function(d,g){d.forEach(function(D){o.call(c,D,g,this)},this)},this)};function uf(o,c){Br(o);let d=[];if(typeof c=="string")lf(o,c)&&(d=d.concat(o.g.get(xi(o,c))));else for(o=Array.from(o.g.values()),c=0;c<o.length;c++)d=d.concat(o[c]);return d}t.set=function(o,c){return Br(this),this.i=null,o=xi(this,o),lf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=uf(this,o),o.length>0?String(o[0]):c):c};function cf(o,c,d){af(o,c),d.length>0&&(o.i=null,o.g.set(xi(o,c),R(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(let g=0;g<c.length;g++){var d=c[g];const D=zr(d);d=uf(this,d);for(let V=0;V<d.length;V++){let W=D;d[V]!==""&&(W+="="+zr(d[V])),o.push(W)}}return this.i=o.join("&")};function hf(o){const c=new Ls;return c.i=o.i,o.g&&(c.g=new Map(o.g),c.h=o.h),c}function xi(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function Q_(o,c){c&&!o.j&&(Br(o),o.i=null,o.g.forEach(function(d,g){const D=g.toLowerCase();g!=D&&(af(this,g),cf(this,D,d))},o)),o.j=c}function Y_(o,c){const d=new Fr;if(a.Image){const g=new Image;g.onload=p(Gn,d,"TestLoadImage: loaded",!0,c,g),g.onerror=p(Gn,d,"TestLoadImage: error",!1,c,g),g.onabort=p(Gn,d,"TestLoadImage: abort",!1,c,g),g.ontimeout=p(Gn,d,"TestLoadImage: timeout",!1,c,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else c(!1)}function J_(o,c){const d=new Fr,g=new AbortController,D=setTimeout(()=>{g.abort(),Gn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:g.signal}).then(V=>{clearTimeout(D),V.ok?Gn(d,"TestPingServer: ok",!0,c):Gn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(D),Gn(d,"TestPingServer: error",!1,c)})}function Gn(o,c,d,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(d)}catch{}}function X_(){this.g=new pe}function Du(o){this.i=o.Sb||null,this.h=o.ab||!1}v(Du,ve),Du.prototype.g=function(){return new ya(this.i,this.h)};function ya(o,c){$e.call(this),this.H=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(ya,$e),t=ya.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=c,this.readyState=1,Os(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(c.body=o),(this.H||a).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,js(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Os(this)),this.g&&(this.readyState=3,Os(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;df(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function df(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?js(this):Os(this),this.readyState==3&&df(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,js(this))},t.Na=function(o){this.g&&(this.response=o,js(this))},t.ga=function(){this.g&&js(this)};function js(o){o.readyState=4,o.l=null,o.j=null,o.B=null,Os(o)}t.setRequestHeader=function(o,c){this.A.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function Os(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ya.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function ff(o){let c="";return Z(o,function(d,g){c+=g,c+=":",c+=d,c+=`\r
`}),c}function Vu(o,c,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=ff(d),typeof o=="string"?d!=null&&zr(d):J(o,c,d))}function Le(o){$e.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Le,$e);var Z_=/^https?$/i,e0=["POST","PUT"];t=Le.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,c,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ca.g(),this.g.onreadystatechange=_(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(V){pf(this,V);return}if(o=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)d.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const V of g.keys())d.set(V,g.get(V));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(V=>V.toLowerCase()=="content-type"),D=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(e0,c,void 0)>=0)||g||D||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of d)this.g.setRequestHeader(V,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(V){pf(this,V)}};function pf(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.o=5,mf(o),va(o)}function mf(o){o.A||(o.A=!0,Se(o,"complete"),Se(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,Se(this,"complete"),Se(this,"abort"),va(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),va(this,!0)),Le.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?gf(this):this.Xa())},t.Xa=function(){gf(this)};function gf(o){if(o.h&&typeof s<"u"){if(o.v&&Qn(o)==4)setTimeout(o.Ca.bind(o),0);else if(Se(o,"readystatechange"),Qn(o)==4){o.h=!1;try{const V=o.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var g;if(g=V===0){let W=String(o.D).match(bs)[1]||null;!W&&a.self&&a.self.location&&(W=a.self.location.protocol.slice(0,-1)),g=!Z_.test(W?W.toLowerCase():"")}d=g}if(d)Se(o,"complete"),Se(o,"success");else{o.o=6;try{var D=Qn(o)>2?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.ca()+"]",mf(o)}}finally{va(o)}}}}function va(o,c){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const d=o.g;o.g=null,c||Se(o,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Qn(o){return o.g?o.g.readyState:0}t.ca=function(){try{return Qn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Ts(c)}};function yf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function t0(o){const c={};o=(o.g&&Qn(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(S(o[g]))continue;var d=Pu(o[g]);const D=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const V=c[D]||[];c[D]=V,V.push(d)}re(c,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ms(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function vf(o){this.za=0,this.i=[],this.j=new Fr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ms("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ms("baseRetryDelayMs",5e3,o),this.Za=Ms("retryDelaySeedMs",1e4,o),this.Ta=Ms("forwardChannelMaxRetries",2,o),this.va=Ms("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Rs(o&&o.concurrentRequestLimit),this.Ba=new X_,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=vf.prototype,t.ka=8,t.I=1,t.connect=function(o,c,d,g){et(0),this.W=o,this.H=c||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.J=Af(this,null,this.W),Ea(this)};function Nu(o){if(_f(o),o.I==3){var c=o.V++,d=N(o.J);if(J(d,"SID",o.M),J(d,"RID",c),J(d,"TYPE","terminate"),Fs(o,d),c=new pn(o,o.j,c),c.M=2,c.A=me(N(d)),d=!1,a.navigator&&a.navigator.sendBeacon)try{d=a.navigator.sendBeacon(c.A.toString(),"")}catch{}!d&&a.Image&&(new Image().src=c.A,d=!0),d||(c.g=kf(c.j,null),c.g.ea(c.A)),c.F=Date.now(),wi(c)}xf(o)}function _a(o){o.g&&(Lu(o),o.g.cancel(),o.g=null)}function _f(o){_a(o),o.v&&(a.clearTimeout(o.v),o.v=null),wa(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function Ea(o){if(!Ps(o.h)&&!o.m){o.m=!0;var c=o.Ea;H||y(),q||(H(),q=!0),E.add(c,o),o.D=0}}function n0(o,c){return Ds(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=c.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Mr(h(o.Ea,o,c),Cf(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const D=new pn(this,this.j,o);let V=this.o;if(this.U&&(V?(V=ye(V),Bt(V,this.U)):V=this.U),this.u!==null||this.R||(D.J=V,V=null),this.S)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(c+=g,c>4096){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=wf(this,D,c),d=N(this.J),J(d,"RID",o),J(d,"CVER",22),this.G&&J(d,"X-HTTP-Session-Id",this.G),Fs(this,d),V&&(this.R?c="headers="+zr(ff(V))+"&"+c:this.u&&Vu(d,this.u,V)),Ci(this.h,D),this.Ra&&J(d,"TYPE","init"),this.S?(J(d,"$req",c),J(d,"SID","null"),D.U=!0,_i(D,d,null)):_i(D,d,c),this.I=2}}else this.I==3&&(o?Ef(this,o):this.i.length==0||Ps(this.h)||Ef(this))};function Ef(o,c){var d;c?d=c.l:d=o.V++;const g=N(o.J);J(g,"SID",o.M),J(g,"RID",d),J(g,"AID",o.K),Fs(o,g),o.u&&o.o&&Vu(g,o.u,o.o),d=new pn(o,o.j,d,o.D+1),o.u===null&&(d.J=o.o),c&&(o.i=c.G.concat(o.i)),c=wf(o,d,1e3),d.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Ci(o.h,d),_i(d,g,c)}function Fs(o,c){o.H&&Z(o.H,function(d,g){J(c,g,d)}),o.l&&Z({},function(d,g){J(c,g,d)})}function wf(o,c,d){d=Math.min(o.i.length,d);const g=o.l?h(o.l.Ka,o.l,o):null;e:{var D=o.i;let oe=-1;for(;;){const He=["count="+d];oe==-1?d>0?(oe=D[0].g,He.push("ofs="+oe)):oe=0:He.push("ofs="+oe);let we=!0;for(let Qe=0;Qe<d;Qe++){var V=D[Qe].g;const gn=D[Qe].map;if(V-=oe,V<0)oe=Math.max(0,D[Qe].g-100),we=!1;else try{V="req"+V+"_"||"";try{var W=gn instanceof Map?gn:Object.entries(gn);for(const[$r,Yn]of W){let Jn=Yn;l(Yn)&&(Jn=Wn(Yn)),He.push(V+$r+"="+encodeURIComponent(Jn))}}catch($r){throw He.push(V+"type="+encodeURIComponent("_badmap")),$r}}catch{g&&g(gn)}}if(we){W=He.join("&");break e}}W=void 0}return o=o.i.splice(0,d),c.G=o,W}function Tf(o){if(!o.g&&!o.v){o.Y=1;var c=o.Da;H||y(),q||(H(),q=!0),E.add(c,o),o.A=0}}function bu(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Mr(h(o.Da,o),Cf(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,Sf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Mr(h(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,et(10),_a(this),Sf(this))};function Lu(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function Sf(o){o.g=new pn(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var c=N(o.na);J(c,"RID","rpc"),J(c,"SID",o.M),J(c,"AID",o.K),J(c,"CI",o.F?"0":"1"),!o.F&&o.ia&&J(c,"TO",o.ia),J(c,"TYPE","xmlhttp"),Fs(o,c),o.u&&o.o&&Vu(c,o.u,o.o),o.O&&(o.g.H=o.O);var d=o.g;o=o.ba,d.M=1,d.A=me(N(c)),d.u=null,d.R=!0,fa(d,o)}t.Va=function(){this.C!=null&&(this.C=null,_a(this),bu(this),et(19))};function wa(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function If(o,c){var d=null;if(o.g==c){wa(o),Lu(o),o.g=null;var g=2}else if(Ii(o.h,c))d=c.G,Vs(o.h,c),g=1;else return;if(o.I!=0){if(c.o)if(g==1){d=c.u?c.u.length:0,c=Date.now()-c.F;var D=o.D;g=jr(),Se(g,new ua(g,d)),Ea(o)}else Tf(o);else if(D=c.m,D==3||D==0&&c.X>0||!(g==1&&n0(o,c)||g==2&&bu(o)))switch(d&&d.length>0&&(c=o.h,c.i=c.i.concat(d)),D){case 1:Ur(o,5);break;case 4:Ur(o,10);break;case 3:Ur(o,6);break;default:Ur(o,2)}}}function Cf(o,c){let d=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(d*=2),d*c}function Ur(o,c){if(o.j.info("Error code "+c),c==2){var d=h(o.bb,o),g=o.Ua;const D=!g;g=new k(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||L(g,"https"),me(g),D?Y_(g.toString(),d):J_(g.toString(),d)}else et(2);o.I=0,o.l&&o.l.pa(c),xf(o),_f(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function xf(o){if(o.I=0,o.ja=[],o.l){const c=Ns(o.h);(c.length!=0||o.i.length!=0)&&(b(o.ja,c),b(o.ja,o.i),o.h.i.length=0,R(o.i),o.i.length=0),o.l.oa()}}function Af(o,c,d){var g=d instanceof k?N(d):new k(d);if(g.g!="")c&&(g.g=c+"."+g.g),Y(g,g.u);else{var D=a.location;g=D.protocol,c=c?c+"."+D.hostname:D.hostname,D=+D.port;const V=new k(null);g&&L(V,g),c&&(V.g=c),D&&Y(V,D),d&&(V.h=d),g=V}return d=o.G,c=o.wa,d&&c&&J(g,d,c),J(g,"VER",o.ka),Fs(o,g),g}function kf(o,c,d){if(c&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Aa&&!o.ma?new Le(new Du({ab:d})):new Le(o.ma),c.Fa(o.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rf(){}t=Rf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ta(){}Ta.prototype.g=function(o,c){return new Nt(o,c)};function Nt(o,c){$e.call(this),this.g=new vf(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(o?o["X-WebChannel-Client-Profile"]=c.sa:o={"X-WebChannel-Client-Profile":c.sa}),this.g.U=o,(o=c&&c.Qb)&&!S(o)&&(this.g.u=o),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!S(c)&&(this.g.G=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Ai(this)}v(Nt,$e),Nt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){Nu(this.g)},Nt.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.v&&(d={},d.__data__=Wn(o),o=d);c.i.push(new ma(c.Ya++,o)),c.I==3&&Ea(c)},Nt.prototype.N=function(){this.g.l=null,delete this.j,Nu(this.g),delete this.g,Nt.Z.N.call(this)};function Pf(o){Ss.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const d in c){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}v(Pf,Ss);function Df(){Oe.call(this),this.status=1}v(Df,Oe);function Ai(o){this.g=o}v(Ai,Rf),Ai.prototype.ra=function(){Se(this.g,"a")},Ai.prototype.qa=function(o){Se(this.g,new Pf(o))},Ai.prototype.pa=function(o){Se(this.g,new Df)},Ai.prototype.oa=function(){Se(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,Sv=function(){return new Ta},Tv=function(){return jr()},wv=fn,gh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},yi.NO_ERROR=0,yi.TIMEOUT=8,yi.HTTP_ERROR=6,sl=yi,vi.COMPLETE="complete",Ev=vi,Lr.EventType=qn,qn.OPEN="a",qn.CLOSE="b",qn.ERROR="c",qn.MESSAGE="d",$e.prototype.listen=$e.prototype.J,ro=Lr,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,_v=Le}).apply(typeof Ba<"u"?Ba:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ys="12.8.0";function gT(t){ys=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=new dv("@firebase/firestore");function Ri(){return si.logLevel}function G(t,...e){if(si.logLevel<=de.DEBUG){const n=e.map(Rd);si.debug(`Firestore (${ys}): ${t}`,...n)}}function Bn(t,...e){if(si.logLevel<=de.ERROR){const n=e.map(Rd);si.error(`Firestore (${ys}): ${t}`,...n)}}function as(t,...e){if(si.logLevel<=de.WARN){const n=e.map(Rd);si.warn(`Firestore (${ys}): ${t}`,...n)}}function Rd(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Iv(t,r,n)}function Iv(t,e,n){let r=`FIRESTORE (${ys}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Bn(r),new Error(r)}function ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Iv(e,i,r)}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends gs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ft.UNAUTHENTICATED))}shutdown(){}}class vT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _T{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Er,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Er)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new Cv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new ft(e)}}class ET{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class wT{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ET(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TT{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zw(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0,3512);const r=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,G("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Zp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Zp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=ST(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function yh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return fc(i)===fc(s)?le(i,s):fc(i)?1:-1}return le(t.length,e.length)}const IT=55296,CT=57343;function fc(t){const e=t.charCodeAt(0);return e>=IT&&e<=CT}function ls(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="__name__";class _n{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _n.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _n?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=_n.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return le(e.length,n.length)}static compareSegments(e,n){const r=_n.isNumericId(e),i=_n.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?_n.extractNumericId(e).compare(_n.extractNumericId(n)):yh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _r.fromString(e.substring(4,e.length-2))}}class Re extends _n{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const xT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends _n{construct(e,n,r){return new rt(e,n,r)}static isValidIdentifier(e){return xT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===em}static keyField(){return new rt([em])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new X(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new X(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new X(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new X(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Re.fromString(e))}static fromName(e){return new te(Re.fromString(e).popFirst(5))}static empty(){return new te(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Re(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(t,e,n){if(!n)throw new X(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kT(t,e,n,r){if(e===!0&&r===!0)throw new X(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tm(t){if(!te.isDocumentKey(t))throw new X(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Dd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Uo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dd(t);throw new X(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t,e){const n={typeString:t};return e&&(n.value=e),n}function ta(t,e){if(!xv(t))throw new X(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new X(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=-62135596800,rm=1e6;class Ce{static now(){return Ce.fromMillis(Date.now())}static fromDate(e){return Ce.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*rm);return new Ce(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<nm)throw new X(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rm}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ce._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ta(e,Ce._jsonSchema))return new Ce(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ce._jsonSchemaVersion="firestore/timestamp/1.0",Ce._jsonSchema={type:Ue("string",Ce._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Ce(0,0))}static max(){return new ie(new Ce(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=-1;function RT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new Ce(n+1,0):new Ce(n,r));return new Sr(i,te.empty(),e)}function PT(t){return new Sr(t.readTime,t.key,$o)}class Sr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Sr(ie.min(),te.empty(),$o)}static max(){return new Sr(ie.max(),te.empty(),$o)}}function DT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vs(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==VT)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},u=>r(u))}),a=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(p=>{a[h]=p,++l,l===s&&r(a)},p=>i(p))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function bT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _s(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}pu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=-1;function mu(t){return t==null}function zl(t){return t===0&&1/t==-1/0}function LT(t){return typeof t=="number"&&Number.isInteger(t)&&!zl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="";function jT(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=im(e)),e=OT(t.get(n),e);return im(e)}function OT(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Av:n+="";break;default:n+=s}}return n}function im(t){return t+Av+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ui(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||nt.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ua(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ua(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ua(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ua(this.root,e,this.comparator,!0)}}class Ua{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??nt.RED,this.left=i??nt.EMPTY,this.right=s??nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new nt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return nt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1;nt.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new om(this.data.getIterator())}getIteratorFrom(e){return new om(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ge(this.comparator);return n.data=e,n}}class om{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new an([])}unionWith(e){let n=new Ge(rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ls(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Rv("Invalid base64 string: "+s):s}}(e);return new ot(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const MT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(t){if(ge(!!t,39018),typeof t=="string"){let e=0;const n=MT.exec(t);if(ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cr(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="server_timestamp",Dv="__type__",Vv="__previous_value__",Nv="__local_write_time__";function Nd(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Dv])==null?void 0:r.stringValue)===Pv}function gu(t){const e=t.mapValue.fields[Vv];return Nd(e)?gu(e):e}function Ho(t){const e=Ir(t.mapValue.fields[Nv].timestampValue);return new Ce(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n,r,i,s,a,l,u,h,p,v){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=p,this.apiKey=v}}const Bl="(default)";class Wo{constructor(e,n){this.projectId=e,this.database=n||Bl}static empty(){return new Wo("","")}get isDefaultDatabase(){return this.database===Bl}isEqual(e){return e instanceof Wo&&e.projectId===this.projectId&&e.database===this.database}}function zT(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new X(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wo(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="__type__",BT="__max__",$a={mapValue:{}},Lv="__vector__",Ul="value";function xr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nd(t)?4:$T(t)?9007199254740991:UT(t)?10:11:ne(28295,{value:t})}function xn(t,e){if(t===e)return!0;const n=xr(t);if(n!==xr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ho(t).isEqual(Ho(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Ir(i.timestampValue),l=Ir(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Cr(i.bytesValue).isEqual(Cr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Me(i.geoPointValue.latitude)===Me(s.geoPointValue.latitude)&&Me(i.geoPointValue.longitude)===Me(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Me(i.integerValue)===Me(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Me(i.doubleValue),l=Me(s.doubleValue);return a===l?zl(a)===zl(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ls(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(sm(a)!==sm(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!xn(a[u],l[u])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function qo(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function us(t,e){if(t===e)return 0;const n=xr(t),r=xr(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Me(s.integerValue||s.doubleValue),u=Me(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return am(t.timestampValue,e.timestampValue);case 4:return am(Ho(t),Ho(e));case 5:return yh(t.stringValue,e.stringValue);case 6:return function(s,a){const l=Cr(s),u=Cr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=le(l[h],u[h]);if(p!==0)return p}return le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=le(Me(s.latitude),Me(a.latitude));return l!==0?l:le(Me(s.longitude),Me(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return lm(t.arrayValue,e.arrayValue);case 10:return function(s,a){var _,R,b,j;const l=s.fields||{},u=a.fields||{},h=(_=l[Ul])==null?void 0:_.arrayValue,p=(R=u[Ul])==null?void 0:R.arrayValue,v=le(((b=h==null?void 0:h.values)==null?void 0:b.length)||0,((j=p==null?void 0:p.values)==null?void 0:j.length)||0);return v!==0?v:lm(h,p)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===$a.mapValue&&a===$a.mapValue)return 0;if(s===$a.mapValue)return 1;if(a===$a.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let v=0;v<u.length&&v<p.length;++v){const _=yh(u[v],p[v]);if(_!==0)return _;const R=us(l[u[v]],h[p[v]]);if(R!==0)return R}return le(u.length,p.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function am(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Ir(t),r=Ir(e),i=le(n.seconds,r.seconds);return i!==0?i:le(n.nanos,r.nanos)}function lm(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=us(n[i],r[i]);if(s)return s}return le(n.length,r.length)}function cs(t){return vh(t)}function vh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ir(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=vh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${vh(n.fields[a])}`;return i+"}"}(t.mapValue):ne(61005,{value:t})}function ol(t){switch(xr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gu(t);return e?16+ol(e):16;case 5:return 2*t.stringValue.length;case 6:return Cr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ol(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ui(r.fields,(s,a)=>{i+=s.length+ol(a)}),i}(t.mapValue);default:throw ne(13486,{value:t})}}function _h(t){return!!t&&"integerValue"in t}function bd(t){return!!t&&"arrayValue"in t}function um(t){return!!t&&"nullValue"in t}function cm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function al(t){return!!t&&"mapValue"in t}function UT(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[bv])==null?void 0:r.stringValue)===Lv}function vo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vo(t.arrayValue.values[n]);return e}return{...t}}function $T(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===BT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!al(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vo(n)}setAll(e){let n=rt.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=vo(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());al(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];al(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ui(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new qt(vo(this.value))}}function jv(t){const e=[];return ui(t.fields,(n,r)=>{const i=new rt([n]);if(al(r)){const s=jv(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new mt(e,0,ie.min(),ie.min(),ie.min(),qt.empty(),0)}static newFoundDocument(e,n,r,i){return new mt(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new mt(e,2,n,ie.min(),ie.min(),qt.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,ie.min(),ie.min(),qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n){this.position=e,this.inclusive=n}}function hm(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(a.referenceValue),n.key):r=us(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function dm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n="asc"){this.field=e,this.dir=n}}function HT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{}class qe extends Ov{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new qT(e,n,r):n==="array-contains"?new QT(e,r):n==="in"?new YT(e,r):n==="not-in"?new JT(e,r):n==="array-contains-any"?new XT(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new KT(e,r):new GT(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(us(n,this.value)):n!==null&&xr(this.value)===xr(n)&&this.matchesComparison(us(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends Ov{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new An(e,n)}matches(e){return Mv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Mv(t){return t.op==="and"}function Fv(t){return WT(t)&&Mv(t)}function WT(t){for(const e of t.filters)if(e instanceof An)return!1;return!0}function Eh(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+cs(t.value);if(Fv(t))return t.filters.map(e=>Eh(e)).join(",");{const e=t.filters.map(n=>Eh(n)).join(",");return`${t.op}(${e})`}}function zv(t,e){return t instanceof qe?function(r,i){return i instanceof qe&&r.op===i.op&&r.field.isEqual(i.field)&&xn(r.value,i.value)}(t,e):t instanceof An?function(r,i){return i instanceof An&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&zv(a,i.filters[l]),!0):!1}(t,e):void ne(19439)}function Bv(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${cs(n.value)}`}(t):t instanceof An?function(n){return n.op.toString()+" {"+n.getFilters().map(Bv).join(" ,")+"}"}(t):"Filter"}class qT extends qe{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class KT extends qe{constructor(e,n){super(e,"in",n),this.keys=Uv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class GT extends qe{constructor(e,n){super(e,"not-in",n),this.keys=Uv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Uv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class QT extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bd(n)&&qo(n.arrayValue,this.value)}}class YT extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qo(this.value.arrayValue,n)}}class JT extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qo(this.value.arrayValue,n)}}class XT extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function fm(t,e=null,n=[],r=[],i=null,s=null,a=null){return new ZT(t,e,n,r,i,s,a)}function Ld(t){const e=se(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Eh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),mu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>cs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>cs(r)).join(",")),e.Te=n}return e.Te}function jd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!HT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dm(t.startAt,e.startAt)&&dm(t.endAt,e.endAt)}function wh(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function eS(t,e,n,r,i,s,a,l){return new yu(t,e,n,r,i,s,a,l)}function Od(t){return new yu(t)}function pm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tS(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function nS(t){return t.collectionGroup!==null}function _o(t){const e=se(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ge(rt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Hl(s,r))}),n.has(rt.keyField().canonicalString())||e.Ie.push(new Hl(rt.keyField(),r))}return e.Ie}function Sn(t){const e=se(t);return e.Ee||(e.Ee=rS(e,_o(t))),e.Ee}function rS(t,e){if(t.limitType==="F")return fm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Hl(i.field,s)});const n=t.endAt?new $l(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new $l(t.startAt.position,t.startAt.inclusive):null;return fm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Th(t,e,n){return new yu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vu(t,e){return jd(Sn(t),Sn(e))&&t.limitType===e.limitType}function $v(t){return`${Ld(Sn(t))}|lt:${t.limitType}`}function Pi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Bv(i)).join(", ")}]`),mu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>cs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>cs(i)).join(",")),`Target(${r})`}(Sn(t))}; limitType=${t.limitType})`}function _u(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of _o(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,u){const h=hm(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,_o(r),i)||r.endAt&&!function(a,l,u){const h=hm(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,_o(r),i))}(t,e)}function iS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Hv(t){return(e,n)=>{let r=!1;for(const i of _o(t)){const s=sS(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function sS(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?us(u,h):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ui(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return kv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=new Ve(te.comparator);function Un(){return oS}const Wv=new Ve(te.comparator);function io(...t){let e=Wv;for(const n of t)e=e.insert(n.key,n);return e}function qv(t){let e=Wv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yr(){return Eo()}function Kv(){return Eo()}function Eo(){return new ci(t=>t.toString(),(t,e)=>t.isEqual(e))}const aS=new Ve(te.comparator),lS=new Ge(te.comparator);function ue(...t){let e=lS;for(const n of t)e=e.add(n);return e}const uS=new Ge(le);function cS(){return uS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zl(e)?"-0":e}}function Gv(t){return{integerValue:""+t}}function hS(t,e){return LT(e)?Gv(e):Md(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(){this._=void 0}}function dS(t,e,n){return t instanceof Wl?function(i,s){const a={fields:{[Dv]:{stringValue:Pv},[Nv]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Nd(s)&&(s=gu(s)),s&&(a.fields[Vv]=s),{mapValue:a}}(n,e):t instanceof Ko?Yv(t,e):t instanceof Go?Jv(t,e):function(i,s){const a=Qv(i,s),l=mm(a)+mm(i.Ae);return _h(a)&&_h(i.Ae)?Gv(l):Md(i.serializer,l)}(t,e)}function fS(t,e,n){return t instanceof Ko?Yv(t,e):t instanceof Go?Jv(t,e):n}function Qv(t,e){return t instanceof ql?function(r){return _h(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Wl extends Eu{}class Ko extends Eu{constructor(e){super(),this.elements=e}}function Yv(t,e){const n=Xv(e);for(const r of t.elements)n.some(i=>xn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Go extends Eu{constructor(e){super(),this.elements=e}}function Jv(t,e){let n=Xv(e);for(const r of t.elements)n=n.filter(i=>!xn(i,r));return{arrayValue:{values:n}}}class ql extends Eu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function mm(t){return Me(t.integerValue||t.doubleValue)}function Xv(t){return bd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function pS(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ko&&i instanceof Ko||r instanceof Go&&i instanceof Go?ls(r.elements,i.elements,xn):r instanceof ql&&i instanceof ql?xn(r.Ae,i.Ae):r instanceof Wl&&i instanceof Wl}(t.transform,e.transform)}class mS{constructor(e,n){this.version=e,this.transformResults=n}}class Ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ln}static exists(e){return new Ln(void 0,e)}static updateTime(e){return new Ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ll(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wu{}function Zv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new t_(t.key,Ln.none()):new na(t.key,t.data,Ln.none());{const n=t.data,r=qt.empty();let i=new Ge(rt.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new hi(t.key,r,new an(i.toArray()),Ln.none())}}function gS(t,e,n){t instanceof na?function(i,s,a){const l=i.value.clone(),u=ym(i.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof hi?function(i,s,a){if(!ll(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=ym(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(e_(i)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function wo(t,e,n,r){return t instanceof na?function(s,a,l,u){if(!ll(s.precondition,a))return l;const h=s.value.clone(),p=vm(s.fieldTransforms,u,a);return h.setAll(p),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof hi?function(s,a,l,u){if(!ll(s.precondition,a))return l;const h=vm(s.fieldTransforms,u,a),p=a.data;return p.setAll(e_(s)),p.setAll(h),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(s,a,l){return ll(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function yS(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Qv(r.transform,i||null);s!=null&&(n===null&&(n=qt.empty()),n.set(r.field,s))}return n||null}function gm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ls(r,i,(s,a)=>pS(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class na extends wu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class hi extends wu{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function e_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ym(t,e,n){const r=new Map;ge(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,fS(a,l,n[i]))}return r}function vm(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,dS(s,a,e))}return r}class t_ extends wu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vS extends wu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&gS(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Kv();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const u=Zv(a,l);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&ls(this.mutations,e.mutations,(n,r)=>gm(n,r))&&ls(this.baseMutations,e.baseMutations,(n,r)=>gm(n,r))}}class Fd{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ge(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return aS}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new Fd(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,he;function TS(t){switch(t){case z.OK:return ne(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function n_(t){if(t===void 0)return Bn("GRPC error has no .code"),z.UNKNOWN;switch(t){case ze.OK:return z.OK;case ze.CANCELLED:return z.CANCELLED;case ze.UNKNOWN:return z.UNKNOWN;case ze.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case ze.INTERNAL:return z.INTERNAL;case ze.UNAVAILABLE:return z.UNAVAILABLE;case ze.UNAUTHENTICATED:return z.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case ze.NOT_FOUND:return z.NOT_FOUND;case ze.ALREADY_EXISTS:return z.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return z.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case ze.ABORTED:return z.ABORTED;case ze.OUT_OF_RANGE:return z.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return z.UNIMPLEMENTED;case ze.DATA_LOSS:return z.DATA_LOSS;default:return ne(39323,{code:t})}}(he=ze||(ze={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=new _r([4294967295,4294967295],0);function _m(t){const e=SS().encode(t),n=new vv;return n.update(e),new Uint8Array(n.digest())}function Em(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new _r([n,r],0),new _r([i,s],0)]}class zd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new so(`Invalid padding: ${n}`);if(r<0)throw new so(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new so(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new so(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=_r.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(_r.fromNumber(r)));return i.compare(IS)===1&&(i=new _r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=_m(e),[r,i]=Em(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new zd(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=_m(e),[r,i]=Em(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.be(a)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class so extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ra.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Tu(ie.min(),i,new Ve(le),Un(),ue())}}class ra{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ra(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class r_{constructor(e,n){this.targetId=e,this.Ce=n}}class i_{constructor(e,n,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class wm{constructor(){this.ve=0,this.Fe=Tm(),this.Me=ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ue(),n=ue(),r=ue();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne(38017,{changeType:s})}}),new ra(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Tm()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class CS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Un(),this.He=Ha(),this.Je=Ha(),this.Ze=new Ve(le)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(wh(s))if(r===0){const a=new te(s.path);this.et(n,a,mt.newNoDocument(a,ie.min()))}else ge(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=Cr(r).toUint8Array()}catch(u){if(u instanceof Rv)return as("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new zd(a,i,s)}catch(u){return as(u instanceof so?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&wh(l.target)){const u=new te(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,mt.newNoDocument(u,e))}s.Be&&(n.set(a,s.ke()),s.Ke())}});let r=ue();this.Je.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const i=new Tu(e,n,this.Ze,this.je,r);return this.je=Un(),this.He=Ha(),this.Je=Ha(),this.Ze=new Ve(le),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new wm,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Ge(le),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Ge(le),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wm),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ha(){return new Ve(te.comparator)}function Tm(){return new Ve(te.comparator)}const xS={asc:"ASCENDING",desc:"DESCENDING"},AS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kS={and:"AND",or:"OR"};class RS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Sh(t,e){return t.useProto3Json||mu(e)?e:{value:e}}function Kl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function s_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function PS(t,e){return Kl(t,e.toTimestamp())}function In(t){return ge(!!t,49232),ie.fromTimestamp(function(n){const r=Ir(n);return new Ce(r.seconds,r.nanos)}(t))}function Bd(t,e){return Ih(t,e).canonicalString()}function Ih(t,e){const n=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function o_(t){const e=Re.fromString(t);return ge(h_(e),10190,{key:e.toString()}),e}function Ch(t,e){return Bd(t.databaseId,e.path)}function pc(t,e){const n=o_(e);if(n.get(1)!==t.databaseId.projectId)throw new X(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(l_(n))}function a_(t,e){return Bd(t.databaseId,e)}function DS(t){const e=o_(t);return e.length===4?Re.emptyPath():l_(e)}function xh(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function l_(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Sm(t,e,n){return{name:Ch(t,e),fields:n.value.mapValue.fields}}function VS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ne(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(ge(p===void 0||typeof p=="string",58123),ot.fromBase64String(p||"")):(ge(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ot.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const p=h.code===void 0?z.UNKNOWN:n_(h.code);return new X(p,h.message||"")}(a);n=new i_(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=pc(t,r.document.name),s=In(r.document.updateTime),a=r.document.createTime?In(r.document.createTime):ie.min(),l=new qt({mapValue:{fields:r.document.fields}}),u=mt.newFoundDocument(i,s,a,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new ul(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=pc(t,r.document),s=r.readTime?In(r.readTime):ie.min(),a=mt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new ul([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=pc(t,r.document),s=r.removedTargetIds||[];n=new ul([],s,i,null)}else{if(!("filter"in e))return ne(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new wS(i,s),l=r.targetId;n=new r_(l,a)}}return n}function NS(t,e){let n;if(e instanceof na)n={update:Sm(t,e.key,e.value)};else if(e instanceof t_)n={delete:Ch(t,e.key)};else if(e instanceof hi)n={update:Sm(t,e.key,e.data),updateMask:US(e.fieldMask)};else{if(!(e instanceof vS))return ne(16599,{dt:e.type});n={verify:Ch(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof Wl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ko)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Go)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ql)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw ne(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:PS(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne(27497)}(t,e.precondition)),n}function bS(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map(n=>function(i,s){let a=i.updateTime?In(i.updateTime):In(s);return a.isEqual(ie.min())&&(a=In(s)),new mS(a,i.transformResults||[])}(n,e))):[]}function LS(t,e){return{documents:[a_(t,e.path)]}}function jS(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=a_(t,i);const s=function(h){if(h.length!==0)return c_(An.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(p=>function(_){return{field:Di(_.field),direction:FS(_.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Sh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:i}}function OS(t){let e=DS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ge(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(v){const _=u_(v);return _ instanceof An&&Fv(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(v){return v.map(_=>function(b){return new Hl(Vi(b.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(v){let _;return _=typeof v=="object"?v.value:v,mu(_)?null:_}(n.limit));let u=null;n.startAt&&(u=function(v){const _=!!v.before,R=v.values||[];return new $l(R,_)}(n.startAt));let h=null;return n.endAt&&(h=function(v){const _=!v.before,R=v.values||[];return new $l(R,_)}(n.endAt)),eS(e,i,a,s,l,"F",u,h)}function MS(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function u_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vi(n.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Vi(n.unaryFilter.field);return qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Vi(n.unaryFilter.field);return qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Vi(n.unaryFilter.field);return qe.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return qe.create(Vi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return An.create(n.compositeFilter.filters.map(r=>u_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function FS(t){return xS[t]}function zS(t){return AS[t]}function BS(t){return kS[t]}function Di(t){return{fieldPath:t.canonicalString()}}function Vi(t){return rt.fromServerFormat(t.fieldPath)}function c_(t){return t instanceof qe?function(n){if(n.op==="=="){if(cm(n.value))return{unaryFilter:{field:Di(n.field),op:"IS_NAN"}};if(um(n.value))return{unaryFilter:{field:Di(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cm(n.value))return{unaryFilter:{field:Di(n.field),op:"IS_NOT_NAN"}};if(um(n.value))return{unaryFilter:{field:Di(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Di(n.field),op:zS(n.op),value:n.value}}}(t):t instanceof An?function(n){const r=n.getFilters().map(i=>c_(i));return r.length===1?r[0]:{compositeFilter:{op:BS(n.op),filters:r}}}(t):ne(54877,{filter:t})}function US(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function h_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function d_(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n,r,i,s=ie.min(),a=ie.min(),l=ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.yt=e}}function HS(t){const e=OS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Th(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.Sn=new qS}addToCollectionParentIndex(e,n){return this.Sn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Sr.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Sr.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class qS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ge(Re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ge(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},f_=41943040;class xt{static withCacheSize(e){return new xt(e,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xt.DEFAULT_COLLECTION_PERCENTILE=10,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xt.DEFAULT=new xt(f_,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xt.DISABLED=new xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new hs(0)}static ar(){return new hs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="LruGarbageCollector",KS=1048576;function xm([t,e],[n,r]){const i=le(t,n);return i===0?le(e,r):i}class GS{constructor(e){this.Pr=e,this.buffer=new Ge(xm),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();xm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class QS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){G(Cm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_s(n)?G(Cm,"Ignoring IndexedDB error during garbage collection: ",n):await vs(n)}await this.Ar(3e5)})}}class YS{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(pu.ce);const r=new GS(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(Im)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Im):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,s,a,l,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,a=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,l=Date.now(),this.removeTargets(e,r,n))).next(v=>(s=v,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(h=Date.now(),Ri()<=de.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${v} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:v})))}}function JS(t,e){return new YS(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.changes=new ci(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&wo(r.mutation,i,an.empty(),Ce.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const i=Yr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=io();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=Un();const a=Eo(),l=function(){return Eo()}();return n.forEach((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof hi)?s=s.insert(h.key,h):p!==void 0?(a.set(h.key,p.mutation.getFieldMask()),wo(p.mutation,h,p.mutation.getFieldMask(),Ce.now())):a.set(h.key,an.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,p)=>a.set(h,p)),n.forEach((h,p)=>l.set(h,new ZS(p,a.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Eo();let i=new Ve((a,l)=>a-l),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||an.empty();p=l.applyToLocalView(h,p),r.set(u,p);const v=(i.get(l.batchId)||ue()).add(u);i=i.insert(l.batchId,v)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,v=Kv();p.forEach(_=>{if(!s.has(_)){const R=Zv(n.get(_),r.get(_));R!==null&&v.set(_,R),s=s.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,v))}return O.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return tS(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(Yr());let l=$o,u=s;return a.next(h=>O.forEach(h,(p,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),s.get(p)?O.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{u=u.insert(p,_)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ue())).next(p=>({batchId:l,changes:qv(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=io();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=io();return this.indexManager.getCollectionParents(e,s).next(l=>O.forEach(l,u=>{const h=function(v,_){return new yu(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((v,_)=>{a=a.insert(v,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((u,h)=>{const p=h.getKey();a.get(p)===null&&(a=a.insert(p,mt.newInvalidDocument(p)))});let l=io();return a.forEach((u,h)=>{const p=s.get(u);p!==void 0&&wo(p.mutation,h,an.empty(),Ce.now()),_u(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return O.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:In(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:HS(i.bundledQuery),readTime:In(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.overlays=new Ve(te.comparator),this.Lr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yr();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.bt(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Lr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=Yr(),s=n.length+1,a=new te(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((h,p)=>h-p);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=Yr(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Yr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=i)););return O.resolve(l)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new ES(n,r));let s=this.Lr.get(n);s===void 0&&(s=ue(),this.Lr.set(n,s)),this.Lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(){this.kr=new Ge(Ye.Kr),this.qr=new Ge(Ye.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Ye(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ye(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new te(new Re([])),r=new Ye(n,e),i=new Ye(n,e+1),s=[];return this.qr.forEachInRange([r,i],a=>{this.Wr(a),s.push(a.key)}),s}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new te(new Re([])),r=new Ye(n,e),i=new Ye(n,e+1);let s=ue();return this.qr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Ye(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ye{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return te.comparator(e.key,n.key)||le(e.Hr,n.Hr)}static Ur(e,n){return le(e.Hr,n.Hr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Ge(Ye.Kr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new _S(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.Jr=this.Jr.add(new Ye(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,n){return O.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Vd:this.Yn-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ye(n,0),i=new Ye(n,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],a=>{const l=this.Zr(a.Hr);s.push(l)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(le);return n.forEach(i=>{const s=new Ye(i,0),a=new Ye(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,a],l=>{r=r.add(l.Hr)})}),O.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;te.isDocumentKey(s)||(s=s.child(""));const a=new Ye(new te(s),0);let l=new Ge(le);return this.Jr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.Hr)),!0)},a),O.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ge(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return O.forEach(n.mutations,i=>{const s=new Ye(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Ye(n,0),i=this.Jr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.ti=e,this.docs=function(){return new Ve(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let r=Un();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mt.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Un();const a=n.path,l=new te(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||DT(PT(p),r)<=0||(i.has(p.key)||_u(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne(9500)}ni(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new oI(this)}getSize(e){return O.resolve(this.size)}}class oI extends XS{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.persistence=e,this.ri=new ci(n=>Ld(n),jd),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.ii=0,this.si=new Ud,this.targetCount=0,this.oi=hs._r()}forEachTarget(e,n){return this.ri.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),O.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new hs(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.lr(n),O.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ri.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,n){this._i={},this.overlays={},this.ai=new pu(0),this.ui=!1,this.ui=!0,this.ci=new rI,this.referenceDelegate=e(this),this.li=new aI(this),this.indexManager=new WS,this.remoteDocumentCache=function(i){return new sI(i)}(r=>this.referenceDelegate.hi(r)),this.serializer=new $S(n),this.Pi=new tI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new iI(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const i=new lI(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(s=>this.referenceDelegate.Ii(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return O.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class lI extends NT{constructor(e){super(),this.currentSequenceNumber=e}}class $d{constructor(e){this.persistence=e,this.Ri=new Ud,this.Ai=null}static Vi(e){return new $d(e)}get di(){if(this.Ai)return this.Ai;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.di,r=>{const i=te.fromPath(r);return this.mi(e,i).next(s=>{s||n.removeEntry(i,ie.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Gl{constructor(e,n){this.persistence=e,this.fi=new ci(r=>jT(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=JS(this,n)}static Vi(e,n){return new Gl(e,n)}Ti(){}Ii(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return O.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(s=>s?O.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,a=>this.wr(e,a,n).next(l=>{l||(r++,s.removeEntry(a,ie.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ol(e.data.value)),n}wr(e,n,r){return O.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=ue(),i=ue();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Hd(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return YE()?8:bT(GE())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.gs(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ps(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new uI;return this.ys(e,n,a).next(l=>{if(s.result=l,this.As)return this.ws(e,n,a,l.size)})}).next(()=>s.result)}ws(e,n,r,i){return r.documentReadCount<this.Vs?(Ri()<=de.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Pi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(Ri()<=de.DEBUG&&G("QueryEngine","Query:",Pi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Ri()<=de.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Pi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(n))):O.resolve())}gs(e,n){if(pm(n))return O.resolve(null);let r=Sn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Th(n,null,"F"),r=Sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=ue(...s);return this.fs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.bs(n,l);return this.Ss(n,h,a,u.readTime)?this.gs(e,Th(n,null,"F")):this.Ds(e,h,n,u)}))})))}ps(e,n,r,i){return pm(n)||i.isEqual(ie.min())?O.resolve(null):this.fs.getDocuments(e,r).next(s=>{const a=this.bs(n,s);return this.Ss(n,a,r,i)?O.resolve(null):(Ri()<=de.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pi(n)),this.Ds(e,a,n,RT(i,$o)).next(l=>l))})}bs(e,n){let r=new Ge(Hv(e));return n.forEach((i,s)=>{_u(e,s)&&(r=r.add(s))}),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,n,r){return Ri()<=de.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Pi(n)),this.fs.getDocumentsMatchingQuery(e,n,Sr.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="LocalStore",hI=3e8;class dI{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new Ve(le),this.Fs=new ci(s=>Ld(s),jd),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function fI(t,e,n,r){return new dI(t,e,n,r)}async function m_(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let u=ue();for(const h of i){a.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of s){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ns:h,removedBatchIds:a,addedBatchIds:l}))})})}function pI(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const v=h.batch,_=v.keys();let R=O.resolve();return _.forEach(b=>{R=R.next(()=>p.getEntry(u,b)).next(j=>{const U=h.docVersions.get(b);ge(U!==null,48541),j.version.compareTo(U)<0&&(v.applyToRemoteDocument(j,h),j.isValidDocument()&&(j.setReadTime(h.commitVersion),p.addEntry(j)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(u,v))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ue();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function g_(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function mI(t,e){const n=se(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const l=[];e.targetChanges.forEach((p,v)=>{const _=i.get(v);if(!_)return;l.push(n.li.removeMatchingKeys(s,p.removedDocuments,v).next(()=>n.li.addMatchingKeys(s,p.addedDocuments,v)));let R=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(v)!==null?R=R.withResumeToken(ot.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):p.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(p.resumeToken,r)),i=i.insert(v,R),function(j,U,x){return j.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=hI?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(_,R,p)&&l.push(n.li.updateTargetData(s,R))});let u=Un(),h=ue();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push(gI(s,a,e.documentUpdates).next(p=>{u=p.Bs,h=p.Ls})),!r.isEqual(ie.min())){const p=n.li.getLastRemoteSnapshotVersion(s).next(v=>n.li.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(p)}return O.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.vs=i,s))}function gI(t,e,n){let r=ue(),i=ue();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Un();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):G(Wd,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Bs:a,Ls:i}})}function yI(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Vd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vI(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.li.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.li.allocateTargetId(r).next(a=>(i=new lr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function Ah(t,e,n){const r=se(t),i=r.vs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!_s(a))throw a;G(Wd,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function Am(t,e,n){const r=se(t);let i=ie.min(),s=ue();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,p){const v=se(u),_=v.Fs.get(p);return _!==void 0?O.resolve(v.vs.get(_)):v.li.getTargetData(h,p)}(r,a,Sn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?i:ie.min(),n?s:ue())).next(l=>(_I(r,iS(e),l),{documents:l,ks:s})))}function _I(t,e,n){let r=t.Ms.get(e)||ie.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ms.set(e,r)}class km{constructor(){this.activeTargetIds=cS()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EI{constructor(){this.vo=new km,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new km,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="ConnectivityMonitor";class Pm{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){G(Rm,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){G(Rm,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa=null;function kh(){return Wa===null?Wa=function(){return 268435456+Math.round(2147483648*Math.random())}():Wa++,"0x"+Wa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc="RestConnection",TI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class SI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Bl?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const a=kh(),l=this.Qo(e,n.toUriEncodedString());G(mc,`Sending RPC '${e}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,i,s);const{host:h}=new URL(l),p=Ad(h);return this.zo(e,l,u,r,p).then(v=>(G(mc,`Received RPC '${e}' ${a}: `,v),v),v=>{throw as(mc,`RPC '${e}' ${a} failed with error: `,v,"url: ",l,"request:",r),v})}jo(e,n,r,i,s,a){return this.Wo(e,n,r,i,s)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ys}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Qo(e,n){const r=TI[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt="WebChannelConnection",Gs=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(i){setTimeout(()=>{throw i},0)}})};class Xi extends SI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Xi.c_){const e=Tv();Gs(e,wv.STAT_EVENT,n=>{n.stat===gh.PROXY?G(dt,"STAT_EVENT: detected buffering proxy"):n.stat===gh.NOPROXY&&G(dt,"STAT_EVENT: detected no buffering proxy")}),Xi.c_=!0}}zo(e,n,r,i,s){const a=kh();return new Promise((l,u)=>{const h=new _v;h.setWithCredentials(!0),h.listenOnce(Ev.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case sl.NO_ERROR:const v=h.getResponseJson();G(dt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),l(v);break;case sl.TIMEOUT:G(dt,`RPC '${e}' ${a} timed out`),u(new X(z.DEADLINE_EXCEEDED,"Request time out"));break;case sl.HTTP_ERROR:const _=h.getStatus();if(G(dt,`RPC '${e}' ${a} failed with status:`,_,"response text:",h.getResponseText()),_>0){let R=h.getResponseJson();Array.isArray(R)&&(R=R[0]);const b=R==null?void 0:R.error;if(b&&b.status&&b.message){const j=function(x){const T=x.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(T)>=0?T:z.UNKNOWN}(b.status);u(new X(j,b.message))}else u(new X(z.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new X(z.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{G(dt,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(i);G(dt,`RPC '${e}' ${a} sending request:`,i),h.send(n,"POST",p,r,15)})}T_(e,n,r){const i=kh(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");G(dt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=a.createWebChannel(h,l);this.I_(p);let v=!1,_=!1;const R=new II({Ho:b=>{_?G(dt,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(v||(G(dt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),G(dt,`RPC '${e}' stream ${i} sending:`,b),p.send(b))},Jo:()=>p.close()});return Gs(p,ro.EventType.OPEN,()=>{_||(G(dt,`RPC '${e}' stream ${i} transport opened.`),R.i_())}),Gs(p,ro.EventType.CLOSE,()=>{_||(_=!0,G(dt,`RPC '${e}' stream ${i} transport closed`),R.o_(),this.E_(p))}),Gs(p,ro.EventType.ERROR,b=>{_||(_=!0,as(dt,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),R.o_(new X(z.UNAVAILABLE,"The operation could not be completed")))}),Gs(p,ro.EventType.MESSAGE,b=>{var j;if(!_){const U=b.data[0];ge(!!U,16349);const x=U,T=(x==null?void 0:x.error)||((j=x[0])==null?void 0:j.error);if(T){G(dt,`RPC '${e}' stream ${i} received error:`,T);const A=T.status;let M=function(E){const y=ze[E];if(y!==void 0)return n_(y)}(A),H=T.message;M===void 0&&(M=z.INTERNAL,H="Unknown error status: "+A+" with message "+T.message),_=!0,R.o_(new X(M,H)),p.close()}else G(dt,`RPC '${e}' stream ${i} received:`,U),R.__(U)}}),Xi.u_(),setTimeout(()=>{R.s_()},0),R}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Sv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t){return new Xi(t)}function gc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t){return new RS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi.c_=!1;class y_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="PersistentStream";class v_{constructor(e,n,r,i,s,a,l,u){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new y_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Bn(n.toString()),Bn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new X(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return G(Dm,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(G(Dm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xI extends v_{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=VS(this.serializer,e),r=function(s){if(!("targetChange"in s))return ie.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?ie.min():a.readTime?In(a.readTime):ie.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=xh(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=wh(u)?{documents:LS(s,u)}:{query:jS(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=s_(s,a.resumeToken);const h=Sh(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(ie.min())>0){l.readTime=Kl(s,a.snapshotVersion.toTimestamp());const h=Sh(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=MS(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=xh(this.serializer),n.removeTarget=e,this.K_(n)}}class AI extends v_{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=bS(e.writeResults,e.commitTime),r=In(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=xh(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>NS(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{}class RI extends kI{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new X(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,Ih(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(z.UNKNOWN,s.toString())})}jo(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.jo(e,Ih(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new X(z.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function PI(t,e,n,r){return new RI(t,e,n,r)}class DI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bn(n),this.aa=!1):G("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="RemoteStore";class VI{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo(a=>{r.enqueueAndForget(async()=>{di(this)&&(G(oi,"Restarting streams for network reachability change."),await async function(u){const h=se(u);h.Ea.add(4),await ia(h),h.Va.set("Unknown"),h.Ea.delete(4),await Iu(h)}(this))})}),this.Va=new DI(r,i)}}async function Iu(t){if(di(t))for(const e of t.Ra)await e(!0)}async function ia(t){for(const e of t.Ra)await e(!1)}function __(t,e){const n=se(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Qd(n)?Gd(n):Es(n).O_()&&Kd(n,e))}function qd(t,e){const n=se(t),r=Es(n);n.Ia.delete(e),r.O_()&&E_(n,e),n.Ia.size===0&&(r.O_()?r.L_():di(n)&&n.Va.set("Unknown"))}function Kd(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Es(t).Z_(e)}function E_(t,e){t.da.$e(e),Es(t).X_(e)}function Gd(t){t.da=new CS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Es(t).start(),t.Va.ua()}function Qd(t){return di(t)&&!Es(t).x_()&&t.Ia.size>0}function di(t){return se(t).Ea.size===0}function w_(t){t.da=void 0}async function NI(t){t.Va.set("Online")}async function bI(t){t.Ia.forEach((e,n)=>{Kd(t,e)})}async function LI(t,e){w_(t),Qd(t)?(t.Va.ha(e),Gd(t)):t.Va.set("Unknown")}async function jI(t,e,n){if(t.Va.set("Online"),e instanceof i_&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ia.delete(l),i.da.removeTarget(l))}(t,e)}catch(r){G(oi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ql(t,r)}else if(e instanceof ul?t.da.Xe(e):e instanceof r_?t.da.st(e):t.da.tt(e),!n.isEqual(ie.min()))try{const r=await g_(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.da.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.Ia.get(h);p&&s.Ia.set(h,p.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const p=s.Ia.get(u);if(!p)return;s.Ia.set(u,p.withResumeToken(ot.EMPTY_BYTE_STRING,p.snapshotVersion)),E_(s,u);const v=new lr(p.target,u,h,p.sequenceNumber);Kd(s,v)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G(oi,"Failed to raise snapshot:",r),await Ql(t,r)}}async function Ql(t,e,n){if(!_s(e))throw e;t.Ea.add(1),await ia(t),t.Va.set("Offline"),n||(n=()=>g_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(oi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Iu(t)})}function T_(t,e){return e().catch(n=>Ql(t,n,e))}async function Cu(t){const e=se(t),n=Ar(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Vd;for(;OI(e);)try{const i=await yI(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,MI(e,i)}catch(i){await Ql(e,i)}S_(e)&&I_(e)}function OI(t){return di(t)&&t.Ta.length<10}function MI(t,e){t.Ta.push(e);const n=Ar(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function S_(t){return di(t)&&!Ar(t).x_()&&t.Ta.length>0}function I_(t){Ar(t).start()}async function FI(t){Ar(t).ra()}async function zI(t){const e=Ar(t);for(const n of t.Ta)e.ea(n.mutations)}async function BI(t,e,n){const r=t.Ta.shift(),i=Fd.from(r,e,n);await T_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Cu(t)}async function UI(t,e){e&&Ar(t).Y_&&await async function(r,i){if(function(a){return TS(a)&&a!==z.ABORTED}(i.code)){const s=r.Ta.shift();Ar(r).B_(),await T_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Cu(r)}}(t,e),S_(t)&&I_(t)}async function Vm(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),G(oi,"RemoteStore received new credentials");const r=di(n);n.Ea.add(3),await ia(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Iu(n)}async function $I(t,e){const n=se(t);e?(n.Ea.delete(2),await Iu(n)):e||(n.Ea.add(2),await ia(n),n.Va.set("Unknown"))}function Es(t){return t.ma||(t.ma=function(n,r,i){const s=se(n);return s.sa(),new xI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:NI.bind(null,t),Yo:bI.bind(null,t),t_:LI.bind(null,t),J_:jI.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Qd(t)?Gd(t):t.Va.set("Unknown")):(await t.ma.stop(),w_(t))})),t.ma}function Ar(t){return t.fa||(t.fa=function(n,r,i){const s=se(n);return s.sa(),new AI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:FI.bind(null,t),t_:UI.bind(null,t),ta:zI.bind(null,t),na:BI.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Cu(t)):(await t.fa.stop(),t.Ta.length>0&&(G(oi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new Yd(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jd(t,e){if(Bn("AsyncQueue",`${e}: ${t}`),_s(t))return new X(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{static emptySet(e){return new Zi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=io(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(){this.ga=new Ve(te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ds{constructor(e,n,r,i,s,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ds(e,n,Zi.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class WI{constructor(){this.queries=bm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=se(n),s=i.queries;i.queries=bm(),s.forEach((a,l)=>{for(const u of l.ba)u.onError(r)})})(this,new X(z.ABORTED,"Firestore shutting down"))}}function bm(){return new ci(t=>$v(t),vu)}async function qI(t,e){const n=se(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new HI,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=Jd(a,`Initialization of query '${Pi(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.ba.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Xd(n)}async function KI(t,e){const n=se(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.ba.indexOf(e);a>=0&&(s.ba.splice(a,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function GI(t,e){const n=se(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.ba)l.Fa(i)&&(r=!0);a.wa=i}}r&&Xd(n)}function QI(t,e,n){const r=se(t),i=r.queries.get(e);if(i)for(const s of i.ba)s.onError(n);r.queries.delete(e)}function Xd(t){t.Ca.forEach(e=>{e.next()})}var Rh,Lm;(Lm=Rh||(Rh={})).Ma="default",Lm.Cache="cache";class YI{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ds(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ds.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e){this.key=e}}class x_{constructor(e){this.key=e}}class JI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ue(),this.mutatedKeys=ue(),this.eu=Hv(e),this.tu=new Zi(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Nm,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,v)=>{const _=i.get(p),R=_u(this.query,v)?v:null,b=!!_&&this.mutatedKeys.has(_.key),j=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let U=!1;_&&R?_.data.isEqual(R.data)?b!==j&&(r.track({type:3,doc:R}),U=!0):this.su(_,R)||(r.track({type:2,doc:R}),U=!0,(u&&this.eu(R,u)>0||h&&this.eu(R,h)<0)&&(l=!0)):!_&&R?(r.track({type:0,doc:R}),U=!0):_&&!R&&(r.track({type:1,doc:_}),U=!0,(u||h)&&(l=!0)),U&&(R?(a=a.add(R),s=j?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{tu:a,iu:r,Ss:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((p,v)=>function(R,b){const j=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Vt:U})}};return j(R)-j(b)}(p.type,v.type)||this.eu(p.doc,v.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Ya.size===0&&this.current&&!i?1:0,h=u!==this.Xa;return this.Xa=u,a.length!==0||h?{snapshot:new ds(this.query,e.tu,s,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Nm,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ue(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new x_(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new C_(r))}),n}cu(e){this.Za=e.ks,this.Ya=ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ds.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Zd="SyncEngine";class XI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ZI{constructor(e){this.key=e,this.hu=!1}}class e2{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ci(l=>$v(l),vu),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ve(te.comparator),this.Au=new Map,this.Vu=new Ud,this.du={},this.mu=new Map,this.fu=hs.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function t2(t,e,n=!0){const r=V_(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await A_(r,e,n,!0),i}async function n2(t,e){const n=V_(t);await A_(n,e,!0,!1)}async function A_(t,e,n,r){const i=await vI(t.localStore,Sn(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await r2(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&__(t.remoteStore,i),l}async function r2(t,e,n,r,i){t.pu=(v,_,R)=>async function(j,U,x,T){let A=U.view.ru(x);A.Ss&&(A=await Am(j.localStore,U.query,!1).then(({documents:E})=>U.view.ru(E,A)));const M=T&&T.targetChanges.get(U.targetId),H=T&&T.targetMismatches.get(U.targetId)!=null,q=U.view.applyChanges(A,j.isPrimaryClient,M,H);return Om(j,U.targetId,q.au),q.snapshot}(t,v,_,R);const s=await Am(t.localStore,e,!0),a=new JI(e,s.ks),l=a.ru(s.documents),u=ra.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=a.applyChanges(l,t.isPrimaryClient,u);Om(t,n,h.au);const p=new XI(e,n,a);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function i2(t,e,n){const r=se(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(a=>!vu(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ah(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&qd(r.remoteStore,i.targetId),Ph(r,i.targetId)}).catch(vs)):(Ph(r,i.targetId),await Ah(r.localStore,i.targetId,!0))}async function s2(t,e){const n=se(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qd(n.remoteStore,r.targetId))}async function o2(t,e,n){const r=f2(t);try{const i=await function(a,l){const u=se(a),h=Ce.now(),p=l.reduce((R,b)=>R.add(b.key),ue());let v,_;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let b=Un(),j=ue();return u.xs.getEntries(R,p).next(U=>{b=U,b.forEach((x,T)=>{T.isValidDocument()||(j=j.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,b)).next(U=>{v=U;const x=[];for(const T of l){const A=yS(T,v.get(T.key).overlayedDocument);A!=null&&x.push(new hi(T.key,A,jv(A.value.mapValue),Ln.exists(!0)))}return u.mutationQueue.addMutationBatch(R,h,x,l)}).next(U=>{_=U;const x=U.applyToLocalDocumentSet(v,j);return u.documentOverlayCache.saveOverlays(R,U.batchId,x)})}).then(()=>({batchId:_.batchId,changes:qv(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,u){let h=a.du[a.currentUser.toKey()];h||(h=new Ve(le)),h=h.insert(l,u),a.du[a.currentUser.toKey()]=h}(r,i.batchId,n),await sa(r,i.changes),await Cu(r.remoteStore)}catch(i){const s=Jd(i,"Failed to persist write");n.reject(s)}}async function k_(t,e){const n=se(t);try{const r=await mI(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Au.get(s);a&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?ge(a.hu,14607):i.removedDocuments.size>0&&(ge(a.hu,42227),a.hu=!1))}),await sa(n,r,e)}catch(r){await vs(r)}}function jm(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,a)=>{const l=a.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const u=se(a);u.onlineState=l;let h=!1;u.queries.forEach((p,v)=>{for(const _ of v.ba)_.va(l)&&(h=!0)}),h&&Xd(u)}(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function a2(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new Ve(te.comparator);a=a.insert(s,mt.newNoDocument(s,ie.min()));const l=ue().add(s),u=new Tu(ie.min(),new Map,new Ve(le),a,l);await k_(r,u),r.Ru=r.Ru.remove(s),r.Au.delete(e),ef(r)}else await Ah(r.localStore,e,!1).then(()=>Ph(r,e,n)).catch(vs)}async function l2(t,e){const n=se(t),r=e.batch.batchId;try{const i=await pI(n.localStore,e);P_(n,r,null),R_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sa(n,i)}catch(i){await vs(i)}}async function u2(t,e,n){const r=se(t);try{const i=await function(a,l){const u=se(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(v=>(ge(v!==null,37113),p=v.keys(),u.mutationQueue.removeMutationBatch(h,v))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);P_(r,e,n),R_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await sa(r,i)}catch(i){await vs(i)}}function R_(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function P_(t,e,n){const r=se(t);let i=r.du[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Ph(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||D_(t,r)})}function D_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(qd(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),ef(t))}function Om(t,e,n){for(const r of n)r instanceof C_?(t.Vu.addReference(r.key,e),c2(t,r)):r instanceof x_?(G(Zd,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||D_(t,r.key)):ne(19791,{wu:r})}function c2(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(G(Zd,"New document in limbo: "+n),t.Eu.add(r),ef(t))}function ef(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new te(Re.fromString(e)),r=t.fu.next();t.Au.set(r,new ZI(n)),t.Ru=t.Ru.insert(n,r),__(t.remoteStore,new lr(Sn(Od(n.path)),r,"TargetPurposeLimboResolution",pu.ce))}}async function sa(t,e,n){const r=se(t),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{a.push(r.pu(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const v=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,v?"current":"not-current")}if(h){i.push(h);const v=Hd.Es(u.targetId,h);s.push(v)}}))}),await Promise.all(a),r.Pu.J_(i),await async function(u,h){const p=se(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>O.forEach(h,_=>O.forEach(_.Ts,R=>p.persistence.referenceDelegate.addReference(v,_.targetId,R)).next(()=>O.forEach(_.Is,R=>p.persistence.referenceDelegate.removeReference(v,_.targetId,R)))))}catch(v){if(!_s(v))throw v;G(Wd,"Failed to update sequence numbers: "+v)}for(const v of h){const _=v.targetId;if(!v.fromCache){const R=p.vs.get(_),b=R.snapshotVersion,j=R.withLastLimboFreeSnapshotVersion(b);p.vs=p.vs.insert(_,j)}}}(r.localStore,s))}async function h2(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){G(Zd,"User change. New user:",e.toKey());const r=await m_(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new X(z.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sa(n,r.Ns)}}function d2(t,e){const n=se(t),r=n.Au.get(e);if(r&&r.hu)return ue().add(r.key);{let i=ue();const s=n.Iu.get(e);if(!s)return i;for(const a of s){const l=n.Tu.get(a);i=i.unionWith(l.view.nu)}return i}}function V_(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=k_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a2.bind(null,e),e.Pu.J_=GI.bind(null,e.eventManager),e.Pu.yu=QI.bind(null,e.eventManager),e}function f2(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u2.bind(null,e),e}class Yl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Su(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return fI(this.persistence,new cI,e.initialUser,this.serializer)}Cu(e){return new p_($d.Vi,this.serializer)}Du(e){return new EI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yl.provider={build:()=>new Yl};class p2 extends Yl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ge(this.persistence.referenceDelegate instanceof Gl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new QS(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?xt.withCacheSize(this.cacheSizeBytes):xt.DEFAULT;return new p_(r=>Gl.Vi(r,n),this.serializer)}}class Dh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=h2.bind(null,this.syncEngine),await $I(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new WI}()}createDatastore(e){const n=Su(e.databaseInfo.databaseId),r=CI(e.databaseInfo);return PI(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new VI(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>jm(this.syncEngine,n,0),function(){return Pm.v()?new Pm:new wI}())}createSyncEngine(e,n){return function(i,s,a,l,u,h,p){const v=new e2(i,s,a,l,u,h);return p&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=se(i);G(oi,"RemoteStore shutting down."),s.Ea.add(5),await ia(s),s.Aa.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Dh.provider={build:()=>new Dh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="FirestoreClient";class g2{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=ft.UNAUTHENTICATED,this.clientId=Pd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{G(kr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(G(kr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Jd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function yc(t,e){t.asyncQueue.verifyOperationInProgress(),G(kr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await m_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Mm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await y2(t);G(kr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Vm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Vm(e.remoteStore,i)),t._onlineComponents=e}async function y2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(kr,"Using user provided OfflineComponentProvider");try{await yc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;as("Error using user provided cache. Falling back to memory cache: "+n),await yc(t,new Yl)}}else G(kr,"Using default OfflineComponentProvider"),await yc(t,new p2(void 0));return t._offlineComponents}async function N_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(kr,"Using user provided OnlineComponentProvider"),await Mm(t,t._uninitializedComponentsProvider._online)):(G(kr,"Using default OnlineComponentProvider"),await Mm(t,new Dh))),t._onlineComponents}function v2(t){return N_(t).then(e=>e.syncEngine)}async function _2(t){const e=await N_(t),n=e.eventManager;return n.onListen=t2.bind(null,e.syncEngine),n.onUnlisten=i2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=n2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=s2.bind(null,e.syncEngine),n}function E2(t,e,n={}){const r=new Er;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const p=new m2({next:_=>{p.Nu(),a.enqueueAndForget(()=>KI(s,v));const R=_.docs.has(l);!R&&_.fromCache?h.reject(new X(z.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&_.fromCache&&u&&u.source==="server"?h.reject(new X(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),v=new YI(Od(l.path),p,{includeMetadataChanges:!0,Ka:!0});return qI(s,v)}(await _2(t),t.asyncQueue,e,n,r)),r.promise}function w2(t,e){const n=new Er;return t.asyncQueue.enqueueAndForget(async()=>o2(await v2(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="ComponentProvider",Fm=new Map;function S2(t,e,n,r,i){return new FT(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,b_(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="firestore.googleapis.com",zm=!0;class Bm{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=L_,this.ssl=zm}else this.host=e.host,this.ssl=e.ssl??zm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=f_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KS)throw new X(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=b_(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yT;switch(r.type){case"firstParty":return new wT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Fm.get(n);r&&(G(T2,"Removing Datastore"),Fm.delete(n),r.terminate())}(this),Promise.resolve()}}function I2(t,e,n,r={}){var h;t=Uo(t,tf);const i=Ad(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&($E(`https://${l}`),KE("Firestore",!0)),s.host!==L_&&s.host!==l&&as("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!jl(u,a)&&(t._setSettings(u),r.mockUserToken)){let p,v;if(typeof r.mockUserToken=="string")p=r.mockUserToken,v=ft.MOCK_USER;else{p=HE(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new X(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new ft(_)}t._authCredentials=new vT(new Cv(p,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new nf(this.firestore,e,this._query)}}class Xe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xe(this.firestore,e,this._key)}toJSON(){return{type:Xe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ta(n,Xe._jsonSchema))return new Xe(e,r||null,new te(Re.fromString(n.referencePath)))}}Xe._jsonSchemaVersion="firestore/documentReference/1.0",Xe._jsonSchema={type:Ue("string",Xe._jsonSchemaVersion),referencePath:Ue("string")};class Qo extends nf{constructor(e,n,r){super(e,n,Od(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xe(this.firestore,null,new te(e))}withConverter(e){return new Qo(this.firestore,e,this._path)}}function j_(t,e,...n){if(t=Ol(t),arguments.length===1&&(e=Pd.newId()),AT("doc","path",e),t instanceof tf){const r=Re.fromString(e,...n);return tm(r),new Xe(t,null,new te(r))}{if(!(t instanceof Xe||t instanceof Qo))throw new X(z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return tm(r),new Xe(t.firestore,t instanceof Qo?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="AsyncQueue";class $m{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new y_(this,"async_queue_retry"),this._c=()=>{const r=gc();r&&G(Um,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=gc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=gc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Er;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!_s(e))throw e;G(Um,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Bn("INTERNAL UNHANDLED ERROR: ",Hm(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Yd.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ne(47125,{Pc:Hm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Hm(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class rf extends tf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new $m,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $m(e),this._firestoreClient=void 0,await e}}}function C2(t,e){const n=typeof t=="object"?t:rT(),r=typeof t=="string"?t:Bl,i=Xw(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=BE("firestore");s&&I2(i,...s)}return i}function O_(t){if(t._terminated)throw new X(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||x2(t),t._firestoreClient}function x2(t){var r,i,s,a;const e=t._freezeSettings(),n=S2(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new g2(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kt(ot.fromBase64String(e))}catch(n){throw new X(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kt(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ta(e,Kt._jsonSchema))return Kt.fromBase64String(e.bytes)}}Kt._jsonSchemaVersion="firestore/bytes/1.0",Kt._jsonSchema={type:Ue("string",Kt._jsonSchemaVersion),bytes:Ue("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cn._jsonSchemaVersion}}static fromJSON(e){if(ta(e,Cn._jsonSchema))return new Cn(e.latitude,e.longitude)}}Cn._jsonSchemaVersion="firestore/geoPoint/1.0",Cn._jsonSchema={type:Ue("string",Cn._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:cn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ta(e,cn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new cn(e.vectorValues);throw new X(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cn._jsonSchemaVersion="firestore/vectorValue/1.0",cn._jsonSchema={type:Ue("string",cn._jsonSchemaVersion),vectorValues:Ue("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=/^__.*__$/;class k2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hi(e,this.data,this.fieldMask,n,this.fieldTransforms):new na(e,this.data,n,this.fieldTransforms)}}function z_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{dataSource:t})}}class sf{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new sf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Jl(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(z_(this.dataSource)&&A2.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class R2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Su(e)}createContext(e,n,r,i=!1){return new sf({dataSource:e,methodName:n,targetDoc:r,path:rt.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function P2(t){const e=t._freezeSettings(),n=Su(t._databaseId);return new R2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function D2(t,e,n,r,i,s={}){const a=t.createContext(s.merge||s.mergeFields?2:0,e,n,i);H_("Data must be an object, but it was:",a,r);const l=U_(r,a);let u,h;if(s.merge)u=new an(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const v of s.mergeFields){const _=of(e,v,n);if(!a.contains(_))throw new X(z.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);b2(p,_)||p.push(_)}u=new an(p),h=a.fieldTransforms.filter(v=>u.covers(v.field))}else u=null,h=a.fieldTransforms;return new k2(new qt(l),u,h)}function B_(t,e){if($_(t=Ol(t)))return H_("Unsupported field value:",e,t),U_(t,e);if(t instanceof F_)return function(r,i){if(!z_(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let u=B_(l,i.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ol(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ce.fromDate(r);return{timestampValue:Kl(i.serializer,s)}}if(r instanceof Ce){const s=new Ce(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kl(i.serializer,s)}}if(r instanceof Cn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kt)return{bytesValue:s_(i.serializer,r._byteString)};if(r instanceof Xe){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Bd(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof cn)return function(a,l){const u=a instanceof cn?a.toArray():a;return{mapValue:{fields:{[bv]:{stringValue:Lv},[Ul]:{arrayValue:{values:u.map(p=>{if(typeof p!="number")throw l.createError("VectorValues must only contain numeric values.");return Md(l.serializer,p)})}}}}}}(r,i);if(d_(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Dd(r)}`)}(t,e)}function U_(t,e){const n={};return kv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ui(t,(r,i)=>{const s=B_(i,e.childContextForField(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function $_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ce||t instanceof Cn||t instanceof Kt||t instanceof Xe||t instanceof F_||t instanceof cn||d_(t))}function H_(t,e,n){if(!$_(n)||!xv(n)){const r=Dd(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function of(t,e,n){if((e=Ol(e))instanceof M_)return e._internalPath;if(typeof e=="string")return N2(t,e);throw Jl("Field path arguments must be of type string or ",t,!1,void 0,n)}const V2=new RegExp("[~\\*/\\[\\]]");function N2(t,e,n){if(e.search(V2)>=0)throw Jl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new M_(...e.split("."))._internalPath}catch{throw Jl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jl(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new X(z.INVALID_ARGUMENT,l+t+u)}function b2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{convertValue(e,n="none"){switch(xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ui(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Ul].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>Me(a.doubleValue));return new cn(n)}convertGeoPoint(e){return new Cn(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ho(e));default:return null}}convertTimestamp(e){const n=Ir(e);return new Ce(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);ge(h_(r),9688,{name:e});const i=new Wo(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(n)||Bn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2 extends L2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,n)}}const Wm="@firebase/firestore",qm="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new O2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(of("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class O2 extends W_{data(){return super.data()}}function M2(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class oo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zr extends W_{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(of("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Zr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zr._jsonSchema={type:Ue("string",Zr._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class cl extends Zr{data(e={}){return super.data(e)}}class To{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new oo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new cl(this._firestore,this._userDataWriter,r.key,r,new oo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const u=new cl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new oo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new cl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new oo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:F2(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=To._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function F2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */To._jsonSchemaVersion="firestore/querySnapshot/1.0",To._jsonSchema={type:Ue("string",To._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t){t=Uo(t,Xe);const e=Uo(t.firestore,rf),n=O_(e);return E2(n,t._key).then(r=>$2(e,t,r))}function B2(t,e,n){t=Uo(t,Xe);const r=Uo(t.firestore,rf),i=M2(t.converter,e),s=P2(r);return U2(r,[D2(s,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ln.none())])}function U2(t,e){const n=O_(t);return w2(n,e)}function $2(t,e,n){const r=n.docs.get(e._key),i=new j2(t);return new Zr(t,i,e._key,r,new oo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){gT(nT),Fl(new zo("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new rf(new _T(r.getProvider("auth-internal")),new TT(a,r.getProvider("app-check-internal")),zT(a,i),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Ji(Wm,qm,e),Ji(Wm,qm,"esm2020")})();const H2={apiKey:"AIzaSyA1TRqHaNsytLwPZWevHgtf0H-MKYmo2VA",authDomain:"life-manager-f5fd8.firebaseapp.com",projectId:"life-manager-f5fd8",storageBucket:"life-manager-f5fd8.firebasestorage.app",messagingSenderId:"93366478624",appId:"1:93366478624:web:acce1cdf19327acc751945"},W2=mv(H2),q_=C2(W2),Km=async(t,e)=>{const n=j_(q_,"users",t.toUpperCase());await B2(n,{...e,lastUpdated:new Date().toISOString()})},Gm=async t=>{const e=j_(q_,"users",t.toUpperCase()),n=await z2(e);return n.exists()?n.data():null},Qs=()=>Math.random().toString(36).substr(2,9),Ys={WORKOUT:{name:"Workout",color:"#ef4444",icon:""},PROFESSIONAL:{name:"Professional",color:"#3b82f6",icon:""},SELF_CARE:{name:"Self-care",color:"#a855f7",icon:""},PRODUCTIVITY:{name:"Productivity",color:"#6b7280",icon:""},SOCIAL:{name:"Social",color:"#f59e0b",icon:""},LEARNING:{name:"Learning",color:"#10b981",icon:""}},q2=[{id:"1",name:"Eat clean",type:"count",target:3,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"},{id:"2",name:"Meditation",type:"binary",target:1,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"},{id:"3",name:"Get out of the house",type:"binary",target:1,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"},{id:"4",name:"Personal care",type:"binary",target:1,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"},{id:"5",name:"Stretching",type:"binary",target:1,category:"WORKOUT",streak:0,createdAt:"2020-01-01"},{id:"6",name:"Job applications",type:"count",target:25,category:"PROFESSIONAL",streak:0,createdAt:"2020-01-01"},{id:"7",name:"Workout",type:"binary",target:1,category:"WORKOUT",streak:0,createdAt:"2020-01-01"},{id:"8",name:"Current events article",type:"binary",target:1,category:"LEARNING",streak:0,createdAt:"2020-01-01",link:"https://www.nytimes.com"},{id:"9",name:"Take vitamins",type:"binary",target:1,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"},{id:"10",name:"Pray",type:"binary",target:1,category:"SELF_CARE",streak:0,createdAt:"2020-01-01"}],K2=[{id:"1",title:"Get job offer",metricType:"milestone",milestones:[{text:"Resume updated",completed:!1},{text:"50 applications",completed:!1},{text:"10 interviews",completed:!1}]},{id:"2",title:"Consistent fitness routine",metricType:"milestone",milestones:[{text:"7 day streak",completed:!1},{text:"14 day streak",completed:!1},{text:"30 day streak",completed:!1}]}],Zn=(t,e)=>{try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}},er=(t,e)=>{try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error("Storage error:",n)}},$t=(t=new Date)=>{const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`},G2=t=>{const[e,n,r]=t.split("-").map(Number);return new Date(e,n-1,r)},Q2=(t=new Date)=>{const e=new Date(t);return e.setHours(0,0,0,0),e.setDate(e.getDate()-e.getDay()),$t(e)},Y2=(t=new Date)=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,qa=(t,e=new Date)=>t==="daily"?$t(e):t==="weekly"?Q2(e):t==="monthly"?Y2(e):null,J2=(t,e,n=null)=>{const r=t||{},i=n?e.filter(l=>!l.createdAt||l.createdAt<=n):e;let s=0,a=i.length;return i.forEach(l=>{const u=r[l.id];l.type==="count"?u!=null&&u.completed||(u==null?void 0:u.value)>=l.target?s+=1:(u==null?void 0:u.value)>0&&(s+=u.value/l.target):u!=null&&u.completed&&(s+=1)}),{total:a>0?Math.round(s/a*100):0,completed:Math.round(s*10)/10,totalHabits:a}},Js=t=>!t&&t!==0?"#3f3f46":t>=80?"#10b981":t>=60?"#8b5cf6":t>=40?"#a855f7":t>=20?"#f97316":t>0?"#ef4444":"#3f3f46",Qm=t=>t>=80?"#10b981":t>=60?"#8b5cf6":t>=40?"#a855f7":t>=20?"#f97316":t>0?"#ef4444":"#71717a",tr=({isOpen:t,onClose:e,title:n,children:r,size:i="md"})=>(K.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),t?f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,display:"flex",alignItems:"flex-end",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.7)"},onClick:e,children:f.jsxs("div",{style:{width:"100%",maxWidth:i==="lg"?"32rem":"28rem",maxHeight:"85vh",backgroundColor:"#18181b",borderTopLeftRadius:"1.25rem",borderTopRightRadius:"1.25rem",display:"flex",flexDirection:"column",border:"1px solid #27272a",borderBottom:"none"},onClick:s=>s.stopPropagation(),children:[f.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid #27272a",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#18181b",borderTopLeftRadius:"1.25rem",borderTopRightRadius:"1.25rem"},children:[f.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:600,margin:0,color:"#fafafa"},children:n}),f.jsx("button",{onClick:e,style:{width:"2.75rem",height:"2.75rem",borderRadius:"0.75rem",backgroundColor:"#27272a",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",border:"none",color:"#a1a1aa",cursor:"pointer",flexShrink:0},children:""})]}),f.jsx("div",{style:{overflowY:"scroll",padding:"1rem 1.25rem",paddingBottom:"2rem",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",minHeight:0,flex:"1 1 auto"},onTouchMove:s=>s.stopPropagation(),children:r})]})}):null),Xs={today:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),f.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),f.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),f.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),f.jsx("circle",{cx:"12",cy:"16",r:"2",fill:"currentColor"})]}),calendar:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),f.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),f.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),goals:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("circle",{cx:"12",cy:"12",r:"6"}),f.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"})]}),ideas:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{d:"M9 18h6"}),f.jsx("path",{d:"M10 22h4"}),f.jsx("path",{d:"M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7z"})]}),backup:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),f.jsx("polyline",{points:"7 10 12 15 17 10"}),f.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})};function X2(){var Si,ma,Rs,Ps,Ds,Ii,Ci,Vs,Ns,bs;const[t,e]=K.useState("today"),[n,r]=K.useState(()=>Zn("lm_tasks_v11",[])),[i,s]=K.useState(()=>Zn("lm_habits_v11",q2).map(k=>k.name.toLowerCase().includes("current events")&&!k.link?{...k,link:"https://www.nytimes.com"}:k)),[a,l]=K.useState(()=>Zn("lm_goals_v11",K2)),[u,h]=K.useState(()=>Zn("lm_dailyLogs_v11",{})),[p,v]=K.useState(()=>Zn("lm_scores_v11",{})),[_,R]=K.useState(()=>Zn("lm_ideas_v11",[])),[b,j]=K.useState(!1),[U,x]=K.useState(!1),[T,A]=K.useState(!1),[M,H]=K.useState(!1),[q,E]=K.useState(!1),[y,w]=K.useState(!1),[I,C]=K.useState(!1),[P,S]=K.useState(null),[Ne,yt]=K.useState(""),[zt,Hn]=K.useState(new Date),[$,Z]=K.useState(null),[re,ye]=K.useState("Today"),[Ee,Bt]=K.useState(null),[at,Ut]=K.useState(null),[Vt,Xt]=K.useState(null),[dn,ws]=K.useState(null),[fi,Vr]=K.useState(new Date),[oa,pi]=K.useState(null),[lt,Nr]=K.useState(null),[vt,br]=K.useState(()=>Zn("lm_syncCode_v11","")),[kn,$e]=K.useState(""),[Se,Zt]=K.useState(!1),[_t,be]=K.useState(null),[mi,en]=K.useState(()=>Zn("lm_lastSynced_v11",null)),[tn,aa]=K.useState({habits:!1,tasks:!1,sleep:!0,fact:!0}),Wn=m=>aa(k=>({...k,[m]:!k[m]})),Ts=$t(),pe=$t(fi),ve=u[pe]||{habitLogs:{},sleep:{},screenTime:0,factLearned:""},Lr=()=>{const m=new Date,k=new Date(fi);m.setHours(0,0,0,0),k.setHours(0,0,0,0);const N=Math.round((k-m)/(1e3*60*60*24));return N===0?"Today":N===-1?"Yesterday":N===1?"Tomorrow":k.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},qn=m=>Vr(k=>{const N=new Date(k);return N.setDate(N.getDate()+m),N}),Ss=()=>Vr(new Date);K.useEffect(()=>{er("lm_tasks_v11",n)},[n]),K.useEffect(()=>{er("lm_habits_v11",i)},[i]),K.useEffect(()=>{er("lm_goals_v11",a)},[a]),K.useEffect(()=>{er("lm_dailyLogs_v11",u)},[u]),K.useEffect(()=>{er("lm_scores_v11",p)},[p]),K.useEffect(()=>{er("lm_ideas_v11",_)},[_]);const Oe=K.useMemo(()=>J2(ve.habitLogs,i,pe),[ve,i,pe]);K.useEffect(()=>{ve.habitLogs&&Object.keys(ve.habitLogs).length>0&&v(m=>({...m,[pe]:Oe}))},[ve.habitLogs,Oe,pe]);const fn=K.useCallback(m=>{var k;(k=m.title)!=null&&k.trim()&&(r(N=>[...N,{...m,id:Qs(),status:"pending",createdAt:new Date().toISOString(),recurring:m.recurring||null,completions:{}}]),j(!1),ye("Today"),Bt(null))},[]),Is=K.useCallback(m=>{r(k=>k.map(N=>{var L;if(N.id!==m)return N;if(N.recurring){const Y=qa(N.recurring),ee=(L=N.completions)==null?void 0:L[Y],J={...N.completions};return ee?delete J[Y]:J[Y]=new Date().toISOString(),{...N,completions:J}}else return{...N,status:N.status==="done"?"pending":"done",completedAt:N.status==="done"?null:new Date().toISOString()}}))},[]);K.useCallback(m=>{var k;if(m.recurring){const N=qa(m.recurring);return!!((k=m.completions)!=null&&k[N])}return m.status==="done"},[]);const jr=K.useCallback((m,k)=>{var N;if(m.recurring){const L=qa(m.recurring,G2(k));return!!((N=m.completions)!=null&&N[L])}return m.status==="done"},[]),gi=K.useCallback((m,k=null)=>{h(N=>{var ut;const L=N[pe]||{habitLogs:{},sleep:{},screenTime:0,factLearned:""},Y=i.find(ce=>ce.id===m);if(!Y)return N;const ee=((ut=L.habitLogs)==null?void 0:ut[m])||{completed:!1,value:0};let J,me;return Y.type==="binary"?(me=!ee.completed,J=me?1:0):(J=k!==null?k:(ee.value+1)%(Y.target+1),me=J>=Y.target),{...N,[pe]:{...L,habitLogs:{...L.habitLogs,[m]:{completed:me,value:J}}}}})},[pe,i]),Or=K.useCallback(m=>{var k;(k=m.name)!=null&&k.trim()&&(s(N=>[...N,{id:Qs(),name:m.name.trim(),type:m.type||"binary",target:parseInt(m.target)||1,category:m.category||"PRODUCTIVITY",streak:0,createdAt:$t()}]),x(!1))},[]),la=K.useCallback((m,k)=>s(N=>N.map(L=>L.id===m?{...L,...k}:L)),[]),et=K.useCallback(m=>{s(k=>k.filter(N=>N.id!==m)),h(k=>{const N={...k};return Object.keys(N).forEach(L=>{var Y,ee;if((ee=(Y=N[L])==null?void 0:Y.habitLogs)!=null&&ee[m]){const{[m]:J,...me}=N[L].habitLogs;N[L]={...N[L],habitLogs:me}}}),N}),S(null),yt("")},[]),ua=K.useCallback(m=>{h(k=>{const N=k[pe]||{habitLogs:{}},{[m]:L,...Y}=N.habitLogs||{};return{...k,[pe]:{...N,habitLogs:Y}}}),S(null),yt("")},[pe]),Mr=K.useCallback((m,k)=>{l(N=>N.map(L=>{if(L.id===m){const Y=[...L.milestones];return Y[k]={...Y[k],completed:!Y[k].completed},{...L,milestones:Y}}return L}))},[]),Fr=K.useCallback(m=>{var N;if(!((N=m.title)!=null&&N.trim()))return;const k=(m.milestonesText||"").split(`
`).filter(L=>L.trim()).map(L=>({text:L.trim(),completed:!1}));l(L=>[...L,{id:Qs(),title:m.title.trim(),metricType:"milestone",milestones:k}]),w(!1)},[]),xu=K.useCallback(m=>l(k=>k.filter(N=>N.id!==m)),[]),Au=K.useCallback((m,k)=>{k!=null&&k.trim()&&l(N=>N.map(L=>L.id===m?{...L,milestones:[...L.milestones,{text:k.trim(),completed:!1}]}:L))},[]),Kn=K.useCallback((m,k)=>{l(N=>N.map(L=>L.id===m?{...L,milestones:L.milestones.filter((Y,ee)=>ee!==k)}:L))},[]),ku=K.useCallback((m,k,N)=>{N!=null&&N.trim()&&l(L=>L.map(Y=>{if(Y.id===m){const ee=[...Y.milestones];return ee[k]={...ee[k],text:N.trim()},{...Y,milestones:ee}}return Y}))},[]),Ru=K.useCallback((m,k)=>l(N=>N.map(L=>L.id===m?{...L,...k}:L)),[]),yi=K.useCallback(m=>{var k;(k=m.text)!=null&&k.trim()&&(R(N=>[...N,{id:Qs(),text:m.text.trim(),category:m.category||"PRODUCTIVITY",createdAt:new Date().toISOString(),status:"idea",notes:"",points:[],nextStep:""}]),E(!1))},[]),vi=K.useCallback((m,k)=>R(N=>N.map(L=>L.id===m?{...L,...k}:L)),[]),ca=K.useCallback((m,k)=>{k!=null&&k.trim()&&R(N=>N.map(L=>L.id===m?{...L,points:[...L.points||[],{id:Qs(),text:k.trim(),done:!1}]}:L))},[]),Cs=K.useCallback((m,k)=>R(N=>N.map(L=>L.id===m?{...L,points:(L.points||[]).map(Y=>Y.id===k?{...Y,done:!Y.done}:Y)}:L)),[]),zr=K.useCallback((m,k)=>R(N=>N.map(L=>L.id===m?{...L,points:(L.points||[]).filter(Y=>Y.id!==k)}:L)),[]),Pu=K.useCallback(m=>{R(k=>k.filter(N=>N.id!==m)),pi(null)},[]),pn=K.useCallback(()=>{const m={version:"v11",exportedAt:new Date().toISOString(),habits:i,tasks:n,goals:a,ideas:_,dailyLogs:u,scores:p},k=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),N=URL.createObjectURL(k),L=document.createElement("a");L.href=N,L.download=`life-manager-backup-${$t()}.json`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(N)},[i,n,a,_,u,p]),ha=K.useCallback(m=>{const k=new FileReader;k.onload=N=>{try{const L=JSON.parse(N.target.result);if(!L.version||!L.exportedAt){Nr({type:"error",message:"Invalid backup file"});return}L.habits&&s(L.habits),L.tasks&&r(L.tasks),L.goals&&l(L.goals),L.ideas&&R(L.ideas),L.dailyLogs&&h(L.dailyLogs),L.scores&&v(L.scores),Nr({type:"success",message:`Restored from ${new Date(L.exportedAt).toLocaleDateString()}`}),setTimeout(()=>Nr(null),3e3)}catch{Nr({type:"error",message:"Failed to parse file"}),setTimeout(()=>Nr(null),3e3)}},k.readAsText(m)},[]);K.useEffect(()=>{er("lm_syncCode_v11",vt)},[vt]),K.useEffect(()=>{er("lm_lastSynced_v11",mi)},[mi]);const da=K.useCallback(async()=>{if(vt){Zt(!0),be(null);try{await Km(vt,{version:"v11",habits:i,tasks:n,goals:a,ideas:_,dailyLogs:u,scores:p});const k=new Date().toISOString();en(k),be({type:"success",message:"Data synced to cloud!"}),setTimeout(()=>be(null),3e3)}catch(m){console.error("Sync error:",m),be({type:"error",message:"Failed to sync. Check connection."}),setTimeout(()=>be(null),3e3)}finally{Zt(!1)}}},[vt,i,n,a,_,u,p]),xs=K.useCallback(async()=>{if(vt){Zt(!0),be(null);try{const m=await Gm(vt);m?(m.habits&&s(m.habits),m.tasks&&r(m.tasks),m.goals&&l(m.goals),m.ideas&&R(m.ideas),m.dailyLogs&&h(m.dailyLogs),m.scores&&v(m.scores),en(m.lastUpdated||new Date().toISOString()),be({type:"success",message:"Data loaded from cloud!"})):be({type:"error",message:"No data found for this code."}),setTimeout(()=>be(null),3e3)}catch(m){console.error("Load error:",m),be({type:"error",message:"Failed to load. Check connection."}),setTimeout(()=>be(null),3e3)}finally{Zt(!1)}}},[vt]),_i=K.useCallback(async()=>{if(!kn.trim())return;const m=kn.trim().toUpperCase();Zt(!0),be(null);try{const k=await Gm(m);if(k)k.habits&&s(k.habits),k.tasks&&r(k.tasks),k.goals&&l(k.goals),k.ideas&&R(k.ideas),k.dailyLogs&&h(k.dailyLogs),k.scores&&v(k.scores),br(m),en(k.lastUpdated||new Date().toISOString()),be({type:"success",message:"Connected! Data loaded from cloud."});else{await Km(m,{version:"v11",habits:i,tasks:n,goals:a,ideas:_,dailyLogs:u,scores:p}),br(m);const L=new Date().toISOString();en(L),be({type:"success",message:"New sync code created!"})}$e(""),setTimeout(()=>be(null),3e3)}catch(k){console.error("Connect error:",k),be({type:"error",message:"Connection failed. Try again."}),setTimeout(()=>be(null),3e3)}finally{Zt(!1)}},[kn,i,n,a,_,u,p]),fa=K.useCallback(()=>{br(""),en(null),be({type:"success",message:"Disconnected from sync."}),setTimeout(()=>be(null),3e3)},[]),As=n.filter(m=>m.recurring?!0:m.status!=="done"&&(!m.dueDate||m.dueDate<=Ts)),Ei=n.filter(m=>{var k;if(m.recurring){const N=qa(m.recurring,fi);return(k=m.completions)!=null&&k[N]?$t(new Date(m.completions[N]))===pe:!1}return m.status!=="done"||!m.completedAt?!1:$t(new Date(m.completedAt))===pe}),ks=i.filter(m=>!m.createdAt||m.createdAt<=pe),wi=m=>{const k=m.getFullYear(),N=m.getMonth(),L=new Date(k,N,1),ee=new Date(k,N+1,0).getDate(),J=L.getDay(),me=[],ce=new Date(k,N,0).getDate();for(let Ct=J-1;Ct>=0;Ct--){const Rn=ce-Ct,ga=new Date(k,N-1,Rn);me.push({date:ga,isCurrentMonth:!1,key:$t(ga)})}for(let Ct=1;Ct<=ee;Ct++){const Rn=new Date(k,N,Ct);me.push({date:Rn,isCurrentMonth:!0,key:$t(Rn)})}const Et=42-me.length;for(let Ct=1;Ct<=Et;Ct++){const Rn=new Date(k,N+1,Ct);me.push({date:Rn,isCurrentMonth:!1,key:$t(Rn)})}return me},pa=K.useMemo(()=>wi(zt),[zt]),Ti=m=>{Hn(k=>{const N=new Date(k);return N.setMonth(N.getMonth()+m),N}),Z(null)},mn=K.useMemo(()=>{const m=zt.getFullYear(),k=zt.getMonth(),N=new Date(m,k+1,0).getDate();let L=0,Y=0,ee={score:0,date:null},J=0,me=0;for(let ut=1;ut<=N;ut++){const ce=new Date(m,k,ut),Et=$t(ce);p[Et]&&p[Et].total>0?(L+=p[Et].total,Y++,p[Et].total>ee.score&&(ee={score:p[Et].total,date:ce}),J++,J>me&&(me=J)):J=0}return{avgScore:Y?Math.round(L/Y):0,daysTracked:Y,bestDay:ee,longestStreak:me}},[zt,p]),F={page:{minHeight:"100vh",backgroundColor:"#09090b",color:"#fafafa",fontFamily:"'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif",paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"},nav:{position:"fixed",top:"calc(0.5rem + env(safe-area-inset-top))",left:"50%",transform:"translateX(-50%)",zIndex:50,backgroundColor:"rgba(24,24,27,0.95)",backdropFilter:"blur(12px)",border:"1px solid #27272a",borderRadius:"1rem",padding:"0.375rem",maxWidth:"95vw"},navInner:{display:"flex",alignItems:"center",gap:"0.25rem"},navBtn:m=>({display:"flex",flexDirection:"column",alignItems:"center",gap:"0.125rem",padding:"0.5rem 0.75rem",borderRadius:"0.75rem",border:"none",backgroundColor:m?"rgba(139,92,246,0.15)":"transparent",color:m?"#8b5cf6":"#a1a1aa",cursor:"pointer",minHeight:"44px",minWidth:"44px",transition:"all 0.2s"}),navLabel:{fontSize:"0.625rem",fontWeight:500},main:{paddingTop:"calc(5rem + env(safe-area-inset-top))",paddingBottom:"calc(2rem + env(safe-area-inset-bottom))",paddingLeft:"1rem",paddingRight:"1rem",maxWidth:"64rem",marginLeft:"auto",marginRight:"auto"},card:{backgroundColor:"rgba(24,24,27,0.7)",border:"1px solid #27272a",borderRadius:"1rem",marginBottom:"1rem",overflow:"hidden"},cardHeader:{padding:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",cursor:"pointer"},cardContent:{padding:"0 1rem 1rem"},btn:(m="secondary")=>({minHeight:"44px",padding:"0.5rem 1rem",borderRadius:"0.75rem",border:"none",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"all 0.2s",...m==="primary"?{backgroundColor:"#8b5cf6",color:"white"}:m==="danger"?{backgroundColor:"rgba(239,68,68,0.2)",color:"#f87171"}:{backgroundColor:"#27272a",color:"#fafafa"}}),input:{width:"100%",minHeight:"44px",padding:"0.75rem 1rem",backgroundColor:"#27272a",border:"1px solid #3f3f46",borderRadius:"0.75rem",color:"#fafafa",fontSize:"1rem",outline:"none"},tag:(m="#8b5cf6")=>({padding:"0.25rem 0.625rem",borderRadius:"0.375rem",fontSize:"0.6875rem",fontWeight:600,backgroundColor:`${m}20`,color:m}),checkbox:m=>({width:"1.75rem",height:"1.75rem",borderRadius:"0.5rem",border:m?"none":"2px solid #3f3f46",backgroundColor:m?"#10b981":"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0,transition:"all 0.2s"})};return f.jsxs("div",{style:F.page,children:[f.jsx("nav",{style:F.nav,children:f.jsxs("div",{style:F.navInner,children:[[{id:"today",label:"Today",icon:Xs.today},{id:"calendar",label:"Stats",icon:Xs.calendar},{id:"goals",label:"Goals",icon:Xs.goals},{id:"ideas",label:"Ideas",icon:Xs.ideas}].map(m=>f.jsxs("button",{onClick:()=>e(m.id),style:F.navBtn(t===m.id),children:[m.icon,f.jsx("span",{style:F.navLabel,children:m.label})]},m.id)),f.jsx("div",{style:{width:"1px",height:"2rem",backgroundColor:"#27272a",margin:"0 0.25rem"}}),f.jsx("button",{onClick:()=>C(!0),style:{...F.navBtn(!1),padding:"0.5rem"},children:Xs.backup})]})}),f.jsxs("main",{style:F.main,children:[t==="today"&&f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",marginBottom:"1.5rem"},children:[f.jsx("button",{onClick:()=>qn(-1),style:{...F.btn(),width:"3rem",padding:0},children:""}),f.jsxs("div",{style:{textAlign:"center",flex:1},children:[f.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,margin:0},children:Lr()}),f.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a",margin:"0.25rem 0 0"},children:fi.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),f.jsx("button",{onClick:()=>qn(1),style:{...F.btn(),width:"3rem",padding:0},children:""})]}),Lr()!=="Today"&&f.jsx("button",{onClick:Ss,style:{display:"block",margin:"0 auto 1rem",background:"none",border:"none",color:"#8b5cf6",fontSize:"0.875rem",cursor:"pointer"},children:" Back to Today"}),f.jsx("div",{style:F.card,children:f.jsxs("div",{style:{padding:"1.25rem"},children:[f.jsxs("p",{style:{fontSize:"0.75rem",fontWeight:600,color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"1rem"},children:[Lr(),"'s Score"]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[f.jsx("div",{style:{width:"6rem",height:"6rem",borderRadius:"50%",background:`conic-gradient(${Js(Oe.total)} ${Oe.total}%, #27272a ${Oe.total}%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 0 30px ${Js(Oe.total)}40`},children:f.jsx("div",{style:{width:"4.5rem",height:"4.5rem",borderRadius:"50%",backgroundColor:"#09090b",display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:800,fontFamily:"JetBrains Mono, monospace",color:Qm(Oe.total)},children:[Oe.total,"%"]})})}),f.jsxs("div",{style:{flex:1},children:[Oe.total>=25&&f.jsx("p",{style:{fontSize:"1rem",fontWeight:600,color:Qm(Oe.total),marginBottom:"0.25rem"},children:Oe.total>=90?" Crushing it!":Oe.total>=70?" Great progress!":Oe.total>=50?" Solid day":" Getting started"}),f.jsxs("p",{style:{fontSize:"0.875rem",color:"#71717a"},children:[Oe.completed," of ",Oe.totalHabits," habits"]}),f.jsx("div",{style:{height:"0.375rem",borderRadius:"0.1875rem",backgroundColor:"#27272a",marginTop:"0.75rem",overflow:"hidden"},children:f.jsx("div",{style:{height:"100%",width:`${Oe.total}%`,backgroundColor:Js(Oe.total),borderRadius:"0.1875rem",transition:"width 0.5s"}})})]})]})]})}),f.jsxs("div",{style:F.card,children:[f.jsxs("div",{style:F.cardHeader,onClick:()=>Wn("habits"),children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("span",{style:{color:"#71717a",transform:tn.habits?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:""}),f.jsx("span",{style:{fontWeight:600},children:"Daily Habits"}),f.jsxs("span",{style:F.tag("#8b5cf6"),children:[Object.values(ve.habitLogs||{}).filter(m=>m.completed).length,"/",ks.length]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[f.jsx("button",{onClick:m=>{m.stopPropagation(),A(!0)},style:{...F.btn(),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.75rem"},children:"Edit"}),f.jsx("button",{onClick:m=>{m.stopPropagation(),x(!0)},style:{...F.btn("primary"),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.75rem"},children:"+ Add"})]})]}),!tn.habits&&f.jsx("div",{style:F.cardContent,children:ks.length===0?f.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem"},children:[f.jsx("p",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),f.jsx("p",{style:{color:"#71717a",marginBottom:"1rem"},children:"No habits yet"}),f.jsx("button",{onClick:()=>x(!0),style:F.btn("primary"),children:"+ Add your first habit"})]}):f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.5rem"},children:ks.map(m=>{var N;const k=((N=ve.habitLogs)==null?void 0:N[m.id])||{completed:!1,value:0};return f.jsxs("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:k.completed?"rgba(16,185,129,0.15)":"rgba(39,39,42,0.5)",border:`1px solid ${k.completed?"rgba(16,185,129,0.3)":"#27272a"}`},children:[f.jsx("div",{style:{marginBottom:"0.5rem"},children:m.link?f.jsxs("a",{href:m.link,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"0.8125rem",fontWeight:500,color:"#60a5fa",textDecoration:"none"},children:[m.name," "]}):f.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:500},children:m.name})}),m.type==="count"?f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("button",{onClick:()=>gi(m.id,Math.max(0,k.value-1)),style:{width:"2.25rem",height:"2.25rem",borderRadius:"0.5rem",border:"none",backgroundColor:"#27272a",color:"white",fontSize:"1.125rem",cursor:"pointer"},children:""}),f.jsx("button",{onClick:()=>gi(m.id,k.value+1),style:{width:"2.25rem",height:"2.25rem",borderRadius:"0.5rem",border:"none",backgroundColor:"#27272a",color:"white",fontSize:"1.125rem",cursor:"pointer"},children:"+"}),f.jsxs("span",{style:{fontSize:"0.8125rem",fontWeight:600,fontFamily:"JetBrains Mono, monospace",color:k.completed?"#10b981":"#a1a1aa"},children:[k.value,"/",m.target]}),k.completed&&f.jsx("span",{style:{marginLeft:"auto",color:"#10b981"},children:""})]}):f.jsx("button",{onClick:()=>gi(m.id),style:{width:"100%",padding:"0.5rem",borderRadius:"0.5rem",border:"none",backgroundColor:k.completed?"#10b981":"#27272a",color:k.completed?"white":"#a1a1aa",fontSize:"0.75rem",fontWeight:500,cursor:"pointer"},children:k.completed?" Done":"Mark Done"})]},m.id)})})})]}),f.jsxs("div",{style:F.card,children:[f.jsxs("div",{style:F.cardHeader,onClick:()=>Wn("tasks"),children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("span",{style:{color:"#71717a",transform:tn.tasks?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:""}),f.jsx("span",{style:{fontWeight:600},children:"Tasks"}),f.jsxs("span",{style:F.tag("#71717a"),children:[As.filter(m=>!jr(m,pe)).length," pending"]})]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[f.jsx("button",{onClick:m=>{m.stopPropagation(),H(!0)},style:{...F.btn(),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.75rem"},children:"Edit"}),f.jsx("button",{onClick:m=>{m.stopPropagation(),j(!0)},style:{...F.btn("primary"),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.75rem"},children:"+ Add"})]})]}),!tn.tasks&&f.jsxs("div",{style:F.cardContent,children:[As.length===0?f.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem"},children:[f.jsx("p",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),f.jsx("p",{style:{color:"#71717a",marginBottom:"1rem"},children:"No tasks yet"}),f.jsx("button",{onClick:()=>j(!0),style:F.btn("primary"),children:"+ Add a task"})]}):f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:As.map(m=>{const k=jr(m,pe);return f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:"rgba(39,39,42,0.3)"},children:[f.jsx("div",{onClick:()=>Is(m.id),style:F.checkbox(k),children:k&&f.jsx("span",{style:{color:"white",fontSize:"0.875rem"},children:""})}),f.jsx("span",{style:{flex:1,fontSize:"0.875rem",textDecoration:k?"line-through":"none",color:k?"#71717a":"#fafafa"},children:m.title}),m.recurring&&f.jsxs("span",{style:F.tag(m.recurring==="daily"?"#06b6d4":m.recurring==="weekly"?"#3b82f6":"#a855f7"),children:[" ",m.recurring]})]},m.id)})}),Ei.length>0&&f.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #27272a"},children:[f.jsxs("p",{style:{fontSize:"0.6875rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:[" Completed (",Ei.length,")"]}),Ei.map(m=>f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0",color:"#71717a",fontSize:"0.875rem"},children:[f.jsx("span",{onClick:()=>Is(m.id),style:{cursor:"pointer",color:"#10b981"},children:""}),f.jsx("span",{style:{textDecoration:"line-through",flex:1},children:m.title})]},m.id))]})]})]}),f.jsxs("div",{style:F.card,children:[f.jsx("div",{style:F.cardHeader,onClick:()=>Wn("sleep"),children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("span",{style:{color:"#71717a",transform:tn.sleep?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:""}),f.jsx("span",{style:{fontWeight:600},children:" Sleep &  Screen"}),((Si=ve.sleep)==null?void 0:Si.hoursSlept)&&f.jsxs("span",{style:F.tag(ve.sleep.hoursSlept>=7?"#10b981":ve.sleep.hoursSlept>=5?"#f59e0b":"#ef4444"),children:[ve.sleep.hoursSlept," hrs"]})]})}),!tn.sleep&&f.jsx("div",{style:F.cardContent,children:f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"1rem"},children:[f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Bedtime"}),f.jsx("input",{type:"time",value:((ma=ve.sleep)==null?void 0:ma.bedTime)||"",onChange:m=>{var Y;const k=m.target.value,N=(Y=ve.sleep)==null?void 0:Y.wakeTime;let L=null;if(k&&N){const ee=new Date(`2000-01-01T${k}`);let J=new Date(`2000-01-01T${N}`);J<ee&&J.setDate(J.getDate()+1),L=Math.round((J-ee)/36e3)/100}h(ee=>{var J,me;return{...ee,[pe]:{...ee[pe],habitLogs:((J=ee[pe])==null?void 0:J.habitLogs)||{},sleep:{...(me=ee[pe])==null?void 0:me.sleep,bedTime:k,hoursSlept:L}}}})},style:{...F.input,fontFamily:"JetBrains Mono, monospace",fontSize:"0.875rem"}})]}),f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Wake time"}),f.jsx("input",{type:"time",value:((Rs=ve.sleep)==null?void 0:Rs.wakeTime)||"",onChange:m=>{var Y;const k=m.target.value,N=(Y=ve.sleep)==null?void 0:Y.bedTime;let L=null;if(N&&k){const ee=new Date(`2000-01-01T${N}`);let J=new Date(`2000-01-01T${k}`);J<ee&&J.setDate(J.getDate()+1),L=Math.round((J-ee)/36e3)/100}h(ee=>{var J,me;return{...ee,[pe]:{...ee[pe],habitLogs:((J=ee[pe])==null?void 0:J.habitLogs)||{},sleep:{...(me=ee[pe])==null?void 0:me.sleep,wakeTime:k,hoursSlept:L}}}})},style:{...F.input,fontFamily:"JetBrains Mono, monospace",fontSize:"0.875rem"}})]}),f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Hours slept"}),f.jsx("div",{style:{...F.input,backgroundColor:((Ps=ve.sleep)==null?void 0:Ps.hoursSlept)>=7?"rgba(16,185,129,0.2)":((Ds=ve.sleep)==null?void 0:Ds.hoursSlept)>=5?"rgba(245,158,11,0.2)":(Ii=ve.sleep)!=null&&Ii.hoursSlept?"rgba(239,68,68,0.2)":"#27272a",textAlign:"center",fontWeight:600,fontFamily:"JetBrains Mono, monospace",color:((Ci=ve.sleep)==null?void 0:Ci.hoursSlept)>=7?"#10b981":((Vs=ve.sleep)==null?void 0:Vs.hoursSlept)>=5?"#f59e0b":(Ns=ve.sleep)!=null&&Ns.hoursSlept?"#ef4444":"#71717a"},children:(bs=ve.sleep)!=null&&bs.hoursSlept?`${ve.sleep.hoursSlept} hrs`:""})]}),f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Screen time (hrs)"}),f.jsx("input",{type:"number",step:"0.5",min:"0",max:"24",value:ve.screenTime||"",onChange:m=>h(k=>{var N;return{...k,[pe]:{...k[pe],habitLogs:((N=k[pe])==null?void 0:N.habitLogs)||{},screenTime:parseFloat(m.target.value)||0}}}),placeholder:"0",style:{...F.input,fontFamily:"JetBrains Mono, monospace",fontSize:"0.875rem"}})]})]})})]}),f.jsxs("div",{style:F.card,children:[f.jsx("div",{style:F.cardHeader,onClick:()=>Wn("fact"),children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[f.jsx("span",{style:{color:"#71717a",transform:tn.fact?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:""}),f.jsx("span",{style:{fontWeight:600},children:" Fact I Learned"}),ve.factLearned&&f.jsx("span",{style:F.tag("#10b981"),children:" Recorded"})]})}),!tn.fact&&f.jsx("div",{style:F.cardContent,children:f.jsx("textarea",{value:ve.factLearned||"",onChange:m=>h(k=>{var N;return{...k,[pe]:{...k[pe],habitLogs:((N=k[pe])==null?void 0:N.habitLogs)||{},factLearned:m.target.value}}}),placeholder:"What's something interesting you learned today?",style:{...F.input,minHeight:"5rem",resize:"none",fontSize:"0.875rem"}})})]})]}),t==="calendar"&&f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.25rem"},children:[f.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,margin:0},children:"Score Calendar"}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("button",{onClick:()=>Ti(-1),style:{...F.btn(),width:"2.75rem",padding:0},children:""}),f.jsx("span",{style:{flex:1,textAlign:"center",fontWeight:600},children:zt.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),f.jsx("button",{onClick:()=>Ti(1),style:{...F.btn(),width:"2.75rem",padding:0},children:""}),f.jsx("button",{onClick:()=>{Hn(new Date),Z(null)},style:{...F.btn(),fontSize:"0.8125rem"},children:"Today"})]})]}),f.jsx("div",{style:F.card,children:f.jsxs("div",{style:{padding:"1rem"},children:[f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem",marginBottom:"0.5rem"},children:["S","M","T","W","T","F","S"].map((m,k)=>f.jsx("div",{style:{textAlign:"center",fontSize:"0.6875rem",fontWeight:500,color:"#71717a",padding:"0.375rem"},children:m},k))}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem"},children:pa.map((m,k)=>{var ee;const N=(ee=p[m.key])==null?void 0:ee.total,L=($==null?void 0:$.key)===m.key,Y=m.key===Ts;return f.jsxs("button",{onClick:()=>Z(m),onDoubleClick:()=>{Vr(m.date),e("today")},style:{aspectRatio:"1",borderRadius:"0.5rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:Y?"2px solid #3b82f6":L?"2px solid #8b5cf6":"none",backgroundColor:Js(N),color:N>0?"white":"#71717a",opacity:m.isCurrentMonth?1:.3,cursor:"pointer",fontSize:"0.75rem",fontWeight:500},children:[f.jsx("span",{children:m.date.getDate()}),N>0&&f.jsx("span",{style:{fontSize:"0.625rem",fontFamily:"JetBrains Mono, monospace"},children:N})]},k)})})]})}),f.jsx("div",{style:F.card,children:f.jsxs("div",{style:{padding:"1rem"},children:[f.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"#a1a1aa",marginBottom:"1rem"},children:"Month Summary"}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[f.jsxs("div",{children:[f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Average"}),f.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:"#8b5cf6"},children:[mn.avgScore,"%"]})]}),f.jsxs("div",{children:[f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Days Tracked"}),f.jsx("p",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace"},children:mn.daysTracked})]}),f.jsxs("div",{children:[f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Best Day"}),f.jsx("p",{style:{fontSize:"1.25rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:"#10b981"},children:mn.bestDay.score||""})]}),f.jsxs("div",{children:[f.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Best Streak"}),f.jsxs("p",{style:{fontSize:"1.25rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:"#f59e0b"},children:[mn.longestStreak||""," days"]})]})]})]})}),$&&f.jsx("div",{style:F.card,children:f.jsxs("div",{style:{padding:"1rem"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[f.jsx("h3",{style:{fontWeight:600,margin:0},children:$.date.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),f.jsx("button",{onClick:()=>Z(null),style:{background:"none",border:"none",color:"#71717a",fontSize:"1.25rem",cursor:"pointer"},children:""})]}),p[$.key]?f.jsxs(f.Fragment,{children:[f.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem"},children:f.jsx("div",{style:{width:"5rem",height:"5rem",borderRadius:"0.75rem",backgroundColor:Js(p[$.key].total),display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:"white"},children:[p[$.key].total,"%"]})})}),f.jsxs("p",{style:{textAlign:"center",color:"#71717a",fontSize:"0.875rem",marginBottom:"1rem"},children:[p[$.key].completed,"/",p[$.key].totalHabits," habits completed"]}),f.jsx("button",{onClick:()=>{Vr($.date),e("today"),Z(null)},style:{...F.btn("primary"),width:"100%"},children:"View Day "})]}):f.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[f.jsx("p",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),f.jsx("p",{style:{color:"#71717a",marginBottom:"1rem"},children:"No data recorded"}),f.jsx("button",{onClick:()=>{Vr($.date),e("today"),Z(null)},style:F.btn("primary"),children:$.key===Ts?"Start tracking":"Add data"})]})]})})]}),t==="goals"&&f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem",gap:"1rem",flexWrap:"wrap"},children:[f.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,margin:0},children:"Goals"}),f.jsx("button",{onClick:()=>w(!0),style:F.btn("primary"),children:"+ New Goal"})]}),a.length===0?f.jsxs("div",{style:{...F.card,padding:"3rem 1.5rem",textAlign:"center"},children:[f.jsx("p",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:""}),f.jsx("p",{style:{color:"#71717a",marginBottom:"1.5rem"},children:"No goals yet. Set your first goal!"}),f.jsx("button",{onClick:()=>w(!0),style:F.btn("primary"),children:"+ Create Goal"})]}):a.map(m=>{const k=m.milestones.filter(L=>L.completed).length,N=m.milestones.length>0?Math.round(k/m.milestones.length*100):0;return f.jsx("div",{style:F.card,children:f.jsxs("div",{style:{padding:"1.25rem"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",gap:"1rem"},children:[f.jsxs("div",{style:{flex:1,minWidth:0},children:[Vt===m.id?f.jsx("input",{defaultValue:m.title,autoFocus:!0,style:{...F.input,fontSize:"1.125rem",fontWeight:600},onBlur:L=>{L.target.value.trim()&&Ru(m.id,{title:L.target.value.trim()}),Xt(null)},onKeyDown:L=>{L.key==="Enter"&&L.target.blur()}}):f.jsx("h3",{onClick:()=>Xt(m.id),style:{fontSize:"1.125rem",fontWeight:600,margin:0,cursor:"pointer"},children:m.title}),f.jsxs("p",{style:{fontSize:"0.8125rem",color:"#71717a",margin:"0.25rem 0 0"},children:[k,"/",m.milestones.length," milestones"]})]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:N===100?"#10b981":"#8b5cf6"},children:[N,"%"]}),f.jsx("button",{onClick:()=>xu(m.id),style:{background:"none",border:"none",color:"#71717a",cursor:"pointer",fontSize:"1.25rem"},children:""})]})]}),f.jsx("div",{style:{height:"0.5rem",borderRadius:"0.25rem",backgroundColor:"#27272a",marginBottom:"1rem",overflow:"hidden"},children:f.jsx("div",{style:{height:"100%",width:`${N}%`,backgroundColor:N===100?"#10b981":"#8b5cf6",borderRadius:"0.25rem",transition:"width 0.5s"}})}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[m.milestones.map((L,Y)=>f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:L.completed?"rgba(16,185,129,0.1)":"rgba(39,39,42,0.5)",border:`1px solid ${L.completed?"rgba(16,185,129,0.3)":"#27272a"}`},children:[f.jsx("div",{onClick:()=>Mr(m.id,Y),style:F.checkbox(L.completed),children:L.completed&&f.jsx("span",{style:{color:"white",fontSize:"0.75rem"},children:""})}),(dn==null?void 0:dn.goalId)===m.id&&(dn==null?void 0:dn.index)===Y?f.jsx("input",{defaultValue:L.text,autoFocus:!0,style:{...F.input,flex:1,minHeight:"36px",padding:"0.5rem"},onBlur:ee=>{ee.target.value.trim()&&ku(m.id,Y,ee.target.value.trim()),ws(null)},onKeyDown:ee=>{ee.key==="Enter"&&ee.target.blur()}}):f.jsx("span",{onClick:()=>ws({goalId:m.id,index:Y}),style:{flex:1,fontSize:"0.875rem",textDecoration:L.completed?"line-through":"none",color:L.completed?"#71717a":"#fafafa",cursor:"pointer"},children:L.text}),f.jsx("button",{onClick:()=>Kn(m.id,Y),style:{background:"none",border:"none",color:"#71717a",cursor:"pointer",opacity:.5},children:""})]},Y)),f.jsx("form",{onSubmit:L=>{L.preventDefault();const Y=L.target.elements[`milestone-${m.id}`];Y.value.trim()&&(Au(m.id,Y.value.trim()),Y.value="")},children:f.jsx("input",{name:`milestone-${m.id}`,type:"text",placeholder:"+ Add milestone...",style:{...F.input,fontSize:"0.875rem"}})})]})]})},m.id)})]}),t==="ideas"&&f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.25rem"},children:[f.jsxs("div",{children:[f.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,margin:0},children:"Ideas"}),f.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a",margin:"0.25rem 0 0"},children:"Capture and develop your ideas"})]}),f.jsx("button",{onClick:()=>E(!0),style:{...F.btn("primary"),width:"100%"},children:"+ New Idea"})]}),_.length===0?f.jsxs("div",{style:{...F.card,padding:"3rem 1.5rem",textAlign:"center"},children:[f.jsx("p",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:""}),f.jsx("p",{style:{color:"#71717a",marginBottom:"1.5rem"},children:"No ideas yet. Capture your first one!"}),f.jsx("button",{onClick:()=>E(!0),style:F.btn("primary"),children:"+ Add Idea"})]}):_.map(m=>{var J,me,ut;const k=oa===m.id,N=m.status||"idea",L={idea:{icon:"",color:"#71717a"},exploring:{icon:"",color:"#3b82f6"},planning:{icon:"",color:"#a855f7"},active:{icon:"",color:"#10b981"},done:{icon:"",color:"#10b981"}}[N],Y=(m.points||[]).filter(ce=>ce.done).length,ee=(m.points||[]).length;return f.jsxs("div",{style:F.card,children:[f.jsx("div",{onClick:()=>pi(k?null:m.id),style:{padding:"1rem",cursor:"pointer"},children:f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"0.75rem"},children:[f.jsxs("div",{style:{flex:1,minWidth:0},children:[f.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,margin:0,marginBottom:"0.5rem"},children:m.text}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[f.jsxs("span",{style:F.tag(L.color),children:[L.icon," ",N]}),f.jsxs("span",{style:F.tag(((J=Ys[m.category])==null?void 0:J.color)||"#71717a"),children:[(me=Ys[m.category])==null?void 0:me.icon," ",((ut=Ys[m.category])==null?void 0:ut.name)||"General"]}),ee>0&&f.jsxs("span",{style:{fontSize:"0.6875rem",color:"#71717a"},children:[Y,"/",ee," points"]})]})]}),f.jsx("span",{style:{color:"#71717a",transform:k?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""})]})}),k&&f.jsxs("div",{style:{padding:"0 1rem 1rem",borderTop:"1px solid #27272a"},children:[f.jsxs("div",{style:{paddingTop:"1rem"},children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"0.5rem"},children:"Status"}),f.jsx("div",{style:{display:"flex",gap:"0.375rem",flexWrap:"wrap"},children:["idea","exploring","planning","active","done"].map(ce=>{const Et={idea:"",exploring:"",planning:"",active:"",done:""}[ce];return f.jsxs("button",{onClick:()=>vi(m.id,{status:ce}),style:{...F.btn(N===ce?"primary":"secondary"),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.625rem"},children:[Et," ",ce]},ce)})})]}),f.jsxs("div",{style:{marginTop:"1rem"},children:[f.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"0.5rem"},children:"Notes"}),f.jsx("textarea",{value:m.notes||"",onChange:ce=>vi(m.id,{notes:ce.target.value}),placeholder:"Add notes...",style:{...F.input,minHeight:"4rem",resize:"none",fontSize:"0.875rem"}})]}),f.jsxs("div",{style:{marginTop:"1rem"},children:[f.jsxs("label",{style:{fontSize:"0.6875rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"0.5rem"},children:["Brainstorm Points (",Y,"/",ee,")"]}),f.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.375rem"},children:[(m.points||[]).map(ce=>f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",borderRadius:"0.5rem",backgroundColor:"rgba(39,39,42,0.3)"},children:[f.jsx("div",{onClick:()=>Cs(m.id,ce.id),style:{...F.checkbox(ce.done),width:"1.5rem",height:"1.5rem"},children:ce.done&&f.jsx("span",{style:{color:"white",fontSize:"0.625rem"},children:""})}),f.jsx("span",{style:{flex:1,fontSize:"0.8125rem",textDecoration:ce.done?"line-through":"none",color:ce.done?"#71717a":"#fafafa"},children:ce.text}),f.jsx("button",{onClick:()=>zr(m.id,ce.id),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"0.875rem",opacity:.7},children:""})]},ce.id)),f.jsxs("form",{onSubmit:ce=>{ce.preventDefault();const Et=ce.target.elements.point;Et.value.trim()&&(ca(m.id,Et.value.trim()),Et.value="")},style:{display:"flex",gap:"0.5rem"},children:[f.jsx("input",{name:"point",type:"text",placeholder:"+ Add point...",style:{...F.input,flex:1,fontSize:"0.8125rem"}}),f.jsx("button",{type:"submit",style:{...F.btn(),fontSize:"0.75rem"},children:"Add"})]})]})]}),f.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #27272a",display:"flex",justifyContent:"space-between"},children:[f.jsx("button",{onClick:()=>{fn({title:m.text,term:"This Week"}),vi(m.id,{status:"active"})},style:{background:"none",border:"none",color:"#8b5cf6",cursor:"pointer",fontSize:"0.8125rem"},children:" Make Task"}),f.jsx("button",{onClick:()=>Pu(m.id),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"0.8125rem"},children:" Delete"})]})]})]},m.id)})]})]}),f.jsx(tr,{isOpen:b,onClose:()=>{j(!1),ye("Today"),Bt(null)},title:"New Task",children:f.jsxs("form",{onSubmit:m=>{m.preventDefault(),fn({title:m.target.title.value,term:Ee?"Today":re,recurring:Ee})},children:[f.jsx("input",{name:"title",type:"text",placeholder:"What needs to be done?",style:{...F.input,marginBottom:"1rem"},autoFocus:!0,required:!0}),f.jsx("label",{style:{fontSize:"0.75rem",color:"#71717a",display:"block",marginBottom:"0.5rem"},children:"Repeat"}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginBottom:"1rem"},children:[{v:null,l:"Once",i:"1"},{v:"daily",l:"Daily",i:""},{v:"weekly",l:"Weekly",i:""},{v:"monthly",l:"Monthly",i:""}].map(m=>f.jsxs("button",{type:"button",onClick:()=>Bt(m.v),style:{padding:"0.75rem 0.5rem",borderRadius:"0.75rem",border:Ee===m.v?"2px solid #10b981":"2px solid #27272a",backgroundColor:Ee===m.v?"rgba(16,185,129,0.15)":"#27272a",color:Ee===m.v?"#10b981":"#fafafa",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem"},children:[f.jsx("span",{style:{fontSize:"1.25rem"},children:m.i}),f.jsx("span",{style:{fontSize:"0.6875rem",fontWeight:500},children:m.l})]},m.l))}),!Ee&&f.jsxs(f.Fragment,{children:[f.jsx("label",{style:{fontSize:"0.75rem",color:"#71717a",display:"block",marginBottom:"0.5rem"},children:"When"}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.5rem",marginBottom:"1rem"},children:[{v:"Today",c:"#8b5cf6"},{v:"This Week",c:"#3b82f6"},{v:"This Month",c:"#a855f7"},{v:"Long Term",c:"#71717a"}].map(m=>f.jsx("button",{type:"button",onClick:()=>ye(m.v),style:{padding:"0.75rem",borderRadius:"0.75rem",border:re===m.v?`2px solid ${m.c}`:"2px solid #27272a",backgroundColor:re===m.v?`${m.c}20`:"#27272a",color:re===m.v?m.c:"#fafafa",cursor:"pointer",fontSize:"0.8125rem",fontWeight:500},children:m.v},m.v))})]}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem"},children:[f.jsx("button",{type:"button",onClick:()=>{j(!1),ye("Today"),Bt(null)},style:{...F.btn(),flex:1},children:"Cancel"}),f.jsx("button",{type:"submit",style:{...F.btn("primary"),flex:1},children:"Add Task"})]})]})}),f.jsx(tr,{isOpen:U,onClose:()=>x(!1),title:"New Habit",children:f.jsxs("form",{onSubmit:m=>{m.preventDefault();const k=m.target;Or({name:k.name.value,type:k.type.value,target:k.target.value,category:k.category.value})},children:[f.jsx("input",{name:"name",type:"text",placeholder:"Habit name",style:{...F.input,marginBottom:"0.75rem"},autoFocus:!0,required:!0}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[f.jsxs("select",{name:"type",style:F.input,children:[f.jsx("option",{value:"binary",children:"Yes/No"}),f.jsx("option",{value:"count",children:"Count"})]}),f.jsx("input",{name:"target",type:"number",placeholder:"Target (1)",defaultValue:1,style:F.input})]}),f.jsx("select",{name:"category",style:{...F.input,marginBottom:"1.5rem"},children:Object.entries(Ys).map(([m,k])=>f.jsxs("option",{value:m,children:[k.icon," ",k.name]},m))}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[f.jsx("button",{type:"button",onClick:()=>x(!1),style:{...F.btn(),flex:1},children:"Cancel"}),f.jsx("button",{type:"submit",style:{...F.btn("primary"),flex:1},children:"Add Habit"})]})]})}),f.jsxs(tr,{isOpen:T,onClose:()=>{A(!1),Ut(null)},title:"Edit Habits",size:"lg",children:[f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:i.length===0?f.jsx("p",{style:{textAlign:"center",color:"#71717a",padding:"2rem"},children:"No habits yet"}):i.map(m=>f.jsx("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:"#27272a"},children:f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[f.jsx("div",{style:{flex:1,minWidth:0},children:at===m.id?f.jsx("input",{defaultValue:m.name,autoFocus:!0,style:{...F.input,minHeight:"36px",padding:"0.5rem",fontSize:"0.875rem"},onBlur:k=>{k.target.value.trim()&&la(m.id,{name:k.target.value.trim()}),Ut(null)},onKeyDown:k=>{k.key==="Enter"&&k.target.blur()}}):f.jsxs("div",{children:[f.jsx("span",{style:{fontWeight:500,fontSize:"0.875rem"},children:m.name}),f.jsxs("span",{style:{fontSize:"0.75rem",color:"#71717a",marginLeft:"0.5rem"},children:["(",m.type==="count"?`${m.target}/day`:"daily",")"]})]})}),f.jsx("button",{onClick:()=>Ut(at===m.id?null:m.id),style:{...F.btn(),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.625rem"},children:at===m.id?"Done":"Edit"}),f.jsx("button",{onClick:()=>{A(!1),S(m)},style:{...F.btn("danger"),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.625rem"},children:"Delete"})]})},m.id))}),f.jsx("button",{onClick:()=>{A(!1),Ut(null)},style:{...F.btn(),width:"100%",marginTop:"1rem"},children:"Done"})]}),f.jsxs(tr,{isOpen:M,onClose:()=>H(!1),title:"Edit Tasks",size:"lg",children:[f.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:n.length===0?f.jsx("p",{style:{textAlign:"center",color:"#71717a",padding:"2rem"},children:"No tasks yet"}):n.map(m=>f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:"#27272a",opacity:m.status==="done"?.6:1},children:[f.jsx("span",{style:{flex:1,fontSize:"0.875rem",textDecoration:m.status==="done"?"line-through":"none"},children:m.title}),m.recurring&&f.jsx("span",{style:F.tag("#06b6d4"),children:m.recurring}),f.jsx("button",{onClick:()=>r(k=>k.filter(N=>N.id!==m.id)),style:{...F.btn("danger"),fontSize:"0.75rem",minHeight:"32px",padding:"0.25rem 0.5rem"},children:""})]},m.id))}),f.jsx("button",{onClick:()=>H(!1),style:{...F.btn(),width:"100%",marginTop:"1rem"},children:"Done"})]}),f.jsx(tr,{isOpen:q,onClose:()=>E(!1),title:" New Idea",children:f.jsxs("form",{onSubmit:m=>{m.preventDefault(),yi({text:m.target.text.value,category:m.target.category.value})},children:[f.jsx("input",{name:"text",type:"text",placeholder:"What's your idea?",style:{...F.input,marginBottom:"0.75rem",fontSize:"1rem"},autoFocus:!0,required:!0}),f.jsx("select",{name:"category",style:{...F.input,marginBottom:"1.5rem"},children:Object.entries(Ys).map(([m,k])=>f.jsxs("option",{value:m,children:[k.icon," ",k.name]},m))}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[f.jsx("button",{type:"button",onClick:()=>E(!1),style:{...F.btn(),flex:1},children:"Cancel"}),f.jsx("button",{type:"submit",style:{...F.btn("primary"),flex:1},children:"Capture"})]})]})}),f.jsx(tr,{isOpen:y,onClose:()=>w(!1),title:"New Goal",children:f.jsxs("form",{onSubmit:m=>{m.preventDefault(),Fr({title:m.target.title.value,milestonesText:m.target.milestones.value})},children:[f.jsx("input",{name:"title",type:"text",placeholder:"Goal title",style:{...F.input,marginBottom:"0.75rem"},autoFocus:!0,required:!0}),f.jsx("label",{style:{fontSize:"0.75rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Milestones (one per line)"}),f.jsx("textarea",{name:"milestones",placeholder:`First milestone
Second milestone
Third milestone`,style:{...F.input,minHeight:"6rem",resize:"none",marginBottom:"1.5rem"}}),f.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[f.jsx("button",{type:"button",onClick:()=>w(!1),style:{...F.btn(),flex:1},children:"Cancel"}),f.jsx("button",{type:"submit",style:{...F.btn("primary"),flex:1},children:"Create Goal"})]})]})}),f.jsxs(tr,{isOpen:I,onClose:()=>C(!1),title:" Backup & Sync",children:[(lt||_t)&&f.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:((lt==null?void 0:lt.type)||(_t==null?void 0:_t.type))==="success"?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)",color:((lt==null?void 0:lt.type)||(_t==null?void 0:_t.type))==="success"?"#10b981":"#ef4444",fontSize:"0.875rem"},children:[((lt==null?void 0:lt.type)||(_t==null?void 0:_t.type))==="success"?"":""," ",(lt==null?void 0:lt.message)||(_t==null?void 0:_t.message)]}),f.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",backgroundColor:"#27272a",marginBottom:"0.75rem",border:vt?"1px solid rgba(16,185,129,0.3)":"1px solid transparent"},children:[f.jsx("h3",{style:{fontWeight:600,marginBottom:"0.5rem",fontSize:"0.9375rem"},children:" Cloud Sync"}),vt?f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[f.jsx("span",{style:{fontSize:"0.8125rem",color:"#10b981"},children:" Connected:"}),f.jsx("span",{style:{fontFamily:"JetBrains Mono, monospace",fontSize:"0.875rem",color:"#fafafa",backgroundColor:"#3f3f46",padding:"0.25rem 0.5rem",borderRadius:"0.375rem"},children:vt})]}),mi&&f.jsxs("p",{style:{fontSize:"0.75rem",color:"#71717a",marginBottom:"0.75rem"},children:["Last synced: ",new Date(mi).toLocaleString()]}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[f.jsx("button",{onClick:da,disabled:Se,style:{...F.btn("primary"),flex:1,opacity:Se?.7:1},children:Se?"...":" Push"}),f.jsx("button",{onClick:xs,disabled:Se,style:{...F.btn(),flex:1,opacity:Se?.7:1},children:Se?"...":" Pull"})]}),f.jsx("button",{onClick:fa,style:{background:"none",border:"none",color:"#71717a",fontSize:"0.75rem",cursor:"pointer",padding:0},children:"Disconnect"})]}):f.jsxs(f.Fragment,{children:[f.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a",marginBottom:"0.75rem"},children:"Enter a personal sync code to backup & sync across devices"}),f.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[f.jsx("input",{type:"text",value:kn,onChange:m=>$e(m.target.value.toUpperCase()),placeholder:"e.g. NATE-2025",style:{...F.input,flex:1,fontFamily:"JetBrains Mono, monospace",textTransform:"uppercase"},onKeyDown:m=>{m.key==="Enter"&&_i()}}),f.jsx("button",{onClick:_i,disabled:Se||!kn.trim(),style:{...F.btn("primary"),opacity:Se||!kn.trim()?.7:1},children:Se?"...":"Connect"})]})]})]}),f.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",backgroundColor:"#27272a",marginBottom:"0.75rem"},children:[f.jsx("h3",{style:{fontWeight:600,marginBottom:"0.5rem",fontSize:"0.9375rem"},children:" Export Data"}),f.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a",marginBottom:"0.75rem"},children:"Download all your data as a backup file"}),f.jsx("button",{onClick:pn,style:{...F.btn("primary"),width:"100%"},children:"Download Backup"})]}),f.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",backgroundColor:"#27272a",marginBottom:"0.75rem"},children:[f.jsx("h3",{style:{fontWeight:600,marginBottom:"0.5rem",fontSize:"0.9375rem"},children:" Import Data"}),f.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a",marginBottom:"0.75rem"},children:"Restore from a previous backup"}),f.jsxs("label",{style:{...F.btn(),width:"100%",cursor:"pointer",display:"block",textAlign:"center"},children:["Choose File",f.jsx("input",{type:"file",accept:".json",style:{display:"none"},onChange:m=>{m.target.files[0]&&ha(m.target.files[0])}})]})]}),f.jsx("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:"rgba(39,39,42,0.5)",fontSize:"0.75rem",color:"#71717a"},children:f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.25rem"},children:[f.jsxs("span",{children:[i.length," habits"]}),f.jsxs("span",{children:[n.length," tasks"]}),f.jsxs("span",{children:[a.length," goals"]}),f.jsxs("span",{children:[_.length," ideas"]}),f.jsxs("span",{children:[Object.keys(u).length," days logged"]}),f.jsxs("span",{children:[Object.keys(p).length," scores"]})]})}),f.jsx("button",{onClick:()=>C(!1),style:{...F.btn(),width:"100%",marginTop:"1rem"},children:"Close"})]}),f.jsx(tr,{isOpen:!!P,onClose:()=>{S(null),yt("")},title:"Delete Habit",children:P&&f.jsxs(f.Fragment,{children:[f.jsxs("p",{style:{color:"#a1a1aa",marginBottom:"1rem"},children:['"',P.name,'"']}),f.jsxs("button",{onClick:()=>ua(P.id),style:{width:"100%",padding:"1rem",borderRadius:"0.75rem",border:"2px solid #27272a",backgroundColor:"#27272a",color:"#fafafa",cursor:"pointer",textAlign:"left",marginBottom:"0.75rem"},children:[f.jsxs("div",{style:{fontWeight:500,marginBottom:"0.25rem"},children:["Remove from ",Lr()]}),f.jsx("div",{style:{fontSize:"0.8125rem",color:"#71717a"},children:"Clears today's data only. Habit stays in your list."})]}),f.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",border:"2px solid rgba(239,68,68,0.3)",backgroundColor:"rgba(239,68,68,0.1)"},children:[f.jsx("div",{style:{fontWeight:500,color:"#f87171",marginBottom:"0.5rem"},children:"Delete permanently"}),f.jsxs("div",{style:{fontSize:"0.8125rem",color:"#71717a",marginBottom:"0.75rem"},children:["Removes habit and all history. Type ",f.jsx("span",{style:{color:"#f87171",fontFamily:"JetBrains Mono, monospace"},children:"delete"})," to confirm."]}),f.jsx("input",{type:"text",value:Ne,onChange:m=>yt(m.target.value),placeholder:'Type "delete"',style:{...F.input,marginBottom:"0.75rem",fontSize:"0.875rem"}}),f.jsx("button",{onClick:()=>et(P.id),disabled:Ne.toLowerCase()!=="delete",style:{...F.btn("danger"),width:"100%",opacity:Ne.toLowerCase()!=="delete"?.5:1,cursor:Ne.toLowerCase()!=="delete"?"not-allowed":"pointer"},children:"Delete Forever"})]}),f.jsx("button",{onClick:()=>{S(null),yt("")},style:{...F.btn(),width:"100%",marginTop:"1rem"},children:"Cancel"})]})})]})}vc.createRoot(document.getElementById("root")).render(f.jsx(_0.StrictMode,{children:f.jsx(X2,{})}));
