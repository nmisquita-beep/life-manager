(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function i_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var og={exports:{}},gu={},ag={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ra=Symbol.for("react.element"),s_=Symbol.for("react.portal"),o_=Symbol.for("react.fragment"),a_=Symbol.for("react.strict_mode"),l_=Symbol.for("react.profiler"),u_=Symbol.for("react.provider"),c_=Symbol.for("react.context"),h_=Symbol.for("react.forward_ref"),d_=Symbol.for("react.suspense"),f_=Symbol.for("react.memo"),p_=Symbol.for("react.lazy"),Uf=Symbol.iterator;function m_(t){return t===null||typeof t!="object"?null:(t=Uf&&t[Uf]||t["@@iterator"],typeof t=="function"?t:null)}var lg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ug=Object.assign,cg={};function _s(t,e,n){this.props=t,this.context=e,this.refs=cg,this.updater=n||lg}_s.prototype.isReactComponent={};_s.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_s.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hg(){}hg.prototype=_s.prototype;function Zh(t,e,n){this.props=t,this.context=e,this.refs=cg,this.updater=n||lg}var ed=Zh.prototype=new hg;ed.constructor=Zh;ug(ed,_s.prototype);ed.isPureReactComponent=!0;var $f=Array.isArray,dg=Object.prototype.hasOwnProperty,td={current:null},fg={key:!0,ref:!0,__self:!0,__source:!0};function pg(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)dg.call(e,r)&&!fg.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ra,type:t,key:s,ref:a,props:i,_owner:td.current}}function g_(t,e){return{$$typeof:ra,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nd(t){return typeof t=="object"&&t!==null&&t.$$typeof===ra}function y_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Hf=/\/+/g;function rc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?y_(""+t.key):e.toString(36)}function hl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ra:case s_:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+rc(a,0):r,$f(i)?(n="",t!=null&&(n=t.replace(Hf,"$&/")+"/"),hl(i,e,n,"",function(d){return d})):i!=null&&(nd(i)&&(i=g_(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Hf,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",$f(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+rc(s,l);a+=hl(s,e,n,u,i)}else if(u=m_(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+rc(s,l++),a+=hl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ua(t,e,n){if(t==null)return t;var r=[],i=0;return hl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function v_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},dl={transition:null},__={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:dl,ReactCurrentOwner:td};function mg(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Ua,forEach:function(t,e,n){Ua(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ua(t,function(){e++}),e},toArray:function(t){return Ua(t,function(e){return e})||[]},only:function(t){if(!nd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=_s;ae.Fragment=o_;ae.Profiler=l_;ae.PureComponent=Zh;ae.StrictMode=a_;ae.Suspense=d_;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=__;ae.act=mg;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ug({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=td.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)dg.call(e,u)&&!fg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:ra,type:t.type,key:i,ref:s,props:r,_owner:a}};ae.createContext=function(t){return t={$$typeof:c_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:u_,_context:t},t.Consumer=t};ae.createElement=pg;ae.createFactory=function(t){var e=pg.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:h_,render:t}};ae.isValidElement=nd;ae.lazy=function(t){return{$$typeof:p_,_payload:{_status:-1,_result:t},_init:v_}};ae.memo=function(t,e){return{$$typeof:f_,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=dl.transition;dl.transition={};try{t()}finally{dl.transition=e}};ae.unstable_act=mg;ae.useCallback=function(t,e){return It.current.useCallback(t,e)};ae.useContext=function(t){return It.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return It.current.useDeferredValue(t)};ae.useEffect=function(t,e){return It.current.useEffect(t,e)};ae.useId=function(){return It.current.useId()};ae.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return It.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};ae.useRef=function(t){return It.current.useRef(t)};ae.useState=function(t){return It.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return It.current.useTransition()};ae.version="18.3.1";ag.exports=ae;var $=ag.exports;const E_=i_($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_=$,S_=Symbol.for("react.element"),T_=Symbol.for("react.fragment"),x_=Object.prototype.hasOwnProperty,C_=w_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I_={key:!0,ref:!0,__self:!0,__source:!0};function gg(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)x_.call(e,r)&&!I_.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:S_,type:t,key:s,ref:a,props:i,_owner:C_.current}}gu.Fragment=T_;gu.jsx=gg;gu.jsxs=gg;og.exports=gu;var h=og.exports,Fc={},yg={exports:{}},Kt={},vg={exports:{}},_g={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,X){var ne=B.length;B.push(X);e:for(;0<ne;){var ye=ne-1>>>1,Ee=B[ye];if(0<i(Ee,X))B[ye]=X,B[ne]=Ee,ne=ye;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var X=B[0],ne=B.pop();if(ne!==X){B[0]=ne;e:for(var ye=0,Ee=B.length,Yt=Ee>>>1;ye<Yt;){var dt=2*(ye+1)-1,Jt=B[dt],Ft=dt+1,ln=B[Ft];if(0>i(Jt,ne))Ft<Ee&&0>i(ln,Jt)?(B[ye]=ln,B[Ft]=ne,ye=Ft):(B[ye]=Jt,B[dt]=ne,ye=dt);else if(Ft<Ee&&0>i(ln,ne))B[ye]=ln,B[Ft]=ne,ye=Ft;else break e}}return X}function i(B,X){var ne=B.sortIndex-X.sortIndex;return ne!==0?ne:B.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],d=[],m=1,y=null,_=3,R=!1,j=!1,L=!1,W=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(B){for(var X=n(d);X!==null;){if(X.callback===null)r(d);else if(X.startTime<=B)r(d),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(d)}}function M(B){if(L=!1,k(B),!j)if(n(u)!==null)j=!0,Qt(q);else{var X=n(d);X!==null&&or(M,X.startTime-B)}}function q(B,X){j=!1,L&&(L=!1,I(v),v=-1),R=!0;var ne=_;try{for(k(X),y=n(u);y!==null&&(!(y.expirationTime>X)||B&&!C());){var ye=y.callback;if(typeof ye=="function"){y.callback=null,_=y.priorityLevel;var Ee=ye(y.expirationTime<=X);X=t.unstable_now(),typeof Ee=="function"?y.callback=Ee:y===n(u)&&r(u),k(X)}else r(u);y=n(u)}if(y!==null)var Yt=!0;else{var dt=n(d);dt!==null&&or(M,dt.startTime-X),Yt=!1}return Yt}finally{y=null,_=ne,R=!1}}var G=!1,E=null,v=-1,w=5,x=-1;function C(){return!(t.unstable_now()-x<w)}function P(){if(E!==null){var B=t.unstable_now();x=B;var X=!0;try{X=E(!0,B)}finally{X?T():(G=!1,E=null)}}else G=!1}var T;if(typeof S=="function")T=function(){S(P)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,St=Oe.port2;Oe.port1.onmessage=P,T=function(){St.postMessage(null)}}else T=function(){W(P,0)};function Qt(B){E=B,G||(G=!0,T())}function or(B,X){v=W(function(){B(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){j||R||(j=!0,Qt(q))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(_){case 1:case 2:case 3:var X=3;break;default:X=_}var ne=_;_=X;try{return B()}finally{_=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,X){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ne=_;_=B;try{return X()}finally{_=ne}},t.unstable_scheduleCallback=function(B,X,ne){var ye=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ye+ne:ye):ne=ye,B){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=ne+Ee,B={id:m++,callback:X,priorityLevel:B,startTime:ne,expirationTime:Ee,sortIndex:-1},ne>ye?(B.sortIndex=ne,e(d,B),n(u)===null&&B===n(d)&&(L?(I(v),v=-1):L=!0,or(M,ne-ye))):(B.sortIndex=Ee,e(u,B),j||R||(j=!0,Qt(q))),B},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(B){var X=_;return function(){var ne=_;_=X;try{return B.apply(this,arguments)}finally{_=ne}}}})(_g);vg.exports=_g;var A_=vg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k_=$,qt=A_;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Eg=new Set,Po={};function vi(t,e){os(t,e),os(t+"Capture",e)}function os(t,e){for(Po[t]=e,t=0;t<e.length;t++)Eg.add(e[t])}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zc=Object.prototype.hasOwnProperty,R_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wf={},qf={};function P_(t){return zc.call(qf,t)?!0:zc.call(Wf,t)?!1:R_.test(t)?qf[t]=!0:(Wf[t]=!0,!1)}function D_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function V_(t,e,n,r){if(e===null||typeof e>"u"||D_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var rd=/[\-:]([a-z])/g;function id(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rd,id);ct[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rd,id);ct[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rd,id);ct[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function sd(t,e,n,r){var i=ct.hasOwnProperty(e)?ct[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(V_(e,n,i,r)&&(n=null),r||i===null?P_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sr=k_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$a=Symbol.for("react.element"),Fi=Symbol.for("react.portal"),zi=Symbol.for("react.fragment"),od=Symbol.for("react.strict_mode"),Bc=Symbol.for("react.profiler"),wg=Symbol.for("react.provider"),Sg=Symbol.for("react.context"),ad=Symbol.for("react.forward_ref"),Uc=Symbol.for("react.suspense"),$c=Symbol.for("react.suspense_list"),ld=Symbol.for("react.memo"),pr=Symbol.for("react.lazy"),Tg=Symbol.for("react.offscreen"),Kf=Symbol.iterator;function Gs(t){return t===null||typeof t!="object"?null:(t=Kf&&t[Kf]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,ic;function oo(t){if(ic===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ic=e&&e[1]||""}return`
`+ic+t}var sc=!1;function oc(t,e){if(!t||sc)return"";sc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{sc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?oo(t):""}function b_(t){switch(t.tag){case 5:return oo(t.type);case 16:return oo("Lazy");case 13:return oo("Suspense");case 19:return oo("SuspenseList");case 0:case 2:case 15:return t=oc(t.type,!1),t;case 11:return t=oc(t.type.render,!1),t;case 1:return t=oc(t.type,!0),t;default:return""}}function Hc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zi:return"Fragment";case Fi:return"Portal";case Bc:return"Profiler";case od:return"StrictMode";case Uc:return"Suspense";case $c:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Sg:return(t.displayName||"Context")+".Consumer";case wg:return(t._context.displayName||"Context")+".Provider";case ad:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ld:return e=t.displayName||null,e!==null?e:Hc(t.type)||"Memo";case pr:e=t._payload,t=t._init;try{return Hc(t(e))}catch{}}return null}function N_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hc(e);case 8:return e===od?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function j_(t){var e=xg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ha(t){t._valueTracker||(t._valueTracker=j_(t))}function Cg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wc(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=br(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ig(t,e){e=e.checked,e!=null&&sd(t,"checked",e,!1)}function qc(t,e){Ig(t,e);var n=br(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Kc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Kc(t,e.type,br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Kc(t,e,n){(e!=="number"||Rl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ao=Array.isArray;function Ji(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+br(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Gc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(ao(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:br(n)}}function Ag(t,e){var n=br(e.value),r=br(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Jf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wa,Rg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wa=Wa||document.createElement("div"),Wa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Do(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var mo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L_=["Webkit","ms","Moz","O"];Object.keys(mo).forEach(function(t){L_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mo[e]=mo[t]})});function Pg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||mo.hasOwnProperty(t)&&mo[t]?(""+e).trim():e+"px"}function Dg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Pg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var O_=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yc(t,e){if(e){if(O_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Jc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xc=null;function ud(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zc=null,Xi=null,Zi=null;function Xf(t){if(t=oa(t)){if(typeof Zc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=wu(e),Zc(t.stateNode,t.type,e))}}function Vg(t){Xi?Zi?Zi.push(t):Zi=[t]:Xi=t}function bg(){if(Xi){var t=Xi,e=Zi;if(Zi=Xi=null,Xf(t),e)for(t=0;t<e.length;t++)Xf(e[t])}}function Ng(t,e){return t(e)}function jg(){}var ac=!1;function Lg(t,e,n){if(ac)return t(e,n);ac=!0;try{return Ng(t,e,n)}finally{ac=!1,(Xi!==null||Zi!==null)&&(jg(),bg())}}function Vo(t,e){var n=t.stateNode;if(n===null)return null;var r=wu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var eh=!1;if(Xn)try{var Qs={};Object.defineProperty(Qs,"passive",{get:function(){eh=!0}}),window.addEventListener("test",Qs,Qs),window.removeEventListener("test",Qs,Qs)}catch{eh=!1}function M_(t,e,n,r,i,s,a,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var go=!1,Pl=null,Dl=!1,th=null,F_={onError:function(t){go=!0,Pl=t}};function z_(t,e,n,r,i,s,a,l,u){go=!1,Pl=null,M_.apply(F_,arguments)}function B_(t,e,n,r,i,s,a,l,u){if(z_.apply(this,arguments),go){if(go){var d=Pl;go=!1,Pl=null}else throw Error(U(198));Dl||(Dl=!0,th=d)}}function _i(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Og(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zf(t){if(_i(t)!==t)throw Error(U(188))}function U_(t){var e=t.alternate;if(!e){if(e=_i(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Zf(i),t;if(s===r)return Zf(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Mg(t){return t=U_(t),t!==null?Fg(t):null}function Fg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Fg(t);if(e!==null)return e;t=t.sibling}return null}var zg=qt.unstable_scheduleCallback,ep=qt.unstable_cancelCallback,$_=qt.unstable_shouldYield,H_=qt.unstable_requestPaint,We=qt.unstable_now,W_=qt.unstable_getCurrentPriorityLevel,cd=qt.unstable_ImmediatePriority,Bg=qt.unstable_UserBlockingPriority,Vl=qt.unstable_NormalPriority,q_=qt.unstable_LowPriority,Ug=qt.unstable_IdlePriority,yu=null,Nn=null;function K_(t){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(yu,t,void 0,(t.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:Y_,G_=Math.log,Q_=Math.LN2;function Y_(t){return t>>>=0,t===0?32:31-(G_(t)/Q_|0)|0}var qa=64,Ka=4194304;function lo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=lo(l):(s&=a,s!==0&&(r=lo(s)))}else a=n&~i,a!==0?r=lo(a):s!==0&&(r=lo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vn(e),i=1<<n,r|=t[n],e&=~i;return r}function J_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-vn(s),l=1<<a,u=i[a];u===-1?(!(l&n)||l&r)&&(i[a]=J_(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function nh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $g(){var t=qa;return qa<<=1,!(qa&4194240)&&(qa=64),t}function lc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ia(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vn(e),t[e]=n}function Z_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function hd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function Hg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wg,dd,qg,Kg,Gg,rh=!1,Ga=[],wr=null,Sr=null,Tr=null,bo=new Map,No=new Map,gr=[],e1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tp(t,e){switch(t){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":bo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":No.delete(e.pointerId)}}function Ys(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=oa(e),e!==null&&dd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function t1(t,e,n,r,i){switch(e){case"focusin":return wr=Ys(wr,t,e,n,r,i),!0;case"dragenter":return Sr=Ys(Sr,t,e,n,r,i),!0;case"mouseover":return Tr=Ys(Tr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return bo.set(s,Ys(bo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,No.set(s,Ys(No.get(s)||null,t,e,n,r,i)),!0}return!1}function Qg(t){var e=ii(t.target);if(e!==null){var n=_i(e);if(n!==null){if(e=n.tag,e===13){if(e=Og(n),e!==null){t.blockedOn=e,Gg(t.priority,function(){qg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ih(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xc=r,n.target.dispatchEvent(r),Xc=null}else return e=oa(n),e!==null&&dd(e),t.blockedOn=n,!1;e.shift()}return!0}function np(t,e,n){fl(t)&&n.delete(e)}function n1(){rh=!1,wr!==null&&fl(wr)&&(wr=null),Sr!==null&&fl(Sr)&&(Sr=null),Tr!==null&&fl(Tr)&&(Tr=null),bo.forEach(np),No.forEach(np)}function Js(t,e){t.blockedOn===e&&(t.blockedOn=null,rh||(rh=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,n1)))}function jo(t){function e(i){return Js(i,t)}if(0<Ga.length){Js(Ga[0],t);for(var n=1;n<Ga.length;n++){var r=Ga[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wr!==null&&Js(wr,t),Sr!==null&&Js(Sr,t),Tr!==null&&Js(Tr,t),bo.forEach(e),No.forEach(e),n=0;n<gr.length;n++)r=gr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gr.length&&(n=gr[0],n.blockedOn===null);)Qg(n),n.blockedOn===null&&gr.shift()}var es=sr.ReactCurrentBatchConfig,Nl=!0;function r1(t,e,n,r){var i=_e,s=es.transition;es.transition=null;try{_e=1,fd(t,e,n,r)}finally{_e=i,es.transition=s}}function i1(t,e,n,r){var i=_e,s=es.transition;es.transition=null;try{_e=4,fd(t,e,n,r)}finally{_e=i,es.transition=s}}function fd(t,e,n,r){if(Nl){var i=ih(t,e,n,r);if(i===null)vc(t,e,r,jl,n),tp(t,r);else if(t1(i,t,e,n,r))r.stopPropagation();else if(tp(t,r),e&4&&-1<e1.indexOf(t)){for(;i!==null;){var s=oa(i);if(s!==null&&Wg(s),s=ih(t,e,n,r),s===null&&vc(t,e,r,jl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else vc(t,e,r,null,n)}}var jl=null;function ih(t,e,n,r){if(jl=null,t=ud(r),t=ii(t),t!==null)if(e=_i(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Og(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jl=t,null}function Yg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W_()){case cd:return 1;case Bg:return 4;case Vl:case q_:return 16;case Ug:return 536870912;default:return 16}default:return 16}}var vr=null,pd=null,pl=null;function Jg(){if(pl)return pl;var t,e=pd,n=e.length,r,i="value"in vr?vr.value:vr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return pl=i.slice(t,1<r?1-r:void 0)}function ml(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qa(){return!0}function rp(){return!1}function Gt(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qa:rp,this.isPropagationStopped=rp,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qa)},persist:function(){},isPersistent:Qa}),e}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},md=Gt(Es),sa=je({},Es,{view:0,detail:0}),s1=Gt(sa),uc,cc,Xs,vu=je({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xs&&(Xs&&t.type==="mousemove"?(uc=t.screenX-Xs.screenX,cc=t.screenY-Xs.screenY):cc=uc=0,Xs=t),uc)},movementY:function(t){return"movementY"in t?t.movementY:cc}}),ip=Gt(vu),o1=je({},vu,{dataTransfer:0}),a1=Gt(o1),l1=je({},sa,{relatedTarget:0}),hc=Gt(l1),u1=je({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),c1=Gt(u1),h1=je({},Es,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),d1=Gt(h1),f1=je({},Es,{data:0}),sp=Gt(f1),p1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=g1[t])?!!e[t]:!1}function gd(){return y1}var v1=je({},sa,{key:function(t){if(t.key){var e=p1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ml(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?m1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gd,charCode:function(t){return t.type==="keypress"?ml(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ml(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_1=Gt(v1),E1=je({},vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),op=Gt(E1),w1=je({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gd}),S1=Gt(w1),T1=je({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),x1=Gt(T1),C1=je({},vu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),I1=Gt(C1),A1=[9,13,27,32],yd=Xn&&"CompositionEvent"in window,yo=null;Xn&&"documentMode"in document&&(yo=document.documentMode);var k1=Xn&&"TextEvent"in window&&!yo,Xg=Xn&&(!yd||yo&&8<yo&&11>=yo),ap=" ",lp=!1;function Zg(t,e){switch(t){case"keyup":return A1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ey(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bi=!1;function R1(t,e){switch(t){case"compositionend":return ey(e);case"keypress":return e.which!==32?null:(lp=!0,ap);case"textInput":return t=e.data,t===ap&&lp?null:t;default:return null}}function P1(t,e){if(Bi)return t==="compositionend"||!yd&&Zg(t,e)?(t=Jg(),pl=pd=vr=null,Bi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xg&&e.locale!=="ko"?null:e.data;default:return null}}var D1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function up(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!D1[t.type]:e==="textarea"}function ty(t,e,n,r){Vg(r),e=Ll(e,"onChange"),0<e.length&&(n=new md("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vo=null,Lo=null;function V1(t){dy(t,0)}function _u(t){var e=Hi(t);if(Cg(e))return t}function b1(t,e){if(t==="change")return e}var ny=!1;if(Xn){var dc;if(Xn){var fc="oninput"in document;if(!fc){var cp=document.createElement("div");cp.setAttribute("oninput","return;"),fc=typeof cp.oninput=="function"}dc=fc}else dc=!1;ny=dc&&(!document.documentMode||9<document.documentMode)}function hp(){vo&&(vo.detachEvent("onpropertychange",ry),Lo=vo=null)}function ry(t){if(t.propertyName==="value"&&_u(Lo)){var e=[];ty(e,Lo,t,ud(t)),Lg(V1,e)}}function N1(t,e,n){t==="focusin"?(hp(),vo=e,Lo=n,vo.attachEvent("onpropertychange",ry)):t==="focusout"&&hp()}function j1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _u(Lo)}function L1(t,e){if(t==="click")return _u(e)}function O1(t,e){if(t==="input"||t==="change")return _u(e)}function M1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:M1;function Oo(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!zc.call(e,i)||!wn(t[i],e[i]))return!1}return!0}function dp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fp(t,e){var n=dp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dp(n)}}function iy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sy(){for(var t=window,e=Rl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rl(t.document)}return e}function vd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function F1(t){var e=sy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iy(n.ownerDocument.documentElement,n)){if(r!==null&&vd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=fp(n,s);var a=fp(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var z1=Xn&&"documentMode"in document&&11>=document.documentMode,Ui=null,sh=null,_o=null,oh=!1;function pp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oh||Ui==null||Ui!==Rl(r)||(r=Ui,"selectionStart"in r&&vd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_o&&Oo(_o,r)||(_o=r,r=Ll(sh,"onSelect"),0<r.length&&(e=new md("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ui)))}function Ya(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $i={animationend:Ya("Animation","AnimationEnd"),animationiteration:Ya("Animation","AnimationIteration"),animationstart:Ya("Animation","AnimationStart"),transitionend:Ya("Transition","TransitionEnd")},pc={},oy={};Xn&&(oy=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function Eu(t){if(pc[t])return pc[t];if(!$i[t])return t;var e=$i[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in oy)return pc[t]=e[n];return t}var ay=Eu("animationend"),ly=Eu("animationiteration"),uy=Eu("animationstart"),cy=Eu("transitionend"),hy=new Map,mp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(t,e){hy.set(t,e),vi(e,[t])}for(var mc=0;mc<mp.length;mc++){var gc=mp[mc],B1=gc.toLowerCase(),U1=gc[0].toUpperCase()+gc.slice(1);Br(B1,"on"+U1)}Br(ay,"onAnimationEnd");Br(ly,"onAnimationIteration");Br(uy,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(cy,"onTransitionEnd");os("onMouseEnter",["mouseout","mouseover"]);os("onMouseLeave",["mouseout","mouseover"]);os("onPointerEnter",["pointerout","pointerover"]);os("onPointerLeave",["pointerout","pointerover"]);vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(uo));function gp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,B_(r,e,void 0,t),t.currentTarget=null}function dy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;gp(i,l,d),s=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,d=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;gp(i,l,d),s=u}}}if(Dl)throw t=th,Dl=!1,th=null,t}function Ae(t,e){var n=e[hh];n===void 0&&(n=e[hh]=new Set);var r=t+"__bubble";n.has(r)||(fy(e,t,2,!1),n.add(r))}function yc(t,e,n){var r=0;e&&(r|=4),fy(n,t,r,e)}var Ja="_reactListening"+Math.random().toString(36).slice(2);function Mo(t){if(!t[Ja]){t[Ja]=!0,Eg.forEach(function(n){n!=="selectionchange"&&($1.has(n)||yc(n,!1,t),yc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ja]||(e[Ja]=!0,yc("selectionchange",!1,e))}}function fy(t,e,n,r){switch(Yg(e)){case 1:var i=r1;break;case 4:i=i1;break;default:i=fd}n=i.bind(null,e,n,t),i=void 0,!eh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function vc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;l!==null;){if(a=ii(l),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}l=l.parentNode}}r=r.return}Lg(function(){var d=s,m=ud(n),y=[];e:{var _=hy.get(t);if(_!==void 0){var R=md,j=t;switch(t){case"keypress":if(ml(n)===0)break e;case"keydown":case"keyup":R=_1;break;case"focusin":j="focus",R=hc;break;case"focusout":j="blur",R=hc;break;case"beforeblur":case"afterblur":R=hc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=ip;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=a1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=S1;break;case ay:case ly:case uy:R=c1;break;case cy:R=x1;break;case"scroll":R=s1;break;case"wheel":R=I1;break;case"copy":case"cut":case"paste":R=d1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=op}var L=(e&4)!==0,W=!L&&t==="scroll",I=L?_!==null?_+"Capture":null:_;L=[];for(var S=d,k;S!==null;){k=S;var M=k.stateNode;if(k.tag===5&&M!==null&&(k=M,I!==null&&(M=Vo(S,I),M!=null&&L.push(Fo(S,M,k)))),W)break;S=S.return}0<L.length&&(_=new R(_,j,null,n,m),y.push({event:_,listeners:L}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",_&&n!==Xc&&(j=n.relatedTarget||n.fromElement)&&(ii(j)||j[Zn]))break e;if((R||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,R?(j=n.relatedTarget||n.toElement,R=d,j=j?ii(j):null,j!==null&&(W=_i(j),j!==W||j.tag!==5&&j.tag!==6)&&(j=null)):(R=null,j=d),R!==j)){if(L=ip,M="onMouseLeave",I="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(L=op,M="onPointerLeave",I="onPointerEnter",S="pointer"),W=R==null?_:Hi(R),k=j==null?_:Hi(j),_=new L(M,S+"leave",R,n,m),_.target=W,_.relatedTarget=k,M=null,ii(m)===d&&(L=new L(I,S+"enter",j,n,m),L.target=k,L.relatedTarget=W,M=L),W=M,R&&j)t:{for(L=R,I=j,S=0,k=L;k;k=bi(k))S++;for(k=0,M=I;M;M=bi(M))k++;for(;0<S-k;)L=bi(L),S--;for(;0<k-S;)I=bi(I),k--;for(;S--;){if(L===I||I!==null&&L===I.alternate)break t;L=bi(L),I=bi(I)}L=null}else L=null;R!==null&&yp(y,_,R,L,!1),j!==null&&W!==null&&yp(y,W,j,L,!0)}}e:{if(_=d?Hi(d):window,R=_.nodeName&&_.nodeName.toLowerCase(),R==="select"||R==="input"&&_.type==="file")var q=b1;else if(up(_))if(ny)q=O1;else{q=j1;var G=N1}else(R=_.nodeName)&&R.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(q=L1);if(q&&(q=q(t,d))){ty(y,q,n,m);break e}G&&G(t,_,d),t==="focusout"&&(G=_._wrapperState)&&G.controlled&&_.type==="number"&&Kc(_,"number",_.value)}switch(G=d?Hi(d):window,t){case"focusin":(up(G)||G.contentEditable==="true")&&(Ui=G,sh=d,_o=null);break;case"focusout":_o=sh=Ui=null;break;case"mousedown":oh=!0;break;case"contextmenu":case"mouseup":case"dragend":oh=!1,pp(y,n,m);break;case"selectionchange":if(z1)break;case"keydown":case"keyup":pp(y,n,m)}var E;if(yd)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Bi?Zg(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Xg&&n.locale!=="ko"&&(Bi||v!=="onCompositionStart"?v==="onCompositionEnd"&&Bi&&(E=Jg()):(vr=m,pd="value"in vr?vr.value:vr.textContent,Bi=!0)),G=Ll(d,v),0<G.length&&(v=new sp(v,t,null,n,m),y.push({event:v,listeners:G}),E?v.data=E:(E=ey(n),E!==null&&(v.data=E)))),(E=k1?R1(t,n):P1(t,n))&&(d=Ll(d,"onBeforeInput"),0<d.length&&(m=new sp("onBeforeInput","beforeinput",null,n,m),y.push({event:m,listeners:d}),m.data=E))}dy(y,e)})}function Fo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ll(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Vo(t,n),s!=null&&r.unshift(Fo(t,s,i)),s=Vo(t,e),s!=null&&r.push(Fo(t,s,i))),t=t.return}return r}function bi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yp(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,i?(u=Vo(n,s),u!=null&&a.unshift(Fo(n,u,l))):i||(u=Vo(n,s),u!=null&&a.push(Fo(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var H1=/\r\n?/g,W1=/\u0000|\uFFFD/g;function vp(t){return(typeof t=="string"?t:""+t).replace(H1,`
`).replace(W1,"")}function Xa(t,e,n){if(e=vp(e),vp(t)!==e&&n)throw Error(U(425))}function Ol(){}var ah=null,lh=null;function uh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ch=typeof setTimeout=="function"?setTimeout:void 0,q1=typeof clearTimeout=="function"?clearTimeout:void 0,_p=typeof Promise=="function"?Promise:void 0,K1=typeof queueMicrotask=="function"?queueMicrotask:typeof _p<"u"?function(t){return _p.resolve(null).then(t).catch(G1)}:ch;function G1(t){setTimeout(function(){throw t})}function _c(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),jo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);jo(e)}function xr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ep(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ws=Math.random().toString(36).slice(2),bn="__reactFiber$"+ws,zo="__reactProps$"+ws,Zn="__reactContainer$"+ws,hh="__reactEvents$"+ws,Q1="__reactListeners$"+ws,Y1="__reactHandles$"+ws;function ii(t){var e=t[bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zn]||n[bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ep(t);t!==null;){if(n=t[bn])return n;t=Ep(t)}return e}t=n,n=t.parentNode}return null}function oa(t){return t=t[bn]||t[Zn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function wu(t){return t[zo]||null}var dh=[],Wi=-1;function Ur(t){return{current:t}}function Re(t){0>Wi||(t.current=dh[Wi],dh[Wi]=null,Wi--)}function Ce(t,e){Wi++,dh[Wi]=t.current,t.current=e}var Nr={},wt=Ur(Nr),Lt=Ur(!1),hi=Nr;function as(t,e){var n=t.type.contextTypes;if(!n)return Nr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ot(t){return t=t.childContextTypes,t!=null}function Ml(){Re(Lt),Re(wt)}function wp(t,e,n){if(wt.current!==Nr)throw Error(U(168));Ce(wt,e),Ce(Lt,n)}function py(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,N_(t)||"Unknown",i));return je({},n,r)}function Fl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Nr,hi=wt.current,Ce(wt,t),Ce(Lt,Lt.current),!0}function Sp(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=py(t,e,hi),r.__reactInternalMemoizedMergedChildContext=t,Re(Lt),Re(wt),Ce(wt,t)):Re(Lt),Ce(Lt,n)}var Kn=null,Su=!1,Ec=!1;function my(t){Kn===null?Kn=[t]:Kn.push(t)}function J1(t){Su=!0,my(t)}function $r(){if(!Ec&&Kn!==null){Ec=!0;var t=0,e=_e;try{var n=Kn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Kn=null,Su=!1}catch(i){throw Kn!==null&&(Kn=Kn.slice(t+1)),zg(cd,$r),i}finally{_e=e,Ec=!1}}return null}var qi=[],Ki=0,zl=null,Bl=0,Zt=[],en=0,di=null,Gn=1,Qn="";function ti(t,e){qi[Ki++]=Bl,qi[Ki++]=zl,zl=t,Bl=e}function gy(t,e,n){Zt[en++]=Gn,Zt[en++]=Qn,Zt[en++]=di,di=t;var r=Gn;t=Qn;var i=32-vn(r)-1;r&=~(1<<i),n+=1;var s=32-vn(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Gn=1<<32-vn(e)+i|n<<i|r,Qn=s+t}else Gn=1<<s|n<<i|r,Qn=t}function _d(t){t.return!==null&&(ti(t,1),gy(t,1,0))}function Ed(t){for(;t===zl;)zl=qi[--Ki],qi[Ki]=null,Bl=qi[--Ki],qi[Ki]=null;for(;t===di;)di=Zt[--en],Zt[en]=null,Qn=Zt[--en],Zt[en]=null,Gn=Zt[--en],Zt[en]=null}var Wt=null,Ht=null,De=!1,gn=null;function yy(t,e){var n=rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Tp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,Ht=xr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,Ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=di!==null?{id:Gn,overflow:Qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,Ht=null,!0):!1;default:return!1}}function fh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ph(t){if(De){var e=Ht;if(e){var n=e;if(!Tp(t,e)){if(fh(t))throw Error(U(418));e=xr(n.nextSibling);var r=Wt;e&&Tp(t,e)?yy(r,n):(t.flags=t.flags&-4097|2,De=!1,Wt=t)}}else{if(fh(t))throw Error(U(418));t.flags=t.flags&-4097|2,De=!1,Wt=t}}}function xp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function Za(t){if(t!==Wt)return!1;if(!De)return xp(t),De=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!uh(t.type,t.memoizedProps)),e&&(e=Ht)){if(fh(t))throw vy(),Error(U(418));for(;e;)yy(t,e),e=xr(e.nextSibling)}if(xp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ht=xr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ht=null}}else Ht=Wt?xr(t.stateNode.nextSibling):null;return!0}function vy(){for(var t=Ht;t;)t=xr(t.nextSibling)}function ls(){Ht=Wt=null,De=!1}function wd(t){gn===null?gn=[t]:gn.push(t)}var X1=sr.ReactCurrentBatchConfig;function Zs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function el(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cp(t){var e=t._init;return e(t._payload)}function _y(t){function e(I,S){if(t){var k=I.deletions;k===null?(I.deletions=[S],I.flags|=16):k.push(S)}}function n(I,S){if(!t)return null;for(;S!==null;)e(I,S),S=S.sibling;return null}function r(I,S){for(I=new Map;S!==null;)S.key!==null?I.set(S.key,S):I.set(S.index,S),S=S.sibling;return I}function i(I,S){return I=kr(I,S),I.index=0,I.sibling=null,I}function s(I,S,k){return I.index=k,t?(k=I.alternate,k!==null?(k=k.index,k<S?(I.flags|=2,S):k):(I.flags|=2,S)):(I.flags|=1048576,S)}function a(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,S,k,M){return S===null||S.tag!==6?(S=Ac(k,I.mode,M),S.return=I,S):(S=i(S,k),S.return=I,S)}function u(I,S,k,M){var q=k.type;return q===zi?m(I,S,k.props.children,M,k.key):S!==null&&(S.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===pr&&Cp(q)===S.type)?(M=i(S,k.props),M.ref=Zs(I,S,k),M.return=I,M):(M=Sl(k.type,k.key,k.props,null,I.mode,M),M.ref=Zs(I,S,k),M.return=I,M)}function d(I,S,k,M){return S===null||S.tag!==4||S.stateNode.containerInfo!==k.containerInfo||S.stateNode.implementation!==k.implementation?(S=kc(k,I.mode,M),S.return=I,S):(S=i(S,k.children||[]),S.return=I,S)}function m(I,S,k,M,q){return S===null||S.tag!==7?(S=ui(k,I.mode,M,q),S.return=I,S):(S=i(S,k),S.return=I,S)}function y(I,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Ac(""+S,I.mode,k),S.return=I,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $a:return k=Sl(S.type,S.key,S.props,null,I.mode,k),k.ref=Zs(I,null,S),k.return=I,k;case Fi:return S=kc(S,I.mode,k),S.return=I,S;case pr:var M=S._init;return y(I,M(S._payload),k)}if(ao(S)||Gs(S))return S=ui(S,I.mode,k,null),S.return=I,S;el(I,S)}return null}function _(I,S,k,M){var q=S!==null?S.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return q!==null?null:l(I,S,""+k,M);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case $a:return k.key===q?u(I,S,k,M):null;case Fi:return k.key===q?d(I,S,k,M):null;case pr:return q=k._init,_(I,S,q(k._payload),M)}if(ao(k)||Gs(k))return q!==null?null:m(I,S,k,M,null);el(I,k)}return null}function R(I,S,k,M,q){if(typeof M=="string"&&M!==""||typeof M=="number")return I=I.get(k)||null,l(S,I,""+M,q);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case $a:return I=I.get(M.key===null?k:M.key)||null,u(S,I,M,q);case Fi:return I=I.get(M.key===null?k:M.key)||null,d(S,I,M,q);case pr:var G=M._init;return R(I,S,k,G(M._payload),q)}if(ao(M)||Gs(M))return I=I.get(k)||null,m(S,I,M,q,null);el(S,M)}return null}function j(I,S,k,M){for(var q=null,G=null,E=S,v=S=0,w=null;E!==null&&v<k.length;v++){E.index>v?(w=E,E=null):w=E.sibling;var x=_(I,E,k[v],M);if(x===null){E===null&&(E=w);break}t&&E&&x.alternate===null&&e(I,E),S=s(x,S,v),G===null?q=x:G.sibling=x,G=x,E=w}if(v===k.length)return n(I,E),De&&ti(I,v),q;if(E===null){for(;v<k.length;v++)E=y(I,k[v],M),E!==null&&(S=s(E,S,v),G===null?q=E:G.sibling=E,G=E);return De&&ti(I,v),q}for(E=r(I,E);v<k.length;v++)w=R(E,I,v,k[v],M),w!==null&&(t&&w.alternate!==null&&E.delete(w.key===null?v:w.key),S=s(w,S,v),G===null?q=w:G.sibling=w,G=w);return t&&E.forEach(function(C){return e(I,C)}),De&&ti(I,v),q}function L(I,S,k,M){var q=Gs(k);if(typeof q!="function")throw Error(U(150));if(k=q.call(k),k==null)throw Error(U(151));for(var G=q=null,E=S,v=S=0,w=null,x=k.next();E!==null&&!x.done;v++,x=k.next()){E.index>v?(w=E,E=null):w=E.sibling;var C=_(I,E,x.value,M);if(C===null){E===null&&(E=w);break}t&&E&&C.alternate===null&&e(I,E),S=s(C,S,v),G===null?q=C:G.sibling=C,G=C,E=w}if(x.done)return n(I,E),De&&ti(I,v),q;if(E===null){for(;!x.done;v++,x=k.next())x=y(I,x.value,M),x!==null&&(S=s(x,S,v),G===null?q=x:G.sibling=x,G=x);return De&&ti(I,v),q}for(E=r(I,E);!x.done;v++,x=k.next())x=R(E,I,v,x.value,M),x!==null&&(t&&x.alternate!==null&&E.delete(x.key===null?v:x.key),S=s(x,S,v),G===null?q=x:G.sibling=x,G=x);return t&&E.forEach(function(P){return e(I,P)}),De&&ti(I,v),q}function W(I,S,k,M){if(typeof k=="object"&&k!==null&&k.type===zi&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case $a:e:{for(var q=k.key,G=S;G!==null;){if(G.key===q){if(q=k.type,q===zi){if(G.tag===7){n(I,G.sibling),S=i(G,k.props.children),S.return=I,I=S;break e}}else if(G.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===pr&&Cp(q)===G.type){n(I,G.sibling),S=i(G,k.props),S.ref=Zs(I,G,k),S.return=I,I=S;break e}n(I,G);break}else e(I,G);G=G.sibling}k.type===zi?(S=ui(k.props.children,I.mode,M,k.key),S.return=I,I=S):(M=Sl(k.type,k.key,k.props,null,I.mode,M),M.ref=Zs(I,S,k),M.return=I,I=M)}return a(I);case Fi:e:{for(G=k.key;S!==null;){if(S.key===G)if(S.tag===4&&S.stateNode.containerInfo===k.containerInfo&&S.stateNode.implementation===k.implementation){n(I,S.sibling),S=i(S,k.children||[]),S.return=I,I=S;break e}else{n(I,S);break}else e(I,S);S=S.sibling}S=kc(k,I.mode,M),S.return=I,I=S}return a(I);case pr:return G=k._init,W(I,S,G(k._payload),M)}if(ao(k))return j(I,S,k,M);if(Gs(k))return L(I,S,k,M);el(I,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,S!==null&&S.tag===6?(n(I,S.sibling),S=i(S,k),S.return=I,I=S):(n(I,S),S=Ac(k,I.mode,M),S.return=I,I=S),a(I)):n(I,S)}return W}var us=_y(!0),Ey=_y(!1),Ul=Ur(null),$l=null,Gi=null,Sd=null;function Td(){Sd=Gi=$l=null}function xd(t){var e=Ul.current;Re(Ul),t._currentValue=e}function mh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ts(t,e){$l=t,Sd=Gi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jt=!0),t.firstContext=null)}function on(t){var e=t._currentValue;if(Sd!==t)if(t={context:t,memoizedValue:e,next:null},Gi===null){if($l===null)throw Error(U(308));Gi=t,$l.dependencies={lanes:0,firstContext:t}}else Gi=Gi.next=t;return e}var si=null;function Cd(t){si===null?si=[t]:si.push(t)}function wy(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Cd(e)):(n.next=i.next,i.next=n),e.interleaved=n,er(t,r)}function er(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mr=!1;function Id(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,er(t,n)}return i=r.interleaved,i===null?(e.next=e,Cd(r)):(e.next=i.next,i.next=e),r.interleaved=e,er(t,n)}function gl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hd(t,n)}}function Ip(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hl(t,e,n,r){var i=t.updateQueue;mr=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,d=u.next;u.next=null,a===null?s=d:a.next=d,a=u;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==a&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=u))}if(s!==null){var y=i.baseState;a=0,m=d=u=null,l=s;do{var _=l.lane,R=l.eventTime;if((r&_)===_){m!==null&&(m=m.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=t,L=l;switch(_=e,R=n,L.tag){case 1:if(j=L.payload,typeof j=="function"){y=j.call(R,y,_);break e}y=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=L.payload,_=typeof j=="function"?j.call(R,y,_):j,_==null)break e;y=je({},y,_);break e;case 2:mr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[l]:_.push(l))}else R={eventTime:R,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=R,u=y):m=m.next=R,a|=_;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;_=l,l=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(m===null&&(u=y),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=m,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);pi|=a,t.lanes=a,t.memoizedState=y}}function Ap(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var aa={},jn=Ur(aa),Bo=Ur(aa),Uo=Ur(aa);function oi(t){if(t===aa)throw Error(U(174));return t}function Ad(t,e){switch(Ce(Uo,e),Ce(Bo,t),Ce(jn,aa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qc(e,t)}Re(jn),Ce(jn,e)}function cs(){Re(jn),Re(Bo),Re(Uo)}function Ty(t){oi(Uo.current);var e=oi(jn.current),n=Qc(e,t.type);e!==n&&(Ce(Bo,t),Ce(jn,n))}function kd(t){Bo.current===t&&(Re(jn),Re(Bo))}var Ve=Ur(0);function Wl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wc=[];function Rd(){for(var t=0;t<wc.length;t++)wc[t]._workInProgressVersionPrimary=null;wc.length=0}var yl=sr.ReactCurrentDispatcher,Sc=sr.ReactCurrentBatchConfig,fi=0,Ne=null,Ye=null,nt=null,ql=!1,Eo=!1,$o=0,Z1=0;function mt(){throw Error(U(321))}function Pd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function Dd(t,e,n,r,i,s){if(fi=s,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yl.current=t===null||t.memoizedState===null?rE:iE,t=n(r,i),Eo){s=0;do{if(Eo=!1,$o=0,25<=s)throw Error(U(301));s+=1,nt=Ye=null,e.updateQueue=null,yl.current=sE,t=n(r,i)}while(Eo)}if(yl.current=Kl,e=Ye!==null&&Ye.next!==null,fi=0,nt=Ye=Ne=null,ql=!1,e)throw Error(U(300));return t}function Vd(){var t=$o!==0;return $o=0,t}function Dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?Ne.memoizedState=nt=t:nt=nt.next=t,nt}function an(){if(Ye===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=nt===null?Ne.memoizedState:nt.next;if(e!==null)nt=e,Ye=t;else{if(t===null)throw Error(U(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},nt===null?Ne.memoizedState=nt=t:nt=nt.next=t}return nt}function Ho(t,e){return typeof e=="function"?e(t):e}function Tc(t){var e=an(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Ye,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,u=null,d=s;do{var m=d.lane;if((fi&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var y={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=y,a=r):u=u.next=y,Ne.lanes|=m,pi|=m}d=d.next}while(d!==null&&d!==s);u===null?a=r:u.next=l,wn(r,e.memoizedState)||(jt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ne.lanes|=s,pi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xc(t){var e=an(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);wn(s,e.memoizedState)||(jt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function xy(){}function Cy(t,e){var n=Ne,r=an(),i=e(),s=!wn(r.memoizedState,i);if(s&&(r.memoizedState=i,jt=!0),r=r.queue,bd(ky.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,Wo(9,Ay.bind(null,n,r,i,e),void 0,null),it===null)throw Error(U(349));fi&30||Iy(n,e,i)}return i}function Iy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ay(t,e,n,r){e.value=n,e.getSnapshot=r,Ry(e)&&Py(t)}function ky(t,e,n){return n(function(){Ry(e)&&Py(t)})}function Ry(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function Py(t){var e=er(t,1);e!==null&&_n(e,t,1,-1)}function kp(t){var e=Dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:t},e.queue=t,t=t.dispatch=nE.bind(null,Ne,t),[e.memoizedState,t]}function Wo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Dy(){return an().memoizedState}function vl(t,e,n,r){var i=Dn();Ne.flags|=t,i.memoizedState=Wo(1|e,n,void 0,r===void 0?null:r)}function Tu(t,e,n,r){var i=an();r=r===void 0?null:r;var s=void 0;if(Ye!==null){var a=Ye.memoizedState;if(s=a.destroy,r!==null&&Pd(r,a.deps)){i.memoizedState=Wo(e,n,s,r);return}}Ne.flags|=t,i.memoizedState=Wo(1|e,n,s,r)}function Rp(t,e){return vl(8390656,8,t,e)}function bd(t,e){return Tu(2048,8,t,e)}function Vy(t,e){return Tu(4,2,t,e)}function by(t,e){return Tu(4,4,t,e)}function Ny(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jy(t,e,n){return n=n!=null?n.concat([t]):null,Tu(4,4,Ny.bind(null,e,t),n)}function Nd(){}function Ly(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Oy(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function My(t,e,n){return fi&21?(wn(n,e)||(n=$g(),Ne.lanes|=n,pi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jt=!0),t.memoizedState=n)}function eE(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=Sc.transition;Sc.transition={};try{t(!1),e()}finally{_e=n,Sc.transition=r}}function Fy(){return an().memoizedState}function tE(t,e,n){var r=Ar(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zy(t))By(e,n);else if(n=wy(t,e,n,r),n!==null){var i=Ct();_n(n,t,r,i),Uy(n,e,r)}}function nE(t,e,n){var r=Ar(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zy(t))By(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,wn(l,a)){var u=e.interleaved;u===null?(i.next=i,Cd(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=wy(t,e,i,r),n!==null&&(i=Ct(),_n(n,t,r,i),Uy(n,e,r))}}function zy(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function By(t,e){Eo=ql=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Uy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hd(t,n)}}var Kl={readContext:on,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},rE={readContext:on,useCallback:function(t,e){return Dn().memoizedState=[t,e===void 0?null:e],t},useContext:on,useEffect:Rp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,vl(4194308,4,Ny.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vl(4194308,4,t,e)},useInsertionEffect:function(t,e){return vl(4,2,t,e)},useMemo:function(t,e){var n=Dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tE.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=Dn();return t={current:t},e.memoizedState=t},useState:kp,useDebugValue:Nd,useDeferredValue:function(t){return Dn().memoizedState=t},useTransition:function(){var t=kp(!1),e=t[0];return t=eE.bind(null,t[1]),Dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,i=Dn();if(De){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),it===null)throw Error(U(349));fi&30||Iy(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Rp(ky.bind(null,r,s,t),[t]),r.flags|=2048,Wo(9,Ay.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Dn(),e=it.identifierPrefix;if(De){var n=Qn,r=Gn;n=(r&~(1<<32-vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$o++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Z1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},iE={readContext:on,useCallback:Ly,useContext:on,useEffect:bd,useImperativeHandle:jy,useInsertionEffect:Vy,useLayoutEffect:by,useMemo:Oy,useReducer:Tc,useRef:Dy,useState:function(){return Tc(Ho)},useDebugValue:Nd,useDeferredValue:function(t){var e=an();return My(e,Ye.memoizedState,t)},useTransition:function(){var t=Tc(Ho)[0],e=an().memoizedState;return[t,e]},useMutableSource:xy,useSyncExternalStore:Cy,useId:Fy,unstable_isNewReconciler:!1},sE={readContext:on,useCallback:Ly,useContext:on,useEffect:bd,useImperativeHandle:jy,useInsertionEffect:Vy,useLayoutEffect:by,useMemo:Oy,useReducer:xc,useRef:Dy,useState:function(){return xc(Ho)},useDebugValue:Nd,useDeferredValue:function(t){var e=an();return Ye===null?e.memoizedState=t:My(e,Ye.memoizedState,t)},useTransition:function(){var t=xc(Ho)[0],e=an().memoizedState;return[t,e]},useMutableSource:xy,useSyncExternalStore:Cy,useId:Fy,unstable_isNewReconciler:!1};function pn(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xu={isMounted:function(t){return(t=t._reactInternals)?_i(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=Ar(t),s=Yn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Cr(t,s,i),e!==null&&(_n(e,t,i,r),gl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=Ar(t),s=Yn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Cr(t,s,i),e!==null&&(_n(e,t,i,r),gl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),r=Ar(t),i=Yn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Cr(t,i,r),e!==null&&(_n(e,t,r,n),gl(e,t,r))}};function Pp(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Oo(n,r)||!Oo(i,s):!0}function $y(t,e,n){var r=!1,i=Nr,s=e.contextType;return typeof s=="object"&&s!==null?s=on(s):(i=Ot(e)?hi:wt.current,r=e.contextTypes,s=(r=r!=null)?as(t,i):Nr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Dp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xu.enqueueReplaceState(e,e.state,null)}function yh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Id(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=on(s):(s=Ot(e)?hi:wt.current,i.context=as(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(gh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xu.enqueueReplaceState(i,i.state,null),Hl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function hs(t,e){try{var n="",r=e;do n+=b_(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Cc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var oE=typeof WeakMap=="function"?WeakMap:Map;function Hy(t,e,n){n=Yn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ql||(Ql=!0,kh=r),vh(t,e)},n}function Wy(t,e,n){n=Yn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){vh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vh(t,e),typeof r!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Vp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new oE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=EE.bind(null,t,e,n),e.then(t,t))}function bp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Np(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yn(-1,1),e.tag=2,Cr(n,e,1))),n.lanes|=1),t)}var aE=sr.ReactCurrentOwner,jt=!1;function xt(t,e,n,r){e.child=t===null?Ey(e,null,n,r):us(e,t.child,n,r)}function jp(t,e,n,r,i){n=n.render;var s=e.ref;return ts(e,i),r=Dd(t,e,n,r,s,i),n=Vd(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,tr(t,e,i)):(De&&n&&_d(e),e.flags|=1,xt(t,e,r,i),e.child)}function Lp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Ud(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,qy(t,e,s,r,i)):(t=Sl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Oo,n(a,r)&&t.ref===e.ref)return tr(t,e,i)}return e.flags|=1,t=kr(s,r),t.ref=e.ref,t.return=e,e.child=t}function qy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Oo(s,r)&&t.ref===e.ref)if(jt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(jt=!0);else return e.lanes=t.lanes,tr(t,e,i)}return _h(t,e,n,r,i)}function Ky(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Yi,$t),$t|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(Yi,$t),$t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ce(Yi,$t),$t|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ce(Yi,$t),$t|=r;return xt(t,e,i,n),e.child}function Gy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _h(t,e,n,r,i){var s=Ot(n)?hi:wt.current;return s=as(e,s),ts(e,i),n=Dd(t,e,n,r,s,i),r=Vd(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,tr(t,e,i)):(De&&r&&_d(e),e.flags|=1,xt(t,e,n,i),e.child)}function Op(t,e,n,r,i){if(Ot(n)){var s=!0;Fl(e)}else s=!1;if(ts(e,i),e.stateNode===null)_l(t,e),$y(e,n,r),yh(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=on(d):(d=Ot(n)?hi:wt.current,d=as(e,d));var m=n.getDerivedStateFromProps,y=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Dp(e,a,r,d),mr=!1;var _=e.memoizedState;a.state=_,Hl(e,r,a,i),u=e.memoizedState,l!==r||_!==u||Lt.current||mr?(typeof m=="function"&&(gh(e,n,m,r),u=e.memoizedState),(l=mr||Pp(e,n,l,r,_,u,d))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Sy(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:pn(e.type,l),a.props=d,y=e.pendingProps,_=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=on(u):(u=Ot(n)?hi:wt.current,u=as(e,u));var R=n.getDerivedStateFromProps;(m=typeof R=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==y||_!==u)&&Dp(e,a,r,u),mr=!1,_=e.memoizedState,a.state=_,Hl(e,r,a,i);var j=e.memoizedState;l!==y||_!==j||Lt.current||mr?(typeof R=="function"&&(gh(e,n,R,r),j=e.memoizedState),(d=mr||Pp(e,n,d,r,_,j,u)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,j,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,j,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=j),a.props=r,a.state=j,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return Eh(t,e,n,r,s,i)}function Eh(t,e,n,r,i,s){Gy(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&Sp(e,n,!1),tr(t,e,s);r=e.stateNode,aE.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=us(e,t.child,null,s),e.child=us(e,null,l,s)):xt(t,e,l,s),e.memoizedState=r.state,i&&Sp(e,n,!0),e.child}function Qy(t){var e=t.stateNode;e.pendingContext?wp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wp(t,e.context,!1),Ad(t,e.containerInfo)}function Mp(t,e,n,r,i){return ls(),wd(i),e.flags|=256,xt(t,e,n,r),e.child}var wh={dehydrated:null,treeContext:null,retryLane:0};function Sh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yy(t,e,n){var r=e.pendingProps,i=Ve.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ce(Ve,i&1),t===null)return ph(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Au(a,r,0,null),t=ui(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Sh(n),e.memoizedState=wh,t):jd(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return lE(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=kr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=kr(l,s):(s=ui(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?Sh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=wh,r}return s=t.child,t=s.sibling,r=kr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jd(t,e){return e=Au({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function tl(t,e,n,r){return r!==null&&wd(r),us(e,t.child,null,n),t=jd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lE(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Cc(Error(U(422))),tl(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Au({mode:"visible",children:r.children},i,0,null),s=ui(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&us(e,t.child,null,a),e.child.memoizedState=Sh(a),e.memoizedState=wh,s);if(!(e.mode&1))return tl(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(U(419)),r=Cc(s,r,void 0),tl(t,e,a,r)}if(l=(a&t.childLanes)!==0,jt||l){if(r=it,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,er(t,i),_n(r,t,i,-1))}return Bd(),r=Cc(Error(U(421))),tl(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=wE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ht=xr(i.nextSibling),Wt=e,De=!0,gn=null,t!==null&&(Zt[en++]=Gn,Zt[en++]=Qn,Zt[en++]=di,Gn=t.id,Qn=t.overflow,di=e),e=jd(e,r.children),e.flags|=4096,e)}function Fp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),mh(t.return,e,n)}function Ic(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Jy(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(xt(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fp(t,n,e);else if(t.tag===19)Fp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Wl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ic(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Wl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ic(e,!0,n,null,s);break;case"together":Ic(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _l(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=kr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=kr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uE(t,e,n){switch(e.tag){case 3:Qy(e),ls();break;case 5:Ty(e);break;case 1:Ot(e.type)&&Fl(e);break;case 4:Ad(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ce(Ul,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?Yy(t,e,n):(Ce(Ve,Ve.current&1),t=tr(t,e,n),t!==null?t.sibling:null);Ce(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Jy(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,Ky(t,e,n)}return tr(t,e,n)}var Xy,Th,Zy,ev;Xy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Th=function(){};Zy=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,oi(jn.current);var s=null;switch(n){case"input":i=Wc(t,i),r=Wc(t,r),s=[];break;case"select":i=je({},i,{value:void 0}),r=je({},r,{value:void 0}),s=[];break;case"textarea":i=Gc(t,i),r=Gc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ol)}Yc(n,r);var a;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Po.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Po.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ae("scroll",t),s||l===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};ev=function(t,e,n,r){n!==r&&(e.flags|=4)};function eo(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function cE(t,e,n){var r=e.pendingProps;switch(Ed(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return Ot(e.type)&&Ml(),gt(e),null;case 3:return r=e.stateNode,cs(),Re(Lt),Re(wt),Rd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Za(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gn!==null&&(Dh(gn),gn=null))),Th(t,e),gt(e),null;case 5:kd(e);var i=oi(Uo.current);if(n=e.type,t!==null&&e.stateNode!=null)Zy(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return gt(e),null}if(t=oi(jn.current),Za(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[bn]=e,r[zo]=s,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(i=0;i<uo.length;i++)Ae(uo[i],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":Gf(r,s),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ae("invalid",r);break;case"textarea":Yf(r,s),Ae("invalid",r)}Yc(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Xa(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Xa(r.textContent,l,t),i=["children",""+l]):Po.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Ha(r),Qf(r,s,!0);break;case"textarea":Ha(r),Jf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ol)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[bn]=e,t[zo]=r,Xy(t,e,!1,!1),e.stateNode=t;e:{switch(a=Jc(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),i=r;break;case"iframe":case"object":case"embed":Ae("load",t),i=r;break;case"video":case"audio":for(i=0;i<uo.length;i++)Ae(uo[i],t);i=r;break;case"source":Ae("error",t),i=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),i=r;break;case"details":Ae("toggle",t),i=r;break;case"input":Gf(t,r),i=Wc(t,r),Ae("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=je({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":Yf(t,r),i=Gc(t,r),Ae("invalid",t);break;default:i=r}Yc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Dg(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Rg(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Do(t,u):typeof u=="number"&&Do(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Po.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ae("scroll",t):u!=null&&sd(t,s,u,a))}switch(n){case"input":Ha(t),Qf(t,r,!1);break;case"textarea":Ha(t),Jf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+br(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ji(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ji(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ol)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(t&&e.stateNode!=null)ev(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=oi(Uo.current),oi(jn.current),Za(e)){if(r=e.stateNode,n=e.memoizedProps,r[bn]=e,(s=r.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:Xa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xa(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bn]=e,e.stateNode=r}return gt(e),null;case 13:if(Re(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(De&&Ht!==null&&e.mode&1&&!(e.flags&128))vy(),ls(),e.flags|=98560,s=!1;else if(s=Za(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[bn]=e}else ls(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gt(e),s=!1}else gn!==null&&(Dh(gn),gn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?Xe===0&&(Xe=3):Bd())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return cs(),Th(t,e),t===null&&Mo(e.stateNode.containerInfo),gt(e),null;case 10:return xd(e.type._context),gt(e),null;case 17:return Ot(e.type)&&Ml(),gt(e),null;case 19:if(Re(Ve),s=e.memoizedState,s===null)return gt(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)eo(s,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Wl(t),a!==null){for(e.flags|=128,eo(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Ve,Ve.current&1|2),e.child}t=t.sibling}s.tail!==null&&We()>ds&&(e.flags|=128,r=!0,eo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Wl(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),eo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!De)return gt(e),null}else 2*We()-s.renderingStartTime>ds&&n!==1073741824&&(e.flags|=128,r=!0,eo(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=We(),e.sibling=null,n=Ve.current,Ce(Ve,r?n&1|2:n&1),e):(gt(e),null);case 22:case 23:return zd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$t&1073741824&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function hE(t,e){switch(Ed(e),e.tag){case 1:return Ot(e.type)&&Ml(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return cs(),Re(Lt),Re(wt),Rd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kd(e),null;case 13:if(Re(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));ls()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Ve),null;case 4:return cs(),null;case 10:return xd(e.type._context),null;case 22:case 23:return zd(),null;case 24:return null;default:return null}}var nl=!1,_t=!1,dE=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Qi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function xh(t,e,n){try{n()}catch(r){ze(t,e,r)}}var zp=!1;function fE(t,e){if(ah=Nl,t=sy(),vd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,d=0,m=0,y=t,_=null;t:for(;;){for(var R;y!==n||i!==0&&y.nodeType!==3||(l=a+i),y!==s||r!==0&&y.nodeType!==3||(u=a+r),y.nodeType===3&&(a+=y.nodeValue.length),(R=y.firstChild)!==null;)_=y,y=R;for(;;){if(y===t)break t;if(_===n&&++d===i&&(l=a),_===s&&++m===r&&(u=a),(R=y.nextSibling)!==null)break;y=_,_=y.parentNode}y=R}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(lh={focusedElem:t,selectionRange:n},Nl=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var j=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var L=j.memoizedProps,W=j.memoizedState,I=e.stateNode,S=I.getSnapshotBeforeUpdate(e.elementType===e.type?L:pn(e.type,L),W);I.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(M){ze(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return j=zp,zp=!1,j}function wo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&xh(e,n,s)}i=i.next}while(i!==r)}}function Cu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ch(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tv(t){var e=t.alternate;e!==null&&(t.alternate=null,tv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bn],delete e[zo],delete e[hh],delete e[Q1],delete e[Y1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nv(t){return t.tag===5||t.tag===3||t.tag===4}function Bp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ih(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ol));else if(r!==4&&(t=t.child,t!==null))for(Ih(t,e,n),t=t.sibling;t!==null;)Ih(t,e,n),t=t.sibling}function Ah(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ah(t,e,n),t=t.sibling;t!==null;)Ah(t,e,n),t=t.sibling}var ot=null,mn=!1;function fr(t,e,n){for(n=n.child;n!==null;)rv(t,e,n),n=n.sibling}function rv(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(yu,n)}catch{}switch(n.tag){case 5:_t||Qi(n,e);case 6:var r=ot,i=mn;ot=null,fr(t,e,n),ot=r,mn=i,ot!==null&&(mn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(mn?(t=ot,n=n.stateNode,t.nodeType===8?_c(t.parentNode,n):t.nodeType===1&&_c(t,n),jo(t)):_c(ot,n.stateNode));break;case 4:r=ot,i=mn,ot=n.stateNode.containerInfo,mn=!0,fr(t,e,n),ot=r,mn=i;break;case 0:case 11:case 14:case 15:if(!_t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&xh(n,e,a),i=i.next}while(i!==r)}fr(t,e,n);break;case 1:if(!_t&&(Qi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ze(n,e,l)}fr(t,e,n);break;case 21:fr(t,e,n);break;case 22:n.mode&1?(_t=(r=_t)||n.memoizedState!==null,fr(t,e,n),_t=r):fr(t,e,n);break;default:fr(t,e,n)}}function Up(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dE),e.forEach(function(r){var i=SE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function fn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:ot=l.stateNode,mn=!1;break e;case 3:ot=l.stateNode.containerInfo,mn=!0;break e;case 4:ot=l.stateNode.containerInfo,mn=!0;break e}l=l.return}if(ot===null)throw Error(U(160));rv(s,a,i),ot=null,mn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){ze(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iv(e,t),e=e.sibling}function iv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fn(e,t),Rn(t),r&4){try{wo(3,t,t.return),Cu(3,t)}catch(L){ze(t,t.return,L)}try{wo(5,t,t.return)}catch(L){ze(t,t.return,L)}}break;case 1:fn(e,t),Rn(t),r&512&&n!==null&&Qi(n,n.return);break;case 5:if(fn(e,t),Rn(t),r&512&&n!==null&&Qi(n,n.return),t.flags&32){var i=t.stateNode;try{Do(i,"")}catch(L){ze(t,t.return,L)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Ig(i,s),Jc(l,a);var d=Jc(l,s);for(a=0;a<u.length;a+=2){var m=u[a],y=u[a+1];m==="style"?Dg(i,y):m==="dangerouslySetInnerHTML"?Rg(i,y):m==="children"?Do(i,y):sd(i,m,y,d)}switch(l){case"input":qc(i,s);break;case"textarea":Ag(i,s);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var R=s.value;R!=null?Ji(i,!!s.multiple,R,!1):_!==!!s.multiple&&(s.defaultValue!=null?Ji(i,!!s.multiple,s.defaultValue,!0):Ji(i,!!s.multiple,s.multiple?[]:"",!1))}i[zo]=s}catch(L){ze(t,t.return,L)}}break;case 6:if(fn(e,t),Rn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(L){ze(t,t.return,L)}}break;case 3:if(fn(e,t),Rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jo(e.containerInfo)}catch(L){ze(t,t.return,L)}break;case 4:fn(e,t),Rn(t);break;case 13:fn(e,t),Rn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Md=We())),r&4&&Up(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(_t=(d=_t)||m,fn(e,t),_t=d):fn(e,t),Rn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(Y=t,m=t.child;m!==null;){for(y=Y=m;Y!==null;){switch(_=Y,R=_.child,_.tag){case 0:case 11:case 14:case 15:wo(4,_,_.return);break;case 1:Qi(_,_.return);var j=_.stateNode;if(typeof j.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,j.props=e.memoizedProps,j.state=e.memoizedState,j.componentWillUnmount()}catch(L){ze(r,n,L)}}break;case 5:Qi(_,_.return);break;case 22:if(_.memoizedState!==null){Hp(y);continue}}R!==null?(R.return=_,Y=R):Hp(y)}m=m.sibling}e:for(m=null,y=t;;){if(y.tag===5){if(m===null){m=y;try{i=y.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=y.stateNode,u=y.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Pg("display",a))}catch(L){ze(t,t.return,L)}}}else if(y.tag===6){if(m===null)try{y.stateNode.nodeValue=d?"":y.memoizedProps}catch(L){ze(t,t.return,L)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;m===y&&(m=null),y=y.return}m===y&&(m=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:fn(e,t),Rn(t),r&4&&Up(t);break;case 21:break;default:fn(e,t),Rn(t)}}function Rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nv(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Do(i,""),r.flags&=-33);var s=Bp(t);Ah(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Bp(t);Ih(t,l,a);break;default:throw Error(U(161))}}catch(u){ze(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pE(t,e,n){Y=t,sv(t)}function sv(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var i=Y,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||nl;if(!a){var l=i.alternate,u=l!==null&&l.memoizedState!==null||_t;l=nl;var d=_t;if(nl=a,(_t=u)&&!d)for(Y=i;Y!==null;)a=Y,u=a.child,a.tag===22&&a.memoizedState!==null?Wp(i):u!==null?(u.return=a,Y=u):Wp(i);for(;s!==null;)Y=s,sv(s),s=s.sibling;Y=i,nl=l,_t=d}$p(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Y=s):$p(t)}}function $p(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_t||Cu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_t)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:pn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ap(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ap(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var y=m.dehydrated;y!==null&&jo(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}_t||e.flags&512&&Ch(e)}catch(_){ze(e,e.return,_)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Hp(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function Wp(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cu(4,e)}catch(u){ze(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ze(e,i,u)}}var s=e.return;try{Ch(e)}catch(u){ze(e,s,u)}break;case 5:var a=e.return;try{Ch(e)}catch(u){ze(e,a,u)}}}catch(u){ze(e,e.return,u)}if(e===t){Y=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Y=l;break}Y=e.return}}var mE=Math.ceil,Gl=sr.ReactCurrentDispatcher,Ld=sr.ReactCurrentOwner,sn=sr.ReactCurrentBatchConfig,fe=0,it=null,Ke=null,ut=0,$t=0,Yi=Ur(0),Xe=0,qo=null,pi=0,Iu=0,Od=0,So=null,Nt=null,Md=0,ds=1/0,qn=null,Ql=!1,kh=null,Ir=null,rl=!1,_r=null,Yl=0,To=0,Rh=null,El=-1,wl=0;function Ct(){return fe&6?We():El!==-1?El:El=We()}function Ar(t){return t.mode&1?fe&2&&ut!==0?ut&-ut:X1.transition!==null?(wl===0&&(wl=$g()),wl):(t=_e,t!==0||(t=window.event,t=t===void 0?16:Yg(t.type)),t):1}function _n(t,e,n,r){if(50<To)throw To=0,Rh=null,Error(U(185));ia(t,n,r),(!(fe&2)||t!==it)&&(t===it&&(!(fe&2)&&(Iu|=n),Xe===4&&yr(t,ut)),Mt(t,r),n===1&&fe===0&&!(e.mode&1)&&(ds=We()+500,Su&&$r()))}function Mt(t,e){var n=t.callbackNode;X_(t,e);var r=bl(t,t===it?ut:0);if(r===0)n!==null&&ep(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ep(n),e===1)t.tag===0?J1(qp.bind(null,t)):my(qp.bind(null,t)),K1(function(){!(fe&6)&&$r()}),n=null;else{switch(Hg(r)){case 1:n=cd;break;case 4:n=Bg;break;case 16:n=Vl;break;case 536870912:n=Ug;break;default:n=Vl}n=fv(n,ov.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ov(t,e){if(El=-1,wl=0,fe&6)throw Error(U(327));var n=t.callbackNode;if(ns()&&t.callbackNode!==n)return null;var r=bl(t,t===it?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Jl(t,r);else{e=r;var i=fe;fe|=2;var s=lv();(it!==t||ut!==e)&&(qn=null,ds=We()+500,li(t,e));do try{vE();break}catch(l){av(t,l)}while(!0);Td(),Gl.current=s,fe=i,Ke!==null?e=0:(it=null,ut=0,e=Xe)}if(e!==0){if(e===2&&(i=nh(t),i!==0&&(r=i,e=Ph(t,i))),e===1)throw n=qo,li(t,0),yr(t,r),Mt(t,We()),n;if(e===6)yr(t,r);else{if(i=t.current.alternate,!(r&30)&&!gE(i)&&(e=Jl(t,r),e===2&&(s=nh(t),s!==0&&(r=s,e=Ph(t,s))),e===1))throw n=qo,li(t,0),yr(t,r),Mt(t,We()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:ni(t,Nt,qn);break;case 3:if(yr(t,r),(r&130023424)===r&&(e=Md+500-We(),10<e)){if(bl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ct(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ch(ni.bind(null,t,Nt,qn),e);break}ni(t,Nt,qn);break;case 4:if(yr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-vn(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mE(r/1960))-r,10<r){t.timeoutHandle=ch(ni.bind(null,t,Nt,qn),r);break}ni(t,Nt,qn);break;case 5:ni(t,Nt,qn);break;default:throw Error(U(329))}}}return Mt(t,We()),t.callbackNode===n?ov.bind(null,t):null}function Ph(t,e){var n=So;return t.current.memoizedState.isDehydrated&&(li(t,e).flags|=256),t=Jl(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&Dh(e)),t}function Dh(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function gE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!wn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yr(t,e){for(e&=~Od,e&=~Iu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vn(e),r=1<<n;t[n]=-1,e&=~r}}function qp(t){if(fe&6)throw Error(U(327));ns();var e=bl(t,0);if(!(e&1))return Mt(t,We()),null;var n=Jl(t,e);if(t.tag!==0&&n===2){var r=nh(t);r!==0&&(e=r,n=Ph(t,r))}if(n===1)throw n=qo,li(t,0),yr(t,e),Mt(t,We()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ni(t,Nt,qn),Mt(t,We()),null}function Fd(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(ds=We()+500,Su&&$r())}}function mi(t){_r!==null&&_r.tag===0&&!(fe&6)&&ns();var e=fe;fe|=1;var n=sn.transition,r=_e;try{if(sn.transition=null,_e=1,t)return t()}finally{_e=r,sn.transition=n,fe=e,!(fe&6)&&$r()}}function zd(){$t=Yi.current,Re(Yi)}function li(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,q1(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(Ed(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ml();break;case 3:cs(),Re(Lt),Re(wt),Rd();break;case 5:kd(r);break;case 4:cs();break;case 13:Re(Ve);break;case 19:Re(Ve);break;case 10:xd(r.type._context);break;case 22:case 23:zd()}n=n.return}if(it=t,Ke=t=kr(t.current,null),ut=$t=e,Xe=0,qo=null,Od=Iu=pi=0,Nt=So=null,si!==null){for(e=0;e<si.length;e++)if(n=si[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}si=null}return t}function av(t,e){do{var n=Ke;try{if(Td(),yl.current=Kl,ql){for(var r=Ne.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ql=!1}if(fi=0,nt=Ye=Ne=null,Eo=!1,$o=0,Ld.current=null,n===null||n.return===null){Xe=1,qo=e,Ke=null;break}e:{var s=t,a=n.return,l=n,u=e;if(e=ut,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=l,y=m.tag;if(!(m.mode&1)&&(y===0||y===11||y===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var R=bp(a);if(R!==null){R.flags&=-257,Np(R,a,l,s,e),R.mode&1&&Vp(s,d,e),e=R,u=d;var j=e.updateQueue;if(j===null){var L=new Set;L.add(u),e.updateQueue=L}else j.add(u);break e}else{if(!(e&1)){Vp(s,d,e),Bd();break e}u=Error(U(426))}}else if(De&&l.mode&1){var W=bp(a);if(W!==null){!(W.flags&65536)&&(W.flags|=256),Np(W,a,l,s,e),wd(hs(u,l));break e}}s=u=hs(u,l),Xe!==4&&(Xe=2),So===null?So=[s]:So.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=Hy(s,u,e);Ip(s,I);break e;case 1:l=u;var S=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Ir===null||!Ir.has(k)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=Wy(s,l,e);Ip(s,M);break e}}s=s.return}while(s!==null)}cv(n)}catch(q){e=q,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function lv(){var t=Gl.current;return Gl.current=Kl,t===null?Kl:t}function Bd(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),it===null||!(pi&268435455)&&!(Iu&268435455)||yr(it,ut)}function Jl(t,e){var n=fe;fe|=2;var r=lv();(it!==t||ut!==e)&&(qn=null,li(t,e));do try{yE();break}catch(i){av(t,i)}while(!0);if(Td(),fe=n,Gl.current=r,Ke!==null)throw Error(U(261));return it=null,ut=0,Xe}function yE(){for(;Ke!==null;)uv(Ke)}function vE(){for(;Ke!==null&&!$_();)uv(Ke)}function uv(t){var e=dv(t.alternate,t,$t);t.memoizedProps=t.pendingProps,e===null?cv(t):Ke=e,Ld.current=null}function cv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=hE(n,e),n!==null){n.flags&=32767,Ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,Ke=null;return}}else if(n=cE(n,e,$t),n!==null){Ke=n;return}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);Xe===0&&(Xe=5)}function ni(t,e,n){var r=_e,i=sn.transition;try{sn.transition=null,_e=1,_E(t,e,n,r)}finally{sn.transition=i,_e=r}return null}function _E(t,e,n,r){do ns();while(_r!==null);if(fe&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Z_(t,s),t===it&&(Ke=it=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rl||(rl=!0,fv(Vl,function(){return ns(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=sn.transition,sn.transition=null;var a=_e;_e=1;var l=fe;fe|=4,Ld.current=null,fE(t,n),iv(n,t),F1(lh),Nl=!!ah,lh=ah=null,t.current=n,pE(n),H_(),fe=l,_e=a,sn.transition=s}else t.current=n;if(rl&&(rl=!1,_r=t,Yl=i),s=t.pendingLanes,s===0&&(Ir=null),K_(n.stateNode),Mt(t,We()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ql)throw Ql=!1,t=kh,kh=null,t;return Yl&1&&t.tag!==0&&ns(),s=t.pendingLanes,s&1?t===Rh?To++:(To=0,Rh=t):To=0,$r(),null}function ns(){if(_r!==null){var t=Hg(Yl),e=sn.transition,n=_e;try{if(sn.transition=null,_e=16>t?16:t,_r===null)var r=!1;else{if(t=_r,_r=null,Yl=0,fe&6)throw Error(U(331));var i=fe;for(fe|=4,Y=t.current;Y!==null;){var s=Y,a=s.child;if(Y.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(Y=d;Y!==null;){var m=Y;switch(m.tag){case 0:case 11:case 15:wo(8,m,s)}var y=m.child;if(y!==null)y.return=m,Y=y;else for(;Y!==null;){m=Y;var _=m.sibling,R=m.return;if(tv(m),m===d){Y=null;break}if(_!==null){_.return=R,Y=_;break}Y=R}}}var j=s.alternate;if(j!==null){var L=j.child;if(L!==null){j.child=null;do{var W=L.sibling;L.sibling=null,L=W}while(L!==null)}}Y=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Y=a;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wo(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,Y=I;break e}Y=s.return}}var S=t.current;for(Y=S;Y!==null;){a=Y;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,Y=k;else e:for(a=S;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Cu(9,l)}}catch(q){ze(l,l.return,q)}if(l===a){Y=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,Y=M;break e}Y=l.return}}if(fe=i,$r(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(yu,t)}catch{}r=!0}return r}finally{_e=n,sn.transition=e}}return!1}function Kp(t,e,n){e=hs(n,e),e=Hy(t,e,1),t=Cr(t,e,1),e=Ct(),t!==null&&(ia(t,1,e),Mt(t,e))}function ze(t,e,n){if(t.tag===3)Kp(t,t,n);else for(;e!==null;){if(e.tag===3){Kp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ir===null||!Ir.has(r))){t=hs(n,t),t=Wy(e,t,1),e=Cr(e,t,1),t=Ct(),e!==null&&(ia(e,1,t),Mt(e,t));break}}e=e.return}}function EE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ut&n)===n&&(Xe===4||Xe===3&&(ut&130023424)===ut&&500>We()-Md?li(t,0):Od|=n),Mt(t,e)}function hv(t,e){e===0&&(t.mode&1?(e=Ka,Ka<<=1,!(Ka&130023424)&&(Ka=4194304)):e=1);var n=Ct();t=er(t,e),t!==null&&(ia(t,e,n),Mt(t,n))}function wE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hv(t,n)}function SE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),hv(t,n)}var dv;dv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Lt.current)jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return jt=!1,uE(t,e,n);jt=!!(t.flags&131072)}else jt=!1,De&&e.flags&1048576&&gy(e,Bl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_l(t,e),t=e.pendingProps;var i=as(e,wt.current);ts(e,n),i=Dd(null,e,r,t,i,n);var s=Vd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(r)?(s=!0,Fl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Id(e),i.updater=xu,e.stateNode=i,i._reactInternals=e,yh(e,r,t,n),e=Eh(null,e,r,!0,s,n)):(e.tag=0,De&&s&&_d(e),xt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_l(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=xE(r),t=pn(r,t),i){case 0:e=_h(null,e,r,t,n);break e;case 1:e=Op(null,e,r,t,n);break e;case 11:e=jp(null,e,r,t,n);break e;case 14:e=Lp(null,e,r,pn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),_h(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),Op(t,e,r,i,n);case 3:e:{if(Qy(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Sy(t,e),Hl(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=hs(Error(U(423)),e),e=Mp(t,e,r,n,i);break e}else if(r!==i){i=hs(Error(U(424)),e),e=Mp(t,e,r,n,i);break e}else for(Ht=xr(e.stateNode.containerInfo.firstChild),Wt=e,De=!0,gn=null,n=Ey(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ls(),r===i){e=tr(t,e,n);break e}xt(t,e,r,n)}e=e.child}return e;case 5:return Ty(e),t===null&&ph(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,uh(r,i)?a=null:s!==null&&uh(r,s)&&(e.flags|=32),Gy(t,e),xt(t,e,a,n),e.child;case 6:return t===null&&ph(e),null;case 13:return Yy(t,e,n);case 4:return Ad(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=us(e,null,r,n):xt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),jp(t,e,r,i,n);case 7:return xt(t,e,e.pendingProps,n),e.child;case 8:return xt(t,e,e.pendingProps.children,n),e.child;case 12:return xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ce(Ul,r._currentValue),r._currentValue=a,s!==null)if(wn(s.value,a)){if(s.children===i.children&&!Lt.current){e=tr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Yn(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),mh(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(U(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),mh(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}xt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ts(e,n),i=on(i),r=r(i),e.flags|=1,xt(t,e,r,n),e.child;case 14:return r=e.type,i=pn(r,e.pendingProps),i=pn(r.type,i),Lp(t,e,r,i,n);case 15:return qy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pn(r,i),_l(t,e),e.tag=1,Ot(r)?(t=!0,Fl(e)):t=!1,ts(e,n),$y(e,r,i),yh(e,r,i,n),Eh(null,e,r,!0,t,n);case 19:return Jy(t,e,n);case 22:return Ky(t,e,n)}throw Error(U(156,e.tag))};function fv(t,e){return zg(t,e)}function TE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(t,e,n,r){return new TE(t,e,n,r)}function Ud(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xE(t){if(typeof t=="function")return Ud(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ad)return 11;if(t===ld)return 14}return 2}function kr(t,e){var n=t.alternate;return n===null?(n=rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sl(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Ud(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case zi:return ui(n.children,i,s,e);case od:a=8,i|=8;break;case Bc:return t=rn(12,n,e,i|2),t.elementType=Bc,t.lanes=s,t;case Uc:return t=rn(13,n,e,i),t.elementType=Uc,t.lanes=s,t;case $c:return t=rn(19,n,e,i),t.elementType=$c,t.lanes=s,t;case Tg:return Au(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wg:a=10;break e;case Sg:a=9;break e;case ad:a=11;break e;case ld:a=14;break e;case pr:a=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=rn(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ui(t,e,n,r){return t=rn(7,t,r,e),t.lanes=n,t}function Au(t,e,n,r){return t=rn(22,t,r,e),t.elementType=Tg,t.lanes=n,t.stateNode={isHidden:!1},t}function Ac(t,e,n){return t=rn(6,t,null,e),t.lanes=n,t}function kc(t,e,n){return e=rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function CE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lc(0),this.expirationTimes=lc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $d(t,e,n,r,i,s,a,l,u){return t=new CE(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=rn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Id(s),t}function IE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pv(t){if(!t)return Nr;t=t._reactInternals;e:{if(_i(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Ot(n))return py(t,n,e)}return e}function mv(t,e,n,r,i,s,a,l,u){return t=$d(n,r,!0,t,i,s,a,l,u),t.context=pv(null),n=t.current,r=Ct(),i=Ar(n),s=Yn(r,i),s.callback=e??null,Cr(n,s,i),t.current.lanes=i,ia(t,i,r),Mt(t,r),t}function ku(t,e,n,r){var i=e.current,s=Ct(),a=Ar(i);return n=pv(n),e.context===null?e.context=n:e.pendingContext=n,e=Yn(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cr(i,e,a),t!==null&&(_n(t,i,a,s),gl(t,i,a)),a}function Xl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hd(t,e){Gp(t,e),(t=t.alternate)&&Gp(t,e)}function AE(){return null}var gv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wd(t){this._internalRoot=t}Ru.prototype.render=Wd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));ku(t,e,null,null)};Ru.prototype.unmount=Wd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mi(function(){ku(null,t,null,null)}),e[Zn]=null}};function Ru(t){this._internalRoot=t}Ru.prototype.unstable_scheduleHydration=function(t){if(t){var e=Kg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gr.length&&e!==0&&e<gr[n].priority;n++);gr.splice(n,0,t),n===0&&Qg(t)}};function qd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qp(){}function kE(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=Xl(a);s.call(d)}}var a=mv(e,r,t,0,null,!1,!1,"",Qp);return t._reactRootContainer=a,t[Zn]=a.current,Mo(t.nodeType===8?t.parentNode:t),mi(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=Xl(u);l.call(d)}}var u=$d(t,0,!1,null,null,!1,!1,"",Qp);return t._reactRootContainer=u,t[Zn]=u.current,Mo(t.nodeType===8?t.parentNode:t),mi(function(){ku(e,u,n,r)}),u}function Du(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var u=Xl(a);l.call(u)}}ku(e,a,t,i)}else a=kE(n,e,t,i,r);return Xl(a)}Wg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=lo(e.pendingLanes);n!==0&&(hd(e,n|1),Mt(e,We()),!(fe&6)&&(ds=We()+500,$r()))}break;case 13:mi(function(){var r=er(t,1);if(r!==null){var i=Ct();_n(r,t,1,i)}}),Hd(t,1)}};dd=function(t){if(t.tag===13){var e=er(t,134217728);if(e!==null){var n=Ct();_n(e,t,134217728,n)}Hd(t,134217728)}};qg=function(t){if(t.tag===13){var e=Ar(t),n=er(t,e);if(n!==null){var r=Ct();_n(n,t,e,r)}Hd(t,e)}};Kg=function(){return _e};Gg=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};Zc=function(t,e,n){switch(e){case"input":if(qc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wu(r);if(!i)throw Error(U(90));Cg(r),qc(r,i)}}}break;case"textarea":Ag(t,n);break;case"select":e=n.value,e!=null&&Ji(t,!!n.multiple,e,!1)}};Ng=Fd;jg=mi;var RE={usingClientEntryPoint:!1,Events:[oa,Hi,wu,Vg,bg,Fd]},to={findFiberByHostInstance:ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PE={bundleType:to.bundleType,version:to.version,rendererPackageName:to.rendererPackageName,rendererConfig:to.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Mg(t),t===null?null:t.stateNode},findFiberByHostInstance:to.findFiberByHostInstance||AE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{yu=il.inject(PE),Nn=il}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RE;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qd(e))throw Error(U(200));return IE(t,e,null,n)};Kt.createRoot=function(t,e){if(!qd(t))throw Error(U(299));var n=!1,r="",i=gv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$d(t,1,!1,null,null,n,!1,r,i),t[Zn]=e.current,Mo(t.nodeType===8?t.parentNode:t),new Wd(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Mg(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return mi(t)};Kt.hydrate=function(t,e,n){if(!Pu(e))throw Error(U(200));return Du(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!qd(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=gv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=mv(e,null,t,1,n??null,i,!1,s,a),t[Zn]=e.current,Mo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ru(e)};Kt.render=function(t,e,n){if(!Pu(e))throw Error(U(200));return Du(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!Pu(t))throw Error(U(40));return t._reactRootContainer?(mi(function(){Du(null,null,t,!1,function(){t._reactRootContainer=null,t[Zn]=null})}),!0):!1};Kt.unstable_batchedUpdates=Fd;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Du(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function yv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yv)}catch(t){console.error(t)}}yv(),yg.exports=Kt;var DE=yg.exports,Yp=DE;Fc.createRoot=Yp.createRoot,Fc.hydrateRoot=Yp.hydrateRoot;const VE=()=>{};var Jp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},_v={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,m=s>>2,y=(s&3)<<4|l>>4;let _=(l&15)<<2|d>>6,R=d&63;u||(R=64,a||(_=64)),r.push(n[m],n[y],n[_],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||y==null)throw new NE;const _=s<<2|l>>4;if(r.push(_),d!==64){const R=l<<4&240|d>>2;if(r.push(R),y!==64){const j=d<<6&192|y;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class NE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jE=function(t){const e=vv(t);return _v.encodeByteArray(e,!0)},Zl=function(t){return jE(t).replace(/\./g,"")},LE=function(t){try{return _v.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=()=>OE().__FIREBASE_DEFAULTS__,FE=()=>{if(typeof process>"u"||typeof Jp>"u")return;const t=Jp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LE(t[1]);return e&&JSON.parse(e)},Kd=()=>{try{return VE()||ME()||FE()||zE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BE=t=>{var e,n;return(n=(e=Kd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},UE=t=>{const e=BE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ev=()=>{var t;return(t=Kd())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function HE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Zl(JSON.stringify(n)),Zl(JSON.stringify(a)),""].join(".")}const xo={};function qE(){const t={prod:[],emulator:[]};for(const e of Object.keys(xo))xo[e]?t.emulator.push(e):t.prod.push(e);return t}function KE(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Xp=!1;function GE(t,e){if(typeof window>"u"||typeof document>"u"||!Gd(window.location.host)||xo[t]===e||xo[t]||Xp)return;xo[t]=e;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",s=qE().prod.length>0;function a(){const _=document.getElementById(r);_&&_.remove()}function l(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function u(_,R){_.setAttribute("width","24"),_.setAttribute("id",R),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function d(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Xp=!0,a()},_}function m(_,R){_.setAttribute("id",R),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function y(){const _=KE(r),R=n("text"),j=document.getElementById(R)||document.createElement("span"),L=n("learnmore"),W=document.getElementById(L)||document.createElement("a"),I=n("preprendIcon"),S=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const k=_.element;l(k),m(W,L);const M=d();u(S,I),k.append(S,j,W,M),document.body.appendChild(k)}s?(j.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YE(){var e;const t=(e=Kd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JE(){return!YE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XE(){try{return typeof indexedDB=="object"}catch{return!1}}function ZE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="FirebaseError";class Ss extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ew,Object.setPrototypeOf(this,Ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wv.prototype.create)}}class wv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?tw(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Ss(i,l,r)}}function tw(t,e){return t.replace(nw,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const nw=/\{\$([^}]+)}/g;function eu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(Zp(s)&&Zp(a)){if(!eu(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Zp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t){return t&&t._delegate?t._delegate:t}class Ko{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $E;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sw(e))try{this.getOrInitializeService({instanceIdentifier:ri})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ri){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ri){return this.instances.has(e)}getOptions(e=ri){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ri){return this.component?this.component.multipleInstances?e:ri:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iw(t){return t===ri?void 0:t}function sw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const aw={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},lw=de.INFO,uw={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},cw=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=uw[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sv{constructor(e){this.name=e,this._logLevel=lw,this._logHandler=cw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const hw=(t,e)=>e.some(n=>t instanceof n);let em,tm;function dw(){return em||(em=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fw(){return tm||(tm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tv=new WeakMap,Vh=new WeakMap,xv=new WeakMap,Rc=new WeakMap,Qd=new WeakMap;function pw(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Rr(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Tv.set(n,t)}).catch(()=>{}),Qd.set(e,t),e}function mw(t){if(Vh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Vh.set(t,e)}let bh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gw(t){bh=t(bh)}function yw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Pc(this),e,...n);return xv.set(r,e.sort?e.sort():[e]),Rr(r)}:fw().includes(t)?function(...e){return t.apply(Pc(this),e),Rr(Tv.get(this))}:function(...e){return Rr(t.apply(Pc(this),e))}}function vw(t){return typeof t=="function"?yw(t):(t instanceof IDBTransaction&&mw(t),hw(t,dw())?new Proxy(t,bh):t)}function Rr(t){if(t instanceof IDBRequest)return pw(t);if(Rc.has(t))return Rc.get(t);const e=vw(t);return e!==t&&(Rc.set(t,e),Qd.set(e,t)),e}const Pc=t=>Qd.get(t);function _w(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=Rr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Rr(a.result),u.oldVersion,u.newVersion,Rr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Ew=["get","getKey","getAll","getAllKeys","count"],ww=["put","add","delete","clear"],Dc=new Map;function nm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dc.get(e))return Dc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ww.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ew.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&u.done]))[0]};return Dc.set(e,s),s}gw(t=>({...t,get:(e,n,r)=>nm(e,n)||t.get(e,n,r),has:(e,n)=>!!nm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Tw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Tw(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nh="@firebase/app",rm="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new Sv("@firebase/app"),xw="@firebase/app-compat",Cw="@firebase/analytics-compat",Iw="@firebase/analytics",Aw="@firebase/app-check-compat",kw="@firebase/app-check",Rw="@firebase/auth",Pw="@firebase/auth-compat",Dw="@firebase/database",Vw="@firebase/data-connect",bw="@firebase/database-compat",Nw="@firebase/functions",jw="@firebase/functions-compat",Lw="@firebase/installations",Ow="@firebase/installations-compat",Mw="@firebase/messaging",Fw="@firebase/messaging-compat",zw="@firebase/performance",Bw="@firebase/performance-compat",Uw="@firebase/remote-config",$w="@firebase/remote-config-compat",Hw="@firebase/storage",Ww="@firebase/storage-compat",qw="@firebase/firestore",Kw="@firebase/ai",Gw="@firebase/firestore-compat",Qw="firebase",Yw="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="[DEFAULT]",Jw={[Nh]:"fire-core",[xw]:"fire-core-compat",[Iw]:"fire-analytics",[Cw]:"fire-analytics-compat",[kw]:"fire-app-check",[Aw]:"fire-app-check-compat",[Rw]:"fire-auth",[Pw]:"fire-auth-compat",[Dw]:"fire-rtdb",[Vw]:"fire-data-connect",[bw]:"fire-rtdb-compat",[Nw]:"fire-fn",[jw]:"fire-fn-compat",[Lw]:"fire-iid",[Ow]:"fire-iid-compat",[Mw]:"fire-fcm",[Fw]:"fire-fcm-compat",[zw]:"fire-perf",[Bw]:"fire-perf-compat",[Uw]:"fire-rc",[$w]:"fire-rc-compat",[Hw]:"fire-gcs",[Ww]:"fire-gcs-compat",[qw]:"fire-fst",[Gw]:"fire-fst-compat",[Kw]:"fire-vertex","fire-js":"fire-js",[Qw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=new Map,Xw=new Map,Lh=new Map;function im(t,e){try{t.container.addComponent(e)}catch(n){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ru(t){const e=t.name;if(Lh.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;Lh.set(e,t);for(const n of nu.values())im(n,t);for(const n of Xw.values())im(n,t);return!0}function Zw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function eS(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pr=new wv("app","Firebase",tS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ko("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=Yw;function Cv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:jh,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Pr.create("bad-app-name",{appName:String(i)});if(n||(n=Ev()),!n)throw Pr.create("no-options");const s=nu.get(i);if(s){if(eu(n,s.options)&&eu(r,s.config))return s;throw Pr.create("duplicate-app",{appName:i})}const a=new ow(i);for(const u of Lh.values())a.addComponent(u);const l=new nS(n,r,a);return nu.set(i,l),l}function iS(t=jh){const e=nu.get(t);if(!e&&t===jh&&Ev())return Cv();if(!e)throw Pr.create("no-app",{appName:t});return e}function rs(t,e,n){let r=Jw[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(a.join(" "));return}ru(new Ko(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="firebase-heartbeat-database",oS=1,Go="firebase-heartbeat-store";let Vc=null;function Iv(){return Vc||(Vc=_w(sS,oS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Go)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pr.create("idb-open",{originalErrorMessage:t.message})})),Vc}async function aS(t){try{const n=(await Iv()).transaction(Go),r=await n.objectStore(Go).get(Av(t));return await n.done,r}catch(e){if(e instanceof Ss)nr.warn(e.message);else{const n=Pr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});nr.warn(n.message)}}}async function sm(t,e){try{const r=(await Iv()).transaction(Go,"readwrite");await r.objectStore(Go).put(e,Av(t)),await r.done}catch(n){if(n instanceof Ss)nr.warn(n.message);else{const r=Pr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});nr.warn(r.message)}}}function Av(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=1024,uS=30;class cS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=om();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>uS){const a=fS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){nr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=om(),{heartbeatsToSend:r,unsentEntries:i}=hS(this._heartbeatsCache.heartbeats),s=Zl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return nr.warn(n),""}}}function om(){return new Date().toISOString().substring(0,10)}function hS(t,e=lS){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),am(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),am(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XE()?ZE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return sm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return sm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function am(t){return Zl(JSON.stringify({version:2,heartbeats:t})).length}function fS(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(t){ru(new Ko("platform-logger",e=>new Sw(e),"PRIVATE")),ru(new Ko("heartbeat",e=>new cS(e),"PRIVATE")),rs(Nh,rm,t),rs(Nh,rm,"esm2020"),rs("fire-js","")}pS("");var mS="firebase",gS="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs(mS,gS,"app");var lm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dr,kv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,v){function w(){}w.prototype=v.prototype,E.F=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.D=function(x,C,P){for(var T=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)T[Oe-2]=arguments[Oe];return v.prototype[C].apply(x,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);const x=Array(16);if(typeof v=="string")for(var C=0;C<16;++C)x[C]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(C=0;C<16;++C)x[C]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],C=E.g[2];let P=E.g[3],T;T=v+(P^w&(C^P))+x[0]+3614090360&4294967295,v=w+(T<<7&4294967295|T>>>25),T=P+(C^v&(w^C))+x[1]+3905402710&4294967295,P=v+(T<<12&4294967295|T>>>20),T=C+(w^P&(v^w))+x[2]+606105819&4294967295,C=P+(T<<17&4294967295|T>>>15),T=w+(v^C&(P^v))+x[3]+3250441966&4294967295,w=C+(T<<22&4294967295|T>>>10),T=v+(P^w&(C^P))+x[4]+4118548399&4294967295,v=w+(T<<7&4294967295|T>>>25),T=P+(C^v&(w^C))+x[5]+1200080426&4294967295,P=v+(T<<12&4294967295|T>>>20),T=C+(w^P&(v^w))+x[6]+2821735955&4294967295,C=P+(T<<17&4294967295|T>>>15),T=w+(v^C&(P^v))+x[7]+4249261313&4294967295,w=C+(T<<22&4294967295|T>>>10),T=v+(P^w&(C^P))+x[8]+1770035416&4294967295,v=w+(T<<7&4294967295|T>>>25),T=P+(C^v&(w^C))+x[9]+2336552879&4294967295,P=v+(T<<12&4294967295|T>>>20),T=C+(w^P&(v^w))+x[10]+4294925233&4294967295,C=P+(T<<17&4294967295|T>>>15),T=w+(v^C&(P^v))+x[11]+2304563134&4294967295,w=C+(T<<22&4294967295|T>>>10),T=v+(P^w&(C^P))+x[12]+1804603682&4294967295,v=w+(T<<7&4294967295|T>>>25),T=P+(C^v&(w^C))+x[13]+4254626195&4294967295,P=v+(T<<12&4294967295|T>>>20),T=C+(w^P&(v^w))+x[14]+2792965006&4294967295,C=P+(T<<17&4294967295|T>>>15),T=w+(v^C&(P^v))+x[15]+1236535329&4294967295,w=C+(T<<22&4294967295|T>>>10),T=v+(C^P&(w^C))+x[1]+4129170786&4294967295,v=w+(T<<5&4294967295|T>>>27),T=P+(w^C&(v^w))+x[6]+3225465664&4294967295,P=v+(T<<9&4294967295|T>>>23),T=C+(v^w&(P^v))+x[11]+643717713&4294967295,C=P+(T<<14&4294967295|T>>>18),T=w+(P^v&(C^P))+x[0]+3921069994&4294967295,w=C+(T<<20&4294967295|T>>>12),T=v+(C^P&(w^C))+x[5]+3593408605&4294967295,v=w+(T<<5&4294967295|T>>>27),T=P+(w^C&(v^w))+x[10]+38016083&4294967295,P=v+(T<<9&4294967295|T>>>23),T=C+(v^w&(P^v))+x[15]+3634488961&4294967295,C=P+(T<<14&4294967295|T>>>18),T=w+(P^v&(C^P))+x[4]+3889429448&4294967295,w=C+(T<<20&4294967295|T>>>12),T=v+(C^P&(w^C))+x[9]+568446438&4294967295,v=w+(T<<5&4294967295|T>>>27),T=P+(w^C&(v^w))+x[14]+3275163606&4294967295,P=v+(T<<9&4294967295|T>>>23),T=C+(v^w&(P^v))+x[3]+4107603335&4294967295,C=P+(T<<14&4294967295|T>>>18),T=w+(P^v&(C^P))+x[8]+1163531501&4294967295,w=C+(T<<20&4294967295|T>>>12),T=v+(C^P&(w^C))+x[13]+2850285829&4294967295,v=w+(T<<5&4294967295|T>>>27),T=P+(w^C&(v^w))+x[2]+4243563512&4294967295,P=v+(T<<9&4294967295|T>>>23),T=C+(v^w&(P^v))+x[7]+1735328473&4294967295,C=P+(T<<14&4294967295|T>>>18),T=w+(P^v&(C^P))+x[12]+2368359562&4294967295,w=C+(T<<20&4294967295|T>>>12),T=v+(w^C^P)+x[5]+4294588738&4294967295,v=w+(T<<4&4294967295|T>>>28),T=P+(v^w^C)+x[8]+2272392833&4294967295,P=v+(T<<11&4294967295|T>>>21),T=C+(P^v^w)+x[11]+1839030562&4294967295,C=P+(T<<16&4294967295|T>>>16),T=w+(C^P^v)+x[14]+4259657740&4294967295,w=C+(T<<23&4294967295|T>>>9),T=v+(w^C^P)+x[1]+2763975236&4294967295,v=w+(T<<4&4294967295|T>>>28),T=P+(v^w^C)+x[4]+1272893353&4294967295,P=v+(T<<11&4294967295|T>>>21),T=C+(P^v^w)+x[7]+4139469664&4294967295,C=P+(T<<16&4294967295|T>>>16),T=w+(C^P^v)+x[10]+3200236656&4294967295,w=C+(T<<23&4294967295|T>>>9),T=v+(w^C^P)+x[13]+681279174&4294967295,v=w+(T<<4&4294967295|T>>>28),T=P+(v^w^C)+x[0]+3936430074&4294967295,P=v+(T<<11&4294967295|T>>>21),T=C+(P^v^w)+x[3]+3572445317&4294967295,C=P+(T<<16&4294967295|T>>>16),T=w+(C^P^v)+x[6]+76029189&4294967295,w=C+(T<<23&4294967295|T>>>9),T=v+(w^C^P)+x[9]+3654602809&4294967295,v=w+(T<<4&4294967295|T>>>28),T=P+(v^w^C)+x[12]+3873151461&4294967295,P=v+(T<<11&4294967295|T>>>21),T=C+(P^v^w)+x[15]+530742520&4294967295,C=P+(T<<16&4294967295|T>>>16),T=w+(C^P^v)+x[2]+3299628645&4294967295,w=C+(T<<23&4294967295|T>>>9),T=v+(C^(w|~P))+x[0]+4096336452&4294967295,v=w+(T<<6&4294967295|T>>>26),T=P+(w^(v|~C))+x[7]+1126891415&4294967295,P=v+(T<<10&4294967295|T>>>22),T=C+(v^(P|~w))+x[14]+2878612391&4294967295,C=P+(T<<15&4294967295|T>>>17),T=w+(P^(C|~v))+x[5]+4237533241&4294967295,w=C+(T<<21&4294967295|T>>>11),T=v+(C^(w|~P))+x[12]+1700485571&4294967295,v=w+(T<<6&4294967295|T>>>26),T=P+(w^(v|~C))+x[3]+2399980690&4294967295,P=v+(T<<10&4294967295|T>>>22),T=C+(v^(P|~w))+x[10]+4293915773&4294967295,C=P+(T<<15&4294967295|T>>>17),T=w+(P^(C|~v))+x[1]+2240044497&4294967295,w=C+(T<<21&4294967295|T>>>11),T=v+(C^(w|~P))+x[8]+1873313359&4294967295,v=w+(T<<6&4294967295|T>>>26),T=P+(w^(v|~C))+x[15]+4264355552&4294967295,P=v+(T<<10&4294967295|T>>>22),T=C+(v^(P|~w))+x[6]+2734768916&4294967295,C=P+(T<<15&4294967295|T>>>17),T=w+(P^(C|~v))+x[13]+1309151649&4294967295,w=C+(T<<21&4294967295|T>>>11),T=v+(C^(w|~P))+x[4]+4149444226&4294967295,v=w+(T<<6&4294967295|T>>>26),T=P+(w^(v|~C))+x[11]+3174756917&4294967295,P=v+(T<<10&4294967295|T>>>22),T=C+(v^(P|~w))+x[2]+718787259&4294967295,C=P+(T<<15&4294967295|T>>>17),T=w+(P^(C|~v))+x[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(C+(T<<21&4294967295|T>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+P&4294967295}r.prototype.v=function(E,v){v===void 0&&(v=E.length);const w=v-this.blockSize,x=this.C;let C=this.h,P=0;for(;P<v;){if(C==0)for(;P<=w;)i(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<v;)if(x[C++]=E.charCodeAt(P++),C==this.blockSize){i(this,x),C=0;break}}else for(;P<v;)if(x[C++]=E[P++],C==this.blockSize){i(this,x),C=0;break}}this.h=C,this.o+=v},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;v=this.o*8;for(var w=E.length-8;w<E.length;++w)E[w]=v&255,v/=256;for(this.v(E),E=Array(16),v=0,w=0;w<4;++w)for(let x=0;x<32;x+=8)E[v++]=this.g[w]>>>x&255;return E};function s(E,v){var w=l;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function a(E,v){this.h=v;const w=[];let x=!0;for(let C=E.length-1;C>=0;C--){const P=E[C]|0;x&&P==v||(w[C]=P,x=!1)}this.g=w}var l={};function u(E){return-128<=E&&E<128?s(E,function(v){return new a([v|0],v<0?-1:0)}):new a([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return y;if(E<0)return W(d(-E));const v=[];let w=1;for(let x=0;E>=w;x++)v[x]=E/w|0,w*=4294967296;return new a(v,0)}function m(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return W(m(E.substring(1),v));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=d(Math.pow(v,8));let x=y;for(let P=0;P<E.length;P+=8){var C=Math.min(8,E.length-P);const T=parseInt(E.substring(P,P+C),v);C<8?(C=d(Math.pow(v,C)),x=x.j(C).add(d(T))):(x=x.j(w),x=x.add(d(T)))}return x}var y=u(0),_=u(1),R=u(16777216);t=a.prototype,t.m=function(){if(L(this))return-W(this).m();let E=0,v=1;for(let w=0;w<this.g.length;w++){const x=this.i(w);E+=(x>=0?x:4294967296+x)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(j(this))return"0";if(L(this))return"-"+W(this).toString(E);const v=d(Math.pow(E,6));var w=this;let x="";for(;;){const C=M(w,v).g;w=I(w,C.j(v));let P=((w.g.length>0?w.g[0]:w.h)>>>0).toString(E);if(w=C,j(w))return P+x;for(;P.length<6;)P="0"+P;x=P+x}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function j(E){if(E.h!=0)return!1;for(let v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function L(E){return E.h==-1}t.l=function(E){return E=I(this,E),L(E)?-1:j(E)?0:1};function W(E){const v=E.g.length,w=[];for(let x=0;x<v;x++)w[x]=~E.g[x];return new a(w,~E.h).add(_)}t.abs=function(){return L(this)?W(this):this},t.add=function(E){const v=Math.max(this.g.length,E.g.length),w=[];let x=0;for(let C=0;C<=v;C++){let P=x+(this.i(C)&65535)+(E.i(C)&65535),T=(P>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);x=T>>>16,P&=65535,T&=65535,w[C]=T<<16|P}return new a(w,w[w.length-1]&-2147483648?-1:0)};function I(E,v){return E.add(W(v))}t.j=function(E){if(j(this)||j(E))return y;if(L(this))return L(E)?W(this).j(W(E)):W(W(this).j(E));if(L(E))return W(this.j(W(E)));if(this.l(R)<0&&E.l(R)<0)return d(this.m()*E.m());const v=this.g.length+E.g.length,w=[];for(var x=0;x<2*v;x++)w[x]=0;for(x=0;x<this.g.length;x++)for(let C=0;C<E.g.length;C++){const P=this.i(x)>>>16,T=this.i(x)&65535,Oe=E.i(C)>>>16,St=E.i(C)&65535;w[2*x+2*C]+=T*St,S(w,2*x+2*C),w[2*x+2*C+1]+=P*St,S(w,2*x+2*C+1),w[2*x+2*C+1]+=T*Oe,S(w,2*x+2*C+1),w[2*x+2*C+2]+=P*Oe,S(w,2*x+2*C+2)}for(E=0;E<v;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=v;E<2*v;E++)w[E]=0;return new a(w,0)};function S(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function k(E,v){this.g=E,this.h=v}function M(E,v){if(j(v))throw Error("division by zero");if(j(E))return new k(y,y);if(L(E))return v=M(W(E),v),new k(W(v.g),W(v.h));if(L(v))return v=M(E,W(v)),new k(W(v.g),v.h);if(E.g.length>30){if(L(E)||L(v))throw Error("slowDivide_ only works with positive integers.");for(var w=_,x=v;x.l(E)<=0;)w=q(w),x=q(x);var C=G(w,1),P=G(x,1);for(x=G(x,2),w=G(w,2);!j(x);){var T=P.add(x);T.l(E)<=0&&(C=C.add(w),P=T),x=G(x,1),w=G(w,1)}return v=I(E,C.j(v)),new k(C,v)}for(C=y;E.l(v)>=0;){for(w=Math.max(1,Math.floor(E.m()/v.m())),x=Math.ceil(Math.log(w)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),P=d(w),T=P.j(v);L(T)||T.l(E)>0;)w-=x,P=d(w),T=P.j(v);j(P)&&(P=_),C=C.add(P),E=I(E,T)}return new k(C,E)}t.B=function(E){return M(this,E).h},t.and=function(E){const v=Math.max(this.g.length,E.g.length),w=[];for(let x=0;x<v;x++)w[x]=this.i(x)&E.i(x);return new a(w,this.h&E.h)},t.or=function(E){const v=Math.max(this.g.length,E.g.length),w=[];for(let x=0;x<v;x++)w[x]=this.i(x)|E.i(x);return new a(w,this.h|E.h)},t.xor=function(E){const v=Math.max(this.g.length,E.g.length),w=[];for(let x=0;x<v;x++)w[x]=this.i(x)^E.i(x);return new a(w,this.h^E.h)};function q(E){const v=E.g.length+1,w=[];for(let x=0;x<v;x++)w[x]=E.i(x)<<1|E.i(x-1)>>>31;return new a(w,E.h)}function G(E,v){const w=v>>5;v%=32;const x=E.g.length-w,C=[];for(let P=0;P<x;P++)C[P]=v>0?E.i(P+w)>>>v|E.i(P+w+1)<<32-v:E.i(P+w);return new a(C,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,kv=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=m,Dr=a}).apply(typeof lm<"u"?lm:typeof self<"u"?self:typeof window<"u"?window:{});var sl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rv,co,Pv,Tl,Oh,Dv,Vv,bv;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof sl=="object"&&sl];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(o,c){if(c)e:{var f=r;o=o.split(".");for(var g=0;g<o.length-1;g++){var D=o[g];if(!(D in f))break e;f=f[D]}o=o[o.length-1],g=f[o],c=c(g),c!=g&&c!=null&&e(f,o,{configurable:!0,writable:!0,value:c})}}i("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(o){return o||function(c){var f=[],g;for(g in c)Object.prototype.hasOwnProperty.call(c,g)&&f.push([g,c[g]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function u(o,c,f){return o.call.apply(o.bind,arguments)}function d(o,c,f){return d=u,d.apply(null,arguments)}function m(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function y(o,c){function f(){}f.prototype=c.prototype,o.Z=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Ob=function(g,D,b){for(var K=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)K[oe-2]=arguments[oe];return c.prototype[D].apply(g,K)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function R(o){const c=o.length;if(c>0){const f=Array(c);for(let g=0;g<c;g++)f[g]=o[g];return f}return[]}function j(o,c){for(let g=1;g<arguments.length;g++){const D=arguments[g];var f=typeof D;if(f=f!="object"?f:D?Array.isArray(D)?"array":f:"null",f=="array"||f=="object"&&typeof D.length=="number"){f=o.length||0;const b=D.length||0;o.length=f+b;for(let K=0;K<b;K++)o[f+K]=D[K]}else o.push(D)}}class L{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function W(o){a.setTimeout(()=>{throw o},0)}function I(){var o=E;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class S{constructor(){this.h=this.g=null}add(c,f){const g=k.get();g.set(c,f),this.h?this.h.next=g:this.g=g,this.h=g}}var k=new L(()=>new M,o=>o.reset());class M{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let q,G=!1,E=new S,v=()=>{const o=Promise.resolve(void 0);q=()=>{o.then(w)}};function w(){for(var o;o=I();){try{o.h.call(o.g)}catch(f){W(f)}var c=k;c.j(o),c.h<100&&(c.h++,o.next=c.g,c.g=o)}G=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};a.addEventListener("test",f,c),a.removeEventListener("test",f,c)}catch{}return o}();function T(o){return/^[\s\xa0]*$/.test(o)}function Oe(o,c){C.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,c)}y(Oe,C),Oe.prototype.init=function(o,c){const f=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget,c||(f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement)),this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Oe.Z.h.call(this)},Oe.prototype.h=function(){Oe.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var St="closure_listenable_"+(Math.random()*1e6|0),Qt=0;function or(o,c,f,g,D){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!g,this.ha=D,this.key=++Qt,this.da=this.fa=!1}function B(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function X(o,c,f){for(const g in o)c.call(f,o[g],g,o)}function ne(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function ye(o){const c={};for(const f in o)c[f]=o[f];return c}const Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yt(o,c){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)o[f]=g[f];for(let b=0;b<Ee.length;b++)f=Ee[b],Object.prototype.hasOwnProperty.call(g,f)&&(o[f]=g[f])}}function dt(o){this.src=o,this.g={},this.h=0}dt.prototype.add=function(o,c,f,g,D){const b=o.toString();o=this.g[b],o||(o=this.g[b]=[],this.h++);const K=Ft(o,c,g,D);return K>-1?(c=o[K],f||(c.fa=!1)):(c=new or(c,this.src,b,!!g,D),c.fa=f,o.push(c)),c};function Jt(o,c){const f=c.type;if(f in o.g){var g=o.g[f],D=Array.prototype.indexOf.call(g,c,void 0),b;(b=D>=0)&&Array.prototype.splice.call(g,D,1),b&&(B(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Ft(o,c,f,g){for(let D=0;D<o.length;++D){const b=o[D];if(!b.da&&b.listener==c&&b.capture==!!f&&b.ha==g)return D}return-1}var ln="closure_lm_"+(Math.random()*1e6|0),Sn={};function As(o,c,f,g,D){if(Array.isArray(c)){for(let b=0;b<c.length;b++)As(o,c[b],f,g,D);return null}return f=zt(f),o&&o[St]?o.J(c,f,l(g)?!!g.capture:!1,D):xi(o,c,f,!1,g,D)}function xi(o,c,f,g,D,b){if(!c)throw Error("Invalid event type");const K=l(D)?!!D.capture:!!D;let oe=Me(o);if(oe||(o[ln]=oe=new dt(o)),f=oe.add(c,f,g,K,b),f.proxy)return f;if(g=Hr(),f.proxy=g,g.src=o,g.listener=f,o.addEventListener)P||(D=K),D===void 0&&(D=!1),o.addEventListener(c.toString(),g,D);else if(o.attachEvent)o.attachEvent(ft(c.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Hr(){function o(f){return c.call(o.src,o.listener,f)}const c=Wr;return o}function fa(o,c,f,g,D){if(Array.isArray(c))for(var b=0;b<c.length;b++)fa(o,c[b],f,g,D);else g=l(g)?!!g.capture:!!g,f=zt(f),o&&o[St]?(o=o.i,b=String(c).toString(),b in o.g&&(c=o.g[b],f=Ft(c,f,g,D),f>-1&&(B(c[f]),Array.prototype.splice.call(c,f,1),c.length==0&&(delete o.g[b],o.h--)))):o&&(o=Me(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Ft(c,f,g,D)),(f=o>-1?c[o]:null)&&Ci(f))}function Ci(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[St])Jt(c.i,o);else{var f=o.type,g=o.proxy;c.removeEventListener?c.removeEventListener(f,g,o.capture):c.detachEvent?c.detachEvent(ft(f),g):c.addListener&&c.removeListener&&c.removeListener(g),(f=Me(c))?(Jt(f,o),f.h==0&&(f.src=null,c[ln]=null)):B(o)}}}function ft(o){return o in Sn?Sn[o]:Sn[o]="on"+o}function Wr(o,c){if(o.da)o=!0;else{c=new Oe(c,this);const f=o.listener,g=o.ha||o.src;o.fa&&Ci(o),o=f.call(g,c)}return o}function Me(o){return o=o[ln],o instanceof dt?o:null}var ar="__closure_events_fn_"+(Math.random()*1e9>>>0);function zt(o){return typeof o=="function"?o:(o[ar]||(o[ar]=function(c){return o.handleEvent(c)}),o[ar])}function Be(){x.call(this),this.i=new dt(this),this.M=this,this.G=null}y(Be,x),Be.prototype[St]=!0,Be.prototype.removeEventListener=function(o,c,f,g){fa(this,o,c,f,g)};function we(o,c){var f,g=o.G;if(g)for(f=[];g;g=g.G)f.push(g);if(o=o.M,g=c.type||c,typeof c=="string")c=new C(c,o);else if(c instanceof C)c.target=c.target||o;else{var D=c;c=new C(g,o),Yt(c,D)}D=!0;let b,K;if(f)for(K=f.length-1;K>=0;K--)b=c.g=f[K],D=kt(b,g,!0,c)&&D;if(b=c.g=o,D=kt(b,g,!0,c)&&D,D=kt(b,g,!1,c)&&D,f)for(K=0;K<f.length;K++)b=c.g=f[K],D=kt(b,g,!1,c)&&D}Be.prototype.N=function(){if(Be.Z.N.call(this),this.i){var o=this.i;for(const c in o.g){const f=o.g[c];for(let g=0;g<f.length;g++)B(f[g]);delete o.g[c],o.h--}}this.G=null},Be.prototype.J=function(o,c,f,g){return this.i.add(String(o),c,!1,f,g)},Be.prototype.K=function(o,c,f,g){return this.i.add(String(o),c,!0,f,g)};function kt(o,c,f,g){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();let D=!0;for(let b=0;b<c.length;++b){const K=c[b];if(K&&!K.da&&K.capture==f){const oe=K.listener,Qe=K.ha||K.src;K.fa&&Jt(o.i,K),D=oe.call(Qe,g)!==!1&&D}}return D&&!g.defaultPrevented}function Tt(o,c){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=d(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:a.setTimeout(o,c||0)}function xe(o){o.g=Tt(()=>{o.g=null,o.i&&(o.i=!1,xe(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Ii extends x{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:xe(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bt(o){x.call(this),this.h=o,this.g={}}y(Bt,x);var pa=[];function ma(o){X(o.g,function(c,f){this.g.hasOwnProperty(f)&&Ci(c)},o),o.g={}}Bt.prototype.N=function(){Bt.Z.N.call(this),ma(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ks=a.JSON.stringify,Hu=a.JSON.parse,Wu=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function ga(){}function ya(){}var qr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Rs(){C.call(this,"d")}y(Rs,C);function Kr(){C.call(this,"c")}y(Kr,C);var Tn={},va=null;function Ie(){return va=va||new Be}Tn.Ia="serverreachability";function Bn(o){C.call(this,Tn.Ia,o)}y(Bn,C);function Rt(o){const c=Ie();we(c,new Bn(c))}Tn.STAT_EVENT="statevent";function _a(o,c){C.call(this,Tn.STAT_EVENT,o),this.stat=c}y(_a,C);function st(o){const c=Ie();we(c,new _a(c,o))}Tn.Ja="timingevent";function Ai(o,c){C.call(this,Tn.Ja,o),this.size=c}y(Ai,C);function xn(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},c)}function Un(){this.g=!0}Un.prototype.ua=function(){this.g=!1};function pe(o,c,f,g,D,b){o.info(function(){if(o.g)if(b){var K="",oe=b.split("&");for(let Te=0;Te<oe.length;Te++){var Qe=oe[Te].split("=");if(Qe.length>1){const et=Qe[0];Qe=Qe[1];const kn=et.split("_");K=kn.length>=2&&kn[1]=="type"?K+(et+"="+Qe+"&"):K+(et+"=redacted&")}}}else K=null;else K=b;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+c+`
`+f+`
`+K})}function Se(o,c,f,g,D,b,K){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+c+`
`+f+`
`+b+" "+K})}function un(o,c,f,g){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+qu(o,f)+(g?" "+g:"")})}function Ea(o,c){o.info(function(){return"TIMEOUT: "+c})}Un.prototype.info=function(){};function qu(o,c){if(!o.g)return c;if(!c)return null;try{const b=JSON.parse(c);if(b){for(o=0;o<b.length;o++)if(Array.isArray(b[o])){var f=b[o];if(!(f.length<2)){var g=f[1];if(Array.isArray(g)&&!(g.length<1)){var D=g[0];if(D!="noop"&&D!="stop"&&D!="close")for(let K=1;K<g.length;K++)g[K]=""}}}}return ks(b)}catch{return c}}var Fe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ps={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ds;function ki(){}y(ki,ga),ki.prototype.g=function(){return new XMLHttpRequest},Ds=new ki;function Cn(o){return encodeURIComponent(String(o))}function Ku(o){var c=1;o=o.split(":");const f=[];for(;c>0&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function cn(o,c,f,g){this.j=o,this.i=c,this.l=f,this.S=g||1,this.V=new Bt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new wa}function wa(){this.i=null,this.g="",this.h=!1}var Sa={},Vs={};function bs(o,c,f){o.M=1,o.A=ur(pt(c)),o.u=f,o.R=!0,Ta(o,null)}function Ta(o,c){o.F=Date.now(),Ri(o),o.B=pt(o.A);var f=o.B,g=o.S;Array.isArray(g)||(g=[String(g)]),$s(f.i,"t",g),o.C=0,f=o.j.L,o.h=new wa,o.g=Mf(o.j,f?c:null,!o.u),o.P>0&&(o.O=new Ii(d(o.Y,o,o.g),o.P)),c=o.V,f=o.g,g=o.ba;var D="readystatechange";Array.isArray(D)||(D&&(pa[0]=D.toString()),D=pa);for(let b=0;b<D.length;b++){const K=As(f,D[b],g||c.handleEvent,!1,c.h||c);if(!K)break;c.g[K.key]=K}c=o.J?ye(o.J):{},o.u?(o.v||(o.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,c)):(o.v="GET",o.g.ea(o.B,o.v,null,c)),Rt(),pe(o.i,o.v,o.B,o.l,o.S,o.u)}cn.prototype.ba=function(o){o=o.target;const c=this.O;c&&Pe(o)==3?c.j():this.Y(o)},cn.prototype.Y=function(o){try{if(o==this.g)e:{const oe=Pe(this.g),Qe=this.g.ya(),Te=this.g.ca();if(!(oe<3)&&(oe!=3||this.g&&(this.h.h||this.g.la()||Dt(this.g)))){this.K||oe!=4||Qe==7||(Qe==8||Te<=0?Rt(3):Rt(2)),Ns(this);var c=this.g.ca();this.X=c;var f=Gu(this);if(this.o=c==200,Se(this.i,this.v,this.B,this.l,this.S,oe,c),this.o){if(this.U&&!this.L){t:{if(this.g){var g,D=this.g;if((g=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(g)){var b=g;break t}}b=null}if(o=b)un(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,js(this,o);else{this.o=!1,this.m=3,st(12),hn(this),Gr(this);break e}}if(this.R){o=!0;let et;for(;!this.K&&this.C<f.length;)if(et=Qu(this,f),et==Vs){oe==4&&(this.m=4,st(14),o=!1),un(this.i,this.l,null,"[Incomplete Response]");break}else if(et==Sa){this.m=4,st(15),un(this.i,this.l,f,"[Invalid Chunk]"),o=!1;break}else un(this.i,this.l,et,null),js(this,et);if(xa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),oe!=4||f.length!=0||this.h.h||(this.m=1,st(16),o=!1),this.o=this.o&&o,!o)un(this.i,this.l,f,"[Invalid Chunked Response]"),hn(this),Gr(this);else if(f.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),tc(K),K.P=!0,st(11))}}else un(this.i,this.l,f,null),js(this,f);oe==4&&hn(this),this.o&&!this.K&&(oe==4?Nf(this.j,this):(this.o=!1,Ri(this)))}else La(this.g),c==400&&f.indexOf("Unknown SID")>0?(this.m=3,st(12)):(this.m=0,st(13)),hn(this),Gr(this)}}}catch{}finally{}};function Gu(o){if(!xa(o))return o.g.la();const c=Dt(o.g);if(c==="")return"";let f="";const g=c.length,D=Pe(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return hn(o),Gr(o),"";o.h.i=new a.TextDecoder}for(let b=0;b<g;b++)o.h.h=!0,f+=o.h.i.decode(c[b],{stream:!(D&&b==g-1)});return c.length=0,o.h.g+=f,o.C=0,o.h.g}function xa(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function Qu(o,c){var f=o.C,g=c.indexOf(`
`,f);return g==-1?Vs:(f=Number(c.substring(f,g)),isNaN(f)?Sa:(g+=1,g+f>c.length?Vs:(c=c.slice(g,g+f),o.C=g+f,c)))}cn.prototype.cancel=function(){this.K=!0,hn(this)};function Ri(o){o.T=Date.now()+o.H,Ca(o,o.H)}function Ca(o,c){if(o.D!=null)throw Error("WatchDog timer not null");o.D=xn(d(o.aa,o),c)}function Ns(o){o.D&&(a.clearTimeout(o.D),o.D=null)}cn.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(Ea(this.i,this.B),this.M!=2&&(Rt(),st(17)),hn(this),this.m=2,Gr(this)):Ca(this,this.T-o)};function Gr(o){o.j.I==0||o.K||Nf(o.j,o)}function hn(o){Ns(o);var c=o.O;c&&typeof c.dispose=="function"&&c.dispose(),o.O=null,ma(o.V),o.g&&(c=o.g,o.g=null,c.abort(),c.dispose())}function js(o,c){try{var f=o.j;if(f.I!=0&&(f.g==o||Pi(f.h,o))){if(!o.L&&Pi(f.h,o)&&f.I==3){try{var g=f.Ba.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<o.F)Fa(f),Oa(f);else break e;ec(f),st(18)}}else f.xa=D[1],0<f.xa-f.K&&D[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=xn(d(f.Va,f),6e3));Ls(f.h)<=1&&f.ta&&(f.ta=void 0)}else Zr(f,11)}else if((o.L||f.g==o)&&Fa(f),!T(c))for(D=f.Ba.g.parse(c),c=0;c<D.length;c++){let Te=D[c];const et=Te[0];if(!(et<=f.K))if(f.K=et,Te=Te[1],f.I==2)if(Te[0]=="c"){f.M=Te[1],f.ba=Te[2];const kn=Te[3];kn!=null&&(f.ka=kn,f.j.info("VER="+f.ka));const ei=Te[4];ei!=null&&(f.za=ei,f.j.info("SVER="+f.za));const hr=Te[5];hr!=null&&typeof hr=="number"&&hr>0&&(g=1.5*hr,f.O=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const dr=o.g;if(dr){const Ba=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ba){var b=g.h;b.g||Ba.indexOf("spdy")==-1&&Ba.indexOf("quic")==-1&&Ba.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(lr(b,b.h),b.h=null))}if(g.G){const nc=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;nc&&(g.wa=nc,ve(g.J,g.G,nc))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-o.F,f.j.info("Handshake RTT: "+f.T+"ms")),g=f;var K=o;if(g.na=Of(g,g.L?g.ba:null,g.W),K.L){ka(g.h,K);var oe=K,Qe=g.O;Qe&&(oe.H=Qe),oe.D&&(Ns(oe),Ri(oe)),g.g=K}else Vf(g);f.i.length>0&&Ma(f)}else Te[0]!="stop"&&Te[0]!="close"||Zr(f,7);else f.I==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?Zr(f,7):Zu(f):Te[0]!="noop"&&f.l&&f.l.qa(Te),f.A=0)}}Rt(4)}catch{}}var Yu=class{constructor(o,c){this.g=o,this.map=c}};function Ia(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Aa(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Ls(o){return o.h?1:o.g?o.g.size:0}function Pi(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function lr(o,c){o.g?o.g.add(c):o.h=c}function ka(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Ia.prototype.cancel=function(){if(this.i=Os(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Os(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.G);return c}return R(o.i)}var Ra=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ju(o,c){if(o){o=o.split("&");for(let f=0;f<o.length;f++){const g=o[f].indexOf("=");let D,b=null;g>=0?(D=o[f].substring(0,g),b=o[f].substring(g+1)):D=o[f],c(D,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Pt(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;o instanceof Pt?(this.l=o.l,In(this,o.j),this.o=o.o,this.g=o.g,Qr(this,o.u),this.h=o.h,Ms(this,Hs(o.i)),this.m=o.m):o&&(c=String(o).match(Ra))?(this.l=!1,In(this,c[1]||"",!0),this.o=$n(c[2]||""),this.g=$n(c[3]||"",!0),Qr(this,c[4]),this.h=$n(c[5]||"",!0),Ms(this,c[6]||"",!0),this.m=$n(c[7]||"")):(this.l=!1,this.i=new cr(null,this.l))}Pt.prototype.toString=function(){const o=[];var c=this.j;c&&o.push(Yr(c,Fs,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Yr(c,Fs,!0),"@"),o.push(Cn(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&o.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Yr(f,f.charAt(0)=="/"?F:Jr,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Yr(f,Da)),o.join("")},Pt.prototype.resolve=function(o){const c=pt(this);let f=!!o.j;f?In(c,o.j):f=!!o.o,f?c.o=o.o:f=!!o.g,f?c.g=o.g:f=o.u!=null;var g=o.h;if(f)Qr(c,o.u);else if(f=!!o.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var D=c.h.lastIndexOf("/");D!=-1&&(g=c.h.slice(0,D+1)+g)}if(D=g,D==".."||D==".")g="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){g=D.lastIndexOf("/",0)==0,D=D.split("/");const b=[];for(let K=0;K<D.length;){const oe=D[K++];oe=="."?g&&K==D.length&&b.push(""):oe==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),g&&K==D.length&&b.push("")):(b.push(oe),g=!0)}g=b.join("/")}else g=D}return f?c.h=g:f=o.i.toString()!=="",f?Ms(c,Hs(o.i)):f=!!o.m,f&&(c.m=o.m),c};function pt(o){return new Pt(o)}function In(o,c,f){o.j=f?$n(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Qr(o,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);o.u=c}else o.u=null}function Ms(o,c,f){c instanceof cr?(o.i=c,Va(o.i,o.l)):(f||(c=Yr(c,Pa)),o.i=new cr(c,o.l))}function ve(o,c,f){o.i.set(c,f)}function ur(o){return ve(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function $n(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Yr(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,Xu),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Xu(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Fs=/[#\/\?@]/g,Jr=/[#\?:]/g,F=/[#\?]/g,Pa=/[#\?@]/g,Da=/#/g;function cr(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function An(o){o.g||(o.g=new Map,o.h=0,o.i&&Ju(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=cr.prototype,t.add=function(o,c){An(this),this.i=null,o=Hn(this,o);let f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function zs(o,c){An(o),c=Hn(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Bs(o,c){return An(o),c=Hn(o,c),o.g.has(c)}t.forEach=function(o,c){An(this),this.g.forEach(function(f,g){f.forEach(function(D){o.call(c,D,g,this)},this)},this)};function Us(o,c){An(o);let f=[];if(typeof c=="string")Bs(o,c)&&(f=f.concat(o.g.get(Hn(o,c))));else for(o=Array.from(o.g.values()),c=0;c<o.length;c++)f=f.concat(o[c]);return f}t.set=function(o,c){return An(this),this.i=null,o=Hn(this,o),Bs(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=Us(this,o),o.length>0?String(o[0]):c):c};function $s(o,c,f){zs(o,c),f.length>0&&(o.i=null,o.g.set(Hn(o,c),R(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(let g=0;g<c.length;g++){var f=c[g];const D=Cn(f);f=Us(this,f);for(let b=0;b<f.length;b++){let K=D;f[b]!==""&&(K+="="+Cn(f[b])),o.push(K)}}return this.i=o.join("&")};function Hs(o){const c=new cr;return c.i=o.i,o.g&&(c.g=new Map(o.g),c.h=o.h),c}function Hn(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function Va(o,c){c&&!o.j&&(An(o),o.i=null,o.g.forEach(function(f,g){const D=g.toLowerCase();g!=D&&(zs(this,g),$s(this,D,f))},o)),o.j=c}function ba(o,c){const f=new Un;if(a.Image){const g=new Image;g.onload=m(dn,f,"TestLoadImage: loaded",!0,c,g),g.onerror=m(dn,f,"TestLoadImage: error",!1,c,g),g.onabort=m(dn,f,"TestLoadImage: abort",!1,c,g),g.ontimeout=m(dn,f,"TestLoadImage: timeout",!1,c,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else c(!1)}function Na(o,c){const f=new Un,g=new AbortController,D=setTimeout(()=>{g.abort(),dn(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:g.signal}).then(b=>{clearTimeout(D),b.ok?dn(f,"TestPingServer: ok",!0,c):dn(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(D),dn(f,"TestPingServer: error",!1,c)})}function dn(o,c,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function ja(){this.g=new Wu}function Di(o){this.i=o.Sb||null,this.h=o.ab||!1}y(Di,ga),Di.prototype.g=function(){return new Xr(this.i,this.h)};function Xr(o,c){Be.call(this),this.H=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Xr,Be),t=Xr.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=c,this.readyState=1,A(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(c.body=o),(this.H||a).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,p(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,A(this)),this.g&&(this.readyState=3,A(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ws(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ws(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?p(this):A(this),this.readyState==3&&Ws(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,p(this))},t.Na=function(o){this.g&&(this.response=o,p(this))},t.ga=function(){this.g&&p(this)};function p(o){o.readyState=4,o.l=null,o.j=null,o.B=null,A(o)}t.setRequestHeader=function(o,c){this.A.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function A(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Xr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function V(o){let c="";return X(o,function(f,g){c+=g,c+=":",c+=f,c+=`\r
`}),c}function N(o,c,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=V(f),typeof o=="string"?f!=null&&Cn(f):ve(o,c,f))}function H(o){Be.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(H,Be);var Z=/^https?$/i,se=["POST","PUT"];t=H.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,c,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ds.g(),this.g.onreadystatechange=_(d(this.Ca,this));try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(b){me(this,b);return}if(o=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const b of g.keys())f.set(b,g.get(b));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(b=>b.toLowerCase()=="content-type"),D=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(se,c,void 0)>=0)||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,K]of f)this.g.setRequestHeader(b,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(b){me(this,b)}};function me(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.o=5,Ue(o),$e(o)}function Ue(o){o.A||(o.A=!0,we(o,"complete"),we(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,we(this,"complete"),we(this,"abort"),$e(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$e(this,!0)),H.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ce(this):this.Xa())},t.Xa=function(){ce(this)};function ce(o){if(o.h&&typeof s<"u"){if(o.v&&Pe(o)==4)setTimeout(o.Ca.bind(o),0);else if(we(o,"readystatechange"),Pe(o)==4){o.h=!1;try{const b=o.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var g;if(g=b===0){let K=String(o.D).match(Ra)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),g=!Z.test(K?K.toLowerCase():"")}f=g}if(f)we(o,"complete"),we(o,"success");else{o.o=6;try{var D=Pe(o)>2?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.ca()+"]",Ue(o)}}finally{$e(o)}}}}function $e(o,c){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const f=o.g;o.g=null,c||we(o,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Pe(o){return o.g?o.g.readyState:0}t.ca=function(){try{return Pe(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Hu(c)}};function Dt(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function La(o){const c={};o=(o.g&&Pe(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(T(o[g]))continue;var f=Ku(o[g]);const D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const b=c[D]||[];c[D]=b,b.push(f)}ne(c,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qs(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function kf(o){this.za=0,this.i=[],this.j=new Un,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qs("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qs("baseRetryDelayMs",5e3,o),this.Za=qs("retryDelaySeedMs",1e4,o),this.Ta=qs("forwardChannelMaxRetries",2,o),this.va=qs("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Ia(o&&o.concurrentRequestLimit),this.Ba=new ja,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=kf.prototype,t.ka=8,t.I=1,t.connect=function(o,c,f,g){st(0),this.W=o,this.H=c||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.J=Of(this,null,this.W),Ma(this)};function Zu(o){if(Rf(o),o.I==3){var c=o.V++,f=pt(o.J);if(ve(f,"SID",o.M),ve(f,"RID",c),ve(f,"TYPE","terminate"),Ks(o,f),c=new cn(o,o.j,c),c.M=2,c.A=ur(pt(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(c.A.toString(),"")}catch{}!f&&a.Image&&(new Image().src=c.A,f=!0),f||(c.g=Mf(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Ri(c)}Lf(o)}function Oa(o){o.g&&(tc(o),o.g.cancel(),o.g=null)}function Rf(o){Oa(o),o.v&&(a.clearTimeout(o.v),o.v=null),Fa(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function Ma(o){if(!Aa(o.h)&&!o.m){o.m=!0;var c=o.Ea;q||v(),G||(q(),G=!0),E.add(c,o),o.D=0}}function r_(o,c){return Ls(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=c.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=xn(d(o.Ea,o,c),jf(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const D=new cn(this,this.j,o);let b=this.o;if(this.U&&(b?(b=ye(b),Yt(b,this.U)):b=this.U),this.u!==null||this.R||(D.J=b,b=null),this.S)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(c+=g,c>4096){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=Df(this,D,c),f=pt(this.J),ve(f,"RID",o),ve(f,"CVER",22),this.G&&ve(f,"X-HTTP-Session-Id",this.G),Ks(this,f),b&&(this.R?c="headers="+Cn(V(b))+"&"+c:this.u&&N(f,this.u,b)),lr(this.h,D),this.Ra&&ve(f,"TYPE","init"),this.S?(ve(f,"$req",c),ve(f,"SID","null"),D.U=!0,bs(D,f,null)):bs(D,f,c),this.I=2}}else this.I==3&&(o?Pf(this,o):this.i.length==0||Aa(this.h)||Pf(this))};function Pf(o,c){var f;c?f=c.l:f=o.V++;const g=pt(o.J);ve(g,"SID",o.M),ve(g,"RID",f),ve(g,"AID",o.K),Ks(o,g),o.u&&o.o&&N(g,o.u,o.o),f=new cn(o,o.j,f,o.D+1),o.u===null&&(f.J=o.o),c&&(o.i=c.G.concat(o.i)),c=Df(o,f,1e3),f.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),lr(o.h,f),bs(f,g,c)}function Ks(o,c){o.H&&X(o.H,function(f,g){ve(c,g,f)}),o.l&&X({},function(f,g){ve(c,g,f)})}function Df(o,c,f){f=Math.min(o.i.length,f);const g=o.l?d(o.l.Ka,o.l,o):null;e:{var D=o.i;let oe=-1;for(;;){const Qe=["count="+f];oe==-1?f>0?(oe=D[0].g,Qe.push("ofs="+oe)):oe=0:Qe.push("ofs="+oe);let Te=!0;for(let et=0;et<f;et++){var b=D[et].g;const kn=D[et].map;if(b-=oe,b<0)oe=Math.max(0,D[et].g-100),Te=!1;else try{b="req"+b+"_"||"";try{var K=kn instanceof Map?kn:Object.entries(kn);for(const[ei,hr]of K){let dr=hr;l(hr)&&(dr=ks(hr)),Qe.push(b+ei+"="+encodeURIComponent(dr))}}catch(ei){throw Qe.push(b+"type="+encodeURIComponent("_badmap")),ei}}catch{g&&g(kn)}}if(Te){K=Qe.join("&");break e}}K=void 0}return o=o.i.splice(0,f),c.G=o,K}function Vf(o){if(!o.g&&!o.v){o.Y=1;var c=o.Da;q||v(),G||(q(),G=!0),E.add(c,o),o.A=0}}function ec(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=xn(d(o.Da,o),jf(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,bf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=xn(d(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,st(10),Oa(this),bf(this))};function tc(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function bf(o){o.g=new cn(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var c=pt(o.na);ve(c,"RID","rpc"),ve(c,"SID",o.M),ve(c,"AID",o.K),ve(c,"CI",o.F?"0":"1"),!o.F&&o.ia&&ve(c,"TO",o.ia),ve(c,"TYPE","xmlhttp"),Ks(o,c),o.u&&o.o&&N(c,o.u,o.o),o.O&&(o.g.H=o.O);var f=o.g;o=o.ba,f.M=1,f.A=ur(pt(c)),f.u=null,f.R=!0,Ta(f,o)}t.Va=function(){this.C!=null&&(this.C=null,Oa(this),ec(this),st(19))};function Fa(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Nf(o,c){var f=null;if(o.g==c){Fa(o),tc(o),o.g=null;var g=2}else if(Pi(o.h,c))f=c.G,ka(o.h,c),g=1;else return;if(o.I!=0){if(c.o)if(g==1){f=c.u?c.u.length:0,c=Date.now()-c.F;var D=o.D;g=Ie(),we(g,new Ai(g,f)),Ma(o)}else Vf(o);else if(D=c.m,D==3||D==0&&c.X>0||!(g==1&&r_(o,c)||g==2&&ec(o)))switch(f&&f.length>0&&(c=o.h,c.i=c.i.concat(f)),D){case 1:Zr(o,5);break;case 4:Zr(o,10);break;case 3:Zr(o,6);break;default:Zr(o,2)}}}function jf(o,c){let f=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(f*=2),f*c}function Zr(o,c){if(o.j.info("Error code "+c),c==2){var f=d(o.bb,o),g=o.Ua;const D=!g;g=new Pt(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||In(g,"https"),ur(g),D?ba(g.toString(),f):Na(g.toString(),f)}else st(2);o.I=0,o.l&&o.l.pa(c),Lf(o),Rf(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function Lf(o){if(o.I=0,o.ja=[],o.l){const c=Os(o.h);(c.length!=0||o.i.length!=0)&&(j(o.ja,c),j(o.ja,o.i),o.h.i.length=0,R(o.i),o.i.length=0),o.l.oa()}}function Of(o,c,f){var g=f instanceof Pt?pt(f):new Pt(f);if(g.g!="")c&&(g.g=c+"."+g.g),Qr(g,g.u);else{var D=a.location;g=D.protocol,c=c?c+"."+D.hostname:D.hostname,D=+D.port;const b=new Pt(null);g&&In(b,g),c&&(b.g=c),D&&Qr(b,D),f&&(b.h=f),g=b}return f=o.G,c=o.wa,f&&c&&ve(g,f,c),ve(g,"VER",o.ka),Ks(o,g),g}function Mf(o,c,f){if(c&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Aa&&!o.ma?new H(new Di({ab:f})):new H(o.ma),c.Fa(o.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ff(){}t=Ff.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function za(){}za.prototype.g=function(o,c){return new Ut(o,c)};function Ut(o,c){Be.call(this),this.g=new kf(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(o?o["X-WebChannel-Client-Profile"]=c.sa:o={"X-WebChannel-Client-Profile":c.sa}),this.g.U=o,(o=c&&c.Qb)&&!T(o)&&(this.g.u=o),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!T(c)&&(this.g.G=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Vi(this)}y(Ut,Be),Ut.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Zu(this.g)},Ut.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.v&&(f={},f.__data__=ks(o),o=f);c.i.push(new Yu(c.Ya++,o)),c.I==3&&Ma(c)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Zu(this.g),delete this.g,Ut.Z.N.call(this)};function zf(o){Rs.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const f in c){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}y(zf,Rs);function Bf(){Kr.call(this),this.status=1}y(Bf,Kr);function Vi(o){this.g=o}y(Vi,Ff),Vi.prototype.ra=function(){we(this.g,"a")},Vi.prototype.qa=function(o){we(this.g,new zf(o))},Vi.prototype.pa=function(o){we(this.g,new Bf)},Vi.prototype.oa=function(){we(this.g,"b")},za.prototype.createWebChannel=za.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,bv=function(){return new za},Vv=function(){return Ie()},Dv=Tn,Oh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fe.NO_ERROR=0,Fe.TIMEOUT=8,Fe.HTTP_ERROR=6,Tl=Fe,Ps.COMPLETE="complete",Pv=Ps,ya.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",Be.prototype.listen=Be.prototype.J,co=ya,H.prototype.listenOnce=H.prototype.K,H.prototype.getLastError=H.prototype.Ha,H.prototype.getLastErrorCode=H.prototype.ya,H.prototype.getStatus=H.prototype.ca,H.prototype.getResponseJson=H.prototype.La,H.prototype.getResponseText=H.prototype.la,H.prototype.send=H.prototype.ea,H.prototype.setWithCredentials=H.prototype.Fa,Rv=H}).apply(typeof sl<"u"?sl:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vt.UNAUTHENTICATED=new vt(null),vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid"),vt.FIRST_PARTY=new vt("first-party-uid"),vt.MOCK_USER=new vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ts="12.8.0";function yS(t){Ts=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new Sv("@firebase/firestore");function ji(){return gi.logLevel}function Q(t,...e){if(gi.logLevel<=de.DEBUG){const n=e.map(Yd);gi.debug(`Firestore (${Ts}): ${t}`,...n)}}function rr(t,...e){if(gi.logLevel<=de.ERROR){const n=e.map(Yd);gi.error(`Firestore (${Ts}): ${t}`,...n)}}function fs(t,...e){if(gi.logLevel<=de.WARN){const n=e.map(Yd);gi.warn(`Firestore (${Ts}): ${t}`,...n)}}function Yd(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Nv(t,r,n)}function Nv(t,e,n){let r=`FIRESTORE (${Ts}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw rr(r),new Error(r)}function ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Nv(e,i,r)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Ss{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vt.UNAUTHENTICATED))}shutdown(){}}class _S{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ES{constructor(e){this.t=e,this.currentUser=vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Vr,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Vr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new jv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new vt(e)}}class wS{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=vt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class SS{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new wS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class um{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,eS(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0,3512);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new um(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new um(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=xS(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function Mh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return bc(i)===bc(s)?le(i,s):bc(i)?1:-1}return le(t.length,e.length)}const CS=55296,IS=57343;function bc(t){const e=t.charCodeAt(0);return e>=CS&&e<=IS}function ps(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="__name__";class Vn{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Vn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return le(e.length,n.length)}static compareSegments(e,n){const r=Vn.isNumericId(e),i=Vn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Vn.extractNumericId(e).compare(Vn.extractNumericId(n)):Mh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Dr.fromString(e.substring(4,e.length-2))}}class be extends Vn{construct(e,n,r){return new be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new be(n)}static emptyPath(){return new be([])}}const AS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends Vn{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return AS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cm}static keyField(){return new lt([cm])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new J(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new J(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new J(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(be.fromString(e))}static fromName(e){return new ee(be.fromString(e).popFirst(5))}static empty(){return new ee(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t,e,n){if(!n)throw new J(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RS(t,e,n,r){if(e===!0&&r===!0)throw new J(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hm(t){if(!ee.isDocumentKey(t))throw new J(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Lv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Xd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function Qo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xd(t);throw new J(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t,e){const n={typeString:t};return e&&(n.value=e),n}function la(t,e){if(!Lv(t))throw new J(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new J(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm=-62135596800,fm=1e6;class ke{static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*fm);return new ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dm)throw new J(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fm}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(la(e,ke._jsonSchema))return new ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ke._jsonSchemaVersion="firestore/timestamp/1.0",ke._jsonSchema={type:Ge("string",ke._jsonSchemaVersion),seconds:Ge("number"),nanoseconds:Ge("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new ke(0,0))}static max(){return new re(new ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=-1;function PS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new ke(n+1,0):new ke(n,r));return new jr(i,ee.empty(),e)}function DS(t){return new jr(t.readTime,t.key,Yo)}class jr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new jr(re.min(),ee.empty(),Yo)}static max(){return new jr(re.max(),ee.empty(),Yo)}}function VS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xs(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==bS)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},u=>r(u))}),a=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(m=>{a[d]=m,++l,l===s&&r(a)},m=>i(m))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function jS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=-1;function bu(t){return t==null}function iu(t){return t===0&&1/t==-1/0}function LS(t){return typeof t=="number"&&Number.isInteger(t)&&!iu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="";function OS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pm(e)),e=MS(t.get(n),e);return pm(e)}function MS(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Ov:n+="";break;default:n+=s}}return n}function pm(t){return t+Ov+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ei(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Mv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ol(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ol(this.root,e,this.comparator,!1)}getReverseIterator(){return new ol(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ol(this.root,e,this.comparator,!0)}}class ol{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??at.RED,this.left=i??at.EMPTY,this.right=s??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new at(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return at.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gm(this.data.getIterator())}getIteratorFrom(e){return new gm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class gm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new yn([])}unionWith(e){let n=new Ze(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ps(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Fv("Invalid base64 string: "+s):s}}(e);return new ht(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const FS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(t){if(ge(!!t,39018),typeof t=="string"){let e=0;const n=FS.exec(t);if(ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(t.seconds),nanos:He(t.nanos)}}function He(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="server_timestamp",Bv="__type__",Uv="__previous_value__",$v="__local_write_time__";function ef(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Bv])==null?void 0:r.stringValue)===zv}function Nu(t){const e=t.mapValue.fields[Uv];return ef(e)?Nu(e):e}function Jo(t){const e=Lr(t.mapValue.fields[$v].timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n,r,i,s,a,l,u,d,m,y){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m,this.apiKey=y}}const su="(default)";class Xo{constructor(e,n){this.projectId=e,this.database=n||su}static empty(){return new Xo("","")}get isDefaultDatabase(){return this.database===su}isEqual(e){return e instanceof Xo&&e.projectId===this.projectId&&e.database===this.database}}function BS(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new J(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="__type__",US="__max__",al={mapValue:{}},Wv="__vector__",ou="value";function Mr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ef(t)?4:HS(t)?9007199254740991:$S(t)?10:11:te(28295,{value:t})}function Fn(t,e){if(t===e)return!0;const n=Mr(t);if(n!==Mr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jo(t).isEqual(Jo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Lr(i.timestampValue),l=Lr(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Or(i.bytesValue).isEqual(Or(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return He(i.geoPointValue.latitude)===He(s.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return He(i.integerValue)===He(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=He(i.doubleValue),l=He(s.doubleValue);return a===l?iu(a)===iu(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ps(t.arrayValue.values||[],e.arrayValue.values||[],Fn);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(mm(a)!==mm(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Fn(a[u],l[u])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function Zo(t,e){return(t.values||[]).find(n=>Fn(n,e))!==void 0}function ms(t,e){if(t===e)return 0;const n=Mr(t),r=Mr(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=He(s.integerValue||s.doubleValue),u=He(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return ym(t.timestampValue,e.timestampValue);case 4:return ym(Jo(t),Jo(e));case 5:return Mh(t.stringValue,e.stringValue);case 6:return function(s,a){const l=Or(s),u=Or(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let d=0;d<l.length&&d<u.length;d++){const m=le(l[d],u[d]);if(m!==0)return m}return le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=le(He(s.latitude),He(a.latitude));return l!==0?l:le(He(s.longitude),He(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vm(t.arrayValue,e.arrayValue);case 10:return function(s,a){var _,R,j,L;const l=s.fields||{},u=a.fields||{},d=(_=l[ou])==null?void 0:_.arrayValue,m=(R=u[ou])==null?void 0:R.arrayValue,y=le(((j=d==null?void 0:d.values)==null?void 0:j.length)||0,((L=m==null?void 0:m.values)==null?void 0:L.length)||0);return y!==0?y:vm(d,m)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===al.mapValue&&a===al.mapValue)return 0;if(s===al.mapValue)return 1;if(a===al.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),d=a.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let y=0;y<u.length&&y<m.length;++y){const _=Mh(u[y],m[y]);if(_!==0)return _;const R=ms(l[u[y]],d[m[y]]);if(R!==0)return R}return le(u.length,m.length)}(t.mapValue,e.mapValue);default:throw te(23264,{he:n})}}function ym(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Lr(t),r=Lr(e),i=le(n.seconds,r.seconds);return i!==0?i:le(n.nanos,r.nanos)}function vm(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ms(n[i],r[i]);if(s)return s}return le(n.length,r.length)}function gs(t){return Fh(t)}function Fh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Lr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Or(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Fh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Fh(n.fields[a])}`;return i+"}"}(t.mapValue):te(61005,{value:t})}function xl(t){switch(Mr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nu(t);return e?16+xl(e):16;case 5:return 2*t.stringValue.length;case 6:return Or(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+xl(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ei(r.fields,(s,a)=>{i+=s.length+xl(a)}),i}(t.mapValue);default:throw te(13486,{value:t})}}function zh(t){return!!t&&"integerValue"in t}function tf(t){return!!t&&"arrayValue"in t}function _m(t){return!!t&&"nullValue"in t}function Em(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cl(t){return!!t&&"mapValue"in t}function $S(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Hv])==null?void 0:r.stringValue)===Wv}function Co(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ei(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Co(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Co(t.arrayValue.values[n]);return e}return{...t}}function HS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===US}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Cl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Co(n)}setAll(e){let n=lt.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=Co(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Cl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Cl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ei(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new tn(Co(this.value))}}function qv(t){const e=[];return Ei(t.fields,(n,r)=>{const i=new lt([n]);if(Cl(r)){const s=qv(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Et(e,0,re.min(),re.min(),re.min(),tn.empty(),0)}static newFoundDocument(e,n,r,i){return new Et(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new Et(e,2,n,re.min(),re.min(),tn.empty(),0)}static newUnknownDocument(e,n){return new Et(e,3,n,re.min(),re.min(),tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n){this.position=e,this.inclusive=n}}function wm(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=ee.comparator(ee.fromName(a.referenceValue),n.key):r=ms(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Sm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n="asc"){this.field=e,this.dir=n}}function WS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{}class Je extends Kv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new KS(e,n,r):n==="array-contains"?new YS(e,r):n==="in"?new JS(e,r):n==="not-in"?new XS(e,r):n==="array-contains-any"?new ZS(e,r):new Je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new GS(e,r):new QS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ms(n,this.value)):n!==null&&Mr(this.value)===Mr(n)&&this.matchesComparison(ms(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zn extends Kv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new zn(e,n)}matches(e){return Gv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Gv(t){return t.op==="and"}function Qv(t){return qS(t)&&Gv(t)}function qS(t){for(const e of t.filters)if(e instanceof zn)return!1;return!0}function Bh(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+gs(t.value);if(Qv(t))return t.filters.map(e=>Bh(e)).join(",");{const e=t.filters.map(n=>Bh(n)).join(",");return`${t.op}(${e})`}}function Yv(t,e){return t instanceof Je?function(r,i){return i instanceof Je&&r.op===i.op&&r.field.isEqual(i.field)&&Fn(r.value,i.value)}(t,e):t instanceof zn?function(r,i){return i instanceof zn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&Yv(a,i.filters[l]),!0):!1}(t,e):void te(19439)}function Jv(t){return t instanceof Je?function(n){return`${n.field.canonicalString()} ${n.op} ${gs(n.value)}`}(t):t instanceof zn?function(n){return n.op.toString()+" {"+n.getFilters().map(Jv).join(" ,")+"}"}(t):"Filter"}class KS extends Je{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class GS extends Je{constructor(e,n){super(e,"in",n),this.keys=Xv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QS extends Je{constructor(e,n){super(e,"not-in",n),this.keys=Xv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Xv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class YS extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tf(n)&&Zo(n.arrayValue,this.value)}}class JS extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zo(this.value.arrayValue,n)}}class XS extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zo(this.value.arrayValue,n)}}class ZS extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Zo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function Tm(t,e=null,n=[],r=[],i=null,s=null,a=null){return new eT(t,e,n,r,i,s,a)}function nf(t){const e=ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Bh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),bu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gs(r)).join(",")),e.Te=n}return e.Te}function rf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!WS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Yv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sm(t.startAt,e.startAt)&&Sm(t.endAt,e.endAt)}function Uh(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function tT(t,e,n,r,i,s,a,l){return new ju(t,e,n,r,i,s,a,l)}function sf(t){return new ju(t)}function xm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nT(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function rT(t){return t.collectionGroup!==null}function Io(t){const e=ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ze(lt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new lu(s,r))}),n.has(lt.keyField().canonicalString())||e.Ie.push(new lu(lt.keyField(),r))}return e.Ie}function Ln(t){const e=ie(t);return e.Ee||(e.Ee=iT(e,Io(t))),e.Ee}function iT(t,e){if(t.limitType==="F")return Tm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new lu(i.field,s)});const n=t.endAt?new au(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new au(t.startAt.position,t.startAt.inclusive):null;return Tm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $h(t,e,n){return new ju(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lu(t,e){return rf(Ln(t),Ln(e))&&t.limitType===e.limitType}function Zv(t){return`${nf(Ln(t))}|lt:${t.limitType}`}function Li(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Jv(i)).join(", ")}]`),bu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>gs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>gs(i)).join(",")),`Target(${r})`}(Ln(t))}; limitType=${t.limitType})`}function Ou(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Io(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,u){const d=wm(a,l,u);return a.inclusive?d<=0:d<0}(r.startAt,Io(r),i)||r.endAt&&!function(a,l,u){const d=wm(a,l,u);return a.inclusive?d>=0:d>0}(r.endAt,Io(r),i))}(t,e)}function sT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function e0(t){return(e,n)=>{let r=!1;for(const i of Io(t)){const s=oT(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function oT(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(s,a,l){const u=a.data.field(s),d=l.data.field(s);return u!==null&&d!==null?ms(u,d):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ei(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Mv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=new Le(ee.comparator);function ir(){return aT}const t0=new Le(ee.comparator);function ho(...t){let e=t0;for(const n of t)e=e.insert(n.key,n);return e}function n0(t){let e=t0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ai(){return Ao()}function r0(){return Ao()}function Ao(){return new wi(t=>t.toString(),(t,e)=>t.isEqual(e))}const lT=new Le(ee.comparator),uT=new Ze(ee.comparator);function ue(...t){let e=uT;for(const n of t)e=e.add(n);return e}const cT=new Ze(le);function hT(){return cT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iu(e)?"-0":e}}function i0(t){return{integerValue:""+t}}function dT(t,e){return LS(e)?i0(e):of(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(){this._=void 0}}function fT(t,e,n){return t instanceof uu?function(i,s){const a={fields:{[Bv]:{stringValue:zv},[$v]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ef(s)&&(s=Nu(s)),s&&(a.fields[Uv]=s),{mapValue:a}}(n,e):t instanceof ea?o0(t,e):t instanceof ta?a0(t,e):function(i,s){const a=s0(i,s),l=Cm(a)+Cm(i.Ae);return zh(a)&&zh(i.Ae)?i0(l):of(i.serializer,l)}(t,e)}function pT(t,e,n){return t instanceof ea?o0(t,e):t instanceof ta?a0(t,e):n}function s0(t,e){return t instanceof cu?function(r){return zh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class uu extends Mu{}class ea extends Mu{constructor(e){super(),this.elements=e}}function o0(t,e){const n=l0(e);for(const r of t.elements)n.some(i=>Fn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ta extends Mu{constructor(e){super(),this.elements=e}}function a0(t,e){let n=l0(e);for(const r of t.elements)n=n.filter(i=>!Fn(i,r));return{arrayValue:{values:n}}}class cu extends Mu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Cm(t){return He(t.integerValue||t.doubleValue)}function l0(t){return tf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function mT(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ea&&i instanceof ea||r instanceof ta&&i instanceof ta?ps(r.elements,i.elements,Fn):r instanceof cu&&i instanceof cu?Fn(r.Ae,i.Ae):r instanceof uu&&i instanceof uu}(t.transform,e.transform)}class gT{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Il(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fu{}function u0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new h0(t.key,Jn.none()):new ua(t.key,t.data,Jn.none());{const n=t.data,r=tn.empty();let i=new Ze(lt.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Si(t.key,r,new yn(i.toArray()),Jn.none())}}function yT(t,e,n){t instanceof ua?function(i,s,a){const l=i.value.clone(),u=Am(i.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Si?function(i,s,a){if(!Il(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=Am(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(c0(i)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ko(t,e,n,r){return t instanceof ua?function(s,a,l,u){if(!Il(s.precondition,a))return l;const d=s.value.clone(),m=km(s.fieldTransforms,u,a);return d.setAll(m),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Si?function(s,a,l,u){if(!Il(s.precondition,a))return l;const d=km(s.fieldTransforms,u,a),m=a.data;return m.setAll(c0(s)),m.setAll(d),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(s,a,l){return Il(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function vT(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=s0(r.transform,i||null);s!=null&&(n===null&&(n=tn.empty()),n.set(r.field,s))}return n||null}function Im(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ps(r,i,(s,a)=>mT(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ua extends Fu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Si extends Fu{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function c0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Am(t,e,n){const r=new Map;ge(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,pT(a,l,n[i]))}return r}function km(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,fT(s,a,e))}return r}class h0 extends Fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _T extends Fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&yT(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ko(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ko(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=r0();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const u=u0(a,l);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&ps(this.mutations,e.mutations,(n,r)=>Im(n,r))&&ps(this.baseMutations,e.baseMutations,(n,r)=>Im(n,r))}}class af{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ge(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return lT}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new af(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,he;function TT(t){switch(t){case z.OK:return te(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function d0(t){if(t===void 0)return rr("GRPC error has no .code"),z.UNKNOWN;switch(t){case qe.OK:return z.OK;case qe.CANCELLED:return z.CANCELLED;case qe.UNKNOWN:return z.UNKNOWN;case qe.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case qe.INTERNAL:return z.INTERNAL;case qe.UNAVAILABLE:return z.UNAVAILABLE;case qe.UNAUTHENTICATED:return z.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case qe.NOT_FOUND:return z.NOT_FOUND;case qe.ALREADY_EXISTS:return z.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return z.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case qe.ABORTED:return z.ABORTED;case qe.OUT_OF_RANGE:return z.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return z.UNIMPLEMENTED;case qe.DATA_LOSS:return z.DATA_LOSS;default:return te(39323,{code:t})}}(he=qe||(qe={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=new Dr([4294967295,4294967295],0);function Rm(t){const e=xT().encode(t),n=new kv;return n.update(e),new Uint8Array(n.digest())}function Pm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Dr([n,r],0),new Dr([i,s],0)]}class lf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fo(`Invalid padding: ${n}`);if(r<0)throw new fo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Dr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Dr.fromNumber(r)));return i.compare(CT)===1&&(i=new Dr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Rm(e),[r,i]=Pm(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new lf(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=Rm(e),[r,i]=Pm(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.be(a)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ca.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zu(re.min(),i,new Le(le),ir(),ue())}}class ca{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ca(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class f0{constructor(e,n){this.targetId=e,this.Ce=n}}class p0{constructor(e,n,r=ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Dm{constructor(){this.ve=0,this.Fe=Vm(),this.Me=ht.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ue(),n=ue(),r=ue();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te(38017,{changeType:s})}}),new ca(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Vm()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class IT{constructor(e){this.Ge=e,this.ze=new Map,this.je=ir(),this.He=ll(),this.Je=ll(),this.Ze=new Le(le)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Uh(s))if(r===0){const a=new ee(s.path);this.et(n,a,Et.newNoDocument(a,re.min()))}else ge(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=Or(r).toUint8Array()}catch(u){if(u instanceof Fv)return fs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new lf(a,i,s)}catch(u){return fs(u instanceof fo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&Uh(l.target)){const u=new ee(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Et.newNoDocument(u,e))}s.Be&&(n.set(a,s.ke()),s.Ke())}});let r=ue();this.Je.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const i=new zu(e,n,this.Ze,this.je,r);return this.je=ir(),this.He=ll(),this.Je=ll(),this.Ze=new Le(le),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Dm,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Ze(le),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Ze(le),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dm),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ll(){return new Le(ee.comparator)}function Vm(){return new Le(ee.comparator)}const AT={asc:"ASCENDING",desc:"DESCENDING"},kT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RT={and:"AND",or:"OR"};class PT{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hh(t,e){return t.useProto3Json||bu(e)?e:{value:e}}function hu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function m0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function DT(t,e){return hu(t,e.toTimestamp())}function On(t){return ge(!!t,49232),re.fromTimestamp(function(n){const r=Lr(n);return new ke(r.seconds,r.nanos)}(t))}function uf(t,e){return Wh(t,e).canonicalString()}function Wh(t,e){const n=function(i){return new be(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function g0(t){const e=be.fromString(t);return ge(w0(e),10190,{key:e.toString()}),e}function qh(t,e){return uf(t.databaseId,e.path)}function Nc(t,e){const n=g0(e);if(n.get(1)!==t.databaseId.projectId)throw new J(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(v0(n))}function y0(t,e){return uf(t.databaseId,e)}function VT(t){const e=g0(t);return e.length===4?be.emptyPath():v0(e)}function Kh(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function v0(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function bm(t,e,n){return{name:qh(t,e),fields:n.value.mapValue.fields}}function bT(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,m){return d.useProto3Json?(ge(m===void 0||typeof m=="string",58123),ht.fromBase64String(m||"")):(ge(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),ht.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const m=d.code===void 0?z.UNKNOWN:d0(d.code);return new J(m,d.message||"")}(a);n=new p0(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Nc(t,r.document.name),s=On(r.document.updateTime),a=r.document.createTime?On(r.document.createTime):re.min(),l=new tn({mapValue:{fields:r.document.fields}}),u=Et.newFoundDocument(i,s,a,l),d=r.targetIds||[],m=r.removedTargetIds||[];n=new Al(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Nc(t,r.document),s=r.readTime?On(r.readTime):re.min(),a=Et.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Al([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Nc(t,r.document),s=r.removedTargetIds||[];n=new Al([],s,i,null)}else{if(!("filter"in e))return te(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new ST(i,s),l=r.targetId;n=new f0(l,a)}}return n}function NT(t,e){let n;if(e instanceof ua)n={update:bm(t,e.key,e.value)};else if(e instanceof h0)n={delete:qh(t,e.key)};else if(e instanceof Si)n={update:bm(t,e.key,e.data),updateMask:$T(e.fieldMask)};else{if(!(e instanceof _T))return te(16599,{dt:e.type});n={verify:qh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof uu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ea)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ta)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof cu)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw te(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:DT(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te(27497)}(t,e.precondition)),n}function jT(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map(n=>function(i,s){let a=i.updateTime?On(i.updateTime):On(s);return a.isEqual(re.min())&&(a=On(s)),new gT(a,i.transformResults||[])}(n,e))):[]}function LT(t,e){return{documents:[y0(t,e.path)]}}function OT(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=y0(t,i);const s=function(d){if(d.length!==0)return E0(zn.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(d){if(d.length!==0)return d.map(m=>function(_){return{field:Oi(_.field),direction:zT(_.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Hh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function MT(t){let e=VT(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ge(r===1,65062);const m=n.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];n.where&&(s=function(y){const _=_0(y);return _ instanceof zn&&Qv(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(y){return y.map(_=>function(j){return new lu(Mi(j.field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(y){let _;return _=typeof y=="object"?y.value:y,bu(_)?null:_}(n.limit));let u=null;n.startAt&&(u=function(y){const _=!!y.before,R=y.values||[];return new au(R,_)}(n.startAt));let d=null;return n.endAt&&(d=function(y){const _=!y.before,R=y.values||[];return new au(R,_)}(n.endAt)),tT(e,i,a,s,l,"F",u,d)}function FT(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Mi(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Mi(n.unaryFilter.field);return Je.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Mi(n.unaryFilter.field);return Je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Mi(n.unaryFilter.field);return Je.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return Je.create(Mi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zn.create(n.compositeFilter.filters.map(r=>_0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function zT(t){return AT[t]}function BT(t){return kT[t]}function UT(t){return RT[t]}function Oi(t){return{fieldPath:t.canonicalString()}}function Mi(t){return lt.fromServerFormat(t.fieldPath)}function E0(t){return t instanceof Je?function(n){if(n.op==="=="){if(Em(n.value))return{unaryFilter:{field:Oi(n.field),op:"IS_NAN"}};if(_m(n.value))return{unaryFilter:{field:Oi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Em(n.value))return{unaryFilter:{field:Oi(n.field),op:"IS_NOT_NAN"}};if(_m(n.value))return{unaryFilter:{field:Oi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oi(n.field),op:BT(n.op),value:n.value}}}(t):t instanceof zn?function(n){const r=n.getFilters().map(i=>E0(i));return r.length===1?r[0]:{compositeFilter:{op:UT(n.op),filters:r}}}(t):te(54877,{filter:t})}function $T(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function w0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function S0(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n,r,i,s=re.min(),a=re.min(),l=ht.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.yt=e}}function WT(t){const e=MT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$h(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(){this.Sn=new KT}addToCollectionParentIndex(e,n){return this.Sn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(jr.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(jr.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class KT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ze(be.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ze(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T0=41943040;class bt{static withCacheSize(e){return new bt(e,bt.DEFAULT_COLLECTION_PERCENTILE,bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bt.DEFAULT_COLLECTION_PERCENTILE=10,bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bt.DEFAULT=new bt(T0,bt.DEFAULT_COLLECTION_PERCENTILE,bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bt.DISABLED=new bt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ys(0)}static ar(){return new ys(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="LruGarbageCollector",GT=1048576;function Lm([t,e],[n,r]){const i=le(t,n);return i===0?le(e,r):i}class QT{constructor(e){this.Pr=e,this.buffer=new Ze(Lm),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Lm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class YT{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Q(jm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Cs(n)?Q(jm,"Ignoring IndexedDB error during garbage collection: ",n):await xs(n)}await this.Ar(3e5)})}}class JT{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(Vu.ce);const r=new QT(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(Nm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nm):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,s,a,l,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,a=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,l=Date.now(),this.removeTargets(e,r,n))).next(y=>(s=y,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(d=Date.now(),ji()<=de.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${y} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:y})))}}function XT(t,e){return new JT(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(){this.changes=new wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ko(r.mutation,i,yn.empty(),ke.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const i=ai();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=ho();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ai();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=ir();const a=Ao(),l=function(){return Ao()}();return n.forEach((u,d)=>{const m=r.get(d.key);i.has(d.key)&&(m===void 0||m.mutation instanceof Si)?s=s.insert(d.key,d):m!==void 0?(a.set(d.key,m.mutation.getFieldMask()),ko(m.mutation,d,m.mutation.getFieldMask(),ke.now())):a.set(d.key,yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,m)=>a.set(d,m)),n.forEach((d,m)=>l.set(d,new ex(m,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Ao();let i=new Le((a,l)=>a-l),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let m=r.get(u)||yn.empty();m=l.applyToLocalView(d,m),r.set(u,m);const y=(i.get(l.batchId)||ue()).add(u);i=i.insert(l.batchId,y)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,m=u.value,y=r0();m.forEach(_=>{if(!s.has(_)){const R=u0(n.get(_),r.get(_));R!==null&&y.set(_,R),s=s.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,y))}return O.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return nT(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):rT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(ai());let l=Yo,u=s;return a.next(d=>O.forEach(d,(m,y)=>(l<y.largestBatchId&&(l=y.largestBatchId),s.get(m)?O.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{u=u.insert(m,_)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,ue())).next(m=>({batchId:l,changes:n0(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let i=ho();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=ho();return this.indexManager.getCollectionParents(e,s).next(l=>O.forEach(l,u=>{const d=function(y,_){return new ju(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(m=>{m.forEach((y,_)=>{a=a.insert(y,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((u,d)=>{const m=d.getKey();a.get(m)===null&&(a=a.insert(m,Et.newInvalidDocument(m)))});let l=ho();return a.forEach((u,d)=>{const m=s.get(u);m!==void 0&&ko(m.mutation,d,yn.empty(),ke.now()),Ou(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return O.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:On(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:WT(i.bundledQuery),readTime:On(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.overlays=new Le(ee.comparator),this.Lr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ai();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.bt(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Lr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=ai(),s=n.length+1,a=new ee(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Le((d,m)=>d-m);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=s.get(d.largestBatchId);m===null&&(m=ai(),s=s.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const l=ai(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>l.set(d,m)),!(l.size()>=i)););return O.resolve(l)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new wT(n,r));let s=this.Lr.get(n);s===void 0&&(s=ue(),this.Lr.set(n,s)),this.Lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(){this.kr=new Ze(tt.Kr),this.qr=new Ze(tt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new tt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new tt(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new ee(new be([])),r=new tt(n,e),i=new tt(n,e+1),s=[];return this.qr.forEachInRange([r,i],a=>{this.Wr(a),s.push(a.key)}),s}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ee(new be([])),r=new tt(n,e),i=new tt(n,e+1);let s=ue();return this.qr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new tt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ee.comparator(e.key,n.key)||le(e.Hr,n.Hr)}static Ur(e,n){return le(e.Hr,n.Hr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Ze(tt.Kr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new ET(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.Jr=this.Jr.add(new tt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,n){return O.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Zd:this.Yn-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tt(n,0),i=new tt(n,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],a=>{const l=this.Zr(a.Hr);s.push(l)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(le);return n.forEach(i=>{const s=new tt(i,0),a=new tt(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,a],l=>{r=r.add(l.Hr)})}),O.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ee.isDocumentKey(s)||(s=s.child(""));const a=new tt(new ee(s),0);let l=new Ze(le);return this.Jr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(u.Hr)),!0)},a),O.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ge(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return O.forEach(n.mutations,i=>{const s=new tt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new tt(n,0),i=this.Jr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.ti=e,this.docs=function(){return new Le(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Et.newInvalidDocument(n))}getEntries(e,n){let r=ir();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Et.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ir();const a=n.path,l=new ee(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||VS(DS(m),r)<=0||(i.has(m.key)||Ou(n,m))&&(s=s.insert(m.key,m.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te(9500)}ni(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ax(this)}getSize(e){return O.resolve(this.size)}}class ax extends ZT{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e){this.persistence=e,this.ri=new wi(n=>nf(n),rf),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.ii=0,this.si=new cf,this.targetCount=0,this.oi=ys._r()}forEachTarget(e,n){return this.ri.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),O.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new ys(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.lr(n),O.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ri.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,n){this._i={},this.overlays={},this.ai=new Vu(0),this.ui=!1,this.ui=!0,this.ci=new ix,this.referenceDelegate=e(this),this.li=new lx(this),this.indexManager=new qT,this.remoteDocumentCache=function(i){return new ox(i)}(r=>this.referenceDelegate.hi(r)),this.serializer=new HT(n),this.Pi=new nx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new sx(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new ux(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(s=>this.referenceDelegate.Ii(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return O.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class ux extends NS{constructor(e){super(),this.currentSequenceNumber=e}}class hf{constructor(e){this.persistence=e,this.Ri=new cf,this.Ai=null}static Vi(e){return new hf(e)}get di(){if(this.Ai)return this.Ai;throw te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.di,r=>{const i=ee.fromPath(r);return this.mi(e,i).next(s=>{s||n.removeEntry(i,re.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class du{constructor(e,n){this.persistence=e,this.fi=new wi(r=>OS(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=XT(this,n)}static Vi(e,n){return new du(e,n)}Ti(){}Ii(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return O.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(s=>s?O.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,a=>this.wr(e,a,n).next(l=>{l||(r++,s.removeEntry(a,re.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=xl(e.data.value)),n}wr(e,n,r){return O.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=ue(),i=ue();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new df(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return JE()?8:jS(QE())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.gs(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ps(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new cx;return this.ys(e,n,a).next(l=>{if(s.result=l,this.As)return this.ws(e,n,a,l.size)})}).next(()=>s.result)}ws(e,n,r,i){return r.documentReadCount<this.Vs?(ji()<=de.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Li(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(ji()<=de.DEBUG&&Q("QueryEngine","Query:",Li(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(ji()<=de.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Li(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(n))):O.resolve())}gs(e,n){if(xm(n))return O.resolve(null);let r=Ln(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=$h(n,null,"F"),r=Ln(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=ue(...s);return this.fs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,l);return this.Ss(n,d,a,u.readTime)?this.gs(e,$h(n,null,"F")):this.Ds(e,d,n,u)}))})))}ps(e,n,r,i){return xm(n)||i.isEqual(re.min())?O.resolve(null):this.fs.getDocuments(e,r).next(s=>{const a=this.bs(n,s);return this.Ss(n,a,r,i)?O.resolve(null):(ji()<=de.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Li(n)),this.Ds(e,a,n,PS(i,Yo)).next(l=>l))})}bs(e,n){let r=new Ze(e0(e));return n.forEach((i,s)=>{Ou(e,s)&&(r=r.add(s))}),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,n,r){return ji()<=de.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Li(n)),this.fs.getDocumentsMatchingQuery(e,n,jr.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="LocalStore",dx=3e8;class fx{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new Le(le),this.Fs=new wi(s=>nf(s),rf),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tx(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function px(t,e,n,r){return new fx(t,e,n,r)}async function C0(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let u=ue();for(const d of i){a.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of s){l.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ns:d,removedBatchIds:a,addedBatchIds:l}))})})}function mx(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,m){const y=d.batch,_=y.keys();let R=O.resolve();return _.forEach(j=>{R=R.next(()=>m.getEntry(u,j)).next(L=>{const W=d.docVersions.get(j);ge(W!==null,48541),L.version.compareTo(W)<0&&(y.applyToRemoteDocument(L,d),L.isValidDocument()&&(L.setReadTime(d.commitVersion),m.addEntry(L)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(u,y))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ue();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function I0(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function gx(t,e){const n=ie(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const l=[];e.targetChanges.forEach((m,y)=>{const _=i.get(y);if(!_)return;l.push(n.li.removeMatchingKeys(s,m.removedDocuments,y).next(()=>n.li.addMatchingKeys(s,m.addedDocuments,y)));let R=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(y)!==null?R=R.withResumeToken(ht.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):m.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(m.resumeToken,r)),i=i.insert(y,R),function(L,W,I){return L.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=dx?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(_,R,m)&&l.push(n.li.updateTargetData(s,R))});let u=ir(),d=ue();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,m))}),l.push(yx(s,a,e.documentUpdates).next(m=>{u=m.Bs,d=m.Ls})),!r.isEqual(re.min())){const m=n.li.getLastRemoteSnapshotVersion(s).next(y=>n.li.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(m)}return O.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.vs=i,s))}function yx(t,e,n){let r=ue(),i=ue();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=ir();return n.forEach((l,u)=>{const d=s.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Q(ff,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Bs:a,Ls:i}})}function vx(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Zd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _x(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.li.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.li.allocateTargetId(r).next(a=>(i=new Er(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function Gh(t,e,n){const r=ie(t),i=r.vs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Cs(a))throw a;Q(ff,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function Om(t,e,n){const r=ie(t);let i=re.min(),s=ue();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,m){const y=ie(u),_=y.Fs.get(m);return _!==void 0?O.resolve(y.vs.get(_)):y.li.getTargetData(d,m)}(r,a,Ln(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?i:re.min(),n?s:ue())).next(l=>(Ex(r,sT(e),l),{documents:l,ks:s})))}function Ex(t,e,n){let r=t.Ms.get(e)||re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ms.set(e,r)}class Mm{constructor(){this.activeTargetIds=hT()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wx{constructor(){this.vo=new Mm,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Mm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="ConnectivityMonitor";class zm{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Q(Fm,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Q(Fm,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul=null;function Qh(){return ul===null?ul=function(){return 268435456+Math.round(2147483648*Math.random())}():ul++,"0x"+ul.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc="RestConnection",Tx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class xx{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===su?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const a=Qh(),l=this.Qo(e,n.toUriEncodedString());Q(jc,`Sending RPC '${e}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,i,s);const{host:d}=new URL(l),m=Gd(d);return this.zo(e,l,u,r,m).then(y=>(Q(jc,`Received RPC '${e}' ${a}: `,y),y),y=>{throw fs(jc,`RPC '${e}' ${a} failed with error: `,y,"url: ",l,"request:",r),y})}jo(e,n,r,i,s,a){return this.Wo(e,n,r,i,s)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ts}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Qo(e,n){const r=Tx[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt="WebChannelConnection",no=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(i){setTimeout(()=>{throw i},0)}})};class is extends xx{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!is.c_){const e=Vv();no(e,Dv.STAT_EVENT,n=>{n.stat===Oh.PROXY?Q(yt,"STAT_EVENT: detected buffering proxy"):n.stat===Oh.NOPROXY&&Q(yt,"STAT_EVENT: detected no buffering proxy")}),is.c_=!0}}zo(e,n,r,i,s){const a=Qh();return new Promise((l,u)=>{const d=new Rv;d.setWithCredentials(!0),d.listenOnce(Pv.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Tl.NO_ERROR:const y=d.getResponseJson();Q(yt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),l(y);break;case Tl.TIMEOUT:Q(yt,`RPC '${e}' ${a} timed out`),u(new J(z.DEADLINE_EXCEEDED,"Request time out"));break;case Tl.HTTP_ERROR:const _=d.getStatus();if(Q(yt,`RPC '${e}' ${a} failed with status:`,_,"response text:",d.getResponseText()),_>0){let R=d.getResponseJson();Array.isArray(R)&&(R=R[0]);const j=R==null?void 0:R.error;if(j&&j.status&&j.message){const L=function(I){const S=I.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(S)>=0?S:z.UNKNOWN}(j.status);u(new J(L,j.message))}else u(new J(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new J(z.UNAVAILABLE,"Connection failed."));break;default:te(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Q(yt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(i);Q(yt,`RPC '${e}' ${a} sending request:`,i),d.send(n,"POST",m,r,15)})}T_(e,n,r){const i=Qh(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");Q(yt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const m=a.createWebChannel(d,l);this.I_(m);let y=!1,_=!1;const R=new Cx({Ho:j=>{_?Q(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,j):(y||(Q(yt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),Q(yt,`RPC '${e}' stream ${i} sending:`,j),m.send(j))},Jo:()=>m.close()});return no(m,co.EventType.OPEN,()=>{_||(Q(yt,`RPC '${e}' stream ${i} transport opened.`),R.i_())}),no(m,co.EventType.CLOSE,()=>{_||(_=!0,Q(yt,`RPC '${e}' stream ${i} transport closed`),R.o_(),this.E_(m))}),no(m,co.EventType.ERROR,j=>{_||(_=!0,fs(yt,`RPC '${e}' stream ${i} transport errored. Name:`,j.name,"Message:",j.message),R.o_(new J(z.UNAVAILABLE,"The operation could not be completed")))}),no(m,co.EventType.MESSAGE,j=>{var L;if(!_){const W=j.data[0];ge(!!W,16349);const I=W,S=(I==null?void 0:I.error)||((L=I[0])==null?void 0:L.error);if(S){Q(yt,`RPC '${e}' stream ${i} received error:`,S);const k=S.status;let M=function(E){const v=qe[E];if(v!==void 0)return d0(v)}(k),q=S.message;M===void 0&&(M=z.INTERNAL,q="Unknown error status: "+k+" with message "+S.message),_=!0,R.o_(new J(M,q)),m.close()}else Q(yt,`RPC '${e}' stream ${i} received:`,W),R.__(W)}}),is.u_(),setTimeout(()=>{R.s_()},0),R}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return bv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t){return new is(t)}function Lc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t){return new PT(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is.c_=!1;class A0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="PersistentStream";class k0{constructor(e,n,r,i,s,a,l,u){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new A0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new J(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Q(Bm,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(Q(Bm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ax extends k0{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=bT(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?re.min():a.readTime?On(a.readTime):re.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Kh(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=Uh(u)?{documents:LT(s,u)}:{query:OT(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=m0(s,a.resumeToken);const d=Hh(s,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(re.min())>0){l.readTime=hu(s,a.snapshotVersion.toTimestamp());const d=Hh(s,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=FT(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Kh(this.serializer),n.removeTarget=e,this.K_(n)}}class kx extends k0{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=jT(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Kh(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>NT(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{}class Px extends Rx{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new J(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,Wh(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(z.UNKNOWN,s.toString())})}jo(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.jo(e,Wh(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new J(z.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function Dx(t,e,n,r){return new Px(t,e,n,r)}class Vx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rr(n),this.aa=!1):Q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi="RemoteStore";class bx{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo(a=>{r.enqueueAndForget(async()=>{Ti(this)&&(Q(yi,"Restarting streams for network reachability change."),await async function(u){const d=ie(u);d.Ea.add(4),await ha(d),d.Va.set("Unknown"),d.Ea.delete(4),await Uu(d)}(this))})}),this.Va=new Vx(r,i)}}async function Uu(t){if(Ti(t))for(const e of t.Ra)await e(!0)}async function ha(t){for(const e of t.Ra)await e(!1)}function R0(t,e){const n=ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),yf(n)?gf(n):Is(n).O_()&&mf(n,e))}function pf(t,e){const n=ie(t),r=Is(n);n.Ia.delete(e),r.O_()&&P0(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ti(n)&&n.Va.set("Unknown"))}function mf(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Is(t).Z_(e)}function P0(t,e){t.da.$e(e),Is(t).X_(e)}function gf(t){t.da=new IT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Is(t).start(),t.Va.ua()}function yf(t){return Ti(t)&&!Is(t).x_()&&t.Ia.size>0}function Ti(t){return ie(t).Ea.size===0}function D0(t){t.da=void 0}async function Nx(t){t.Va.set("Online")}async function jx(t){t.Ia.forEach((e,n)=>{mf(t,e)})}async function Lx(t,e){D0(t),yf(t)?(t.Va.ha(e),gf(t)):t.Va.set("Unknown")}async function Ox(t,e,n){if(t.Va.set("Online"),e instanceof p0&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ia.delete(l),i.da.removeTarget(l))}(t,e)}catch(r){Q(yi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await fu(t,r)}else if(e instanceof Al?t.da.Xe(e):e instanceof f0?t.da.st(e):t.da.tt(e),!n.isEqual(re.min()))try{const r=await I0(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.da.Tt(a);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=s.Ia.get(d);m&&s.Ia.set(d,m.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,d)=>{const m=s.Ia.get(u);if(!m)return;s.Ia.set(u,m.withResumeToken(ht.EMPTY_BYTE_STRING,m.snapshotVersion)),P0(s,u);const y=new Er(m.target,u,d,m.sequenceNumber);mf(s,y)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Q(yi,"Failed to raise snapshot:",r),await fu(t,r)}}async function fu(t,e,n){if(!Cs(e))throw e;t.Ea.add(1),await ha(t),t.Va.set("Offline"),n||(n=()=>I0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(yi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Uu(t)})}function V0(t,e){return e().catch(n=>fu(t,n,e))}async function $u(t){const e=ie(t),n=Fr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Zd;for(;Mx(e);)try{const i=await vx(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Fx(e,i)}catch(i){await fu(e,i)}b0(e)&&N0(e)}function Mx(t){return Ti(t)&&t.Ta.length<10}function Fx(t,e){t.Ta.push(e);const n=Fr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function b0(t){return Ti(t)&&!Fr(t).x_()&&t.Ta.length>0}function N0(t){Fr(t).start()}async function zx(t){Fr(t).ra()}async function Bx(t){const e=Fr(t);for(const n of t.Ta)e.ea(n.mutations)}async function Ux(t,e,n){const r=t.Ta.shift(),i=af.from(r,e,n);await V0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await $u(t)}async function $x(t,e){e&&Fr(t).Y_&&await async function(r,i){if(function(a){return TT(a)&&a!==z.ABORTED}(i.code)){const s=r.Ta.shift();Fr(r).B_(),await V0(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await $u(r)}}(t,e),b0(t)&&N0(t)}async function Um(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),Q(yi,"RemoteStore received new credentials");const r=Ti(n);n.Ea.add(3),await ha(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Uu(n)}async function Hx(t,e){const n=ie(t);e?(n.Ea.delete(2),await Uu(n)):e||(n.Ea.add(2),await ha(n),n.Va.set("Unknown"))}function Is(t){return t.ma||(t.ma=function(n,r,i){const s=ie(n);return s.sa(),new Ax(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:Nx.bind(null,t),Yo:jx.bind(null,t),t_:Lx.bind(null,t),J_:Ox.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),yf(t)?gf(t):t.Va.set("Unknown")):(await t.ma.stop(),D0(t))})),t.ma}function Fr(t){return t.fa||(t.fa=function(n,r,i){const s=ie(n);return s.sa(),new kx(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:zx.bind(null,t),t_:$x.bind(null,t),ta:Bx.bind(null,t),na:Ux.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await $u(t)):(await t.fa.stop(),t.Ta.length>0&&(Q(yi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new vf(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _f(t,e){if(rr("AsyncQueue",`${e}: ${t}`),Cs(t))return new J(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{static emptySet(e){return new ss(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=ho(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ss)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ss;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.ga=new Le(ee.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):te(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class vs{constructor(e,n,r,i,s,a,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new vs(e,n,ss.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class qx{constructor(){this.queries=Hm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ie(n),s=i.queries;i.queries=Hm(),s.forEach((a,l)=>{for(const u of l.ba)u.onError(r)})})(this,new J(z.ABORTED,"Firestore shutting down"))}}function Hm(){return new wi(t=>Zv(t),Lu)}async function Kx(t,e){const n=ie(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new Wx,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=_f(a,`Initialization of query '${Li(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.ba.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Ef(n)}async function Gx(t,e){const n=ie(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.ba.indexOf(e);a>=0&&(s.ba.splice(a,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Qx(t,e){const n=ie(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.ba)l.Fa(i)&&(r=!0);a.wa=i}}r&&Ef(n)}function Yx(t,e,n){const r=ie(t),i=r.queries.get(e);if(i)for(const s of i.ba)s.onError(n);r.queries.delete(e)}function Ef(t){t.Ca.forEach(e=>{e.next()})}var Yh,Wm;(Wm=Yh||(Yh={})).Ma="default",Wm.Cache="cache";class Jx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new vs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=vs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e){this.key=e}}class L0{constructor(e){this.key=e}}class Xx{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ue(),this.mutatedKeys=ue(),this.eu=e0(e),this.tu=new ss(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new $m,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,y)=>{const _=i.get(m),R=Ou(this.query,y)?y:null,j=!!_&&this.mutatedKeys.has(_.key),L=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let W=!1;_&&R?_.data.isEqual(R.data)?j!==L&&(r.track({type:3,doc:R}),W=!0):this.su(_,R)||(r.track({type:2,doc:R}),W=!0,(u&&this.eu(R,u)>0||d&&this.eu(R,d)<0)&&(l=!0)):!_&&R?(r.track({type:0,doc:R}),W=!0):_&&!R&&(r.track({type:1,doc:_}),W=!0,(u||d)&&(l=!0)),W&&(R?(a=a.add(R),s=L?s.add(m):s.delete(m)):(a=a.delete(m),s=s.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{tu:a,iu:r,Ss:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,y)=>function(R,j){const L=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{Vt:W})}};return L(R)-L(j)}(m.type,y.type)||this.eu(m.doc,y.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Ya.size===0&&this.current&&!i?1:0,d=u!==this.Xa;return this.Xa=u,a.length!==0||d?{snapshot:new vs(this.query,e.tu,s,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $m,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ue(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new L0(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new j0(r))}),n}cu(e){this.Za=e.ks,this.Ya=ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return vs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const wf="SyncEngine";class Zx{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eC{constructor(e){this.key=e,this.hu=!1}}class tC{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new wi(l=>Zv(l),Lu),this.Iu=new Map,this.Eu=new Set,this.Ru=new Le(ee.comparator),this.Au=new Map,this.Vu=new cf,this.du={},this.mu=new Map,this.fu=ys.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nC(t,e,n=!0){const r=U0(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await O0(r,e,n,!0),i}async function rC(t,e){const n=U0(t);await O0(n,e,!0,!1)}async function O0(t,e,n,r){const i=await _x(t.localStore,Ln(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await iC(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&R0(t.remoteStore,i),l}async function iC(t,e,n,r,i){t.pu=(y,_,R)=>async function(L,W,I,S){let k=W.view.ru(I);k.Ss&&(k=await Om(L.localStore,W.query,!1).then(({documents:E})=>W.view.ru(E,k)));const M=S&&S.targetChanges.get(W.targetId),q=S&&S.targetMismatches.get(W.targetId)!=null,G=W.view.applyChanges(k,L.isPrimaryClient,M,q);return Km(L,W.targetId,G.au),G.snapshot}(t,y,_,R);const s=await Om(t.localStore,e,!0),a=new Xx(e,s.ks),l=a.ru(s.documents),u=ca.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=a.applyChanges(l,t.isPrimaryClient,u);Km(t,n,d.au);const m=new Zx(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function sC(t,e,n){const r=ie(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(a=>!Lu(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Gh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&pf(r.remoteStore,i.targetId),Jh(r,i.targetId)}).catch(xs)):(Jh(r,i.targetId),await Gh(r.localStore,i.targetId,!0))}async function oC(t,e){const n=ie(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pf(n.remoteStore,r.targetId))}async function aC(t,e,n){const r=pC(t);try{const i=await function(a,l){const u=ie(a),d=ke.now(),m=l.reduce((R,j)=>R.add(j.key),ue());let y,_;return u.persistence.runTransaction("Locally write mutations","readwrite",R=>{let j=ir(),L=ue();return u.xs.getEntries(R,m).next(W=>{j=W,j.forEach((I,S)=>{S.isValidDocument()||(L=L.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(R,j)).next(W=>{y=W;const I=[];for(const S of l){const k=vT(S,y.get(S.key).overlayedDocument);k!=null&&I.push(new Si(S.key,k,qv(k.value.mapValue),Jn.exists(!0)))}return u.mutationQueue.addMutationBatch(R,d,I,l)}).next(W=>{_=W;const I=W.applyToLocalDocumentSet(y,L);return u.documentOverlayCache.saveOverlays(R,W.batchId,I)})}).then(()=>({batchId:_.batchId,changes:n0(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,u){let d=a.du[a.currentUser.toKey()];d||(d=new Le(le)),d=d.insert(l,u),a.du[a.currentUser.toKey()]=d}(r,i.batchId,n),await da(r,i.changes),await $u(r.remoteStore)}catch(i){const s=_f(i,"Failed to persist write");n.reject(s)}}async function M0(t,e){const n=ie(t);try{const r=await gx(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Au.get(s);a&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?ge(a.hu,14607):i.removedDocuments.size>0&&(ge(a.hu,42227),a.hu=!1))}),await da(n,r,e)}catch(r){await xs(r)}}function qm(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,a)=>{const l=a.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const u=ie(a);u.onlineState=l;let d=!1;u.queries.forEach((m,y)=>{for(const _ of y.ba)_.va(l)&&(d=!0)}),d&&Ef(u)}(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lC(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new Le(ee.comparator);a=a.insert(s,Et.newNoDocument(s,re.min()));const l=ue().add(s),u=new zu(re.min(),new Map,new Le(le),a,l);await M0(r,u),r.Ru=r.Ru.remove(s),r.Au.delete(e),Sf(r)}else await Gh(r.localStore,e,!1).then(()=>Jh(r,e,n)).catch(xs)}async function uC(t,e){const n=ie(t),r=e.batch.batchId;try{const i=await mx(n.localStore,e);z0(n,r,null),F0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await da(n,i)}catch(i){await xs(i)}}async function cC(t,e,n){const r=ie(t);try{const i=await function(a,l){const u=ie(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,l).next(y=>(ge(y!==null,37113),m=y.keys(),u.mutationQueue.removeMutationBatch(d,y))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,e);z0(r,e,n),F0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await da(r,i)}catch(i){await xs(i)}}function F0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function z0(t,e,n){const r=ie(t);let i=r.du[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Jh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||B0(t,r)})}function B0(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(pf(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Sf(t))}function Km(t,e,n){for(const r of n)r instanceof j0?(t.Vu.addReference(r.key,e),hC(t,r)):r instanceof L0?(Q(wf,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||B0(t,r.key)):te(19791,{wu:r})}function hC(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Q(wf,"New document in limbo: "+n),t.Eu.add(r),Sf(t))}function Sf(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ee(be.fromString(e)),r=t.fu.next();t.Au.set(r,new eC(n)),t.Ru=t.Ru.insert(n,r),R0(t.remoteStore,new Er(Ln(sf(n.path)),r,"TargetPurposeLimboResolution",Vu.ce))}}async function da(t,e,n){const r=ie(t),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{a.push(r.pu(u,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const y=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,y?"current":"not-current")}if(d){i.push(d);const y=df.Es(u.targetId,d);s.push(y)}}))}),await Promise.all(a),r.Pu.J_(i),await async function(u,d){const m=ie(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>O.forEach(d,_=>O.forEach(_.Ts,R=>m.persistence.referenceDelegate.addReference(y,_.targetId,R)).next(()=>O.forEach(_.Is,R=>m.persistence.referenceDelegate.removeReference(y,_.targetId,R)))))}catch(y){if(!Cs(y))throw y;Q(ff,"Failed to update sequence numbers: "+y)}for(const y of d){const _=y.targetId;if(!y.fromCache){const R=m.vs.get(_),j=R.snapshotVersion,L=R.withLastLimboFreeSnapshotVersion(j);m.vs=m.vs.insert(_,L)}}}(r.localStore,s))}async function dC(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){Q(wf,"User change. New user:",e.toKey());const r=await C0(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new J(z.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await da(n,r.Ns)}}function fC(t,e){const n=ie(t),r=n.Au.get(e);if(r&&r.hu)return ue().add(r.key);{let i=ue();const s=n.Iu.get(e);if(!s)return i;for(const a of s){const l=n.Tu.get(a);i=i.unionWith(l.view.nu)}return i}}function U0(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=M0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lC.bind(null,e),e.Pu.J_=Qx.bind(null,e.eventManager),e.Pu.yu=Yx.bind(null,e.eventManager),e}function pC(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cC.bind(null,e),e}class pu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return px(this.persistence,new hx,e.initialUser,this.serializer)}Cu(e){return new x0(hf.Vi,this.serializer)}Du(e){return new wx}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pu.provider={build:()=>new pu};class mC extends pu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ge(this.persistence.referenceDelegate instanceof du,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new YT(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?bt.withCacheSize(this.cacheSizeBytes):bt.DEFAULT;return new x0(r=>du.Vi(r,n),this.serializer)}}class Xh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dC.bind(null,this.syncEngine),await Hx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qx}()}createDatastore(e){const n=Bu(e.databaseInfo.databaseId),r=Ix(e.databaseInfo);return Dx(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new bx(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>qm(this.syncEngine,n,0),function(){return zm.v()?new zm:new Sx}())}createSyncEngine(e,n){return function(i,s,a,l,u,d,m){const y=new tC(i,s,a,l,u,d);return m&&(y.gu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ie(i);Q(yi,"RemoteStore shutting down."),s.Ea.add(5),await ha(s),s.Aa.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Xh.provider={build:()=>new Xh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="FirestoreClient";class yC{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=vt.UNAUTHENTICATED,this.clientId=Jd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Q(zr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Q(zr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_f(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Oc(t,e){t.asyncQueue.verifyOperationInProgress(),Q(zr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await C0(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Gm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vC(t);Q(zr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Um(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Um(e.remoteStore,i)),t._onlineComponents=e}async function vC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(zr,"Using user provided OfflineComponentProvider");try{await Oc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;fs("Error using user provided cache. Falling back to memory cache: "+n),await Oc(t,new pu)}}else Q(zr,"Using default OfflineComponentProvider"),await Oc(t,new mC(void 0));return t._offlineComponents}async function $0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(zr,"Using user provided OnlineComponentProvider"),await Gm(t,t._uninitializedComponentsProvider._online)):(Q(zr,"Using default OnlineComponentProvider"),await Gm(t,new Xh))),t._onlineComponents}function _C(t){return $0(t).then(e=>e.syncEngine)}async function EC(t){const e=await $0(t),n=e.eventManager;return n.onListen=nC.bind(null,e.syncEngine),n.onUnlisten=sC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oC.bind(null,e.syncEngine),n}function wC(t,e,n={}){const r=new Vr;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,d){const m=new gC({next:_=>{m.Nu(),a.enqueueAndForget(()=>Gx(s,y));const R=_.docs.has(l);!R&&_.fromCache?d.reject(new J(z.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&_.fromCache&&u&&u.source==="server"?d.reject(new J(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(_)},error:_=>d.reject(_)}),y=new Jx(sf(l.path),m,{includeMetadataChanges:!0,Ka:!0});return Kx(s,y)}(await EC(t),t.asyncQueue,e,n,r)),r.promise}function SC(t,e){const n=new Vr;return t.asyncQueue.enqueueAndForget(async()=>aC(await _C(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="ComponentProvider",Qm=new Map;function xC(t,e,n,r,i){return new zS(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,H0(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="firestore.googleapis.com",Ym=!0;class Jm{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new J(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=W0,this.ssl=Ym}else this.host=e.host,this.ssl=e.ssl??Ym;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=T0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GT)throw new J(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=H0(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new J(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new J(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new J(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new vS;switch(r.type){case"firstParty":return new SS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Qm.get(n);r&&(Q(TC,"Removing Datastore"),Qm.delete(n),r.terminate())}(this),Promise.resolve()}}function CC(t,e,n,r={}){var d;t=Qo(t,Tf);const i=Gd(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(HE(`https://${l}`),GE("Firestore",!0)),s.host!==W0&&s.host!==l&&fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!eu(u,a)&&(t._setSettings(u),r.mockUserToken)){let m,y;if(typeof r.mockUserToken=="string")m=r.mockUserToken,y=vt.MOCK_USER;else{m=WE(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new J(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new vt(_)}t._authCredentials=new _S(new jv(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xf(this.firestore,e,this._query)}}class rt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rt(this.firestore,e,this._key)}toJSON(){return{type:rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(la(n,rt._jsonSchema))return new rt(e,r||null,new ee(be.fromString(n.referencePath)))}}rt._jsonSchemaVersion="firestore/documentReference/1.0",rt._jsonSchema={type:Ge("string",rt._jsonSchemaVersion),referencePath:Ge("string")};class na extends xf{constructor(e,n,r){super(e,n,sf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new ee(e))}withConverter(e){return new na(this.firestore,e,this._path)}}function q0(t,e,...n){if(t=tu(t),arguments.length===1&&(e=Jd.newId()),kS("doc","path",e),t instanceof Tf){const r=be.fromString(e,...n);return hm(r),new rt(t,null,new ee(r))}{if(!(t instanceof rt||t instanceof na))throw new J(z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return hm(r),new rt(t.firestore,t instanceof na?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="AsyncQueue";class Zm{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new A0(this,"async_queue_retry"),this._c=()=>{const r=Lc();r&&Q(Xm,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Lc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Lc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Vr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Cs(e))throw e;Q(Xm,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,rr("INTERNAL UNHANDLED ERROR: ",eg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=vf.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&te(47125,{Pc:eg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function eg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Cf extends Tf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Zm,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zm(e),this._firestoreClient=void 0,await e}}}function IC(t,e){const n=typeof t=="object"?t:iS(),r=typeof t=="string"?t:su,i=Zw(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=UE("firestore");s&&CC(i,...s)}return i}function K0(t){if(t._terminated)throw new J(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||AC(t),t._firestoreClient}function AC(t){var r,i,s,a;const e=t._freezeSettings(),n=xC(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new yC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nn(ht.fromBase64String(e))}catch(n){throw new J(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new nn(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:nn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(la(e,nn._jsonSchema))return nn.fromBase64String(e.bytes)}}nn._jsonSchemaVersion="firestore/bytes/1.0",nn._jsonSchema={type:Ge("string",nn._jsonSchemaVersion),bytes:Ge("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mn._jsonSchemaVersion}}static fromJSON(e){if(la(e,Mn._jsonSchema))return new Mn(e.latitude,e.longitude)}}Mn._jsonSchemaVersion="firestore/geoPoint/1.0",Mn._jsonSchema={type:Ge("string",Mn._jsonSchemaVersion),latitude:Ge("number"),longitude:Ge("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:En._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(la(e,En._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new En(e.vectorValues);throw new J(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}En._jsonSchemaVersion="firestore/vectorValue/1.0",En._jsonSchema={type:Ge("string",En._jsonSchemaVersion),vectorValues:Ge("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=/^__.*__$/;class RC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Si(e,this.data,this.fieldMask,n,this.fieldTransforms):new ua(e,this.data,n,this.fieldTransforms)}}function Y0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{dataSource:t})}}class If{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new If({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return mu(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Y0(this.dataSource)&&kC.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class PC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bu(e)}createContext(e,n,r,i=!1){return new If({dataSource:e,methodName:n,targetDoc:r,path:lt.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function DC(t){const e=t._freezeSettings(),n=Bu(t._databaseId);return new PC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function VC(t,e,n,r,i,s={}){const a=t.createContext(s.merge||s.mergeFields?2:0,e,n,i);e_("Data must be an object, but it was:",a,r);const l=X0(r,a);let u,d;if(s.merge)u=new yn(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const m=[];for(const y of s.mergeFields){const _=Af(e,y,n);if(!a.contains(_))throw new J(z.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);jC(m,_)||m.push(_)}u=new yn(m),d=a.fieldTransforms.filter(y=>u.covers(y.field))}else u=null,d=a.fieldTransforms;return new RC(new tn(l),u,d)}function J0(t,e){if(Z0(t=tu(t)))return e_("Unsupported field value:",e,t),X0(t,e);if(t instanceof Q0)return function(r,i){if(!Y0(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let u=J0(l,i.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=tu(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dT(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ke.fromDate(r);return{timestampValue:hu(i.serializer,s)}}if(r instanceof ke){const s=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hu(i.serializer,s)}}if(r instanceof Mn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof nn)return{bytesValue:m0(i.serializer,r._byteString)};if(r instanceof rt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:uf(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof En)return function(a,l){const u=a instanceof En?a.toArray():a;return{mapValue:{fields:{[Hv]:{stringValue:Wv},[ou]:{arrayValue:{values:u.map(m=>{if(typeof m!="number")throw l.createError("VectorValues must only contain numeric values.");return of(l.serializer,m)})}}}}}}(r,i);if(S0(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Xd(r)}`)}(t,e)}function X0(t,e){const n={};return Mv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ei(t,(r,i)=>{const s=J0(i,e.childContextForField(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Z0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof Mn||t instanceof nn||t instanceof rt||t instanceof Q0||t instanceof En||S0(t))}function e_(t,e,n){if(!Z0(n)||!Lv(n)){const r=Xd(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Af(t,e,n){if((e=tu(e))instanceof G0)return e._internalPath;if(typeof e=="string")return NC(t,e);throw mu("Field path arguments must be of type string or ",t,!1,void 0,n)}const bC=new RegExp("[~\\*/\\[\\]]");function NC(t,e,n){if(e.search(bC)>=0)throw mu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new G0(...e.split("."))._internalPath}catch{throw mu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function mu(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new J(z.INVALID_ARGUMENT,l+t+u)}function jC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{convertValue(e,n="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ei(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[ou].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>He(a.doubleValue));return new En(n)}convertGeoPoint(e){return new Mn(He(e.latitude),He(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Nu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Jo(e));default:return null}}convertTimestamp(e){const n=Lr(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=be.fromString(e);ge(w0(r),9688,{name:e});const i=new Xo(r.get(1),r.get(3)),s=new ee(r.popFirst(5));return i.isEqual(n)||rr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC extends LC{constructor(e){super(),this.firestore=e}convertBytes(e){return new nn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,n)}}const tg="@firebase/firestore",ng="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Af("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MC extends t_{data(){return super.data()}}function FC(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class po{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ci extends t_{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Af("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ci._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ci._jsonSchemaVersion="firestore/documentSnapshot/1.0",ci._jsonSchema={type:Ge("string",ci._jsonSchemaVersion),bundleSource:Ge("string","DocumentSnapshot"),bundleName:Ge("string"),bundle:Ge("string")};class kl extends ci{data(e={}){return super.data(e)}}class Ro{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new po(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new kl(this._firestore,this._userDataWriter,r.key,r,new po(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const u=new kl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new po(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new kl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new po(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,m=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:zC(l.type),doc:u,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ro._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ro._jsonSchemaVersion="firestore/querySnapshot/1.0",Ro._jsonSchema={type:Ge("string",Ro._jsonSchemaVersion),bundleSource:Ge("string","QuerySnapshot"),bundleName:Ge("string"),bundle:Ge("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t){t=Qo(t,rt);const e=Qo(t.firestore,Cf),n=K0(e);return wC(n,t._key).then(r=>HC(e,t,r))}function UC(t,e,n){t=Qo(t,rt);const r=Qo(t.firestore,Cf),i=FC(t.converter,e),s=DC(r);return $C(r,[VC(s,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Jn.none())])}function $C(t,e){const n=K0(t);return SC(n,e)}function HC(t,e,n){const r=n.docs.get(e._key),i=new OC(t);return new ci(t,i,e._key,r,new po(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){yS(rS),ru(new Ko("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new Cf(new ES(r.getProvider("auth-internal")),new TS(a,r.getProvider("app-check-internal")),BS(a,i),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),rs(tg,ng,e),rs(tg,ng,"esm2020")})();const WC={apiKey:"AIzaSyA1TRqHaNsytLwPZWevHgtf0H-MKYmo2VA",authDomain:"life-manager-f5fd8.firebaseapp.com",projectId:"life-manager-f5fd8",storageBucket:"life-manager-f5fd8.firebasestorage.app",messagingSenderId:"93366478624",appId:"1:93366478624:web:acce1cdf19327acc751945"},qC=Cv(WC),n_=IC(qC),rg=async(t,e)=>{const n=q0(n_,"users",t.toLowerCase());await UC(n,{...e,lastUpdated:new Date().toISOString()})},Mc=async t=>{const e=q0(n_,"users",t.toLowerCase()),n=await BC(e);return n.exists()?n.data():null},Ni=()=>Math.random().toString(36).substr(2,9),ro={WORKOUT:{name:"Workout",color:"#ef4444",icon:""},PROFESSIONAL:{name:"Professional",color:"#3b82f6",icon:""},SELF_CARE:{name:"Self-care",color:"#a855f7",icon:""},PRODUCTIVITY:{name:"Productivity",color:"#6b7280",icon:""},SOCIAL:{name:"Social",color:"#f59e0b",icon:""},LEARNING:{name:"Learning",color:"#10b981",icon:""}},KC=[],GC=[],ig=[{name:"Exercise",type:"binary",target:1,category:"WORKOUT",icon:""},{name:"Drink Water",type:"count",target:8,category:"SELF_CARE",icon:""},{name:"Read",type:"binary",target:1,category:"LEARNING",icon:""},{name:"Meditate",type:"binary",target:1,category:"SELF_CARE",icon:""},{name:"Sleep 8 Hours",type:"binary",target:1,category:"SELF_CARE",icon:""}],Pn=(t,e)=>{try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}},Wn=(t,e)=>{try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error("Storage error:",n)}},Vt=(t=new Date)=>{const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`},QC=t=>{const[e,n,r]=t.split("-").map(Number);return new Date(e,n-1,r)},YC=(t=new Date)=>{const e=new Date(t);return e.setHours(0,0,0,0),e.setDate(e.getDate()-e.getDay()),Vt(e)},JC=(t=new Date)=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,cl=(t,e=new Date)=>t==="daily"?Vt(e):t==="weekly"?YC(e):t==="monthly"?JC(e):null,XC=(t,e,n=null)=>{const r=t||{},i=n?e.filter(l=>!l.createdAt||l.createdAt<=n):e;let s=0,a=i.length;return i.forEach(l=>{const u=r[l.id];l.type==="count"?u!=null&&u.completed||(u==null?void 0:u.value)>=l.target?s+=1:(u==null?void 0:u.value)>0&&(s+=u.value/l.target):u!=null&&u.completed&&(s+=1)}),{total:a>0?Math.round(s/a*100):0,completed:Math.round(s*10)/10,totalHabits:a}},io=t=>!t&&t!==0?"#3f3f46":t>=80?"#10b981":t>=60?"#8b5cf6":t>=40?"#a855f7":t>=20?"#f97316":t>0?"#ef4444":"#3f3f46",sg=t=>t>=80?"#10b981":t>=60?"#8b5cf6":t>=40?"#a855f7":t>=20?"#f97316":t>0?"#ef4444":"#71717a",Xt=({isOpen:t,onClose:e,title:n,children:r,size:i="md"})=>($.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[t]),t?h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,display:"flex",alignItems:"flex-end",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.7)"},onClick:e,children:h.jsxs("div",{style:{width:"100%",maxWidth:i==="lg"?"32rem":"28rem",maxHeight:"85vh",backgroundColor:"#18181b",borderTopLeftRadius:"1.25rem",borderTopRightRadius:"1.25rem",display:"flex",flexDirection:"column",border:"1px solid #27272a",borderBottom:"none"},onClick:s=>s.stopPropagation(),children:[h.jsxs("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid #27272a",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#18181b",borderTopLeftRadius:"1.25rem",borderTopRightRadius:"1.25rem"},children:[h.jsx("h2",{style:{fontSize:"1.125rem",fontWeight:600,margin:0,color:"#fafafa"},children:n}),h.jsx("button",{onClick:e,style:{width:"2.75rem",height:"2.75rem",borderRadius:"0.75rem",backgroundColor:"#27272a",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",border:"none",color:"#a1a1aa",cursor:"pointer",flexShrink:0},children:""})]}),h.jsx("div",{style:{overflowY:"scroll",padding:"1rem 1.25rem",paddingBottom:"2rem",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",minHeight:0,flex:"1 1 auto"},onTouchMove:s=>s.stopPropagation(),children:r})]})}):null),so={today:h.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),h.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),h.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),h.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),h.jsx("circle",{cx:"12",cy:"16",r:"2",fill:"currentColor"})]}),calendar:h.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),h.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),h.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),goals:h.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("circle",{cx:"12",cy:"12",r:"6"}),h.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"})]}),ideas:h.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 18h6"}),h.jsx("path",{d:"M10 22h4"}),h.jsx("path",{d:"M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7z"})]}),backup:h.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),h.jsx("polyline",{points:"7 10 12 15 17 10"}),h.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})};function ZC(){var Pa,Da,cr,An,zs,Bs,Us,$s,Hs,Hn,Va,ba,Na,dn,ja,Di,Xr,Ws;const[t,e]=$.useState("today"),[n,r]=$.useState(()=>Pn("lm_tasks_v11",[])),[i,s]=$.useState(()=>Pn("lm_habits_v11",KC)),[a,l]=$.useState(()=>Pn("lm_goals_v11",GC)),[u,d]=$.useState(()=>Pn("lm_dailyLogs_v11",{})),[m,y]=$.useState(()=>Pn("lm_scores_v11",{})),[_,R]=$.useState(()=>Pn("lm_ideas_v11",[])),[j,L]=$.useState(!1),[W,I]=$.useState(!1),[S,k]=$.useState(!1),[M,q]=$.useState(!1),[G,E]=$.useState(!1),[v,w]=$.useState(!1),[x,C]=$.useState(!1),[P,T]=$.useState(null),[Oe,St]=$.useState(""),[Qt,or]=$.useState(new Date),[B,X]=$.useState(null),[ne,ye]=$.useState("Today"),[Ee,Yt]=$.useState(null),[dt,Jt]=$.useState(null),[Ft,ln]=$.useState(null),[Sn,As]=$.useState(null),[xi,Hr]=$.useState(new Date),[fa,Ci]=$.useState(null),[ft,Wr]=$.useState(null),[Me,ar]=$.useState(()=>Pn("lm_syncCode_v11","")),[zt,Be]=$.useState(""),[we,kt]=$.useState(!1),[Tt,xe]=$.useState(null),[Ii,Bt]=$.useState(()=>Pn("lm_lastSynced_v11",null)),pa=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),ma=/iPhone|iPad|iPod/i.test(navigator.userAgent),ks=/Android/i.test(navigator.userAgent),Hu=window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches,[Wu,ga]=$.useState(()=>pa&&!Hu),[ya,qr]=$.useState(()=>{const p=Pn("lm_hasCompletedOnboarding_v11",!1),A=Pn("lm_habits_v11",[]);return!p&&A.length===0}),[Rs,Kr]=$.useState(!1),[Tn,va]=$.useState(!1),[Ie,Bn]=$.useState(null),[Rt,_a]=$.useState({habits:!1,tasks:!1,sleep:!1,fact:!1}),[st,Ai]=$.useState(!1),xn=p=>_a(A=>({...A,[p]:!A[p]})),Un=Vt(),pe=Vt(xi),Se=u[pe]||{habitLogs:{},sleep:{},screenTime:0,factLearned:""},un=()=>{const p=new Date,A=new Date(xi);p.setHours(0,0,0,0),A.setHours(0,0,0,0);const V=Math.round((A-p)/(1e3*60*60*24));return V===0?"Today":V===-1?"Yesterday":V===1?"Tomorrow":A.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},Ea=p=>Hr(A=>{const V=new Date(A);return V.setDate(V.getDate()+p),V}),qu=()=>Hr(new Date);$.useEffect(()=>{Wn("lm_tasks_v11",n)},[n]),$.useEffect(()=>{Wn("lm_habits_v11",i)},[i]),$.useEffect(()=>{Wn("lm_goals_v11",a)},[a]),$.useEffect(()=>{Wn("lm_dailyLogs_v11",u)},[u]),$.useEffect(()=>{Wn("lm_scores_v11",m)},[m]),$.useEffect(()=>{Wn("lm_ideas_v11",_)},[_]);const Fe=$.useMemo(()=>XC(Se.habitLogs,i,pe),[Se,i,pe]);$.useEffect(()=>{Se.habitLogs&&Object.keys(Se.habitLogs).length>0&&y(p=>({...p,[pe]:Fe}))},[Se.habitLogs,Fe,pe]);const Ps=$.useCallback(p=>{var A;(A=p.title)!=null&&A.trim()&&(r(V=>[...V,{...p,id:Ni(),status:"pending",createdAt:new Date().toISOString(),recurring:p.recurring||null,completions:{}}]),L(!1),ye("Today"),Yt(null))},[]),Ds=$.useCallback(p=>{r(A=>A.map(V=>{var N;if(V.id!==p)return V;if(V.recurring){const H=cl(V.recurring),Z=(N=V.completions)==null?void 0:N[H],se={...V.completions};return Z?delete se[H]:se[H]=new Date().toISOString(),{...V,completions:se}}else return{...V,status:V.status==="done"?"pending":"done",completedAt:V.status==="done"?null:new Date().toISOString()}}))},[]);$.useCallback(p=>{var A;if(p.recurring){const V=cl(p.recurring);return!!((A=p.completions)!=null&&A[V])}return p.status==="done"},[]);const ki=$.useCallback((p,A)=>{var V;if(p.recurring){const N=cl(p.recurring,QC(A));return!!((V=p.completions)!=null&&V[N])}return p.status==="done"},[]),Cn=$.useCallback((p,A=null)=>{d(V=>{var Ue;const N=V[pe]||{habitLogs:{},sleep:{},screenTime:0,factLearned:""},H=i.find(ce=>ce.id===p);if(!H)return V;const Z=((Ue=N.habitLogs)==null?void 0:Ue[p])||{completed:!1,value:0};let se,me;return H.type==="binary"?(me=!Z.completed,se=me?1:0):(se=A!==null?A:(Z.value+1)%(H.target+1),me=se>=H.target),{...V,[pe]:{...N,habitLogs:{...N.habitLogs,[p]:{completed:me,value:se}}}}})},[pe,i]),Ku=$.useCallback(p=>{var A;(A=p.name)!=null&&A.trim()&&(s(V=>{const N=[...V,{id:Ni(),name:p.name.trim(),type:p.type||"binary",target:parseInt(p.target)||1,category:p.category||"PRODUCTIVITY",streak:0,createdAt:Vt()}];return V.length===0&&!Me&&setTimeout(()=>Kr(!0),500),N}),I(!1))},[Me]),cn=$.useCallback(p=>{s(A=>{const V=[...A,{id:Ni(),name:p.name,type:p.type,target:p.target,category:p.category,streak:0,createdAt:Vt()}];return A.length===0&&!Me&&setTimeout(()=>Kr(!0),500),V})},[Me]),wa=$.useCallback(p=>{var H,Z,se,me;let A=0;const V=new Date;if(!i.find(Ue=>Ue.id===p))return 0;for(let Ue=0;Ue<365;Ue++){const ce=new Date(V);ce.setDate(ce.getDate()-Ue);const $e=Vt(ce);if(Ue===0){const Dt=(Z=(H=u[$e])==null?void 0:H.habitLogs)==null?void 0:Z[p];if(!(Dt!=null&&Dt.completed))continue}const Pe=(me=(se=u[$e])==null?void 0:se.habitLogs)==null?void 0:me[p];if(Pe!=null&&Pe.completed)A++;else if(Ue>0)break}return A},[u,i]),Sa=$.useCallback((p,A)=>s(V=>V.map(N=>N.id===p?{...N,...A}:N)),[]),Vs=$.useCallback(p=>{s(A=>A.filter(V=>V.id!==p)),d(A=>{const V={...A};return Object.keys(V).forEach(N=>{var H,Z;if((Z=(H=V[N])==null?void 0:H.habitLogs)!=null&&Z[p]){const{[p]:se,...me}=V[N].habitLogs;V[N]={...V[N],habitLogs:me}}}),V}),T(null),St("")},[]),bs=$.useCallback(p=>{d(A=>{const V=A[pe]||{habitLogs:{}},{[p]:N,...H}=V.habitLogs||{};return{...A,[pe]:{...V,habitLogs:H}}}),T(null),St("")},[pe]),Ta=$.useCallback((p,A)=>{l(V=>V.map(N=>{if(N.id===p){const H=[...N.milestones];return H[A]={...H[A],completed:!H[A].completed},{...N,milestones:H}}return N}))},[]),Gu=$.useCallback(p=>{var V;if(!((V=p.title)!=null&&V.trim()))return;const A=(p.milestonesText||"").split(`
`).filter(N=>N.trim()).map(N=>({text:N.trim(),completed:!1}));l(N=>[...N,{id:Ni(),title:p.title.trim(),metricType:"milestone",milestones:A}]),w(!1)},[]),xa=$.useCallback(p=>l(A=>A.filter(V=>V.id!==p)),[]),Qu=$.useCallback((p,A)=>{A!=null&&A.trim()&&l(V=>V.map(N=>N.id===p?{...N,milestones:[...N.milestones,{text:A.trim(),completed:!1}]}:N))},[]),Ri=$.useCallback((p,A)=>{l(V=>V.map(N=>N.id===p?{...N,milestones:N.milestones.filter((H,Z)=>Z!==A)}:N))},[]),Ca=$.useCallback((p,A,V)=>{V!=null&&V.trim()&&l(N=>N.map(H=>{if(H.id===p){const Z=[...H.milestones];return Z[A]={...Z[A],text:V.trim()},{...H,milestones:Z}}return H}))},[]),Ns=$.useCallback((p,A)=>l(V=>V.map(N=>N.id===p?{...N,...A}:N)),[]),Gr=$.useCallback(p=>{var A;(A=p.text)!=null&&A.trim()&&(R(V=>[...V,{id:Ni(),text:p.text.trim(),category:p.category||"PRODUCTIVITY",createdAt:new Date().toISOString(),status:"idea",notes:"",points:[],nextStep:""}]),E(!1))},[]),hn=$.useCallback((p,A)=>R(V=>V.map(N=>N.id===p?{...N,...A}:N)),[]),js=$.useCallback((p,A)=>{A!=null&&A.trim()&&R(V=>V.map(N=>N.id===p?{...N,points:[...N.points||[],{id:Ni(),text:A.trim(),done:!1}]}:N))},[]),Yu=$.useCallback((p,A)=>R(V=>V.map(N=>N.id===p?{...N,points:(N.points||[]).map(H=>H.id===A?{...H,done:!H.done}:H)}:N)),[]),Ia=$.useCallback((p,A)=>R(V=>V.map(N=>N.id===p?{...N,points:(N.points||[]).filter(H=>H.id!==A)}:N)),[]),Aa=$.useCallback(p=>{R(A=>A.filter(V=>V.id!==p)),Ci(null)},[]);$.useCallback(()=>{const p={version:"v11",exportedAt:new Date().toISOString(),habits:i,tasks:n,goals:a,ideas:_,dailyLogs:u,scores:m},A=new Blob([JSON.stringify(p,null,2)],{type:"application/json"}),V=URL.createObjectURL(A),N=document.createElement("a");N.href=V,N.download=`life-manager-backup-${Vt()}.json`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(V)},[i,n,a,_,u,m]),$.useCallback(p=>{const A=new FileReader;A.onload=V=>{try{const N=JSON.parse(V.target.result);if(!N.version||!N.exportedAt){Wr({type:"error",message:"Invalid backup file"});return}N.habits&&s(N.habits),N.tasks&&r(N.tasks),N.goals&&l(N.goals),N.ideas&&R(N.ideas),N.dailyLogs&&d(N.dailyLogs),N.scores&&y(N.scores),Wr({type:"success",message:`Restored from ${new Date(N.exportedAt).toLocaleDateString()}`}),setTimeout(()=>Wr(null),3e3)}catch{Wr({type:"error",message:"Failed to parse file"}),setTimeout(()=>Wr(null),3e3)}},A.readAsText(p)},[]),$.useEffect(()=>{Wn("lm_syncCode_v11",Me)},[Me]),$.useEffect(()=>{Wn("lm_lastSynced_v11",Ii)},[Ii]);const Ls=$.useCallback(()=>{ga(!1)},[]),Pi=$.useCallback(()=>{qr(!1),Wn("lm_hasCompletedOnboarding_v11",!0)},[]),lr=$.useCallback(()=>{Kr(!1)},[]),ka=$.useCallback(async()=>{if(Me){kt(!0),xe(null);try{await rg(Me,{version:"v11",habits:i,tasks:n,goals:a,ideas:_,dailyLogs:u,scores:m});const A=new Date().toISOString();Bt(A),xe({type:"success",message:"Data synced to cloud!"}),setTimeout(()=>xe(null),3e3)}catch(p){console.error("Sync error:",p),xe({type:"error",message:"Failed to sync. Check connection."}),setTimeout(()=>xe(null),3e3)}finally{kt(!1)}}},[Me,i,n,a,_,u,m]),Os=$.useCallback(async()=>{if(!Me)return null;try{return await Mc(Me)}catch{return null}},[Me]),Ra=$.useCallback(async(p=!1)=>{if(Me){if(!p&&i.length>0){kt(!0);const A=await Os();if(kt(!1),A&&A.habits){Bn({localCount:i.length,cloudCount:A.habits.length,cloudData:A});return}}kt(!0),xe(null);try{const A=await Mc(Me);A?(A.habits&&s(A.habits),A.tasks&&r(A.tasks),A.goals&&l(A.goals),A.ideas&&R(A.ideas),A.dailyLogs&&d(A.dailyLogs),A.scores&&y(A.scores),Bt(A.lastUpdated||new Date().toISOString()),xe({type:"success",message:"Data loaded from cloud!"})):xe({type:"error",message:"No data found for this code."}),setTimeout(()=>xe(null),3e3)}catch(A){console.error("Load error:",A),xe({type:"error",message:"Failed to load. Check connection."}),setTimeout(()=>xe(null),3e3)}finally{kt(!1)}}},[Me,i.length,Os]),Ju=$.useCallback(()=>{if(Ie!=null&&Ie.cloudData){const p=Ie.cloudData;p.habits&&s(p.habits),p.tasks&&r(p.tasks),p.goals&&l(p.goals),p.ideas&&R(p.ideas),p.dailyLogs&&d(p.dailyLogs),p.scores&&y(p.scores),Bt(p.lastUpdated||new Date().toISOString()),xe({type:"success",message:"Data loaded from cloud!"}),setTimeout(()=>xe(null),3e3)}Bn(null)},[Ie]),[Pt,pt]=$.useState(null),In=$.useCallback(async(p=!1)=>{const A=Pt||zt.trim().toLowerCase();if(A){kt(!0),xe(null);try{const V=await Mc(A);if(V){if(!p&&i.length>0&&V.habits){pt(A),Bn({localCount:i.length,cloudCount:V.habits.length,cloudData:V,isNewConnection:!0}),kt(!1);return}V.habits&&s(V.habits),V.tasks&&r(V.tasks),V.goals&&l(V.goals),V.ideas&&R(V.ideas),V.dailyLogs&&d(V.dailyLogs),V.scores&&y(V.scores),ar(A),Bt(V.lastUpdated||new Date().toISOString()),xe({type:"success",message:"Connected! Data loaded from cloud."})}else{await rg(A,{version:"v11",habits:i,tasks:n,goals:a,ideas:_,dailyLogs:u,scores:m}),ar(A);const H=new Date().toISOString();Bt(H),xe({type:"success",message:"New sync code created!"})}Be(""),pt(null),setTimeout(()=>xe(null),3e3)}catch(V){console.error("Connect error:",V),xe({type:"error",message:"Connection failed. Try again."}),setTimeout(()=>xe(null),3e3)}finally{kt(!1)}}},[zt,Pt,i,n,a,_,u,m]),Qr=$.useCallback(()=>{if(Ie!=null&&Ie.cloudData&&(Ie!=null&&Ie.isNewConnection)&&Pt){const p=Ie.cloudData;p.habits&&s(p.habits),p.tasks&&r(p.tasks),p.goals&&l(p.goals),p.ideas&&R(p.ideas),p.dailyLogs&&d(p.dailyLogs),p.scores&&y(p.scores),ar(Pt),Bt(p.lastUpdated||new Date().toISOString()),xe({type:"success",message:"Connected! Data loaded from cloud."}),setTimeout(()=>xe(null),3e3),Be(""),pt(null)}Bn(null)},[Ie,Pt]),Ms=$.useCallback(()=>{ar(""),Bt(null),xe({type:"success",message:"Disconnected from sync."}),setTimeout(()=>xe(null),3e3)},[]),ve=n.filter(p=>p.recurring?!0:p.status!=="done"&&(!p.dueDate||p.dueDate<=Un)),ur=n.filter(p=>{var A;if(p.recurring){const V=cl(p.recurring,xi);return(A=p.completions)!=null&&A[V]?Vt(new Date(p.completions[V]))===pe:!1}return p.status!=="done"||!p.completedAt?!1:Vt(new Date(p.completedAt))===pe}),$n=i.filter(p=>!p.createdAt||p.createdAt<=pe),Yr=p=>{const A=p.getFullYear(),V=p.getMonth(),N=new Date(A,V,1),Z=new Date(A,V+1,0).getDate(),se=N.getDay(),me=[],ce=new Date(A,V,0).getDate();for(let Pe=se-1;Pe>=0;Pe--){const Dt=ce-Pe,La=new Date(A,V-1,Dt);me.push({date:La,isCurrentMonth:!1,key:Vt(La)})}for(let Pe=1;Pe<=Z;Pe++){const Dt=new Date(A,V,Pe);me.push({date:Dt,isCurrentMonth:!0,key:Vt(Dt)})}const $e=42-me.length;for(let Pe=1;Pe<=$e;Pe++){const Dt=new Date(A,V+1,Pe);me.push({date:Dt,isCurrentMonth:!1,key:Vt(Dt)})}return me},Xu=$.useMemo(()=>Yr(Qt),[Qt]),Fs=p=>{or(A=>{const V=new Date(A);return V.setMonth(V.getMonth()+p),V}),X(null)},Jr=$.useMemo(()=>{const p=Qt.getFullYear(),A=Qt.getMonth(),V=new Date(p,A+1,0).getDate();let N=0,H=0,Z={score:0,date:null},se=0,me=0;for(let Ue=1;Ue<=V;Ue++){const ce=new Date(p,A,Ue),$e=Vt(ce);m[$e]&&m[$e].total>0?(N+=m[$e].total,H++,m[$e].total>Z.score&&(Z={score:m[$e].total,date:ce}),se++,se>me&&(me=se)):se=0}return{avgScore:H?Math.round(N/H):0,daysTracked:H,bestDay:Z,longestStreak:me}},[Qt,m]),F={page:{minHeight:"100vh",backgroundColor:"#09090b",color:"#fafafa",fontFamily:"'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif",paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"},nav:{position:"fixed",top:"calc(0.5rem + env(safe-area-inset-top))",left:"50%",transform:"translateX(-50%)",zIndex:50,backgroundColor:"rgba(24,24,27,0.95)",backdropFilter:"blur(12px)",border:"1px solid #27272a",borderRadius:"1rem",padding:"0.375rem",maxWidth:"95vw"},navInner:{display:"flex",alignItems:"center",gap:"0.25rem"},navBtn:p=>({display:"flex",flexDirection:"column",alignItems:"center",gap:"0.125rem",padding:"0.5rem 0.75rem",borderRadius:"0.75rem",border:"none",backgroundColor:p?"rgba(139,92,246,0.15)":"transparent",color:p?"#8b5cf6":"#a1a1aa",cursor:"pointer",minHeight:"44px",minWidth:"44px",transition:"all 0.2s"}),navLabel:{fontSize:"0.625rem",fontWeight:500},main:{paddingTop:"calc(5rem + env(safe-area-inset-top))",paddingBottom:"calc(2rem + env(safe-area-inset-bottom))",paddingLeft:"1rem",paddingRight:"1rem",maxWidth:"64rem",marginLeft:"auto",marginRight:"auto"},card:{backgroundColor:"rgba(24,24,27,0.7)",border:"1px solid #27272a",borderRadius:"1rem",marginBottom:"1rem",overflow:"hidden"},cardHeader:{padding:"1rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",cursor:"pointer"},cardContent:{padding:"0 1rem 1rem"},btn:(p="secondary")=>({minHeight:"44px",padding:"0.5rem 1rem",borderRadius:"0.75rem",border:"none",fontWeight:600,fontSize:"0.875rem",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"all 0.2s",...p==="primary"?{backgroundColor:"#8b5cf6",color:"white"}:p==="danger"?{backgroundColor:"rgba(239,68,68,0.2)",color:"#f87171"}:{backgroundColor:"#27272a",color:"#fafafa"}}),input:{width:"100%",minHeight:"44px",padding:"0.75rem 1rem",backgroundColor:"#27272a",border:"1px solid #3f3f46",borderRadius:"0.75rem",color:"#fafafa",fontSize:"1rem",outline:"none"},tag:(p="#8b5cf6")=>({padding:"0.25rem 0.625rem",borderRadius:"0.375rem",fontSize:"0.6875rem",fontWeight:600,backgroundColor:`${p}20`,color:p}),checkbox:p=>({width:"1.75rem",height:"1.75rem",borderRadius:"0.5rem",border:p?"none":"2px solid #3f3f46",backgroundColor:p?"#10b981":"transparent",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0,transition:"all 0.2s"})};return h.jsxs("div",{style:F.page,children:[h.jsx("nav",{style:F.nav,children:h.jsxs("div",{style:F.navInner,children:[[{id:"today",label:"Today",icon:so.today},{id:"calendar",label:"Stats",icon:so.calendar},{id:"goals",label:"Goals",icon:so.goals},{id:"ideas",label:"Ideas",icon:so.ideas}].map(p=>h.jsxs("button",{onClick:()=>e(p.id),style:F.navBtn(t===p.id),children:[p.icon,h.jsx("span",{style:F.navLabel,children:p.label})]},p.id)),h.jsx("div",{style:{width:"1px",height:"2rem",backgroundColor:"#27272a",margin:"0 0.25rem"}}),h.jsx("button",{onClick:()=>C(!0),style:{...F.navBtn(!1),padding:"0.5rem"},children:so.backup})]})}),h.jsxs("main",{style:F.main,children:[t==="today"&&h.jsxs("div",{children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",marginBottom:"1.5rem"},children:[h.jsx("button",{onClick:()=>Ea(-1),style:{...F.btn(),width:"3rem",padding:0},children:""}),h.jsxs("div",{style:{textAlign:"center",flex:1},children:[h.jsx("h1",{style:{fontSize:"1.75rem",fontWeight:700,margin:0},children:un()}),h.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a",margin:"0.25rem 0 0"},children:xi.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),h.jsx("button",{onClick:()=>Ea(1),style:{...F.btn(),width:"3rem",padding:0},children:""})]}),un()!=="Today"&&h.jsx("button",{onClick:qu,style:{display:"block",margin:"0 auto 1rem",background:"none",border:"none",color:"#8b5cf6",fontSize:"0.875rem",cursor:"pointer"},children:" Back to Today"}),h.jsx("div",{style:F.card,children:h.jsxs("div",{style:{padding:"1.25rem"},children:[h.jsxs("p",{style:{fontSize:"0.75rem",fontWeight:600,color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"1rem"},children:[un(),"'s Score"]}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[h.jsx("div",{style:{width:"6rem",height:"6rem",borderRadius:"50%",background:`conic-gradient(${io(Fe.total)} ${Fe.total}%, #27272a ${Fe.total}%)`,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 0 30px ${io(Fe.total)}40`},children:h.jsx("div",{style:{width:"4.5rem",height:"4.5rem",borderRadius:"50%",backgroundColor:"#09090b",display:"flex",alignItems:"center",justifyContent:"center"},children:h.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:800,fontFamily:"JetBrains Mono, monospace",color:sg(Fe.total)},children:[Fe.total,"%"]})})}),h.jsxs("div",{style:{flex:1},children:[Fe.total>=25&&h.jsx("p",{style:{fontSize:"1rem",fontWeight:600,color:sg(Fe.total),marginBottom:"0.25rem"},children:Fe.total>=90?" Crushing it!":Fe.total>=70?" Great progress!":Fe.total>=50?" Solid day":" Getting started"}),h.jsxs("p",{style:{fontSize:"0.875rem",color:"#71717a"},children:[Fe.completed," of ",Fe.totalHabits," habits"]}),h.jsx("div",{style:{height:"0.375rem",borderRadius:"0.1875rem",backgroundColor:"#27272a",marginTop:"0.75rem",overflow:"hidden"},children:h.jsx("div",{style:{height:"100%",width:`${Fe.total}%`,backgroundColor:io(Fe.total),borderRadius:"0.1875rem",transition:"width 0.5s"}})})]})]})]})}),h.jsxs("div",{style:F.card,children:[h.jsxs("div",{style:F.cardHeader,onClick:()=>xn("habits"),children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[h.jsx("span",{style:{color:"#71717a",transform:Rt.habits?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:""}),h.jsx("span",{style:{fontWeight:600},children:"Daily Habits"}),h.jsxs("span",{style:F.tag("#8b5cf6"),children:[Object.values(Se.habitLogs||{}).filter(p=>p.completed).length,"/",$n.length]})]}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("button",{onClick:p=>{p.stopPropagation(),k(!0)},style:{...F.btn(),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.75rem"},children:"Edit"}),h.jsx("button",{onClick:p=>{p.stopPropagation(),I(!0)},style:{...F.btn("primary"),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.75rem"},children:"+ Add"})]})]}),!Rt.habits&&h.jsx("div",{style:F.cardContent,children:$n.length===0?h.jsxs("div",{style:{textAlign:"center",padding:"1.5rem 1rem"},children:[h.jsx("p",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),h.jsx("p",{style:{color:"#fafafa",fontWeight:500,marginBottom:"0.25rem"},children:"No habits yet"}),h.jsx("p",{style:{color:"#71717a",fontSize:"0.875rem",marginBottom:"1rem"},children:"Start with a suggestion or create your own"}),h.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",justifyContent:"center",marginBottom:"1rem"},children:ig.map(p=>h.jsxs("button",{onClick:()=>cn(p),style:{padding:"0.5rem 0.75rem",borderRadius:"2rem",border:"1px solid #3f3f46",backgroundColor:"#27272a",color:"#fafafa",fontSize:"0.8125rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.375rem"},children:[h.jsx("span",{children:p.icon}),h.jsx("span",{children:p.name})]},p.name))}),h.jsx("button",{onClick:()=>I(!0),style:F.btn("primary"),children:"+ Create Custom Habit"})]}):h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.5rem"},children:$n.map(p=>{var N;const A=((N=Se.habitLogs)==null?void 0:N[p.id])||{completed:!1,value:0},V=wa(p.id);return h.jsxs("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:A.completed?"rgba(16,185,129,0.15)":"rgba(39,39,42,0.5)",border:`1px solid ${A.completed?"rgba(16,185,129,0.3)":"#27272a"}`},children:[h.jsx("div",{style:{marginBottom:"0.5rem"},children:h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.25rem"},children:[p.link?h.jsxs("a",{href:p.link,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"0.8125rem",fontWeight:500,color:"#60a5fa",textDecoration:"none"},children:[p.name," "]}):h.jsx("span",{style:{fontSize:"0.8125rem",fontWeight:500},children:p.name}),V>0&&h.jsxs("span",{style:{fontSize:"0.6875rem",color:"#f59e0b",fontWeight:600},children:[" ",V]})]})}),p.type==="count"?h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[h.jsx("button",{onClick:()=>Cn(p.id,Math.max(0,A.value-1)),style:{width:"2rem",height:"2rem",borderRadius:"0.5rem",border:"none",backgroundColor:"#27272a",color:"white",fontSize:"1rem",cursor:"pointer",flexShrink:0},children:""}),h.jsx("input",{type:"number",min:"0",max:p.target*2,value:A.value,onChange:H=>Cn(p.id,Math.max(0,parseInt(H.target.value)||0)),style:{width:"3rem",height:"2rem",borderRadius:"0.375rem",border:"none",backgroundColor:"#27272a",color:A.completed?"#10b981":"#fafafa",fontSize:"0.875rem",fontWeight:600,fontFamily:"JetBrains Mono, monospace",textAlign:"center",outline:"none"}}),h.jsxs("span",{style:{fontSize:"0.75rem",color:"#71717a"},children:["/",p.target]}),h.jsx("button",{onClick:()=>Cn(p.id,A.value+1),style:{width:"2rem",height:"2rem",borderRadius:"0.5rem",border:"none",backgroundColor:"#27272a",color:"white",fontSize:"1rem",cursor:"pointer",flexShrink:0},children:"+"}),A.completed&&h.jsx("span",{style:{marginLeft:"auto",color:"#10b981"},children:""})]}):h.jsx("button",{onClick:()=>Cn(p.id),style:{width:"100%",padding:"0.5rem",borderRadius:"0.5rem",border:"none",backgroundColor:A.completed?"#10b981":"#27272a",color:A.completed?"white":"#a1a1aa",fontSize:"0.75rem",fontWeight:500,cursor:"pointer"},children:A.completed?" Done":"Mark Done"})]},p.id)})})})]}),h.jsxs("div",{style:F.card,children:[h.jsxs("div",{style:F.cardHeader,onClick:()=>xn("tasks"),children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[h.jsx("span",{style:{color:"#71717a",transform:Rt.tasks?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:""}),h.jsx("span",{style:{fontWeight:600},children:"Tasks"}),h.jsxs("span",{style:F.tag("#71717a"),children:[ve.filter(p=>!ki(p,pe)).length," pending"]})]}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("button",{onClick:p=>{p.stopPropagation(),q(!0)},style:{...F.btn(),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.75rem"},children:"Edit"}),h.jsx("button",{onClick:p=>{p.stopPropagation(),L(!0)},style:{...F.btn("primary"),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.75rem"},children:"+ Add"})]})]}),!Rt.tasks&&h.jsxs("div",{style:F.cardContent,children:[ve.length===0?h.jsxs("div",{style:{textAlign:"center",padding:"2rem 1rem"},children:[h.jsx("p",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),h.jsx("p",{style:{color:"#71717a",marginBottom:"1rem"},children:"No tasks yet"}),h.jsx("button",{onClick:()=>L(!0),style:F.btn("primary"),children:"+ Add a task"})]}):h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:ve.map(p=>{const A=ki(p,pe);return h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:"rgba(39,39,42,0.3)"},children:[h.jsx("div",{onClick:()=>Ds(p.id),style:F.checkbox(A),children:A&&h.jsx("span",{style:{color:"white",fontSize:"0.875rem"},children:""})}),h.jsx("span",{style:{flex:1,fontSize:"0.875rem",textDecoration:A?"line-through":"none",color:A?"#71717a":"#fafafa"},children:p.title}),p.recurring&&h.jsxs("span",{style:F.tag(p.recurring==="daily"?"#06b6d4":p.recurring==="weekly"?"#3b82f6":"#a855f7"),children:[" ",p.recurring]})]},p.id)})}),ur.length>0&&h.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #27272a"},children:[h.jsxs("p",{style:{fontSize:"0.6875rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"0.5rem"},children:[" Completed (",ur.length,")"]}),ur.map(p=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0",color:"#71717a",fontSize:"0.875rem"},children:[h.jsx("span",{onClick:()=>Ds(p.id),style:{cursor:"pointer",color:"#10b981"},children:""}),h.jsx("span",{style:{textDecoration:"line-through",flex:1},children:p.title})]},p.id))]})]})]}),h.jsxs("div",{style:F.card,children:[h.jsx("div",{style:F.cardHeader,onClick:()=>xn("sleep"),children:h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[h.jsx("span",{style:{color:"#71717a",transform:Rt.sleep?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:""}),h.jsx("span",{style:{fontWeight:600},children:" Sleep &  Screen"}),((Pa=Se.sleep)==null?void 0:Pa.hoursSlept)&&h.jsxs("span",{style:F.tag(Se.sleep.hoursSlept>=7?"#10b981":Se.sleep.hoursSlept>=5?"#f59e0b":"#ef4444"),children:[Se.sleep.hoursSlept," hrs"]})]})}),!Rt.sleep&&h.jsx("div",{style:F.cardContent,children:h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem",marginBottom:"1rem"},children:[h.jsxs("div",{children:[h.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Bedtime"}),h.jsx("input",{type:"time",value:((Da=Se.sleep)==null?void 0:Da.bedTime)||"",onChange:p=>{var H;const A=p.target.value,V=(H=Se.sleep)==null?void 0:H.wakeTime;let N=null;if(A&&V){const Z=new Date(`2000-01-01T${A}`);let se=new Date(`2000-01-01T${V}`);se<Z&&se.setDate(se.getDate()+1),N=Math.round((se-Z)/36e3)/100}d(Z=>{var se,me;return{...Z,[pe]:{...Z[pe],habitLogs:((se=Z[pe])==null?void 0:se.habitLogs)||{},sleep:{...(me=Z[pe])==null?void 0:me.sleep,bedTime:A,hoursSlept:N}}}})},style:{...F.input,fontFamily:"JetBrains Mono, monospace",fontSize:"0.875rem"}})]}),h.jsxs("div",{children:[h.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Wake time"}),h.jsx("input",{type:"time",value:((cr=Se.sleep)==null?void 0:cr.wakeTime)||"",onChange:p=>{var H;const A=p.target.value,V=(H=Se.sleep)==null?void 0:H.bedTime;let N=null;if(V&&A){const Z=new Date(`2000-01-01T${V}`);let se=new Date(`2000-01-01T${A}`);se<Z&&se.setDate(se.getDate()+1),N=Math.round((se-Z)/36e3)/100}d(Z=>{var se,me;return{...Z,[pe]:{...Z[pe],habitLogs:((se=Z[pe])==null?void 0:se.habitLogs)||{},sleep:{...(me=Z[pe])==null?void 0:me.sleep,wakeTime:A,hoursSlept:N}}}})},style:{...F.input,fontFamily:"JetBrains Mono, monospace",fontSize:"0.875rem"}})]}),h.jsxs("div",{children:[h.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Hours slept"}),h.jsx("div",{style:{...F.input,backgroundColor:((An=Se.sleep)==null?void 0:An.hoursSlept)>=7?"rgba(16,185,129,0.2)":((zs=Se.sleep)==null?void 0:zs.hoursSlept)>=5?"rgba(245,158,11,0.2)":(Bs=Se.sleep)!=null&&Bs.hoursSlept?"rgba(239,68,68,0.2)":"#27272a",textAlign:"center",fontWeight:600,fontFamily:"JetBrains Mono, monospace",color:((Us=Se.sleep)==null?void 0:Us.hoursSlept)>=7?"#10b981":(($s=Se.sleep)==null?void 0:$s.hoursSlept)>=5?"#f59e0b":(Hs=Se.sleep)!=null&&Hs.hoursSlept?"#ef4444":"#71717a"},children:(Hn=Se.sleep)!=null&&Hn.hoursSlept?`${Se.sleep.hoursSlept} hrs`:""})]}),h.jsxs("div",{children:[h.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Screen time (hrs)"}),h.jsx("input",{type:"number",step:"0.5",min:"0",max:"24",value:Se.screenTime||"",onChange:p=>d(A=>{var V;return{...A,[pe]:{...A[pe],habitLogs:((V=A[pe])==null?void 0:V.habitLogs)||{},screenTime:parseFloat(p.target.value)||0}}}),placeholder:"0",style:{...F.input,fontFamily:"JetBrains Mono, monospace",fontSize:"0.875rem"}})]})]})})]}),h.jsxs("div",{style:F.card,children:[h.jsx("div",{style:F.cardHeader,onClick:()=>xn("fact"),children:h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[h.jsx("span",{style:{color:"#71717a",transform:Rt.fact?"rotate(0deg)":"rotate(90deg)",transition:"transform 0.2s"},children:""}),h.jsx("span",{style:{fontWeight:600},children:" Fact I Learned"}),Se.factLearned&&h.jsx("span",{style:F.tag("#10b981"),children:" Recorded"})]})}),!Rt.fact&&h.jsx("div",{style:F.cardContent,children:h.jsx("textarea",{value:Se.factLearned||"",onChange:p=>d(A=>{var V;return{...A,[pe]:{...A[pe],habitLogs:((V=A[pe])==null?void 0:V.habitLogs)||{},factLearned:p.target.value}}}),placeholder:"What's something interesting you learned today?",style:{...F.input,minHeight:"5rem",resize:"none",fontSize:"0.875rem"},maxLength:100})})]})]}),t==="calendar"&&h.jsxs("div",{children:[h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.25rem"},children:[h.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,margin:0},children:"Score Calendar"}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("button",{onClick:()=>Fs(-1),style:{...F.btn(),width:"2.75rem",padding:0},children:""}),h.jsx("span",{style:{flex:1,textAlign:"center",fontWeight:600},children:Qt.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),h.jsx("button",{onClick:()=>Fs(1),style:{...F.btn(),width:"2.75rem",padding:0},children:""}),h.jsx("button",{onClick:()=>{or(new Date),X(null)},style:{...F.btn(),fontSize:"0.8125rem"},children:"Today"})]})]}),h.jsx("div",{style:F.card,children:h.jsxs("div",{style:{padding:"1rem"},children:[h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem",marginBottom:"0.5rem"},children:["S","M","T","W","T","F","S"].map((p,A)=>h.jsx("div",{style:{textAlign:"center",fontSize:"0.6875rem",fontWeight:500,color:"#71717a",padding:"0.375rem"},children:p},A))}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"0.25rem"},children:Xu.map((p,A)=>{var Z;const V=(Z=m[p.key])==null?void 0:Z.total,N=(B==null?void 0:B.key)===p.key,H=p.key===Un;return h.jsxs("button",{onClick:()=>X(p),onDoubleClick:()=>{Hr(p.date),e("today")},style:{aspectRatio:"1",borderRadius:"0.5rem",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:H?"2px solid #3b82f6":N?"2px solid #8b5cf6":"none",backgroundColor:io(V),color:V>0?"white":"#71717a",opacity:p.isCurrentMonth?1:.3,cursor:"pointer",fontSize:"0.75rem",fontWeight:500},children:[h.jsx("span",{children:p.date.getDate()}),V>0&&h.jsx("span",{style:{fontSize:"0.625rem",fontFamily:"JetBrains Mono, monospace"},children:V})]},A)})})]})}),h.jsx("div",{style:F.card,children:h.jsxs("div",{style:{padding:"1rem"},children:[h.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:600,color:"#a1a1aa",marginBottom:"1rem"},children:"Month Summary"}),Jr.daysTracked===0?h.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[h.jsx("p",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),h.jsx("p",{style:{color:"#fafafa",fontWeight:500,marginBottom:"0.25rem"},children:"No data yet this month"}),h.jsx("p",{style:{color:"#71717a",fontSize:"0.875rem",marginBottom:"1rem"},children:"Start tracking today to see your progress here!"}),h.jsx("button",{onClick:()=>e("today"),style:F.btn("primary"),children:"Start Tracking "})]}):h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},children:[h.jsxs("div",{children:[h.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Average"}),h.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:"#8b5cf6"},children:[Jr.avgScore,"%"]})]}),h.jsxs("div",{children:[h.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Days Tracked"}),h.jsx("p",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace"},children:Jr.daysTracked})]}),h.jsxs("div",{children:[h.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Best Day"}),h.jsx("p",{style:{fontSize:"1.25rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:"#10b981"},children:Jr.bestDay.score||""})]}),h.jsxs("div",{children:[h.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Best Streak"}),h.jsxs("p",{style:{fontSize:"1.25rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:"#f59e0b"},children:[Jr.longestStreak||""," days"]})]})]})]})}),B&&h.jsx("div",{style:F.card,children:h.jsxs("div",{style:{padding:"1rem"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[h.jsx("h3",{style:{fontWeight:600,margin:0},children:B.date.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),h.jsx("button",{onClick:()=>X(null),style:{background:"none",border:"none",color:"#71717a",fontSize:"1.25rem",cursor:"pointer"},children:""})]}),m[B.key]?h.jsxs(h.Fragment,{children:[h.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem"},children:h.jsx("div",{style:{width:"5rem",height:"5rem",borderRadius:"0.75rem",backgroundColor:io(m[B.key].total),display:"flex",alignItems:"center",justifyContent:"center"},children:h.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:"white"},children:[m[B.key].total,"%"]})})}),h.jsxs("p",{style:{textAlign:"center",color:"#71717a",fontSize:"0.875rem",marginBottom:"1rem"},children:[m[B.key].completed,"/",m[B.key].totalHabits," habits completed"]}),(((ba=(Va=u[B.key])==null?void 0:Va.sleep)==null?void 0:ba.hoursSlept)||((Na=u[B.key])==null?void 0:Na.screenTime)||((dn=u[B.key])==null?void 0:dn.factLearned))&&h.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",borderRadius:"0.5rem",backgroundColor:"rgba(39,39,42,0.5)"},children:[h.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.75rem"},children:[((Di=(ja=u[B.key])==null?void 0:ja.sleep)==null?void 0:Di.hoursSlept)&&h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[h.jsx("span",{style:{fontSize:"0.875rem"},children:""}),h.jsxs("span",{style:{fontSize:"0.8125rem",color:u[B.key].sleep.hoursSlept>=7?"#10b981":u[B.key].sleep.hoursSlept>=5?"#f59e0b":"#ef4444",fontWeight:500},children:[u[B.key].sleep.hoursSlept," hrs"]})]}),((Xr=u[B.key])==null?void 0:Xr.screenTime)>0&&h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[h.jsx("span",{style:{fontSize:"0.875rem"},children:""}),h.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa",fontWeight:500},children:[u[B.key].screenTime," hrs"]})]})]}),((Ws=u[B.key])==null?void 0:Ws.factLearned)&&h.jsx("div",{style:{marginTop:"0.625rem",paddingTop:"0.625rem",borderTop:"1px solid #3f3f46"},children:h.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.375rem"},children:[h.jsx("span",{style:{fontSize:"0.875rem",flexShrink:0},children:""}),h.jsx("span",{style:{fontSize:"0.75rem",color:"#a1a1aa",lineHeight:"1.5",wordBreak:"break-word",overflowWrap:"break-word"},children:u[B.key].factLearned.length>100?u[B.key].factLearned.substring(0,100)+"...":u[B.key].factLearned})]})})]}),h.jsx("button",{onClick:()=>{Hr(B.date),e("today"),X(null)},style:{...F.btn("primary"),width:"100%"},children:"View Day "})]}):h.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[h.jsx("p",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),h.jsx("p",{style:{color:"#71717a",marginBottom:"1rem"},children:"No data recorded"}),h.jsx("button",{onClick:()=>{Hr(B.date),e("today"),X(null)},style:F.btn("primary"),children:B.key===Un?"Start tracking":"Add data"})]})]})})]}),t==="goals"&&h.jsxs("div",{children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.25rem",gap:"1rem",flexWrap:"wrap"},children:[h.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,margin:0},children:"Goals"}),h.jsx("button",{onClick:()=>w(!0),style:F.btn("primary"),children:"+ New Goal"})]}),a.length===0?h.jsxs("div",{style:{...F.card,padding:"3rem 1.5rem",textAlign:"center"},children:[h.jsx("p",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:""}),h.jsx("p",{style:{color:"#71717a",marginBottom:"1.5rem"},children:"No goals yet. Set your first goal!"}),h.jsx("button",{onClick:()=>w(!0),style:F.btn("primary"),children:"+ Create Goal"})]}):a.map(p=>{const A=p.milestones.filter(N=>N.completed).length,V=p.milestones.length>0?Math.round(A/p.milestones.length*100):0;return h.jsx("div",{style:F.card,children:h.jsxs("div",{style:{padding:"1.25rem"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem",gap:"1rem"},children:[h.jsxs("div",{style:{flex:1,minWidth:0},children:[Ft===p.id?h.jsx("input",{defaultValue:p.title,autoFocus:!0,style:{...F.input,fontSize:"1.125rem",fontWeight:600},onBlur:N=>{N.target.value.trim()&&Ns(p.id,{title:N.target.value.trim()}),ln(null)},onKeyDown:N=>{N.key==="Enter"&&N.target.blur()}}):h.jsx("h3",{onClick:()=>ln(p.id),style:{fontSize:"1.125rem",fontWeight:600,margin:0,cursor:"pointer"},children:p.title}),h.jsxs("p",{style:{fontSize:"0.8125rem",color:"#71717a",margin:"0.25rem 0 0"},children:[A,"/",p.milestones.length," milestones"]})]}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsxs("span",{style:{fontSize:"1.5rem",fontWeight:700,fontFamily:"JetBrains Mono, monospace",color:V===100?"#10b981":"#8b5cf6"},children:[V,"%"]}),h.jsx("button",{onClick:()=>xa(p.id),style:{background:"none",border:"none",color:"#71717a",cursor:"pointer",fontSize:"1.25rem"},children:""})]})]}),h.jsx("div",{style:{height:"0.5rem",borderRadius:"0.25rem",backgroundColor:"#27272a",marginBottom:"1rem",overflow:"hidden"},children:h.jsx("div",{style:{height:"100%",width:`${V}%`,backgroundColor:V===100?"#10b981":"#8b5cf6",borderRadius:"0.25rem",transition:"width 0.5s"}})}),h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[p.milestones.map((N,H)=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:N.completed?"rgba(16,185,129,0.1)":"rgba(39,39,42,0.5)",border:`1px solid ${N.completed?"rgba(16,185,129,0.3)":"#27272a"}`},children:[h.jsx("div",{onClick:()=>Ta(p.id,H),style:F.checkbox(N.completed),children:N.completed&&h.jsx("span",{style:{color:"white",fontSize:"0.75rem"},children:""})}),(Sn==null?void 0:Sn.goalId)===p.id&&(Sn==null?void 0:Sn.index)===H?h.jsx("input",{defaultValue:N.text,autoFocus:!0,style:{...F.input,flex:1,minHeight:"36px",padding:"0.5rem"},onBlur:Z=>{Z.target.value.trim()&&Ca(p.id,H,Z.target.value.trim()),As(null)},onKeyDown:Z=>{Z.key==="Enter"&&Z.target.blur()}}):h.jsx("span",{onClick:()=>As({goalId:p.id,index:H}),style:{flex:1,fontSize:"0.875rem",textDecoration:N.completed?"line-through":"none",color:N.completed?"#71717a":"#fafafa",cursor:"pointer"},children:N.text}),h.jsx("button",{onClick:()=>Ri(p.id,H),style:{background:"none",border:"none",color:"#71717a",cursor:"pointer",opacity:.5},children:""})]},H)),h.jsx("form",{onSubmit:N=>{N.preventDefault();const H=N.target.elements[`milestone-${p.id}`];H.value.trim()&&(Qu(p.id,H.value.trim()),H.value="")},children:h.jsx("input",{name:`milestone-${p.id}`,type:"text",placeholder:"+ Add milestone...",style:{...F.input,fontSize:"0.875rem"}})})]})]})},p.id)})]}),t==="ideas"&&h.jsxs("div",{children:[h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1.25rem"},children:[h.jsxs("div",{children:[h.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:700,margin:0},children:"Ideas"}),h.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a",margin:"0.25rem 0 0"},children:"Capture and develop your ideas"})]}),h.jsx("button",{onClick:()=>E(!0),style:{...F.btn("primary"),width:"100%"},children:"+ New Idea"})]}),_.length===0?h.jsxs("div",{style:{...F.card,padding:"3rem 1.5rem",textAlign:"center"},children:[h.jsx("p",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:""}),h.jsx("p",{style:{color:"#71717a",marginBottom:"1.5rem"},children:"No ideas yet. Capture your first one!"}),h.jsx("button",{onClick:()=>E(!0),style:F.btn("primary"),children:"+ Add Idea"})]}):_.map(p=>{var se,me,Ue;const A=fa===p.id,V=p.status||"idea",N={idea:{icon:"",color:"#71717a"},exploring:{icon:"",color:"#3b82f6"},planning:{icon:"",color:"#a855f7"},active:{icon:"",color:"#10b981"},done:{icon:"",color:"#10b981"}}[V],H=(p.points||[]).filter(ce=>ce.done).length,Z=(p.points||[]).length;return h.jsxs("div",{style:F.card,children:[h.jsx("div",{onClick:()=>Ci(A?null:p.id),style:{padding:"1rem",cursor:"pointer"},children:h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"0.75rem"},children:[h.jsxs("div",{style:{flex:1,minWidth:0},children:[h.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,margin:0,marginBottom:"0.5rem"},children:p.text}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[h.jsxs("span",{style:F.tag(N.color),children:[N.icon," ",V]}),h.jsxs("span",{style:F.tag(((se=ro[p.category])==null?void 0:se.color)||"#71717a"),children:[(me=ro[p.category])==null?void 0:me.icon," ",((Ue=ro[p.category])==null?void 0:Ue.name)||"General"]}),Z>0&&h.jsxs("span",{style:{fontSize:"0.6875rem",color:"#71717a"},children:[H,"/",Z," points"]})]})]}),h.jsx("span",{style:{color:"#71717a",transform:A?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""})]})}),A&&h.jsxs("div",{style:{padding:"0 1rem 1rem",borderTop:"1px solid #27272a"},children:[h.jsxs("div",{style:{paddingTop:"1rem"},children:[h.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"0.5rem"},children:"Status"}),h.jsx("div",{style:{display:"flex",gap:"0.375rem",flexWrap:"wrap"},children:["idea","exploring","planning","active","done"].map(ce=>{const $e={idea:"",exploring:"",planning:"",active:"",done:""}[ce];return h.jsxs("button",{onClick:()=>hn(p.id,{status:ce}),style:{...F.btn(V===ce?"primary":"secondary"),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.625rem"},children:[$e," ",ce]},ce)})})]}),h.jsxs("div",{style:{marginTop:"1rem"},children:[h.jsx("label",{style:{fontSize:"0.6875rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"0.5rem"},children:"Notes"}),h.jsx("textarea",{value:p.notes||"",onChange:ce=>hn(p.id,{notes:ce.target.value}),placeholder:"Add notes...",style:{...F.input,minHeight:"4rem",resize:"none",fontSize:"0.875rem"}})]}),h.jsxs("div",{style:{marginTop:"1rem"},children:[h.jsxs("label",{style:{fontSize:"0.6875rem",color:"#71717a",textTransform:"uppercase",letterSpacing:"0.05em",display:"block",marginBottom:"0.5rem"},children:["Brainstorm Points (",H,"/",Z,")"]}),h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.375rem"},children:[(p.points||[]).map(ce=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",borderRadius:"0.5rem",backgroundColor:"rgba(39,39,42,0.3)"},children:[h.jsx("div",{onClick:()=>Yu(p.id,ce.id),style:{...F.checkbox(ce.done),width:"1.5rem",height:"1.5rem"},children:ce.done&&h.jsx("span",{style:{color:"white",fontSize:"0.625rem"},children:""})}),h.jsx("span",{style:{flex:1,fontSize:"0.8125rem",textDecoration:ce.done?"line-through":"none",color:ce.done?"#71717a":"#fafafa"},children:ce.text}),h.jsx("button",{onClick:()=>Ia(p.id,ce.id),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"0.875rem",opacity:.7},children:""})]},ce.id)),h.jsxs("form",{onSubmit:ce=>{ce.preventDefault();const $e=ce.target.elements.point;$e.value.trim()&&(js(p.id,$e.value.trim()),$e.value="")},style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{name:"point",type:"text",placeholder:"+ Add point...",style:{...F.input,flex:1,fontSize:"0.8125rem"}}),h.jsx("button",{type:"submit",style:{...F.btn(),fontSize:"0.75rem"},children:"Add"})]})]})]}),h.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #27272a",display:"flex",justifyContent:"space-between"},children:[h.jsx("button",{onClick:()=>{Ps({title:p.text,term:"This Week"}),hn(p.id,{status:"active"})},style:{background:"none",border:"none",color:"#8b5cf6",cursor:"pointer",fontSize:"0.8125rem"},children:" Make Task"}),h.jsx("button",{onClick:()=>Aa(p.id),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"0.8125rem"},children:" Delete"})]})]})]},p.id)})]})]}),h.jsx(Xt,{isOpen:j,onClose:()=>{L(!1),ye("Today"),Yt(null),Ai(!1)},title:"New Task",children:h.jsxs("form",{onSubmit:p=>{p.preventDefault(),Ps({title:p.target.title.value,term:Ee?"Today":ne,recurring:Ee}),Ai(!1)},children:[h.jsx("input",{name:"title",type:"text",placeholder:"What needs to be done?",style:{...F.input,marginBottom:"1rem"},autoFocus:!0,required:!0}),st?h.jsxs(h.Fragment,{children:[h.jsx("label",{style:{fontSize:"0.75rem",color:"#71717a",display:"block",marginBottom:"0.5rem"},children:"Repeat"}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"0.5rem",marginBottom:"1rem"},children:[{v:null,l:"Once",i:"1"},{v:"daily",l:"Daily",i:""},{v:"weekly",l:"Weekly",i:""},{v:"monthly",l:"Monthly",i:""}].map(p=>h.jsxs("button",{type:"button",onClick:()=>Yt(p.v),style:{padding:"0.75rem 0.5rem",borderRadius:"0.75rem",border:Ee===p.v?"2px solid #10b981":"2px solid #27272a",backgroundColor:Ee===p.v?"rgba(16,185,129,0.15)":"#27272a",color:Ee===p.v?"#10b981":"#fafafa",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem"},children:[h.jsx("span",{style:{fontSize:"1.25rem"},children:p.i}),h.jsx("span",{style:{fontSize:"0.6875rem",fontWeight:500},children:p.l})]},p.l))}),!Ee&&h.jsxs(h.Fragment,{children:[h.jsx("label",{style:{fontSize:"0.75rem",color:"#71717a",display:"block",marginBottom:"0.5rem"},children:"When"}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.5rem",marginBottom:"1rem"},children:[{v:"Today",c:"#8b5cf6"},{v:"This Week",c:"#3b82f6"},{v:"This Month",c:"#a855f7"},{v:"Long Term",c:"#71717a"}].map(p=>h.jsx("button",{type:"button",onClick:()=>ye(p.v),style:{padding:"0.75rem",borderRadius:"0.75rem",border:ne===p.v?`2px solid ${p.c}`:"2px solid #27272a",backgroundColor:ne===p.v?`${p.c}20`:"#27272a",color:ne===p.v?p.c:"#fafafa",cursor:"pointer",fontSize:"0.8125rem",fontWeight:500},children:p.v},p.v))})]})]}):h.jsx("button",{type:"button",onClick:()=>Ai(!0),style:{background:"none",border:"none",color:"#71717a",fontSize:"0.8125rem",cursor:"pointer",padding:"0.5rem 0",marginBottom:"0.5rem"},children:"+ More options (recurring, schedule)"}),h.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1.5rem"},children:[h.jsx("button",{type:"button",onClick:()=>{L(!1),ye("Today"),Yt(null)},style:{...F.btn(),flex:1},children:"Cancel"}),h.jsx("button",{type:"submit",style:{...F.btn("primary"),flex:1},children:"Add Task"})]})]})}),h.jsx(Xt,{isOpen:W,onClose:()=>I(!1),title:"New Habit",children:h.jsxs("form",{onSubmit:p=>{p.preventDefault();const A=p.target;Ku({name:A.name.value,type:A.type.value,target:A.target.value,category:A.category.value})},children:[h.jsx("input",{name:"name",type:"text",placeholder:"Habit name",style:{...F.input,marginBottom:"0.75rem"},autoFocus:!0,required:!0}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"0.75rem"},children:[h.jsxs("select",{name:"type",style:F.input,children:[h.jsx("option",{value:"binary",children:"Yes/No"}),h.jsx("option",{value:"count",children:"Count"})]}),h.jsx("input",{name:"target",type:"number",placeholder:"Target (1)",defaultValue:1,style:F.input})]}),h.jsx("select",{name:"category",style:{...F.input,marginBottom:"1.5rem"},children:Object.entries(ro).map(([p,A])=>h.jsxs("option",{value:p,children:[A.icon," ",A.name]},p))}),h.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[h.jsx("button",{type:"button",onClick:()=>I(!1),style:{...F.btn(),flex:1},children:"Cancel"}),h.jsx("button",{type:"submit",style:{...F.btn("primary"),flex:1},children:"Add Habit"})]})]})}),h.jsxs(Xt,{isOpen:S,onClose:()=>{k(!1),Jt(null)},title:"Edit Habits",size:"lg",children:[h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:i.length===0?h.jsx("p",{style:{textAlign:"center",color:"#71717a",padding:"2rem"},children:"No habits yet"}):i.map(p=>h.jsx("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:"#27272a"},children:h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("div",{style:{flex:1,minWidth:0},children:dt===p.id?h.jsx("input",{defaultValue:p.name,autoFocus:!0,style:{...F.input,minHeight:"36px",padding:"0.5rem",fontSize:"0.875rem"},onBlur:A=>{A.target.value.trim()&&Sa(p.id,{name:A.target.value.trim()}),Jt(null)},onKeyDown:A=>{A.key==="Enter"&&A.target.blur()}}):h.jsxs("div",{children:[h.jsx("span",{style:{fontWeight:500,fontSize:"0.875rem"},children:p.name}),h.jsxs("span",{style:{fontSize:"0.75rem",color:"#71717a",marginLeft:"0.5rem"},children:["(",p.type==="count"?`${p.target}/day`:"daily",")"]})]})}),h.jsx("button",{onClick:()=>Jt(dt===p.id?null:p.id),style:{...F.btn(),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.625rem"},children:dt===p.id?"Done":"Edit"}),h.jsx("button",{onClick:()=>{k(!1),T(p)},style:{...F.btn("danger"),fontSize:"0.75rem",minHeight:"36px",padding:"0.375rem 0.625rem"},children:"Delete"})]})},p.id))}),h.jsx("button",{onClick:()=>{k(!1),Jt(null)},style:{...F.btn(),width:"100%",marginTop:"1rem"},children:"Done"})]}),h.jsxs(Xt,{isOpen:M,onClose:()=>q(!1),title:"Edit Tasks",size:"lg",children:[h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:n.length===0?h.jsx("p",{style:{textAlign:"center",color:"#71717a",padding:"2rem"},children:"No tasks yet"}):n.map(p=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:"#27272a",opacity:p.status==="done"?.6:1},children:[h.jsx("span",{style:{flex:1,fontSize:"0.875rem",textDecoration:p.status==="done"?"line-through":"none"},children:p.title}),p.recurring&&h.jsx("span",{style:F.tag("#06b6d4"),children:p.recurring}),h.jsx("button",{onClick:()=>r(A=>A.filter(V=>V.id!==p.id)),style:{...F.btn("danger"),fontSize:"0.75rem",minHeight:"32px",padding:"0.25rem 0.5rem"},children:""})]},p.id))}),h.jsx("button",{onClick:()=>q(!1),style:{...F.btn(),width:"100%",marginTop:"1rem"},children:"Done"})]}),h.jsx(Xt,{isOpen:G,onClose:()=>E(!1),title:" New Idea",children:h.jsxs("form",{onSubmit:p=>{p.preventDefault(),Gr({text:p.target.text.value,category:p.target.category.value})},children:[h.jsx("input",{name:"text",type:"text",placeholder:"What's your idea?",style:{...F.input,marginBottom:"0.75rem",fontSize:"1rem"},autoFocus:!0,required:!0}),h.jsx("select",{name:"category",style:{...F.input,marginBottom:"1.5rem"},children:Object.entries(ro).map(([p,A])=>h.jsxs("option",{value:p,children:[A.icon," ",A.name]},p))}),h.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[h.jsx("button",{type:"button",onClick:()=>E(!1),style:{...F.btn(),flex:1},children:"Cancel"}),h.jsx("button",{type:"submit",style:{...F.btn("primary"),flex:1},children:"Capture"})]})]})}),h.jsx(Xt,{isOpen:v,onClose:()=>w(!1),title:"New Goal",children:h.jsxs("form",{onSubmit:p=>{p.preventDefault(),Gu({title:p.target.title.value,milestonesText:p.target.milestones.value})},children:[h.jsx("input",{name:"title",type:"text",placeholder:"Goal title",style:{...F.input,marginBottom:"0.75rem"},autoFocus:!0,required:!0}),h.jsx("label",{style:{fontSize:"0.75rem",color:"#71717a",display:"block",marginBottom:"0.375rem"},children:"Milestones (one per line)"}),h.jsx("textarea",{name:"milestones",placeholder:`First milestone
Second milestone
Third milestone`,style:{...F.input,minHeight:"6rem",resize:"none",marginBottom:"1.5rem"}}),h.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[h.jsx("button",{type:"button",onClick:()=>w(!1),style:{...F.btn(),flex:1},children:"Cancel"}),h.jsx("button",{type:"submit",style:{...F.btn("primary"),flex:1},children:"Create Goal"})]})]})}),h.jsxs(Xt,{isOpen:x,onClose:()=>C(!1),title:" Backup & Sync",children:[(ft||Tt)&&h.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:((ft==null?void 0:ft.type)||(Tt==null?void 0:Tt.type))==="success"?"rgba(16,185,129,0.2)":"rgba(239,68,68,0.2)",color:((ft==null?void 0:ft.type)||(Tt==null?void 0:Tt.type))==="success"?"#10b981":"#ef4444",fontSize:"0.875rem"},children:[((ft==null?void 0:ft.type)||(Tt==null?void 0:Tt.type))==="success"?"":""," ",(ft==null?void 0:ft.message)||(Tt==null?void 0:Tt.message)]}),h.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",backgroundColor:"#27272a",marginBottom:"0.75rem",border:Me?"1px solid rgba(16,185,129,0.3)":"1px solid transparent"},children:[h.jsx("h3",{style:{fontWeight:600,marginBottom:"0.75rem",fontSize:"0.9375rem"},children:" Cloud Sync"}),Me?h.jsxs(h.Fragment,{children:[h.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",borderRadius:"0.5rem",backgroundColor:"#3f3f46",textAlign:"center"},children:[h.jsx("p",{style:{fontSize:"0.75rem",color:"#a1a1aa",marginBottom:"0.25rem"},children:"Your sync code"}),h.jsx("p",{style:{fontFamily:"JetBrains Mono, monospace",fontSize:"1.25rem",fontWeight:700,color:"#fafafa",letterSpacing:"0.05em"},children:Me.toUpperCase()}),h.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a",marginTop:"0.375rem"},children:"Codes are not case-sensitive"})]}),h.jsx("div",{style:{marginBottom:"1rem",padding:"0.625rem",borderRadius:"0.5rem",backgroundColor:"rgba(59,130,246,0.1)",border:"1px solid rgba(59,130,246,0.2)"},children:h.jsx("p",{style:{fontSize:"0.75rem",color:"#60a5fa",margin:0},children:" Save this code somewhere safe  you'll need it to sync on other devices"})}),Ii&&h.jsxs("p",{style:{fontSize:"0.75rem",color:"#71717a",marginBottom:"0.75rem"},children:["Last synced: ",new Date(Ii).toLocaleString()]}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[h.jsx("button",{onClick:ka,disabled:we,style:{...F.btn("primary"),flex:1,opacity:we?.7:1,fontSize:"0.8125rem"},children:we?"...":" Upload to Cloud"}),h.jsx("button",{onClick:Ra,disabled:we,style:{...F.btn(),flex:1,opacity:we?.7:1,fontSize:"0.8125rem"},children:we?"...":" Download from Cloud"})]}),h.jsx("p",{style:{fontSize:"0.6875rem",color:"#a1a1aa",marginBottom:"1rem",lineHeight:"1.4"},children:'Data does not sync automatically. Tap "Upload to Cloud" to save your data, or "Download from Cloud" to load data from another device.'}),h.jsxs("div",{style:{paddingTop:"0.75rem",borderTop:"1px solid #3f3f46"},children:[h.jsx("button",{onClick:Ms,style:{background:"none",border:"none",color:"#f59e0b",fontSize:"0.8125rem",cursor:"pointer",padding:0,fontWeight:500},children:" Change Code"}),h.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a",marginTop:"0.375rem"},children:"Changing your code won't delete local data."})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a",marginBottom:"0.75rem"},children:"Enter a personal sync code to backup & sync across devices"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem",alignItems:"center"},children:[h.jsx("input",{type:"text",value:zt,onChange:p=>Be(p.target.value.toUpperCase()),placeholder:"e.g. MYHABITS2024",style:{...F.input,flex:1,fontFamily:"JetBrains Mono, monospace",textTransform:"uppercase"},onKeyDown:p=>{p.key==="Enter"&&In()}}),h.jsxs("div",{style:{position:"relative"},children:[h.jsx("button",{type:"button",onClick:()=>va(!Tn),style:{width:"2rem",height:"2rem",borderRadius:"50%",border:"1px solid #3f3f46",backgroundColor:"#27272a",color:"#71717a",fontSize:"0.875rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"?"}),Tn&&h.jsxs("div",{style:{position:"absolute",bottom:"2.5rem",right:0,width:"14rem",padding:"0.75rem",borderRadius:"0.5rem",backgroundColor:"#3f3f46",border:"1px solid #52525b",fontSize:"0.75rem",color:"#fafafa",zIndex:10,boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:[h.jsx("p",{style:{marginBottom:"0.5rem",fontWeight:500},children:"How sync codes work:"}),h.jsx("p",{style:{color:"#a1a1aa",lineHeight:1.4},children:`Create any code you'll remember (like "JOHN2024"). Use the same code on other devices to sync your data.`}),h.jsx("div",{style:{position:"absolute",bottom:"-6px",right:"0.75rem",width:"12px",height:"12px",backgroundColor:"#3f3f46",border:"1px solid #52525b",borderTop:"none",borderLeft:"none",transform:"rotate(45deg)"}})]})]}),h.jsx("button",{onClick:()=>In(),disabled:we||!zt.trim(),style:{...F.btn("primary"),opacity:we||!zt.trim()?.7:1},children:we?"...":"Connect"})]}),h.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Codes are not case-sensitive"})]})]}),h.jsx("div",{style:{padding:"0.75rem",borderRadius:"0.75rem",backgroundColor:"rgba(39,39,42,0.5)",fontSize:"0.75rem",color:"#71717a",marginBottom:"0.75rem"},children:h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.25rem"},children:[h.jsxs("span",{children:[i.length," habits"]}),h.jsxs("span",{children:[n.length," tasks"]}),h.jsxs("span",{children:[a.length," goals"]}),h.jsxs("span",{children:[_.length," ideas"]}),h.jsxs("span",{children:[Object.keys(u).length," days logged"]}),h.jsxs("span",{children:[Object.keys(m).length," scores"]})]})}),h.jsx("button",{onClick:()=>C(!1),style:{...F.btn(),width:"100%"},children:"Close"})]}),h.jsxs(Xt,{isOpen:Wu,onClose:Ls,title:" Add to Home Screen",children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[h.jsx("p",{style:{fontSize:"3rem",marginBottom:"0.75rem"},children:""}),h.jsx("p",{style:{fontSize:"0.9375rem",color:"#fafafa",marginBottom:"0.5rem"},children:"Get the full app experience"}),h.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a"},children:"Add Life Manager to your home screen for quick access and a better experience."})]}),ma?h.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",backgroundColor:"#27272a",marginBottom:"1rem"},children:[h.jsx("p",{style:{fontSize:"0.8125rem",fontWeight:600,color:"#fafafa",marginBottom:"0.75rem"},children:"For iPhone/iPad (Safari):"}),h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:[h.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[h.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"1."}),h.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Tap the ",h.jsx("strong",{style:{color:"#fafafa"},children:"Share"})," button at the bottom (square with arrow )"]})]}),h.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[h.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"2."}),h.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Scroll down and tap ",h.jsx("strong",{style:{color:"#fafafa"},children:'"Add to Home Screen"'})]})]}),h.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[h.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"3."}),h.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Tap ",h.jsx("strong",{style:{color:"#fafafa"},children:'"Add"'})]})]})]})]}):ks?h.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",backgroundColor:"#27272a",marginBottom:"1rem"},children:[h.jsx("p",{style:{fontSize:"0.8125rem",fontWeight:600,color:"#fafafa",marginBottom:"0.75rem"},children:"For Android (Chrome):"}),h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:[h.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[h.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"1."}),h.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Tap the ",h.jsx("strong",{style:{color:"#fafafa"},children:"menu icon"})," (three dots ) in the top right"]})]}),h.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[h.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"2."}),h.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Tap ",h.jsx("strong",{style:{color:"#fafafa"},children:'"Add to Home Screen"'})," or ",h.jsx("strong",{style:{color:"#fafafa"},children:'"Install App"'})]})]}),h.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[h.jsx("span",{style:{fontSize:"0.875rem",color:"#8b5cf6",fontWeight:600},children:"3."}),h.jsxs("span",{style:{fontSize:"0.8125rem",color:"#a1a1aa"},children:["Tap ",h.jsx("strong",{style:{color:"#fafafa"},children:'"Add"'})]})]})]})]}):null,h.jsx("button",{onClick:Ls,style:{...F.btn("primary"),width:"100%"},children:"Got it"})]}),h.jsxs(Xt,{isOpen:ya,onClose:Pi,title:" Welcome to Life Manager",children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[h.jsx("p",{style:{fontSize:"3rem",marginBottom:"0.75rem"},children:""}),h.jsx("p",{style:{fontSize:"1.125rem",color:"#fafafa",fontWeight:600,marginBottom:"0.5rem"},children:"Track your habits, reach your goals"}),h.jsx("p",{style:{fontSize:"0.875rem",color:"#71717a",lineHeight:1.5},children:"Build better habits with daily tracking, streaks, and progress insights."})]}),h.jsxs("div",{style:{marginBottom:"1.5rem"},children:[h.jsx("p",{style:{fontSize:"0.875rem",color:"#a1a1aa",marginBottom:"0.75rem"},children:"Quick start with popular habits:"}),h.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:ig.map(p=>h.jsxs("button",{onClick:()=>{cn(p)},style:{padding:"0.5rem 0.75rem",borderRadius:"2rem",border:"1px solid #3f3f46",backgroundColor:"#27272a",color:"#fafafa",fontSize:"0.8125rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.375rem"},children:[h.jsx("span",{children:p.icon}),h.jsx("span",{children:p.name})]},p.name))})]}),h.jsx("button",{onClick:Pi,style:{...F.btn("primary"),width:"100%",marginBottom:"0.75rem"},children:"Get Started"}),h.jsx("p",{style:{fontSize:"0.75rem",color:"#71717a",textAlign:"center"},children:"You can add more habits anytime from the Today view."})]}),h.jsxs(Xt,{isOpen:Rs,onClose:lr,title:" Want to sync across devices?",children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[h.jsx("p",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:""}),h.jsx("p",{style:{fontSize:"0.9375rem",color:"#fafafa",marginBottom:"0.5rem"},children:"Keep your habits in sync"}),h.jsx("p",{style:{fontSize:"0.8125rem",color:"#71717a"},children:"Create a sync code to access your data on other devices and keep a backup in the cloud."})]}),h.jsxs("div",{style:{marginBottom:"1rem"},children:[h.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:h.jsx("input",{type:"text",value:zt,onChange:p=>Be(p.target.value.toUpperCase()),placeholder:"Create a code (e.g. MYHABITS)",style:{...F.input,flex:1,fontFamily:"JetBrains Mono, monospace",textTransform:"uppercase"},onKeyDown:p=>{p.key==="Enter"&&zt.trim()&&(In(),lr())}})}),h.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"Pick something memorable - you'll need it on other devices"})]}),h.jsx("button",{onClick:()=>{zt.trim()&&(In(),lr())},disabled:we||!zt.trim(),style:{...F.btn("primary"),width:"100%",marginBottom:"0.75rem",opacity:we||!zt.trim()?.7:1},children:we?"Creating...":"Create Sync Code"}),h.jsx("button",{onClick:lr,style:{...F.btn(),width:"100%"},children:"Maybe Later"})]}),h.jsx(Xt,{isOpen:!!Ie,onClose:()=>{Bn(null),pt(null)},title:" Replace Local Data?",children:Ie&&h.jsxs("div",{children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[h.jsx("p",{style:{fontSize:"2.5rem",marginBottom:"0.75rem"},children:""}),h.jsx("p",{style:{fontSize:"0.9375rem",color:"#fafafa",marginBottom:"0.75rem"},children:"This will replace your local data"}),h.jsx("div",{style:{padding:"1rem",borderRadius:"0.75rem",backgroundColor:"#27272a",marginBottom:"0.75rem"},children:h.jsxs("div",{style:{display:"flex",justifyContent:"space-around",gap:"1rem"},children:[h.jsxs("div",{style:{textAlign:"center"},children:[h.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a",marginBottom:"0.25rem"},children:"Local"}),h.jsx("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#f87171"},children:Ie.localCount}),h.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"habits"})]}),h.jsx("div",{style:{display:"flex",alignItems:"center",color:"#71717a"},children:""}),h.jsxs("div",{style:{textAlign:"center"},children:[h.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a",marginBottom:"0.25rem"},children:"Cloud"}),h.jsx("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#10b981"},children:Ie.cloudCount}),h.jsx("p",{style:{fontSize:"0.6875rem",color:"#71717a"},children:"habits"})]})]})}),h.jsxs("p",{style:{fontSize:"0.8125rem",color:"#71717a"},children:["Your ",Ie.localCount," local habits will be replaced with ",Ie.cloudCount," habits from the cloud."]})]}),h.jsx("button",{onClick:()=>{Ie.isNewConnection?Qr():Ju()},style:{...F.btn("danger"),width:"100%",marginBottom:"0.75rem"},children:"Replace with Cloud Data"}),h.jsx("button",{onClick:()=>{Bn(null),pt(null)},style:{...F.btn(),width:"100%"},children:"Cancel"})]})}),h.jsx(Xt,{isOpen:!!P,onClose:()=>{T(null),St("")},title:"Delete Habit",children:P&&h.jsxs(h.Fragment,{children:[h.jsxs("p",{style:{color:"#a1a1aa",marginBottom:"1rem"},children:['"',P.name,'"']}),h.jsxs("button",{onClick:()=>bs(P.id),style:{width:"100%",padding:"1rem",borderRadius:"0.75rem",border:"2px solid #27272a",backgroundColor:"#27272a",color:"#fafafa",cursor:"pointer",textAlign:"left",marginBottom:"0.75rem"},children:[h.jsxs("div",{style:{fontWeight:500,marginBottom:"0.25rem"},children:["Remove from ",un()]}),h.jsx("div",{style:{fontSize:"0.8125rem",color:"#71717a"},children:"Clears today's data only. Habit stays in your list."})]}),h.jsxs("div",{style:{padding:"1rem",borderRadius:"0.75rem",border:"2px solid rgba(239,68,68,0.3)",backgroundColor:"rgba(239,68,68,0.1)"},children:[h.jsx("div",{style:{fontWeight:500,color:"#f87171",marginBottom:"0.5rem"},children:"Delete permanently"}),h.jsxs("div",{style:{fontSize:"0.8125rem",color:"#71717a",marginBottom:"0.75rem"},children:["Removes habit and all history. Type ",h.jsx("span",{style:{color:"#f87171",fontFamily:"JetBrains Mono, monospace"},children:"delete"})," to confirm."]}),h.jsx("input",{type:"text",value:Oe,onChange:p=>St(p.target.value),placeholder:'Type "delete"',style:{...F.input,marginBottom:"0.75rem",fontSize:"0.875rem"}}),h.jsx("button",{onClick:()=>Vs(P.id),disabled:Oe.toLowerCase()!=="delete",style:{...F.btn("danger"),width:"100%",opacity:Oe.toLowerCase()!=="delete"?.5:1,cursor:Oe.toLowerCase()!=="delete"?"not-allowed":"pointer"},children:"Delete Forever"})]}),h.jsx("button",{onClick:()=>{T(null),St("")},style:{...F.btn(),width:"100%",marginTop:"1rem"},children:"Cancel"})]})})]})}Fc.createRoot(document.getElementById("root")).render(h.jsx(E_.StrictMode,{children:h.jsx(ZC,{})}));
